import{createWorker as y6}from"https://esm.sh/tesseract.js@5.0.5";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Av(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ox={exports:{}},nf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function C6(){if(n_)return nf;n_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:t,type:n,key:o,ref:i!==void 0?i:null,props:s}}return nf.Fragment=e,nf.jsx=r,nf.jsxs=r,nf}var i_;function E6(){return i_||(i_=1,Ox.exports=C6()),Ox.exports}var u=E6(),Lx={exports:{}},Cr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function b6(){if(s_)return Cr;s_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),b=Symbol.iterator;function I(ne){return ne===null||typeof ne!="object"?null:(ne=b&&ne[b]||ne["@@iterator"],typeof ne=="function"?ne:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,U={};function V(ne,q,ce){this.props=ne,this.context=q,this.refs=U,this.updater=ce||F}V.prototype.isReactComponent={},V.prototype.setState=function(ne,q){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,q,"setState")},V.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function K(){}K.prototype=V.prototype;function Q(ne,q,ce){this.props=ne,this.context=q,this.refs=U,this.updater=ce||F}var te=Q.prototype=new K;te.constructor=Q,k(te,V.prototype),te.isPureReactComponent=!0;var re=Array.isArray;function z(){}var M={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function O(ne,q,ce){var oe=ce.ref;return{$$typeof:t,type:ne,key:q,ref:oe!==void 0?oe:null,props:ce}}function ee(ne,q){return O(ne.type,q,ne.props)}function Y(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===t}function X(ne){var q={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(ce){return q[ce]})}var G=/\/+/g;function Ie(ne,q){return typeof ne=="object"&&ne!==null&&ne.key!=null?X(""+ne.key):q.toString(36)}function ge(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(z,z):(ne.status="pending",ne.then(function(q){ne.status==="pending"&&(ne.status="fulfilled",ne.value=q)},function(q){ne.status==="pending"&&(ne.status="rejected",ne.reason=q)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function de(ne,q,ce,oe,ae){var Ee=typeof ne;(Ee==="undefined"||Ee==="boolean")&&(ne=null);var Ke=!1;if(ne===null)Ke=!0;else switch(Ee){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(ne.$$typeof){case t:case e:Ke=!0;break;case m:return Ke=ne._init,de(Ke(ne._payload),q,ce,oe,ae)}}if(Ke)return ae=ae(ne),Ke=oe===""?"."+Ie(ne,0):oe,re(ae)?(ce="",Ke!=null&&(ce=Ke.replace(G,"$&/")+"/"),de(ae,q,ce,"",function(tt){return tt})):ae!=null&&(Y(ae)&&(ae=ee(ae,ce+(ae.key==null||ne&&ne.key===ae.key?"":(""+ae.key).replace(G,"$&/")+"/")+Ke)),q.push(ae)),1;Ke=0;var Fe=oe===""?".":oe+":";if(re(ne))for(var He=0;He<ne.length;He++)oe=ne[He],Ee=Fe+Ie(oe,He),Ke+=de(oe,q,ce,Ee,ae);else if(He=I(ne),typeof He=="function")for(ne=He.call(ne),He=0;!(oe=ne.next()).done;)oe=oe.value,Ee=Fe+Ie(oe,He++),Ke+=de(oe,q,ce,Ee,ae);else if(Ee==="object"){if(typeof ne.then=="function")return de(ge(ne),q,ce,oe,ae);throw q=String(ne),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function we(ne,q,ce){if(ne==null)return ne;var oe=[],ae=0;return de(ne,oe,"","",function(Ee){return q.call(ce,Ee,ae++)}),oe}function Ge(ne){if(ne._status===-1){var q=ne._result;q=q(),q.then(function(ce){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=ce)},function(ce){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=ce)}),ne._status===-1&&(ne._status=0,ne._result=q)}if(ne._status===1)return ne._result.default;throw ne._result}var be=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},De={map:we,forEach:function(ne,q,ce){we(ne,function(){q.apply(this,arguments)},ce)},count:function(ne){var q=0;return we(ne,function(){q++}),q},toArray:function(ne){return we(ne,function(q){return q})||[]},only:function(ne){if(!Y(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return Cr.Activity=C,Cr.Children=De,Cr.Component=V,Cr.Fragment=r,Cr.Profiler=i,Cr.PureComponent=Q,Cr.StrictMode=n,Cr.Suspense=h,Cr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Cr.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return M.H.useMemoCache(ne)}},Cr.cache=function(ne){return function(){return ne.apply(null,arguments)}},Cr.cacheSignal=function(){return null},Cr.cloneElement=function(ne,q,ce){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var oe=k({},ne.props),ae=ne.key;if(q!=null)for(Ee in q.key!==void 0&&(ae=""+q.key),q)!P.call(q,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&q.ref===void 0||(oe[Ee]=q[Ee]);var Ee=arguments.length-2;if(Ee===1)oe.children=ce;else if(1<Ee){for(var Ke=Array(Ee),Fe=0;Fe<Ee;Fe++)Ke[Fe]=arguments[Fe+2];oe.children=Ke}return O(ne.type,ae,oe)},Cr.createContext=function(ne){return ne={$$typeof:o,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:s,_context:ne},ne},Cr.createElement=function(ne,q,ce){var oe,ae={},Ee=null;if(q!=null)for(oe in q.key!==void 0&&(Ee=""+q.key),q)P.call(q,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ae[oe]=q[oe]);var Ke=arguments.length-2;if(Ke===1)ae.children=ce;else if(1<Ke){for(var Fe=Array(Ke),He=0;He<Ke;He++)Fe[He]=arguments[He+2];ae.children=Fe}if(ne&&ne.defaultProps)for(oe in Ke=ne.defaultProps,Ke)ae[oe]===void 0&&(ae[oe]=Ke[oe]);return O(ne,Ee,ae)},Cr.createRef=function(){return{current:null}},Cr.forwardRef=function(ne){return{$$typeof:c,render:ne}},Cr.isValidElement=Y,Cr.lazy=function(ne){return{$$typeof:m,_payload:{_status:-1,_result:ne},_init:Ge}},Cr.memo=function(ne,q){return{$$typeof:d,type:ne,compare:q===void 0?null:q}},Cr.startTransition=function(ne){var q=M.T,ce={};M.T=ce;try{var oe=ne(),ae=M.S;ae!==null&&ae(ce,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(z,be)}catch(Ee){be(Ee)}finally{q!==null&&ce.types!==null&&(q.types=ce.types),M.T=q}},Cr.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Cr.use=function(ne){return M.H.use(ne)},Cr.useActionState=function(ne,q,ce){return M.H.useActionState(ne,q,ce)},Cr.useCallback=function(ne,q){return M.H.useCallback(ne,q)},Cr.useContext=function(ne){return M.H.useContext(ne)},Cr.useDebugValue=function(){},Cr.useDeferredValue=function(ne,q){return M.H.useDeferredValue(ne,q)},Cr.useEffect=function(ne,q){return M.H.useEffect(ne,q)},Cr.useEffectEvent=function(ne){return M.H.useEffectEvent(ne)},Cr.useId=function(){return M.H.useId()},Cr.useImperativeHandle=function(ne,q,ce){return M.H.useImperativeHandle(ne,q,ce)},Cr.useInsertionEffect=function(ne,q){return M.H.useInsertionEffect(ne,q)},Cr.useLayoutEffect=function(ne,q){return M.H.useLayoutEffect(ne,q)},Cr.useMemo=function(ne,q){return M.H.useMemo(ne,q)},Cr.useOptimistic=function(ne,q){return M.H.useOptimistic(ne,q)},Cr.useReducer=function(ne,q,ce){return M.H.useReducer(ne,q,ce)},Cr.useRef=function(ne){return M.H.useRef(ne)},Cr.useState=function(ne){return M.H.useState(ne)},Cr.useSyncExternalStore=function(ne,q,ce){return M.H.useSyncExternalStore(ne,q,ce)},Cr.useTransition=function(){return M.H.useTransition()},Cr.version="19.2.4",Cr}var a_;function cv(){return a_||(a_=1,Lx.exports=b6()),Lx.exports}var xe=cv();const _6=Av(xe);var Px={exports:{}},sf={},Qx={exports:{}},Hx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function T6(){return o_||(o_=1,(function(t){function e(de,we){var Ge=de.length;de.push(we);e:for(;0<Ge;){var be=Ge-1>>>1,De=de[be];if(0<i(De,we))de[be]=we,de[Ge]=De,Ge=be;else break e}}function r(de){return de.length===0?null:de[0]}function n(de){if(de.length===0)return null;var we=de[0],Ge=de.pop();if(Ge!==we){de[0]=Ge;e:for(var be=0,De=de.length,ne=De>>>1;be<ne;){var q=2*(be+1)-1,ce=de[q],oe=q+1,ae=de[oe];if(0>i(ce,Ge))oe<De&&0>i(ae,ce)?(de[be]=ae,de[oe]=Ge,be=oe):(de[be]=ce,de[q]=Ge,be=q);else if(oe<De&&0>i(ae,Ge))de[be]=ae,de[oe]=Ge,be=oe;else break e}}return we}function i(de,we){var Ge=de.sortIndex-we.sortIndex;return Ge!==0?Ge:de.id-we.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var h=[],d=[],m=1,C=null,b=3,I=!1,F=!1,k=!1,U=!1,V=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function te(de){for(var we=r(d);we!==null;){if(we.callback===null)n(d);else if(we.startTime<=de)n(d),we.sortIndex=we.expirationTime,e(h,we);else break;we=r(d)}}function re(de){if(k=!1,te(de),!F)if(r(h)!==null)F=!0,z||(z=!0,X());else{var we=r(d);we!==null&&ge(re,we.startTime-de)}}var z=!1,M=-1,P=5,O=-1;function ee(){return U?!0:!(t.unstable_now()-O<P)}function Y(){if(U=!1,z){var de=t.unstable_now();O=de;var we=!0;try{e:{F=!1,k&&(k=!1,K(M),M=-1),I=!0;var Ge=b;try{t:{for(te(de),C=r(h);C!==null&&!(C.expirationTime>de&&ee());){var be=C.callback;if(typeof be=="function"){C.callback=null,b=C.priorityLevel;var De=be(C.expirationTime<=de);if(de=t.unstable_now(),typeof De=="function"){C.callback=De,te(de),we=!0;break t}C===r(h)&&n(h),te(de)}else n(h);C=r(h)}if(C!==null)we=!0;else{var ne=r(d);ne!==null&&ge(re,ne.startTime-de),we=!1}}break e}finally{C=null,b=Ge,I=!1}we=void 0}}finally{we?X():z=!1}}}var X;if(typeof Q=="function")X=function(){Q(Y)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Ie=G.port2;G.port1.onmessage=Y,X=function(){Ie.postMessage(null)}}else X=function(){V(Y,0)};function ge(de,we){M=V(function(){de(t.unstable_now())},we)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(de){de.callback=null},t.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<de?Math.floor(1e3/de):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(de){switch(b){case 1:case 2:case 3:var we=3;break;default:we=b}var Ge=b;b=we;try{return de()}finally{b=Ge}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(de,we){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Ge=b;b=de;try{return we()}finally{b=Ge}},t.unstable_scheduleCallback=function(de,we,Ge){var be=t.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?be+Ge:be):Ge=be,de){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Ge+De,de={id:m++,callback:we,priorityLevel:de,startTime:Ge,expirationTime:De,sortIndex:-1},Ge>be?(de.sortIndex=Ge,e(d,de),r(h)===null&&de===r(d)&&(k?(K(M),M=-1):k=!0,ge(re,Ge-be))):(de.sortIndex=De,e(h,de),F||I||(F=!0,z||(z=!0,X()))),de},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(de){var we=b;return function(){var Ge=b;b=we;try{return de.apply(this,arguments)}finally{b=Ge}}}})(Hx)),Hx}var l_;function B6(){return l_||(l_=1,Qx.exports=T6()),Qx.exports}var jx={exports:{}},os={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function S6(){if(A_)return os;A_=1;var t=cv();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(h,d,m){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:C==null?null:""+C,children:h,containerInfo:d,implementation:m}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,os.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(h,d,null,m)},os.flushSync=function(h){var d=o.T,m=n.p;try{if(o.T=null,n.p=2,h)return h()}finally{o.T=d,n.p=m,n.d.f()}},os.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(h,d))},os.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},os.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,C=c(m,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,I=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?n.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:C,integrity:b,fetchPriority:I}):m==="script"&&n.d.X(h,{crossOrigin:C,integrity:b,fetchPriority:I,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},os.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);n.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(h)},os.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,C=c(m,d.crossOrigin);n.d.L(h,m,{crossOrigin:C,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},os.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=c(d.as,d.crossOrigin);n.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(h)},os.requestFormReset=function(h){n.d.r(h)},os.unstable_batchedUpdates=function(h,d){return h(d)},os.useFormState=function(h,d,m){return o.H.useFormState(h,d,m)},os.useFormStatus=function(){return o.H.useHostTransitionStatus()},os.version="19.2.4",os}var c_;function I6(){if(c_)return jx.exports;c_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jx.exports=S6(),jx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function N6(){if(u_)return sf;u_=1;var t=B6(),e=cv(),r=I6();function n(a){var A="https://react.dev/errors/"+a;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)A+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+a+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var A=a,p=a;if(a.alternate)for(;A.return;)A=A.return;else{a=A;do A=a,(A.flags&4098)!==0&&(p=A.return),a=A.return;while(a)}return A.tag===3?p:null}function o(a){if(a.tag===13){var A=a.memoizedState;if(A===null&&(a=a.alternate,a!==null&&(A=a.memoizedState)),A!==null)return A.dehydrated}return null}function c(a){if(a.tag===31){var A=a.memoizedState;if(A===null&&(a=a.alternate,a!==null&&(A=a.memoizedState)),A!==null)return A.dehydrated}return null}function h(a){if(s(a)!==a)throw Error(n(188))}function d(a){var A=a.alternate;if(!A){if(A=s(a),A===null)throw Error(n(188));return A!==a?null:a}for(var p=a,v=A;;){var S=p.return;if(S===null)break;var R=S.alternate;if(R===null){if(v=S.return,v!==null){p=v;continue}break}if(S.child===R.child){for(R=S.child;R;){if(R===p)return h(S),a;if(R===v)return h(S),A;R=R.sibling}throw Error(n(188))}if(p.return!==v.return)p=S,v=R;else{for(var j=!1,le=S.child;le;){if(le===p){j=!0,p=S,v=R;break}if(le===v){j=!0,v=S,p=R;break}le=le.sibling}if(!j){for(le=R.child;le;){if(le===p){j=!0,p=R,v=S;break}if(le===v){j=!0,v=R,p=S;break}le=le.sibling}if(!j)throw Error(n(189))}}if(p.alternate!==v)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?a:A}function m(a){var A=a.tag;if(A===5||A===26||A===27||A===6)return a;for(a=a.child;a!==null;){if(A=m(a),A!==null)return A;a=a.sibling}return null}var C=Object.assign,b=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function X(a){return a===null||typeof a!="object"?null:(a=Y&&a[Y]||a["@@iterator"],typeof a=="function"?a:null)}var G=Symbol.for("react.client.reference");function Ie(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===G?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case k:return"Fragment";case V:return"Profiler";case U:return"StrictMode";case re:return"Suspense";case z:return"SuspenseList";case O:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case F:return"Portal";case Q:return a.displayName||"Context";case K:return(a._context.displayName||"Context")+".Consumer";case te:var A=a.render;return a=a.displayName,a||(a=A.displayName||A.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return A=a.displayName||null,A!==null?A:Ie(a.type)||"Memo";case P:A=a._payload,a=a._init;try{return Ie(a(A))}catch{}}return null}var ge=Array.isArray,de=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge={pending:!1,data:null,method:null,action:null},be=[],De=-1;function ne(a){return{current:a}}function q(a){0>De||(a.current=be[De],be[De]=null,De--)}function ce(a,A){De++,be[De]=a.current,a.current=A}var oe=ne(null),ae=ne(null),Ee=ne(null),Ke=ne(null);function Fe(a,A){switch(ce(Ee,A),ce(ae,a),ce(oe,null),A.nodeType){case 9:case 11:a=(a=A.documentElement)&&(a=a.namespaceURI)?Tb(a):0;break;default:if(a=A.tagName,A=A.namespaceURI)A=Tb(A),a=Bb(A,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}q(oe),ce(oe,a)}function He(){q(oe),q(ae),q(Ee)}function tt(a){a.memoizedState!==null&&ce(Ke,a);var A=oe.current,p=Bb(A,a.type);A!==p&&(ce(ae,a),ce(oe,p))}function Tt(a){ae.current===a&&(q(oe),q(ae)),Ke.current===a&&(q(Ke),$0._currentValue=Ge)}var ve,Oe;function st(a){if(ve===void 0)try{throw Error()}catch(p){var A=p.stack.trim().match(/\n( *(at )?)/);ve=A&&A[1]||"",Oe=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+a+Oe}var Bt=!1;function kt(a,A){if(!a||Bt)return"";Bt=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(A){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(rt){var Ye=rt}Reflect.construct(a,[],dt)}else{try{dt.call()}catch(rt){Ye=rt}a.call(dt.prototype)}}else{try{throw Error()}catch(rt){Ye=rt}(dt=a())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(rt){if(rt&&Ye&&typeof rt.stack=="string")return[rt.stack,Ye.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=v.DetermineComponentFrameRoot(),j=R[0],le=R[1];if(j&&le){var Te=j.split(`
`),We=le.split(`
`);for(S=v=0;v<Te.length&&!Te[v].includes("DetermineComponentFrameRoot");)v++;for(;S<We.length&&!We[S].includes("DetermineComponentFrameRoot");)S++;if(v===Te.length||S===We.length)for(v=Te.length-1,S=We.length-1;1<=v&&0<=S&&Te[v]!==We[S];)S--;for(;1<=v&&0<=S;v--,S--)if(Te[v]!==We[S]){if(v!==1||S!==1)do if(v--,S--,0>S||Te[v]!==We[S]){var ot=`
`+Te[v].replace(" at new "," at ");return a.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",a.displayName)),ot}while(1<=v&&0<=S);break}}}finally{Bt=!1,Error.prepareStackTrace=p}return(p=a?a.displayName||a.name:"")?st(p):""}function ft(a,A){switch(a.tag){case 26:case 27:case 5:return st(a.type);case 16:return st("Lazy");case 13:return a.child!==A&&A!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return kt(a.type,!1);case 11:return kt(a.type.render,!1);case 1:return kt(a.type,!0);case 31:return st("Activity");default:return""}}function Ot(a){try{var A="",p=null;do A+=ft(a,p),p=a,a=a.return;while(a);return A}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var jt=Object.prototype.hasOwnProperty,mt=t.unstable_scheduleCallback,At=t.unstable_cancelCallback,er=t.unstable_shouldYield,Nr=t.unstable_requestPaint,Ue=t.unstable_now,It=t.unstable_getCurrentPriorityLevel,Lt=t.unstable_ImmediatePriority,Zt=t.unstable_UserBlockingPriority,cr=t.unstable_NormalPriority,hr=t.unstable_LowPriority,Ht=t.unstable_IdlePriority,mr=t.log,pt=t.unstable_setDisableYieldValue,yt=null,_e=null;function Nt(a){if(typeof mr=="function"&&pt(a),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(yt,a)}catch{}}var Re=Math.clz32?Math.clz32:et,Dt=Math.log,rr=Math.LN2;function et(a){return a>>>=0,a===0?32:31-(Dt(a)/rr|0)|0}var Rt=256,Mt=262144,kr=4194304;function Tr(a){var A=a&42;if(A!==0)return A;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function qr(a,A,p){var v=a.pendingLanes;if(v===0)return 0;var S=0,R=a.suspendedLanes,j=a.pingedLanes;a=a.warmLanes;var le=v&134217727;return le!==0?(v=le&~R,v!==0?S=Tr(v):(j&=le,j!==0?S=Tr(j):p||(p=le&~a,p!==0&&(S=Tr(p))))):(le=v&~R,le!==0?S=Tr(le):j!==0?S=Tr(j):p||(p=v&~a,p!==0&&(S=Tr(p)))),S===0?0:A!==0&&A!==S&&(A&R)===0&&(R=S&-S,p=A&-A,R>=p||R===32&&(p&4194048)!==0)?A:S}function Vr(a,A){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&A)===0}function Us(a,A){switch(a){case 1:case 2:case 4:case 8:case 64:return A+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Be(){var a=kr;return kr<<=1,(kr&62914560)===0&&(kr=4194304),a}function ut(a){for(var A=[],p=0;31>p;p++)A.push(a);return A}function at(a,A){a.pendingLanes|=A,A!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function lt(a,A,p,v,S,R){var j=a.pendingLanes;a.pendingLanes=p,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=p,a.entangledLanes&=p,a.errorRecoveryDisabledLanes&=p,a.shellSuspendCounter=0;var le=a.entanglements,Te=a.expirationTimes,We=a.hiddenUpdates;for(p=j&~p;0<p;){var ot=31-Re(p),dt=1<<ot;le[ot]=0,Te[ot]=-1;var Ye=We[ot];if(Ye!==null)for(We[ot]=null,ot=0;ot<Ye.length;ot++){var rt=Ye[ot];rt!==null&&(rt.lane&=-536870913)}p&=~dt}v!==0&&lr(a,v,0),R!==0&&S===0&&a.tag!==0&&(a.suspendedLanes|=R&~(j&~A))}function lr(a,A,p){a.pendingLanes|=A,a.suspendedLanes&=~A;var v=31-Re(A);a.entangledLanes|=A,a.entanglements[v]=a.entanglements[v]|1073741824|p&261930}function $r(a,A){var p=a.entangledLanes|=A;for(a=a.entanglements;p;){var v=31-Re(p),S=1<<v;S&A|a[v]&A&&(a[v]|=A),p&=~S}}function Sn(a,A){var p=A&-A;return p=(p&42)!==0?1:kn(p),(p&(a.suspendedLanes|A))!==0?0:p}function kn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function di(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ie(){var a=we.p;return a!==0?a:(a=window.event,a===void 0?32:Yb(a.type))}function Ae(a,A){var p=we.p;try{return we.p=a,A()}finally{we.p=p}}var fe=Math.random().toString(36).slice(2),he="__reactFiber$"+fe,pe="__reactProps$"+fe,Ce="__reactContainer$"+fe,Ve="__reactEvents$"+fe,nt="__reactListeners$"+fe,Pe="__reactHandles$"+fe,qe="__reactResources$"+fe,Xe="__reactMarker$"+fe;function ht(a){delete a[he],delete a[pe],delete a[Ve],delete a[nt],delete a[Pe]}function wt(a){var A=a[he];if(A)return A;for(var p=a.parentNode;p;){if(A=p[Ce]||p[he]){if(p=A.alternate,A.child!==null||p!==null&&p.child!==null)for(a=Db(a);a!==null;){if(p=a[he])return p;a=Db(a)}return A}a=p,p=a.parentNode}return null}function vt(a){if(a=a[he]||a[Ce]){var A=a.tag;if(A===5||A===6||A===13||A===31||A===26||A===27||A===3)return a}return null}function Et(a){var A=a.tag;if(A===5||A===26||A===27||A===6)return a.stateNode;throw Error(n(33))}function St(a){var A=a[qe];return A||(A=a[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),A}function Gt(a){a[Xe]=!0}var it=new Set,Xr={};function nr(a,A){Vn(a,A),Vn(a+"Capture",A)}function Vn(a,A){for(Xr[a]=A,a=0;a<A.length;a++)it.add(A[a])}var qa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Br={},xr={};function yr(a){return jt.call(xr,a)?!0:jt.call(Br,a)?!1:qa.test(a)?xr[a]=!0:(Br[a]=!0,!1)}function qn(a,A,p){if(yr(A))if(p===null)a.removeAttribute(A);else{switch(typeof p){case"undefined":case"function":case"symbol":a.removeAttribute(A);return;case"boolean":var v=A.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){a.removeAttribute(A);return}}a.setAttribute(A,""+p)}}function ba(a,A,p){if(p===null)a.removeAttribute(A);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(A);return}a.setAttribute(A,""+p)}}function is(a,A,p,v){if(v===null)a.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(p);return}a.setAttributeNS(A,p,""+v)}}function Gr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function na(a){var A=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(A==="checkbox"||A==="radio")}function C0(a,A,p){var v=Object.getOwnPropertyDescriptor(a.constructor.prototype,A);if(!a.hasOwnProperty(A)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var S=v.get,R=v.set;return Object.defineProperty(a,A,{configurable:!0,get:function(){return S.call(this)},set:function(j){p=""+j,R.call(this,j)}}),Object.defineProperty(a,A,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function(j){p=""+j},stopTracking:function(){a._valueTracker=null,delete a[A]}}}}function xn(a){if(!a._valueTracker){var A=na(a)?"checked":"value";a._valueTracker=C0(a,A,""+a[A])}}function Ms(a){if(!a)return!1;var A=a._valueTracker;if(!A)return!0;var p=A.getValue(),v="";return a&&(v=na(a)?a.checked?"true":"false":a.value),a=v,a!==p?(A.setValue(a),!0):!1}function Dl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var ss=/[\n"\\]/g;function ur(a){return a.replace(ss,function(A){return"\\"+A.charCodeAt(0).toString(16)+" "})}function Dn(a,A,p,v,S,R,j,le){a.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?a.type=j:a.removeAttribute("type"),A!=null?j==="number"?(A===0&&a.value===""||a.value!=A)&&(a.value=""+Gr(A)):a.value!==""+Gr(A)&&(a.value=""+Gr(A)):j!=="submit"&&j!=="reset"||a.removeAttribute("value"),A!=null?me(a,j,Gr(A)):p!=null?me(a,j,Gr(p)):v!=null&&a.removeAttribute("value"),S==null&&R!=null&&(a.defaultChecked=!!R),S!=null&&(a.checked=S&&typeof S!="function"&&typeof S!="symbol"),le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?a.name=""+Gr(le):a.removeAttribute("name")}function je(a,A,p,v,S,R,j,le){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(a.type=R),A!=null||p!=null){if(!(R!=="submit"&&R!=="reset"||A!=null)){xn(a);return}p=p!=null?""+Gr(p):"",A=A!=null?""+Gr(A):p,le||A===a.value||(a.value=A),a.defaultValue=A}v=v??S,v=typeof v!="function"&&typeof v!="symbol"&&!!v,a.checked=le?a.checked:!!v,a.defaultChecked=!!v,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(a.name=j),xn(a)}function me(a,A,p){A==="number"&&Dl(a.ownerDocument)===a||a.defaultValue===""+p||(a.defaultValue=""+p)}function Ft(a,A,p,v){if(a=a.options,A){A={};for(var S=0;S<p.length;S++)A["$"+p[S]]=!0;for(p=0;p<a.length;p++)S=A.hasOwnProperty("$"+a[p].value),a[p].selected!==S&&(a[p].selected=S),S&&v&&(a[p].defaultSelected=!0)}else{for(p=""+Gr(p),A=null,S=0;S<a.length;S++){if(a[S].value===p){a[S].selected=!0,v&&(a[S].defaultSelected=!0);return}A!==null||a[S].disabled||(A=a[S])}A!==null&&(A.selected=!0)}}function In(a,A,p){if(A!=null&&(A=""+Gr(A),A!==a.value&&(a.value=A),p==null)){a.defaultValue!==A&&(a.defaultValue=A);return}a.defaultValue=p!=null?""+Gr(p):""}function ii(a,A,p,v){if(A==null){if(v!=null){if(p!=null)throw Error(n(92));if(ge(v)){if(1<v.length)throw Error(n(93));v=v[0]}p=v}p==null&&(p=""),A=p}p=Gr(A),a.defaultValue=p,v=a.textContent,v===p&&v!==""&&v!==null&&(a.value=v),xn(a)}function Os(a,A){if(A){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=A;return}}a.textContent=A}var PA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fi(a,A,p){var v=A.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?a.setProperty(A,""):A==="float"?a.cssFloat="":a[A]="":v?a.setProperty(A,p):typeof p!="number"||p===0||PA.has(A)?A==="float"?a.cssFloat=p:a[A]=(""+p).trim():a[A]=p+"px"}function $t(a,A,p){if(A!=null&&typeof A!="object")throw Error(n(62));if(a=a.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||A!=null&&A.hasOwnProperty(v)||(v.indexOf("--")===0?a.setProperty(v,""):v==="float"?a.cssFloat="":a[v]="");for(var S in A)v=A[S],A.hasOwnProperty(S)&&p[S]!==v&&Fi(a,S,v)}else for(var R in A)A.hasOwnProperty(R)&&Fi(a,R,A[R])}function dn(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),E0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ls(a){return E0.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Gn(){}var mo=null;function Ul(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var wn=null,bi=null;function ia(a){var A=vt(a);if(A&&(a=A.stateNode)){var p=a[pe]||null;e:switch(a=A.stateNode,A.type){case"input":if(Dn(a,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),A=p.name,p.type==="radio"&&A!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ur(""+A)+'"][type="radio"]'),A=0;A<p.length;A++){var v=p[A];if(v!==a&&v.form===a.form){var S=v[pe]||null;if(!S)throw Error(n(90));Dn(v,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(A=0;A<p.length;A++)v=p[A],v.form===a.form&&Ms(v)}break e;case"textarea":In(a,p.value,p.defaultValue);break e;case"select":A=p.value,A!=null&&Ft(a,!!p.multiple,A,!1)}}}var ir=!1;function Kc(a,A,p){if(ir)return a(A,p);ir=!0;try{var v=a(A);return v}finally{if(ir=!1,(wn!==null||bi!==null)&&(Sh(),wn&&(A=wn,a=bi,bi=wn=null,ia(A),a)))for(A=0;A<a.length;A++)ia(a[A])}}function sr(a,A){var p=a.stateNode;if(p===null)return null;var v=p[pe]||null;if(v===null)return null;p=v[A];e:switch(A){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(a=a.type,v=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!v;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(n(231,A,typeof p));return p}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QA=!1;if(hn)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){QA=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{QA=!1}var as=null,Qs=null,_a=null;function Hs(){if(_a)return _a;var a,A=Qs,p=A.length,v,S="value"in as?as.value:as.textContent,R=S.length;for(a=0;a<p&&A[a]===S[a];a++);var j=p-a;for(v=1;v<=j&&A[p-v]===S[R-v];v++);return _a=S.slice(a,1<v?1-v:void 0)}function sa(a){var A=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&A===13&&(a=13)):a=A,a===10&&(a=13),32<=a||a===13?a:0}function js(){return!0}function vn(){return!1}function Xn(a){function A(p,v,S,R,j){this._reactName=p,this._targetInst=S,this.type=v,this.nativeEvent=R,this.target=j,this.currentTarget=null;for(var le in a)a.hasOwnProperty(le)&&(p=a[le],this[le]=p?p(R):R[le]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?js:vn,this.isPropagationStopped=vn,this}return C(A.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),A}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yn=Xn(Cs),Xa=C({},Cs,{view:0,detail:0}),HA=Xn(Xa),Ya,Ml,Hi,Ho=C({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Hi&&(Hi&&a.type==="mousemove"?(Ya=a.screenX-Hi.screenX,Ml=a.screenY-Hi.screenY):Ml=Ya=0,Hi=a),Ya)},movementY:function(a){return"movementY"in a?a.movementY:Ml}}),en=Xn(Ho),xo=C({},Ho,{dataTransfer:0}),jo=Xn(xo),Vs=C({},Xa,{relatedTarget:0}),wo=Xn(Vs),Je=C({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),gr=Xn(Je),si=C({},Cs,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Vo=Xn(si),vo=C({},Cs,{data:0}),jA=Xn(vo),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Go={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pn(a){var A=this.nativeEvent;return A.getModifierState?A.getModifierState(a):(a=Go[a])?!!A[a]:!1}function Ta(){return Pn}var _n=C({},Xa,{key:function(a){if(a.key){var A=zc[a.key]||a.key;if(A!=="Unidentified")return A}return a.type==="keypress"?(a=sa(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?VA[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(a){return a.type==="keypress"?sa(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?sa(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ko=Xn(_n),ji=C({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tn=Xn(ji),tr=C({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),Wc=Xn(tr),cn=C({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gs=Xn(cn),Jn=C({},Ho,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qc=Xn(Jn),Es=C({},Cs,{newState:0,oldState:0}),Ba=Xn(Es),B=[9,13,27,32],L=hn&&"CompositionEvent"in window,W=null;hn&&"documentMode"in document&&(W=document.documentMode);var ue=hn&&"TextEvent"in window&&!W,Qe=hn&&(!L||W&&8<W&&11>=W),$e=" ",Ut=!1;function nn(a,A){switch(a){case"keyup":return B.indexOf(A.keyCode)!==-1;case"keydown":return A.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Rr=!1;function Tn(a,A){switch(a){case"compositionend":return Nn(A);case"keypress":return A.which!==32?null:(Ut=!0,$e);case"textInput":return a=A.data,a===$e&&Ut?null:a;default:return null}}function Kn(a,A){if(Rr)return a==="compositionend"||!L&&nn(a,A)?(a=Hs(),_a=Qs=as=null,Rr=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(A.ctrlKey||A.altKey||A.metaKey)||A.ctrlKey&&A.altKey){if(A.char&&1<A.char.length)return A.char;if(A.which)return String.fromCharCode(A.which)}return null;case"compositionend":return Qe&&A.locale!=="ko"?null:A.data;default:return null}}var ai={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(a){var A=a&&a.nodeName&&a.nodeName.toLowerCase();return A==="input"?!!ai[a.type]:A==="textarea"}function ki(a,A,p,v){wn?bi?bi.push(v):bi=[v]:wn=v,A=Uh(A,"onChange"),0<A.length&&(p=new Yn("onChange","change",null,p,v),a.push({event:p,listeners:A}))}var Ja=null,zo=null;function Yp(a){vb(a,0)}function GA(a){var A=Et(a);if(Ms(A))return a}function aa(a,A){if(a==="change")return A}var zd=!1;if(hn){var KA;if(hn){var Wo="oninput"in document;if(!Wo){var Lr=document.createElement("div");Lr.setAttribute("oninput","return;"),Wo=typeof Lr.oninput=="function"}KA=Wo}else KA=!1;zd=KA&&(!document.documentMode||9<document.documentMode)}function zA(){Ja&&(Ja.detachEvent("onpropertychange",J),zo=Ja=null)}function J(a){if(a.propertyName==="value"&&GA(zo)){var A=[];ki(A,zo,a,Ul(a)),Kc(Yp,A)}}function l(a,A,p){a==="focusin"?(zA(),Ja=A,zo=p,Ja.attachEvent("onpropertychange",J)):a==="focusout"&&zA()}function f(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return GA(zo)}function g(a,A){if(a==="click")return GA(A)}function x(a,A){if(a==="input"||a==="change")return GA(A)}function w(a,A){return a===A&&(a!==0||1/a===1/A)||a!==a&&A!==A}var y=typeof Object.is=="function"?Object.is:w;function T(a,A){if(y(a,A))return!0;if(typeof a!="object"||a===null||typeof A!="object"||A===null)return!1;var p=Object.keys(a),v=Object.keys(A);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var S=p[v];if(!jt.call(A,S)||!y(a[S],A[S]))return!1}return!0}function N(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function D(a,A){var p=N(a);a=0;for(var v;p;){if(p.nodeType===3){if(v=a+p.textContent.length,a<=A&&v>=A)return{node:p,offset:A-a};a=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=N(p)}}function H(a,A){return a&&A?a===A?!0:a&&a.nodeType===3?!1:A&&A.nodeType===3?H(a,A.parentNode):"contains"in a?a.contains(A):a.compareDocumentPosition?!!(a.compareDocumentPosition(A)&16):!1:!1}function Z(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var A=Dl(a.document);A instanceof a.HTMLIFrameElement;){try{var p=typeof A.contentWindow.location.href=="string"}catch{p=!1}if(p)a=A.contentWindow;else break;A=Dl(a.document)}return A}function se(a){var A=a&&a.nodeName&&a.nodeName.toLowerCase();return A&&(A==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||A==="textarea"||a.contentEditable==="true")}var ye=hn&&"documentMode"in document&&11>=document.documentMode,Se=null,Ne=null,Le=null,Ze=!1;function _t(a,A,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Ze||Se==null||Se!==Dl(v)||(v=Se,"selectionStart"in v&&se(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Le&&T(Le,v)||(Le=v,v=Uh(Ne,"onSelect"),0<v.length&&(A=new Yn("onSelect","select",null,A,p),a.push({event:A,listeners:v}),A.target=Se)))}function bt(a,A){var p={};return p[a.toLowerCase()]=A.toLowerCase(),p["Webkit"+a]="webkit"+A,p["Moz"+a]="moz"+A,p}var xt={animationend:bt("Animation","AnimationEnd"),animationiteration:bt("Animation","AnimationIteration"),animationstart:bt("Animation","AnimationStart"),transitionrun:bt("Transition","TransitionRun"),transitionstart:bt("Transition","TransitionStart"),transitioncancel:bt("Transition","TransitionCancel"),transitionend:bt("Transition","TransitionEnd")},Dr={},wr={};hn&&(wr=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);function Zn(a){if(Dr[a])return Dr[a];if(!xt[a])return a;var A=xt[a],p;for(p in A)if(A.hasOwnProperty(p)&&p in wr)return Dr[a]=A[p];return a}var Ks=Zn("animationend"),Gi=Zn("animationiteration"),un=Zn("animationstart"),_i=Zn("transitionrun"),bs=Zn("transitionstart"),Ol=Zn("transitioncancel"),qo=Zn("transitionend"),Wd=new Map,b0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");b0.push("scrollEnd");function Za(a,A){Wd.set(a,A),nr(A,[a])}var qd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Sa=[],Xc=0,Jp=0;function Xd(){for(var a=Xc,A=Jp=Xc=0;A<a;){var p=Sa[A];Sa[A++]=null;var v=Sa[A];Sa[A++]=null;var S=Sa[A];Sa[A++]=null;var R=Sa[A];if(Sa[A++]=null,v!==null&&S!==null){var j=v.pending;j===null?S.next=S:(S.next=j.next,j.next=S),v.pending=S}R!==0&&tC(p,S,R)}}function Yd(a,A,p,v){Sa[Xc++]=a,Sa[Xc++]=A,Sa[Xc++]=p,Sa[Xc++]=v,Jp|=v,a.lanes|=v,a=a.alternate,a!==null&&(a.lanes|=v)}function Zp(a,A,p,v){return Yd(a,A,p,v),Jd(a)}function WA(a,A){return Yd(a,null,null,A),Jd(a)}function tC(a,A,p){a.lanes|=p;var v=a.alternate;v!==null&&(v.lanes|=p);for(var S=!1,R=a.return;R!==null;)R.childLanes|=p,v=R.alternate,v!==null&&(v.childLanes|=p),R.tag===22&&(a=R.stateNode,a===null||a._visibility&1||(S=!0)),a=R,R=R.return;return a.tag===3?(R=a.stateNode,S&&A!==null&&(S=31-Re(p),a=R.hiddenUpdates,v=a[S],v===null?a[S]=[A]:v.push(A),A.lane=p|536870912),R):null}function Jd(a){if(50<z0)throw z0=0,ox=null,Error(n(185));for(var A=a.return;A!==null;)a=A,A=a.return;return a.tag===3?a.stateNode:null}var Yc={};function i5(a,A,p,v){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=A,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(a,A,p,v){return new i5(a,A,p,v)}function $p(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Xo(a,A){var p=a.alternate;return p===null?(p=oa(a.tag,A,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=A,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&65011712,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,A=a.dependencies,p.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p.refCleanup=a.refCleanup,p}function rC(a,A){a.flags&=65011714;var p=a.alternate;return p===null?(a.childLanes=0,a.lanes=A,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=p.childLanes,a.lanes=p.lanes,a.child=p.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=p.memoizedProps,a.memoizedState=p.memoizedState,a.updateQueue=p.updateQueue,a.type=p.type,A=p.dependencies,a.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),a}function Zd(a,A,p,v,S,R){var j=0;if(v=a,typeof a=="function")$p(a)&&(j=1);else if(typeof a=="string")j=A6(a,p,oe.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case O:return a=oa(31,p,A,S),a.elementType=O,a.lanes=R,a;case k:return qA(p.children,S,R,A);case U:j=8,S|=24;break;case V:return a=oa(12,p,A,S|2),a.elementType=V,a.lanes=R,a;case re:return a=oa(13,p,A,S),a.elementType=re,a.lanes=R,a;case z:return a=oa(19,p,A,S),a.elementType=z,a.lanes=R,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Q:j=10;break e;case K:j=9;break e;case te:j=11;break e;case M:j=14;break e;case P:j=16,v=null;break e}j=29,p=Error(n(130,a===null?"null":typeof a,"")),v=null}return A=oa(j,p,A,S),A.elementType=a,A.type=v,A.lanes=R,A}function qA(a,A,p,v){return a=oa(7,a,v,A),a.lanes=p,a}function em(a,A,p){return a=oa(6,a,null,A),a.lanes=p,a}function nC(a){var A=oa(18,null,null,0);return A.stateNode=a,A}function tm(a,A,p){return A=oa(4,a.children!==null?a.children:[],a.key,A),A.lanes=p,A.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},A}var iC=new WeakMap;function Ia(a,A){if(typeof a=="object"&&a!==null){var p=iC.get(a);return p!==void 0?p:(A={value:a,source:A,stack:Ot(A)},iC.set(a,A),A)}return{value:a,source:A,stack:Ot(A)}}var Jc=[],Zc=0,$d=null,_0=0,Na=[],Ra=0,Ll=null,yo=1,Co="";function Yo(a,A){Jc[Zc++]=_0,Jc[Zc++]=$d,$d=a,_0=A}function sC(a,A,p){Na[Ra++]=yo,Na[Ra++]=Co,Na[Ra++]=Ll,Ll=a;var v=yo;a=Co;var S=32-Re(v)-1;v&=~(1<<S),p+=1;var R=32-Re(A)+S;if(30<R){var j=S-S%5;R=(v&(1<<j)-1).toString(32),v>>=j,S-=j,yo=1<<32-Re(A)+S|p<<S|v,Co=R+a}else yo=1<<R|p<<S|v,Co=a}function rm(a){a.return!==null&&(Yo(a,1),sC(a,1,0))}function nm(a){for(;a===$d;)$d=Jc[--Zc],Jc[Zc]=null,_0=Jc[--Zc],Jc[Zc]=null;for(;a===Ll;)Ll=Na[--Ra],Na[Ra]=null,Co=Na[--Ra],Na[Ra]=null,yo=Na[--Ra],Na[Ra]=null}function aC(a,A){Na[Ra++]=yo,Na[Ra++]=Co,Na[Ra++]=Ll,yo=A.id,Co=A.overflow,Ll=a}var Ki=null,Un=null,Kr=!1,Pl=null,Fa=!1,im=Error(n(519));function Ql(a){var A=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw T0(Ia(A,a)),im}function oC(a){var A=a.stateNode,p=a.type,v=a.memoizedProps;switch(A[he]=a,A[pe]=v,p){case"dialog":Or("cancel",A),Or("close",A);break;case"iframe":case"object":case"embed":Or("load",A);break;case"video":case"audio":for(p=0;p<q0.length;p++)Or(q0[p],A);break;case"source":Or("error",A);break;case"img":case"image":case"link":Or("error",A),Or("load",A);break;case"details":Or("toggle",A);break;case"input":Or("invalid",A),je(A,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":Or("invalid",A);break;case"textarea":Or("invalid",A),ii(A,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||A.textContent===""+p||v.suppressHydrationWarning===!0||bb(A.textContent,p)?(v.popover!=null&&(Or("beforetoggle",A),Or("toggle",A)),v.onScroll!=null&&Or("scroll",A),v.onScrollEnd!=null&&Or("scrollend",A),v.onClick!=null&&(A.onclick=Gn),A=!0):A=!1,A||Ql(a,!0)}function lC(a){for(Ki=a.return;Ki;)switch(Ki.tag){case 5:case 31:case 13:Fa=!1;return;case 27:case 3:Fa=!0;return;default:Ki=Ki.return}}function $c(a){if(a!==Ki)return!1;if(!Kr)return lC(a),Kr=!0,!1;var A=a.tag,p;if((p=A!==3&&A!==27)&&((p=A===5)&&(p=a.type,p=!(p!=="form"&&p!=="button")||Cx(a.type,a.memoizedProps)),p=!p),p&&Un&&Ql(a),lC(a),A===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Un=kb(a)}else if(A===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Un=kb(a)}else A===27?(A=Un,eA(a.type)?(a=Bx,Bx=null,Un=a):Un=A):Un=Ki?Da(a.stateNode.nextSibling):null;return!0}function XA(){Un=Ki=null,Kr=!1}function sm(){var a=Pl;return a!==null&&(Xs===null?Xs=a:Xs.push.apply(Xs,a),Pl=null),a}function T0(a){Pl===null?Pl=[a]:Pl.push(a)}var am=ne(null),YA=null,Jo=null;function Hl(a,A,p){ce(am,A._currentValue),A._currentValue=p}function Zo(a){a._currentValue=am.current,q(am)}function om(a,A,p){for(;a!==null;){var v=a.alternate;if((a.childLanes&A)!==A?(a.childLanes|=A,v!==null&&(v.childLanes|=A)):v!==null&&(v.childLanes&A)!==A&&(v.childLanes|=A),a===p)break;a=a.return}}function lm(a,A,p,v){var S=a.child;for(S!==null&&(S.return=a);S!==null;){var R=S.dependencies;if(R!==null){var j=S.child;R=R.firstContext;e:for(;R!==null;){var le=R;R=S;for(var Te=0;Te<A.length;Te++)if(le.context===A[Te]){R.lanes|=p,le=R.alternate,le!==null&&(le.lanes|=p),om(R.return,p,a),v||(j=null);break e}R=le.next}}else if(S.tag===18){if(j=S.return,j===null)throw Error(n(341));j.lanes|=p,R=j.alternate,R!==null&&(R.lanes|=p),om(j,p,a),j=null}else j=S.child;if(j!==null)j.return=S;else for(j=S;j!==null;){if(j===a){j=null;break}if(S=j.sibling,S!==null){S.return=j.return,j=S;break}j=j.return}S=j}}function eu(a,A,p,v){a=null;for(var S=A,R=!1;S!==null;){if(!R){if((S.flags&524288)!==0)R=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var j=S.alternate;if(j===null)throw Error(n(387));if(j=j.memoizedProps,j!==null){var le=S.type;y(S.pendingProps.value,j.value)||(a!==null?a.push(le):a=[le])}}else if(S===Ke.current){if(j=S.alternate,j===null)throw Error(n(387));j.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(a!==null?a.push($0):a=[$0])}S=S.return}a!==null&&lm(A,a,p,v),A.flags|=262144}function eh(a){for(a=a.firstContext;a!==null;){if(!y(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function JA(a){YA=a,Jo=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function zi(a){return AC(YA,a)}function th(a,A){return YA===null&&JA(a),AC(a,A)}function AC(a,A){var p=A._currentValue;if(A={context:A,memoizedValue:p,next:null},Jo===null){if(a===null)throw Error(n(308));Jo=A,a.dependencies={lanes:0,firstContext:A},a.flags|=524288}else Jo=Jo.next=A;return p}var s5=typeof AbortController<"u"?AbortController:function(){var a=[],A=this.signal={aborted:!1,addEventListener:function(p,v){a.push(v)}};this.abort=function(){A.aborted=!0,a.forEach(function(p){return p()})}},a5=t.unstable_scheduleCallback,o5=t.unstable_NormalPriority,hi={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Am(){return{controller:new s5,data:new Map,refCount:0}}function B0(a){a.refCount--,a.refCount===0&&a5(o5,function(){a.controller.abort()})}var S0=null,cm=0,tu=0,ru=null;function l5(a,A){if(S0===null){var p=S0=[];cm=0,tu=dx(),ru={status:"pending",value:void 0,then:function(v){p.push(v)}}}return cm++,A.then(cC,cC),A}function cC(){if(--cm===0&&S0!==null){ru!==null&&(ru.status="fulfilled");var a=S0;S0=null,tu=0,ru=null;for(var A=0;A<a.length;A++)(0,a[A])()}}function A5(a,A){var p=[],v={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return a.then(function(){v.status="fulfilled",v.value=A;for(var S=0;S<p.length;S++)(0,p[S])(A)},function(S){for(v.status="rejected",v.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),v}var uC=de.S;de.S=function(a,A){qE=Ue(),typeof A=="object"&&A!==null&&typeof A.then=="function"&&l5(a,A),uC!==null&&uC(a,A)};var ZA=ne(null);function um(){var a=ZA.current;return a!==null?a:Bn.pooledCache}function rh(a,A){A===null?ce(ZA,ZA.current):ce(ZA,A.pool)}function fC(){var a=um();return a===null?null:{parent:hi._currentValue,pool:a}}var nu=Error(n(460)),fm=Error(n(474)),nh=Error(n(542)),ih={then:function(){}};function dC(a){return a=a.status,a==="fulfilled"||a==="rejected"}function hC(a,A,p){switch(p=a[p],p===void 0?a.push(A):p!==A&&(A.then(Gn,Gn),A=p),A.status){case"fulfilled":return A.value;case"rejected":throw a=A.reason,pC(a),a;default:if(typeof A.status=="string")A.then(Gn,Gn);else{if(a=Bn,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=A,a.status="pending",a.then(function(v){if(A.status==="pending"){var S=A;S.status="fulfilled",S.value=v}},function(v){if(A.status==="pending"){var S=A;S.status="rejected",S.reason=v}})}switch(A.status){case"fulfilled":return A.value;case"rejected":throw a=A.reason,pC(a),a}throw ec=A,nu}}function $A(a){try{var A=a._init;return A(a._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(ec=p,nu):p}}var ec=null;function gC(){if(ec===null)throw Error(n(459));var a=ec;return ec=null,a}function pC(a){if(a===nu||a===nh)throw Error(n(483))}var iu=null,I0=0;function sh(a){var A=I0;return I0+=1,iu===null&&(iu=[]),hC(iu,a,A)}function N0(a,A){A=A.props.ref,a.ref=A!==void 0?A:null}function ah(a,A){throw A.$$typeof===b?Error(n(525)):(a=Object.prototype.toString.call(A),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":a)))}function mC(a){function A(Me,ke){if(a){var ze=Me.deletions;ze===null?(Me.deletions=[ke],Me.flags|=16):ze.push(ke)}}function p(Me,ke){if(!a)return null;for(;ke!==null;)A(Me,ke),ke=ke.sibling;return null}function v(Me){for(var ke=new Map;Me!==null;)Me.key!==null?ke.set(Me.key,Me):ke.set(Me.index,Me),Me=Me.sibling;return ke}function S(Me,ke){return Me=Xo(Me,ke),Me.index=0,Me.sibling=null,Me}function R(Me,ke,ze){return Me.index=ze,a?(ze=Me.alternate,ze!==null?(ze=ze.index,ze<ke?(Me.flags|=67108866,ke):ze):(Me.flags|=67108866,ke)):(Me.flags|=1048576,ke)}function j(Me){return a&&Me.alternate===null&&(Me.flags|=67108866),Me}function le(Me,ke,ze,ct){return ke===null||ke.tag!==6?(ke=em(ze,Me.mode,ct),ke.return=Me,ke):(ke=S(ke,ze),ke.return=Me,ke)}function Te(Me,ke,ze,ct){var ar=ze.type;return ar===k?ot(Me,ke,ze.props.children,ct,ze.key):ke!==null&&(ke.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===P&&$A(ar)===ke.type)?(ke=S(ke,ze.props),N0(ke,ze),ke.return=Me,ke):(ke=Zd(ze.type,ze.key,ze.props,null,Me.mode,ct),N0(ke,ze),ke.return=Me,ke)}function We(Me,ke,ze,ct){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==ze.containerInfo||ke.stateNode.implementation!==ze.implementation?(ke=tm(ze,Me.mode,ct),ke.return=Me,ke):(ke=S(ke,ze.children||[]),ke.return=Me,ke)}function ot(Me,ke,ze,ct,ar){return ke===null||ke.tag!==7?(ke=qA(ze,Me.mode,ct,ar),ke.return=Me,ke):(ke=S(ke,ze),ke.return=Me,ke)}function dt(Me,ke,ze){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return ke=em(""+ke,Me.mode,ze),ke.return=Me,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case I:return ze=Zd(ke.type,ke.key,ke.props,null,Me.mode,ze),N0(ze,ke),ze.return=Me,ze;case F:return ke=tm(ke,Me.mode,ze),ke.return=Me,ke;case P:return ke=$A(ke),dt(Me,ke,ze)}if(ge(ke)||X(ke))return ke=qA(ke,Me.mode,ze,null),ke.return=Me,ke;if(typeof ke.then=="function")return dt(Me,sh(ke),ze);if(ke.$$typeof===Q)return dt(Me,th(Me,ke),ze);ah(Me,ke)}return null}function Ye(Me,ke,ze,ct){var ar=ke!==null?ke.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ar!==null?null:le(Me,ke,""+ze,ct);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case I:return ze.key===ar?Te(Me,ke,ze,ct):null;case F:return ze.key===ar?We(Me,ke,ze,ct):null;case P:return ze=$A(ze),Ye(Me,ke,ze,ct)}if(ge(ze)||X(ze))return ar!==null?null:ot(Me,ke,ze,ct,null);if(typeof ze.then=="function")return Ye(Me,ke,sh(ze),ct);if(ze.$$typeof===Q)return Ye(Me,ke,th(Me,ze),ct);ah(Me,ze)}return null}function rt(Me,ke,ze,ct,ar){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Me=Me.get(ze)||null,le(ke,Me,""+ct,ar);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case I:return Me=Me.get(ct.key===null?ze:ct.key)||null,Te(ke,Me,ct,ar);case F:return Me=Me.get(ct.key===null?ze:ct.key)||null,We(ke,Me,ct,ar);case P:return ct=$A(ct),rt(Me,ke,ze,ct,ar)}if(ge(ct)||X(ct))return Me=Me.get(ze)||null,ot(ke,Me,ct,ar,null);if(typeof ct.then=="function")return rt(Me,ke,ze,sh(ct),ar);if(ct.$$typeof===Q)return rt(Me,ke,ze,th(ke,ct),ar);ah(ke,ct)}return null}function qt(Me,ke,ze,ct){for(var ar=null,sn=null,Yt=ke,Fr=ke=0,Qr=null;Yt!==null&&Fr<ze.length;Fr++){Yt.index>Fr?(Qr=Yt,Yt=null):Qr=Yt.sibling;var an=Ye(Me,Yt,ze[Fr],ct);if(an===null){Yt===null&&(Yt=Qr);break}a&&Yt&&an.alternate===null&&A(Me,Yt),ke=R(an,ke,Fr),sn===null?ar=an:sn.sibling=an,sn=an,Yt=Qr}if(Fr===ze.length)return p(Me,Yt),Kr&&Yo(Me,Fr),ar;if(Yt===null){for(;Fr<ze.length;Fr++)Yt=dt(Me,ze[Fr],ct),Yt!==null&&(ke=R(Yt,ke,Fr),sn===null?ar=Yt:sn.sibling=Yt,sn=Yt);return Kr&&Yo(Me,Fr),ar}for(Yt=v(Yt);Fr<ze.length;Fr++)Qr=rt(Yt,Me,Fr,ze[Fr],ct),Qr!==null&&(a&&Qr.alternate!==null&&Yt.delete(Qr.key===null?Fr:Qr.key),ke=R(Qr,ke,Fr),sn===null?ar=Qr:sn.sibling=Qr,sn=Qr);return a&&Yt.forEach(function(sA){return A(Me,sA)}),Kr&&Yo(Me,Fr),ar}function Ar(Me,ke,ze,ct){if(ze==null)throw Error(n(151));for(var ar=null,sn=null,Yt=ke,Fr=ke=0,Qr=null,an=ze.next();Yt!==null&&!an.done;Fr++,an=ze.next()){Yt.index>Fr?(Qr=Yt,Yt=null):Qr=Yt.sibling;var sA=Ye(Me,Yt,an.value,ct);if(sA===null){Yt===null&&(Yt=Qr);break}a&&Yt&&sA.alternate===null&&A(Me,Yt),ke=R(sA,ke,Fr),sn===null?ar=sA:sn.sibling=sA,sn=sA,Yt=Qr}if(an.done)return p(Me,Yt),Kr&&Yo(Me,Fr),ar;if(Yt===null){for(;!an.done;Fr++,an=ze.next())an=dt(Me,an.value,ct),an!==null&&(ke=R(an,ke,Fr),sn===null?ar=an:sn.sibling=an,sn=an);return Kr&&Yo(Me,Fr),ar}for(Yt=v(Yt);!an.done;Fr++,an=ze.next())an=rt(Yt,Me,Fr,an.value,ct),an!==null&&(a&&an.alternate!==null&&Yt.delete(an.key===null?Fr:an.key),ke=R(an,ke,Fr),sn===null?ar=an:sn.sibling=an,sn=an);return a&&Yt.forEach(function(v6){return A(Me,v6)}),Kr&&Yo(Me,Fr),ar}function En(Me,ke,ze,ct){if(typeof ze=="object"&&ze!==null&&ze.type===k&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case I:e:{for(var ar=ze.key;ke!==null;){if(ke.key===ar){if(ar=ze.type,ar===k){if(ke.tag===7){p(Me,ke.sibling),ct=S(ke,ze.props.children),ct.return=Me,Me=ct;break e}}else if(ke.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===P&&$A(ar)===ke.type){p(Me,ke.sibling),ct=S(ke,ze.props),N0(ct,ze),ct.return=Me,Me=ct;break e}p(Me,ke);break}else A(Me,ke);ke=ke.sibling}ze.type===k?(ct=qA(ze.props.children,Me.mode,ct,ze.key),ct.return=Me,Me=ct):(ct=Zd(ze.type,ze.key,ze.props,null,Me.mode,ct),N0(ct,ze),ct.return=Me,Me=ct)}return j(Me);case F:e:{for(ar=ze.key;ke!==null;){if(ke.key===ar)if(ke.tag===4&&ke.stateNode.containerInfo===ze.containerInfo&&ke.stateNode.implementation===ze.implementation){p(Me,ke.sibling),ct=S(ke,ze.children||[]),ct.return=Me,Me=ct;break e}else{p(Me,ke);break}else A(Me,ke);ke=ke.sibling}ct=tm(ze,Me.mode,ct),ct.return=Me,Me=ct}return j(Me);case P:return ze=$A(ze),En(Me,ke,ze,ct)}if(ge(ze))return qt(Me,ke,ze,ct);if(X(ze)){if(ar=X(ze),typeof ar!="function")throw Error(n(150));return ze=ar.call(ze),Ar(Me,ke,ze,ct)}if(typeof ze.then=="function")return En(Me,ke,sh(ze),ct);if(ze.$$typeof===Q)return En(Me,ke,th(Me,ze),ct);ah(Me,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,ke!==null&&ke.tag===6?(p(Me,ke.sibling),ct=S(ke,ze),ct.return=Me,Me=ct):(p(Me,ke),ct=em(ze,Me.mode,ct),ct.return=Me,Me=ct),j(Me)):p(Me,ke)}return function(Me,ke,ze,ct){try{I0=0;var ar=En(Me,ke,ze,ct);return iu=null,ar}catch(Yt){if(Yt===nu||Yt===nh)throw Yt;var sn=oa(29,Yt,null,Me.mode);return sn.lanes=ct,sn.return=Me,sn}finally{}}}var tc=mC(!0),xC=mC(!1),jl=!1;function dm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hm(a,A){a=a.updateQueue,A.updateQueue===a&&(A.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Vl(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Gl(a,A,p){var v=a.updateQueue;if(v===null)return null;if(v=v.shared,(An&2)!==0){var S=v.pending;return S===null?A.next=A:(A.next=S.next,S.next=A),v.pending=A,A=Jd(a),tC(a,null,p),A}return Yd(a,v,A,p),Jd(a)}function R0(a,A,p){if(A=A.updateQueue,A!==null&&(A=A.shared,(p&4194048)!==0)){var v=A.lanes;v&=a.pendingLanes,p|=v,A.lanes=p,$r(a,p)}}function gm(a,A){var p=a.updateQueue,v=a.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var S=null,R=null;if(p=p.firstBaseUpdate,p!==null){do{var j={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};R===null?S=R=j:R=R.next=j,p=p.next}while(p!==null);R===null?S=R=A:R=R.next=A}else S=R=A;p={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:R,shared:v.shared,callbacks:v.callbacks},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=A:a.next=A,p.lastBaseUpdate=A}var pm=!1;function F0(){if(pm){var a=ru;if(a!==null)throw a}}function k0(a,A,p,v){pm=!1;var S=a.updateQueue;jl=!1;var R=S.firstBaseUpdate,j=S.lastBaseUpdate,le=S.shared.pending;if(le!==null){S.shared.pending=null;var Te=le,We=Te.next;Te.next=null,j===null?R=We:j.next=We,j=Te;var ot=a.alternate;ot!==null&&(ot=ot.updateQueue,le=ot.lastBaseUpdate,le!==j&&(le===null?ot.firstBaseUpdate=We:le.next=We,ot.lastBaseUpdate=Te))}if(R!==null){var dt=S.baseState;j=0,ot=We=Te=null,le=R;do{var Ye=le.lane&-536870913,rt=Ye!==le.lane;if(rt?(Pr&Ye)===Ye:(v&Ye)===Ye){Ye!==0&&Ye===tu&&(pm=!0),ot!==null&&(ot=ot.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var qt=a,Ar=le;Ye=A;var En=p;switch(Ar.tag){case 1:if(qt=Ar.payload,typeof qt=="function"){dt=qt.call(En,dt,Ye);break e}dt=qt;break e;case 3:qt.flags=qt.flags&-65537|128;case 0:if(qt=Ar.payload,Ye=typeof qt=="function"?qt.call(En,dt,Ye):qt,Ye==null)break e;dt=C({},dt,Ye);break e;case 2:jl=!0}}Ye=le.callback,Ye!==null&&(a.flags|=64,rt&&(a.flags|=8192),rt=S.callbacks,rt===null?S.callbacks=[Ye]:rt.push(Ye))}else rt={lane:Ye,tag:le.tag,payload:le.payload,callback:le.callback,next:null},ot===null?(We=ot=rt,Te=dt):ot=ot.next=rt,j|=Ye;if(le=le.next,le===null){if(le=S.shared.pending,le===null)break;rt=le,le=rt.next,rt.next=null,S.lastBaseUpdate=rt,S.shared.pending=null}}while(!0);ot===null&&(Te=dt),S.baseState=Te,S.firstBaseUpdate=We,S.lastBaseUpdate=ot,R===null&&(S.shared.lanes=0),Xl|=j,a.lanes=j,a.memoizedState=dt}}function wC(a,A){if(typeof a!="function")throw Error(n(191,a));a.call(A)}function vC(a,A){var p=a.callbacks;if(p!==null)for(a.callbacks=null,a=0;a<p.length;a++)wC(p[a],A)}var su=ne(null),oh=ne(0);function yC(a,A){a=ol,ce(oh,a),ce(su,A),ol=a|A.baseLanes}function mm(){ce(oh,ol),ce(su,su.current)}function xm(){ol=oh.current,q(su),q(oh)}var la=ne(null),ka=null;function Kl(a){var A=a.alternate;ce(oi,oi.current&1),ce(la,a),ka===null&&(A===null||su.current!==null||A.memoizedState!==null)&&(ka=a)}function wm(a){ce(oi,oi.current),ce(la,a),ka===null&&(ka=a)}function CC(a){a.tag===22?(ce(oi,oi.current),ce(la,a),ka===null&&(ka=a)):zl()}function zl(){ce(oi,oi.current),ce(la,la.current)}function Aa(a){q(la),ka===a&&(ka=null),q(oi)}var oi=ne(0);function lh(a){for(var A=a;A!==null;){if(A.tag===13){var p=A.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||_x(p)||Tx(p)))return A}else if(A.tag===19&&(A.memoizedProps.revealOrder==="forwards"||A.memoizedProps.revealOrder==="backwards"||A.memoizedProps.revealOrder==="unstable_legacy-backwards"||A.memoizedProps.revealOrder==="together")){if((A.flags&128)!==0)return A}else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break;for(;A.sibling===null;){if(A.return===null||A.return===a)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}return null}var $o=0,Sr=null,yn=null,gi=null,Ah=!1,au=!1,rc=!1,ch=0,D0=0,ou=null,c5=0;function $n(){throw Error(n(321))}function vm(a,A){if(A===null)return!1;for(var p=0;p<A.length&&p<a.length;p++)if(!y(a[p],A[p]))return!1;return!0}function ym(a,A,p,v,S,R){return $o=R,Sr=A,A.memoizedState=null,A.updateQueue=null,A.lanes=0,de.H=a===null||a.memoizedState===null?sE:Mm,rc=!1,R=p(v,S),rc=!1,au&&(R=bC(A,p,v,S)),EC(a),R}function EC(a){de.H=O0;var A=yn!==null&&yn.next!==null;if($o=0,gi=yn=Sr=null,Ah=!1,D0=0,ou=null,A)throw Error(n(300));a===null||pi||(a=a.dependencies,a!==null&&eh(a)&&(pi=!0))}function bC(a,A,p,v){Sr=a;var S=0;do{if(au&&(ou=null),D0=0,au=!1,25<=S)throw Error(n(301));if(S+=1,gi=yn=null,a.updateQueue!=null){var R=a.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}de.H=aE,R=A(p,v)}while(au);return R}function u5(){var a=de.H,A=a.useState()[0];return A=typeof A.then=="function"?U0(A):A,a=a.useState()[0],(yn!==null?yn.memoizedState:null)!==a&&(Sr.flags|=1024),A}function Cm(){var a=ch!==0;return ch=0,a}function Em(a,A,p){A.updateQueue=a.updateQueue,A.flags&=-2053,a.lanes&=~p}function bm(a){if(Ah){for(a=a.memoizedState;a!==null;){var A=a.queue;A!==null&&(A.pending=null),a=a.next}Ah=!1}$o=0,gi=yn=Sr=null,au=!1,D0=ch=0,ou=null}function _s(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?Sr.memoizedState=gi=a:gi=gi.next=a,gi}function li(){if(yn===null){var a=Sr.alternate;a=a!==null?a.memoizedState:null}else a=yn.next;var A=gi===null?Sr.memoizedState:gi.next;if(A!==null)gi=A,yn=a;else{if(a===null)throw Sr.alternate===null?Error(n(467)):Error(n(310));yn=a,a={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},gi===null?Sr.memoizedState=gi=a:gi=gi.next=a}return gi}function uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function U0(a){var A=D0;return D0+=1,ou===null&&(ou=[]),a=hC(ou,a,A),A=Sr,(gi===null?A.memoizedState:gi.next)===null&&(A=A.alternate,de.H=A===null||A.memoizedState===null?sE:Mm),a}function fh(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return U0(a);if(a.$$typeof===Q)return zi(a)}throw Error(n(438,String(a)))}function _m(a){var A=null,p=Sr.updateQueue;if(p!==null&&(A=p.memoCache),A==null){var v=Sr.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(A={data:v.data.map(function(S){return S.slice()}),index:0})))}if(A==null&&(A={data:[],index:0}),p===null&&(p=uh(),Sr.updateQueue=p),p.memoCache=A,p=A.data[A.index],p===void 0)for(p=A.data[A.index]=Array(a),v=0;v<a;v++)p[v]=ee;return A.index++,p}function el(a,A){return typeof A=="function"?A(a):A}function dh(a){var A=li();return Tm(A,yn,a)}function Tm(a,A,p){var v=a.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=p;var S=a.baseQueue,R=v.pending;if(R!==null){if(S!==null){var j=S.next;S.next=R.next,R.next=j}A.baseQueue=S=R,v.pending=null}if(R=a.baseState,S===null)a.memoizedState=R;else{A=S.next;var le=j=null,Te=null,We=A,ot=!1;do{var dt=We.lane&-536870913;if(dt!==We.lane?(Pr&dt)===dt:($o&dt)===dt){var Ye=We.revertLane;if(Ye===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,gesture:null,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),dt===tu&&(ot=!0);else if(($o&Ye)===Ye){We=We.next,Ye===tu&&(ot=!0);continue}else dt={lane:0,revertLane:We.revertLane,gesture:null,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Te===null?(le=Te=dt,j=R):Te=Te.next=dt,Sr.lanes|=Ye,Xl|=Ye;dt=We.action,rc&&p(R,dt),R=We.hasEagerState?We.eagerState:p(R,dt)}else Ye={lane:dt,revertLane:We.revertLane,gesture:We.gesture,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Te===null?(le=Te=Ye,j=R):Te=Te.next=Ye,Sr.lanes|=dt,Xl|=dt;We=We.next}while(We!==null&&We!==A);if(Te===null?j=R:Te.next=le,!y(R,a.memoizedState)&&(pi=!0,ot&&(p=ru,p!==null)))throw p;a.memoizedState=R,a.baseState=j,a.baseQueue=Te,v.lastRenderedState=R}return S===null&&(v.lanes=0),[a.memoizedState,v.dispatch]}function Bm(a){var A=li(),p=A.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var v=p.dispatch,S=p.pending,R=A.memoizedState;if(S!==null){p.pending=null;var j=S=S.next;do R=a(R,j.action),j=j.next;while(j!==S);y(R,A.memoizedState)||(pi=!0),A.memoizedState=R,A.baseQueue===null&&(A.baseState=R),p.lastRenderedState=R}return[R,v]}function _C(a,A,p){var v=Sr,S=li(),R=Kr;if(R){if(p===void 0)throw Error(n(407));p=p()}else p=A();var j=!y((yn||S).memoizedState,p);if(j&&(S.memoizedState=p,pi=!0),S=S.queue,Nm(SC.bind(null,v,S,a),[a]),S.getSnapshot!==A||j||gi!==null&&gi.memoizedState.tag&1){if(v.flags|=2048,lu(9,{destroy:void 0},BC.bind(null,v,S,p,A),null),Bn===null)throw Error(n(349));R||($o&127)!==0||TC(v,A,p)}return p}function TC(a,A,p){a.flags|=16384,a={getSnapshot:A,value:p},A=Sr.updateQueue,A===null?(A=uh(),Sr.updateQueue=A,A.stores=[a]):(p=A.stores,p===null?A.stores=[a]:p.push(a))}function BC(a,A,p,v){A.value=p,A.getSnapshot=v,IC(A)&&NC(a)}function SC(a,A,p){return p(function(){IC(A)&&NC(a)})}function IC(a){var A=a.getSnapshot;a=a.value;try{var p=A();return!y(a,p)}catch{return!0}}function NC(a){var A=WA(a,2);A!==null&&Ys(A,a,2)}function Sm(a){var A=_s();if(typeof a=="function"){var p=a;if(a=p(),rc){Nt(!0);try{p()}finally{Nt(!1)}}}return A.memoizedState=A.baseState=a,A.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:a},A}function RC(a,A,p,v){return a.baseState=p,Tm(a,yn,typeof v=="function"?v:el)}function f5(a,A,p,v,S){if(ph(a))throw Error(n(485));if(a=A.action,a!==null){var R={payload:S,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){R.listeners.push(j)}};de.T!==null?p(!0):R.isTransition=!1,v(R),p=A.pending,p===null?(R.next=A.pending=R,FC(A,R)):(R.next=p.next,A.pending=p.next=R)}}function FC(a,A){var p=A.action,v=A.payload,S=a.state;if(A.isTransition){var R=de.T,j={};de.T=j;try{var le=p(S,v),Te=de.S;Te!==null&&Te(j,le),kC(a,A,le)}catch(We){Im(a,A,We)}finally{R!==null&&j.types!==null&&(R.types=j.types),de.T=R}}else try{R=p(S,v),kC(a,A,R)}catch(We){Im(a,A,We)}}function kC(a,A,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){DC(a,A,v)},function(v){return Im(a,A,v)}):DC(a,A,p)}function DC(a,A,p){A.status="fulfilled",A.value=p,UC(A),a.state=p,A=a.pending,A!==null&&(p=A.next,p===A?a.pending=null:(p=p.next,A.next=p,FC(a,p)))}function Im(a,A,p){var v=a.pending;if(a.pending=null,v!==null){v=v.next;do A.status="rejected",A.reason=p,UC(A),A=A.next;while(A!==v)}a.action=null}function UC(a){a=a.listeners;for(var A=0;A<a.length;A++)(0,a[A])()}function MC(a,A){return A}function OC(a,A){if(Kr){var p=Bn.formState;if(p!==null){e:{var v=Sr;if(Kr){if(Un){t:{for(var S=Un,R=Fa;S.nodeType!==8;){if(!R){S=null;break t}if(S=Da(S.nextSibling),S===null){S=null;break t}}R=S.data,S=R==="F!"||R==="F"?S:null}if(S){Un=Da(S.nextSibling),v=S.data==="F!";break e}}Ql(v)}v=!1}v&&(A=p[0])}}return p=_s(),p.memoizedState=p.baseState=A,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:MC,lastRenderedState:A},p.queue=v,p=rE.bind(null,Sr,v),v.dispatch=p,v=Sm(!1),R=Um.bind(null,Sr,!1,v.queue),v=_s(),S={state:A,dispatch:null,action:a,pending:null},v.queue=S,p=f5.bind(null,Sr,S,R,p),S.dispatch=p,v.memoizedState=a,[A,p,!1]}function LC(a){var A=li();return PC(A,yn,a)}function PC(a,A,p){if(A=Tm(a,A,MC)[0],a=dh(el)[0],typeof A=="object"&&A!==null&&typeof A.then=="function")try{var v=U0(A)}catch(j){throw j===nu?nh:j}else v=A;A=li();var S=A.queue,R=S.dispatch;return p!==A.memoizedState&&(Sr.flags|=2048,lu(9,{destroy:void 0},d5.bind(null,S,p),null)),[v,R,a]}function d5(a,A){a.action=A}function QC(a){var A=li(),p=yn;if(p!==null)return PC(A,p,a);li(),A=A.memoizedState,p=li();var v=p.queue.dispatch;return p.memoizedState=a,[A,v,!1]}function lu(a,A,p,v){return a={tag:a,create:p,deps:v,inst:A,next:null},A=Sr.updateQueue,A===null&&(A=uh(),Sr.updateQueue=A),p=A.lastEffect,p===null?A.lastEffect=a.next=a:(v=p.next,p.next=a,a.next=v,A.lastEffect=a),a}function HC(){return li().memoizedState}function hh(a,A,p,v){var S=_s();Sr.flags|=a,S.memoizedState=lu(1|A,{destroy:void 0},p,v===void 0?null:v)}function gh(a,A,p,v){var S=li();v=v===void 0?null:v;var R=S.memoizedState.inst;yn!==null&&v!==null&&vm(v,yn.memoizedState.deps)?S.memoizedState=lu(A,R,p,v):(Sr.flags|=a,S.memoizedState=lu(1|A,R,p,v))}function jC(a,A){hh(8390656,8,a,A)}function Nm(a,A){gh(2048,8,a,A)}function h5(a){Sr.flags|=4;var A=Sr.updateQueue;if(A===null)A=uh(),Sr.updateQueue=A,A.events=[a];else{var p=A.events;p===null?A.events=[a]:p.push(a)}}function VC(a){var A=li().memoizedState;return h5({ref:A,nextImpl:a}),function(){if((An&2)!==0)throw Error(n(440));return A.impl.apply(void 0,arguments)}}function GC(a,A){return gh(4,2,a,A)}function KC(a,A){return gh(4,4,a,A)}function zC(a,A){if(typeof A=="function"){a=a();var p=A(a);return function(){typeof p=="function"?p():A(null)}}if(A!=null)return a=a(),A.current=a,function(){A.current=null}}function WC(a,A,p){p=p!=null?p.concat([a]):null,gh(4,4,zC.bind(null,A,a),p)}function Rm(){}function qC(a,A){var p=li();A=A===void 0?null:A;var v=p.memoizedState;return A!==null&&vm(A,v[1])?v[0]:(p.memoizedState=[a,A],a)}function XC(a,A){var p=li();A=A===void 0?null:A;var v=p.memoizedState;if(A!==null&&vm(A,v[1]))return v[0];if(v=a(),rc){Nt(!0);try{a()}finally{Nt(!1)}}return p.memoizedState=[v,A],v}function Fm(a,A,p){return p===void 0||($o&1073741824)!==0&&(Pr&261930)===0?a.memoizedState=A:(a.memoizedState=p,a=YE(),Sr.lanes|=a,Xl|=a,p)}function YC(a,A,p,v){return y(p,A)?p:su.current!==null?(a=Fm(a,p,v),y(a,A)||(pi=!0),a):($o&42)===0||($o&1073741824)!==0&&(Pr&261930)===0?(pi=!0,a.memoizedState=p):(a=YE(),Sr.lanes|=a,Xl|=a,A)}function JC(a,A,p,v,S){var R=we.p;we.p=R!==0&&8>R?R:8;var j=de.T,le={};de.T=le,Um(a,!1,A,p);try{var Te=S(),We=de.S;if(We!==null&&We(le,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var ot=A5(Te,v);M0(a,A,ot,fa(a))}else M0(a,A,v,fa(a))}catch(dt){M0(a,A,{then:function(){},status:"rejected",reason:dt},fa())}finally{we.p=R,j!==null&&le.types!==null&&(j.types=le.types),de.T=j}}function g5(){}function km(a,A,p,v){if(a.tag!==5)throw Error(n(476));var S=ZC(a).queue;JC(a,S,A,Ge,p===null?g5:function(){return $C(a),p(v)})}function ZC(a){var A=a.memoizedState;if(A!==null)return A;A={memoizedState:Ge,baseState:Ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:Ge},next:null};var p={};return A.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:p},next:null},a.memoizedState=A,a=a.alternate,a!==null&&(a.memoizedState=A),A}function $C(a){var A=ZC(a);A.next===null&&(A=a.alternate.memoizedState),M0(a,A.next.queue,{},fa())}function Dm(){return zi($0)}function eE(){return li().memoizedState}function tE(){return li().memoizedState}function p5(a){for(var A=a.return;A!==null;){switch(A.tag){case 24:case 3:var p=fa();a=Vl(p);var v=Gl(A,a,p);v!==null&&(Ys(v,A,p),R0(v,A,p)),A={cache:Am()},a.payload=A;return}A=A.return}}function m5(a,A,p){var v=fa();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},ph(a)?nE(A,p):(p=Zp(a,A,p,v),p!==null&&(Ys(p,a,v),iE(p,A,v)))}function rE(a,A,p){var v=fa();M0(a,A,p,v)}function M0(a,A,p,v){var S={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(ph(a))nE(A,S);else{var R=a.alternate;if(a.lanes===0&&(R===null||R.lanes===0)&&(R=A.lastRenderedReducer,R!==null))try{var j=A.lastRenderedState,le=R(j,p);if(S.hasEagerState=!0,S.eagerState=le,y(le,j))return Yd(a,A,S,0),Bn===null&&Xd(),!1}catch{}finally{}if(p=Zp(a,A,S,v),p!==null)return Ys(p,a,v),iE(p,A,v),!0}return!1}function Um(a,A,p,v){if(v={lane:2,revertLane:dx(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},ph(a)){if(A)throw Error(n(479))}else A=Zp(a,p,v,2),A!==null&&Ys(A,a,2)}function ph(a){var A=a.alternate;return a===Sr||A!==null&&A===Sr}function nE(a,A){au=Ah=!0;var p=a.pending;p===null?A.next=A:(A.next=p.next,p.next=A),a.pending=A}function iE(a,A,p){if((p&4194048)!==0){var v=A.lanes;v&=a.pendingLanes,p|=v,A.lanes=p,$r(a,p)}}var O0={readContext:zi,use:fh,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n};O0.useEffectEvent=$n;var sE={readContext:zi,use:fh,useCallback:function(a,A){return _s().memoizedState=[a,A===void 0?null:A],a},useContext:zi,useEffect:jC,useImperativeHandle:function(a,A,p){p=p!=null?p.concat([a]):null,hh(4194308,4,zC.bind(null,A,a),p)},useLayoutEffect:function(a,A){return hh(4194308,4,a,A)},useInsertionEffect:function(a,A){hh(4,2,a,A)},useMemo:function(a,A){var p=_s();A=A===void 0?null:A;var v=a();if(rc){Nt(!0);try{a()}finally{Nt(!1)}}return p.memoizedState=[v,A],v},useReducer:function(a,A,p){var v=_s();if(p!==void 0){var S=p(A);if(rc){Nt(!0);try{p(A)}finally{Nt(!1)}}}else S=A;return v.memoizedState=v.baseState=S,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:S},v.queue=a,a=a.dispatch=m5.bind(null,Sr,a),[v.memoizedState,a]},useRef:function(a){var A=_s();return a={current:a},A.memoizedState=a},useState:function(a){a=Sm(a);var A=a.queue,p=rE.bind(null,Sr,A);return A.dispatch=p,[a.memoizedState,p]},useDebugValue:Rm,useDeferredValue:function(a,A){var p=_s();return Fm(p,a,A)},useTransition:function(){var a=Sm(!1);return a=JC.bind(null,Sr,a.queue,!0,!1),_s().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,A,p){var v=Sr,S=_s();if(Kr){if(p===void 0)throw Error(n(407));p=p()}else{if(p=A(),Bn===null)throw Error(n(349));(Pr&127)!==0||TC(v,A,p)}S.memoizedState=p;var R={value:p,getSnapshot:A};return S.queue=R,jC(SC.bind(null,v,R,a),[a]),v.flags|=2048,lu(9,{destroy:void 0},BC.bind(null,v,R,p,A),null),p},useId:function(){var a=_s(),A=Bn.identifierPrefix;if(Kr){var p=Co,v=yo;p=(v&~(1<<32-Re(v)-1)).toString(32)+p,A="_"+A+"R_"+p,p=ch++,0<p&&(A+="H"+p.toString(32)),A+="_"}else p=c5++,A="_"+A+"r_"+p.toString(32)+"_";return a.memoizedState=A},useHostTransitionStatus:Dm,useFormState:OC,useActionState:OC,useOptimistic:function(a){var A=_s();A.memoizedState=A.baseState=a;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return A.queue=p,A=Um.bind(null,Sr,!0,p),p.dispatch=A,[a,A]},useMemoCache:_m,useCacheRefresh:function(){return _s().memoizedState=p5.bind(null,Sr)},useEffectEvent:function(a){var A=_s(),p={impl:a};return A.memoizedState=p,function(){if((An&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},Mm={readContext:zi,use:fh,useCallback:qC,useContext:zi,useEffect:Nm,useImperativeHandle:WC,useInsertionEffect:GC,useLayoutEffect:KC,useMemo:XC,useReducer:dh,useRef:HC,useState:function(){return dh(el)},useDebugValue:Rm,useDeferredValue:function(a,A){var p=li();return YC(p,yn.memoizedState,a,A)},useTransition:function(){var a=dh(el)[0],A=li().memoizedState;return[typeof a=="boolean"?a:U0(a),A]},useSyncExternalStore:_C,useId:eE,useHostTransitionStatus:Dm,useFormState:LC,useActionState:LC,useOptimistic:function(a,A){var p=li();return RC(p,yn,a,A)},useMemoCache:_m,useCacheRefresh:tE};Mm.useEffectEvent=VC;var aE={readContext:zi,use:fh,useCallback:qC,useContext:zi,useEffect:Nm,useImperativeHandle:WC,useInsertionEffect:GC,useLayoutEffect:KC,useMemo:XC,useReducer:Bm,useRef:HC,useState:function(){return Bm(el)},useDebugValue:Rm,useDeferredValue:function(a,A){var p=li();return yn===null?Fm(p,a,A):YC(p,yn.memoizedState,a,A)},useTransition:function(){var a=Bm(el)[0],A=li().memoizedState;return[typeof a=="boolean"?a:U0(a),A]},useSyncExternalStore:_C,useId:eE,useHostTransitionStatus:Dm,useFormState:QC,useActionState:QC,useOptimistic:function(a,A){var p=li();return yn!==null?RC(p,yn,a,A):(p.baseState=a,[a,p.queue.dispatch])},useMemoCache:_m,useCacheRefresh:tE};aE.useEffectEvent=VC;function Om(a,A,p,v){A=a.memoizedState,p=p(v,A),p=p==null?A:C({},A,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Lm={enqueueSetState:function(a,A,p){a=a._reactInternals;var v=fa(),S=Vl(v);S.payload=A,p!=null&&(S.callback=p),A=Gl(a,S,v),A!==null&&(Ys(A,a,v),R0(A,a,v))},enqueueReplaceState:function(a,A,p){a=a._reactInternals;var v=fa(),S=Vl(v);S.tag=1,S.payload=A,p!=null&&(S.callback=p),A=Gl(a,S,v),A!==null&&(Ys(A,a,v),R0(A,a,v))},enqueueForceUpdate:function(a,A){a=a._reactInternals;var p=fa(),v=Vl(p);v.tag=2,A!=null&&(v.callback=A),A=Gl(a,v,p),A!==null&&(Ys(A,a,p),R0(A,a,p))}};function oE(a,A,p,v,S,R,j){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(v,R,j):A.prototype&&A.prototype.isPureReactComponent?!T(p,v)||!T(S,R):!0}function lE(a,A,p,v){a=A.state,typeof A.componentWillReceiveProps=="function"&&A.componentWillReceiveProps(p,v),typeof A.UNSAFE_componentWillReceiveProps=="function"&&A.UNSAFE_componentWillReceiveProps(p,v),A.state!==a&&Lm.enqueueReplaceState(A,A.state,null)}function nc(a,A){var p=A;if("ref"in A){p={};for(var v in A)v!=="ref"&&(p[v]=A[v])}if(a=a.defaultProps){p===A&&(p=C({},p));for(var S in a)p[S]===void 0&&(p[S]=a[S])}return p}function AE(a){qd(a)}function cE(a){console.error(a)}function uE(a){qd(a)}function mh(a,A){try{var p=a.onUncaughtError;p(A.value,{componentStack:A.stack})}catch(v){setTimeout(function(){throw v})}}function fE(a,A,p){try{var v=a.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:A.tag===1?A.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function Pm(a,A,p){return p=Vl(p),p.tag=3,p.payload={element:null},p.callback=function(){mh(a,A)},p}function dE(a){return a=Vl(a),a.tag=3,a}function hE(a,A,p,v){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var R=v.value;a.payload=function(){return S(R)},a.callback=function(){fE(A,p,v)}}var j=p.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(a.callback=function(){fE(A,p,v),typeof S!="function"&&(Yl===null?Yl=new Set([this]):Yl.add(this));var le=v.stack;this.componentDidCatch(v.value,{componentStack:le!==null?le:""})})}function x5(a,A,p,v,S){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(A=p.alternate,A!==null&&eu(A,p,S,!0),p=la.current,p!==null){switch(p.tag){case 31:case 13:return ka===null?Ih():p.alternate===null&&ei===0&&(ei=3),p.flags&=-257,p.flags|=65536,p.lanes=S,v===ih?p.flags|=16384:(A=p.updateQueue,A===null?p.updateQueue=new Set([v]):A.add(v),cx(a,v,S)),!1;case 22:return p.flags|=65536,v===ih?p.flags|=16384:(A=p.updateQueue,A===null?(A={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=A):(p=A.retryQueue,p===null?A.retryQueue=new Set([v]):p.add(v)),cx(a,v,S)),!1}throw Error(n(435,p.tag))}return cx(a,v,S),Ih(),!1}if(Kr)return A=la.current,A!==null?((A.flags&65536)===0&&(A.flags|=256),A.flags|=65536,A.lanes=S,v!==im&&(a=Error(n(422),{cause:v}),T0(Ia(a,p)))):(v!==im&&(A=Error(n(423),{cause:v}),T0(Ia(A,p))),a=a.current.alternate,a.flags|=65536,S&=-S,a.lanes|=S,v=Ia(v,p),S=Pm(a.stateNode,v,S),gm(a,S),ei!==4&&(ei=2)),!1;var R=Error(n(520),{cause:v});if(R=Ia(R,p),K0===null?K0=[R]:K0.push(R),ei!==4&&(ei=2),A===null)return!0;v=Ia(v,p),p=A;do{switch(p.tag){case 3:return p.flags|=65536,a=S&-S,p.lanes|=a,a=Pm(p.stateNode,v,a),gm(p,a),!1;case 1:if(A=p.type,R=p.stateNode,(p.flags&128)===0&&(typeof A.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Yl===null||!Yl.has(R))))return p.flags|=65536,S&=-S,p.lanes|=S,S=dE(S),hE(S,a,p,v),gm(p,S),!1}p=p.return}while(p!==null);return!1}var Qm=Error(n(461)),pi=!1;function Wi(a,A,p,v){A.child=a===null?xC(A,null,p,v):tc(A,a.child,p,v)}function gE(a,A,p,v,S){p=p.render;var R=A.ref;if("ref"in v){var j={};for(var le in v)le!=="ref"&&(j[le]=v[le])}else j=v;return JA(A),v=ym(a,A,p,j,R,S),le=Cm(),a!==null&&!pi?(Em(a,A,S),tl(a,A,S)):(Kr&&le&&rm(A),A.flags|=1,Wi(a,A,v,S),A.child)}function pE(a,A,p,v,S){if(a===null){var R=p.type;return typeof R=="function"&&!$p(R)&&R.defaultProps===void 0&&p.compare===null?(A.tag=15,A.type=R,mE(a,A,R,v,S)):(a=Zd(p.type,null,v,A,A.mode,S),a.ref=A.ref,a.return=A,A.child=a)}if(R=a.child,!qm(a,S)){var j=R.memoizedProps;if(p=p.compare,p=p!==null?p:T,p(j,v)&&a.ref===A.ref)return tl(a,A,S)}return A.flags|=1,a=Xo(R,v),a.ref=A.ref,a.return=A,A.child=a}function mE(a,A,p,v,S){if(a!==null){var R=a.memoizedProps;if(T(R,v)&&a.ref===A.ref)if(pi=!1,A.pendingProps=v=R,qm(a,S))(a.flags&131072)!==0&&(pi=!0);else return A.lanes=a.lanes,tl(a,A,S)}return Hm(a,A,p,v,S)}function xE(a,A,p,v){var S=v.children,R=a!==null?a.memoizedState:null;if(a===null&&A.stateNode===null&&(A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((A.flags&128)!==0){if(R=R!==null?R.baseLanes|p:p,a!==null){for(v=A.child=a.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;v=S&~R}else v=0,A.child=null;return wE(a,A,R,p,v)}if((p&536870912)!==0)A.memoizedState={baseLanes:0,cachePool:null},a!==null&&rh(A,R!==null?R.cachePool:null),R!==null?yC(A,R):mm(),CC(A);else return v=A.lanes=536870912,wE(a,A,R!==null?R.baseLanes|p:p,p,v)}else R!==null?(rh(A,R.cachePool),yC(A,R),zl(),A.memoizedState=null):(a!==null&&rh(A,null),mm(),zl());return Wi(a,A,S,p),A.child}function L0(a,A){return a!==null&&a.tag===22||A.stateNode!==null||(A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.sibling}function wE(a,A,p,v,S){var R=um();return R=R===null?null:{parent:hi._currentValue,pool:R},A.memoizedState={baseLanes:p,cachePool:R},a!==null&&rh(A,null),mm(),CC(A),a!==null&&eu(a,A,v,!0),A.childLanes=S,null}function xh(a,A){return A=vh({mode:A.mode,children:A.children},a.mode),A.ref=a.ref,a.child=A,A.return=a,A}function vE(a,A,p){return tc(A,a.child,null,p),a=xh(A,A.pendingProps),a.flags|=2,Aa(A),A.memoizedState=null,a}function w5(a,A,p){var v=A.pendingProps,S=(A.flags&128)!==0;if(A.flags&=-129,a===null){if(Kr){if(v.mode==="hidden")return a=xh(A,v),A.lanes=536870912,L0(null,a);if(wm(A),(a=Un)?(a=Fb(a,Fa),a=a!==null&&a.data==="&"?a:null,a!==null&&(A.memoizedState={dehydrated:a,treeContext:Ll!==null?{id:yo,overflow:Co}:null,retryLane:536870912,hydrationErrors:null},p=nC(a),p.return=A,A.child=p,Ki=A,Un=null)):a=null,a===null)throw Ql(A);return A.lanes=536870912,null}return xh(A,v)}var R=a.memoizedState;if(R!==null){var j=R.dehydrated;if(wm(A),S)if(A.flags&256)A.flags&=-257,A=vE(a,A,p);else if(A.memoizedState!==null)A.child=a.child,A.flags|=128,A=null;else throw Error(n(558));else if(pi||eu(a,A,p,!1),S=(p&a.childLanes)!==0,pi||S){if(v=Bn,v!==null&&(j=Sn(v,p),j!==0&&j!==R.retryLane))throw R.retryLane=j,WA(a,j),Ys(v,a,j),Qm;Ih(),A=vE(a,A,p)}else a=R.treeContext,Un=Da(j.nextSibling),Ki=A,Kr=!0,Pl=null,Fa=!1,a!==null&&aC(A,a),A=xh(A,v),A.flags|=4096;return A}return a=Xo(a.child,{mode:v.mode,children:v.children}),a.ref=A.ref,A.child=a,a.return=A,a}function wh(a,A){var p=A.ref;if(p===null)a!==null&&a.ref!==null&&(A.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(a===null||a.ref!==p)&&(A.flags|=4194816)}}function Hm(a,A,p,v,S){return JA(A),p=ym(a,A,p,v,void 0,S),v=Cm(),a!==null&&!pi?(Em(a,A,S),tl(a,A,S)):(Kr&&v&&rm(A),A.flags|=1,Wi(a,A,p,S),A.child)}function yE(a,A,p,v,S,R){return JA(A),A.updateQueue=null,p=bC(A,v,p,S),EC(a),v=Cm(),a!==null&&!pi?(Em(a,A,R),tl(a,A,R)):(Kr&&v&&rm(A),A.flags|=1,Wi(a,A,p,R),A.child)}function CE(a,A,p,v,S){if(JA(A),A.stateNode===null){var R=Yc,j=p.contextType;typeof j=="object"&&j!==null&&(R=zi(j)),R=new p(v,R),A.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Lm,A.stateNode=R,R._reactInternals=A,R=A.stateNode,R.props=v,R.state=A.memoizedState,R.refs={},dm(A),j=p.contextType,R.context=typeof j=="object"&&j!==null?zi(j):Yc,R.state=A.memoizedState,j=p.getDerivedStateFromProps,typeof j=="function"&&(Om(A,p,j,v),R.state=A.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(j=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),j!==R.state&&Lm.enqueueReplaceState(R,R.state,null),k0(A,v,R,S),F0(),R.state=A.memoizedState),typeof R.componentDidMount=="function"&&(A.flags|=4194308),v=!0}else if(a===null){R=A.stateNode;var le=A.memoizedProps,Te=nc(p,le);R.props=Te;var We=R.context,ot=p.contextType;j=Yc,typeof ot=="object"&&ot!==null&&(j=zi(ot));var dt=p.getDerivedStateFromProps;ot=typeof dt=="function"||typeof R.getSnapshotBeforeUpdate=="function",le=A.pendingProps!==le,ot||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(le||We!==j)&&lE(A,R,v,j),jl=!1;var Ye=A.memoizedState;R.state=Ye,k0(A,v,R,S),F0(),We=A.memoizedState,le||Ye!==We||jl?(typeof dt=="function"&&(Om(A,p,dt,v),We=A.memoizedState),(Te=jl||oE(A,p,Te,v,Ye,We,j))?(ot||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(A.flags|=4194308)):(typeof R.componentDidMount=="function"&&(A.flags|=4194308),A.memoizedProps=v,A.memoizedState=We),R.props=v,R.state=We,R.context=j,v=Te):(typeof R.componentDidMount=="function"&&(A.flags|=4194308),v=!1)}else{R=A.stateNode,hm(a,A),j=A.memoizedProps,ot=nc(p,j),R.props=ot,dt=A.pendingProps,Ye=R.context,We=p.contextType,Te=Yc,typeof We=="object"&&We!==null&&(Te=zi(We)),le=p.getDerivedStateFromProps,(We=typeof le=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(j!==dt||Ye!==Te)&&lE(A,R,v,Te),jl=!1,Ye=A.memoizedState,R.state=Ye,k0(A,v,R,S),F0();var rt=A.memoizedState;j!==dt||Ye!==rt||jl||a!==null&&a.dependencies!==null&&eh(a.dependencies)?(typeof le=="function"&&(Om(A,p,le,v),rt=A.memoizedState),(ot=jl||oE(A,p,ot,v,Ye,rt,Te)||a!==null&&a.dependencies!==null&&eh(a.dependencies))?(We||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(v,rt,Te),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(v,rt,Te)),typeof R.componentDidUpdate=="function"&&(A.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(A.flags|=1024)):(typeof R.componentDidUpdate!="function"||j===a.memoizedProps&&Ye===a.memoizedState||(A.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||j===a.memoizedProps&&Ye===a.memoizedState||(A.flags|=1024),A.memoizedProps=v,A.memoizedState=rt),R.props=v,R.state=rt,R.context=Te,v=ot):(typeof R.componentDidUpdate!="function"||j===a.memoizedProps&&Ye===a.memoizedState||(A.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||j===a.memoizedProps&&Ye===a.memoizedState||(A.flags|=1024),v=!1)}return R=v,wh(a,A),v=(A.flags&128)!==0,R||v?(R=A.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:R.render(),A.flags|=1,a!==null&&v?(A.child=tc(A,a.child,null,S),A.child=tc(A,null,p,S)):Wi(a,A,p,S),A.memoizedState=R.state,a=A.child):a=tl(a,A,S),a}function EE(a,A,p,v){return XA(),A.flags|=256,Wi(a,A,p,v),A.child}var jm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vm(a){return{baseLanes:a,cachePool:fC()}}function Gm(a,A,p){return a=a!==null?a.childLanes&~p:0,A&&(a|=ua),a}function bE(a,A,p){var v=A.pendingProps,S=!1,R=(A.flags&128)!==0,j;if((j=R)||(j=a!==null&&a.memoizedState===null?!1:(oi.current&2)!==0),j&&(S=!0,A.flags&=-129),j=(A.flags&32)!==0,A.flags&=-33,a===null){if(Kr){if(S?Kl(A):zl(),(a=Un)?(a=Fb(a,Fa),a=a!==null&&a.data!=="&"?a:null,a!==null&&(A.memoizedState={dehydrated:a,treeContext:Ll!==null?{id:yo,overflow:Co}:null,retryLane:536870912,hydrationErrors:null},p=nC(a),p.return=A,A.child=p,Ki=A,Un=null)):a=null,a===null)throw Ql(A);return Tx(a)?A.lanes=32:A.lanes=536870912,null}var le=v.children;return v=v.fallback,S?(zl(),S=A.mode,le=vh({mode:"hidden",children:le},S),v=qA(v,S,p,null),le.return=A,v.return=A,le.sibling=v,A.child=le,v=A.child,v.memoizedState=Vm(p),v.childLanes=Gm(a,j,p),A.memoizedState=jm,L0(null,v)):(Kl(A),Km(A,le))}var Te=a.memoizedState;if(Te!==null&&(le=Te.dehydrated,le!==null)){if(R)A.flags&256?(Kl(A),A.flags&=-257,A=zm(a,A,p)):A.memoizedState!==null?(zl(),A.child=a.child,A.flags|=128,A=null):(zl(),le=v.fallback,S=A.mode,v=vh({mode:"visible",children:v.children},S),le=qA(le,S,p,null),le.flags|=2,v.return=A,le.return=A,v.sibling=le,A.child=v,tc(A,a.child,null,p),v=A.child,v.memoizedState=Vm(p),v.childLanes=Gm(a,j,p),A.memoizedState=jm,A=L0(null,v));else if(Kl(A),Tx(le)){if(j=le.nextSibling&&le.nextSibling.dataset,j)var We=j.dgst;j=We,v=Error(n(419)),v.stack="",v.digest=j,T0({value:v,source:null,stack:null}),A=zm(a,A,p)}else if(pi||eu(a,A,p,!1),j=(p&a.childLanes)!==0,pi||j){if(j=Bn,j!==null&&(v=Sn(j,p),v!==0&&v!==Te.retryLane))throw Te.retryLane=v,WA(a,v),Ys(j,a,v),Qm;_x(le)||Ih(),A=zm(a,A,p)}else _x(le)?(A.flags|=192,A.child=a.child,A=null):(a=Te.treeContext,Un=Da(le.nextSibling),Ki=A,Kr=!0,Pl=null,Fa=!1,a!==null&&aC(A,a),A=Km(A,v.children),A.flags|=4096);return A}return S?(zl(),le=v.fallback,S=A.mode,Te=a.child,We=Te.sibling,v=Xo(Te,{mode:"hidden",children:v.children}),v.subtreeFlags=Te.subtreeFlags&65011712,We!==null?le=Xo(We,le):(le=qA(le,S,p,null),le.flags|=2),le.return=A,v.return=A,v.sibling=le,A.child=v,L0(null,v),v=A.child,le=a.child.memoizedState,le===null?le=Vm(p):(S=le.cachePool,S!==null?(Te=hi._currentValue,S=S.parent!==Te?{parent:Te,pool:Te}:S):S=fC(),le={baseLanes:le.baseLanes|p,cachePool:S}),v.memoizedState=le,v.childLanes=Gm(a,j,p),A.memoizedState=jm,L0(a.child,v)):(Kl(A),p=a.child,a=p.sibling,p=Xo(p,{mode:"visible",children:v.children}),p.return=A,p.sibling=null,a!==null&&(j=A.deletions,j===null?(A.deletions=[a],A.flags|=16):j.push(a)),A.child=p,A.memoizedState=null,p)}function Km(a,A){return A=vh({mode:"visible",children:A},a.mode),A.return=a,a.child=A}function vh(a,A){return a=oa(22,a,null,A),a.lanes=0,a}function zm(a,A,p){return tc(A,a.child,null,p),a=Km(A,A.pendingProps.children),a.flags|=2,A.memoizedState=null,a}function _E(a,A,p){a.lanes|=A;var v=a.alternate;v!==null&&(v.lanes|=A),om(a.return,A,p)}function Wm(a,A,p,v,S,R){var j=a.memoizedState;j===null?a.memoizedState={isBackwards:A,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:S,treeForkCount:R}:(j.isBackwards=A,j.rendering=null,j.renderingStartTime=0,j.last=v,j.tail=p,j.tailMode=S,j.treeForkCount=R)}function TE(a,A,p){var v=A.pendingProps,S=v.revealOrder,R=v.tail;v=v.children;var j=oi.current,le=(j&2)!==0;if(le?(j=j&1|2,A.flags|=128):j&=1,ce(oi,j),Wi(a,A,v,p),v=Kr?_0:0,!le&&a!==null&&(a.flags&128)!==0)e:for(a=A.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&_E(a,p,A);else if(a.tag===19)_E(a,p,A);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===A)break e;for(;a.sibling===null;){if(a.return===null||a.return===A)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(S){case"forwards":for(p=A.child,S=null;p!==null;)a=p.alternate,a!==null&&lh(a)===null&&(S=p),p=p.sibling;p=S,p===null?(S=A.child,A.child=null):(S=p.sibling,p.sibling=null),Wm(A,!1,S,p,R,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,S=A.child,A.child=null;S!==null;){if(a=S.alternate,a!==null&&lh(a)===null){A.child=S;break}a=S.sibling,S.sibling=p,p=S,S=a}Wm(A,!0,p,null,R,v);break;case"together":Wm(A,!1,null,null,void 0,v);break;default:A.memoizedState=null}return A.child}function tl(a,A,p){if(a!==null&&(A.dependencies=a.dependencies),Xl|=A.lanes,(p&A.childLanes)===0)if(a!==null){if(eu(a,A,p,!1),(p&A.childLanes)===0)return null}else return null;if(a!==null&&A.child!==a.child)throw Error(n(153));if(A.child!==null){for(a=A.child,p=Xo(a,a.pendingProps),A.child=p,p.return=A;a.sibling!==null;)a=a.sibling,p=p.sibling=Xo(a,a.pendingProps),p.return=A;p.sibling=null}return A.child}function qm(a,A){return(a.lanes&A)!==0?!0:(a=a.dependencies,!!(a!==null&&eh(a)))}function v5(a,A,p){switch(A.tag){case 3:Fe(A,A.stateNode.containerInfo),Hl(A,hi,a.memoizedState.cache),XA();break;case 27:case 5:tt(A);break;case 4:Fe(A,A.stateNode.containerInfo);break;case 10:Hl(A,A.type,A.memoizedProps.value);break;case 31:if(A.memoizedState!==null)return A.flags|=128,wm(A),null;break;case 13:var v=A.memoizedState;if(v!==null)return v.dehydrated!==null?(Kl(A),A.flags|=128,null):(p&A.child.childLanes)!==0?bE(a,A,p):(Kl(A),a=tl(a,A,p),a!==null?a.sibling:null);Kl(A);break;case 19:var S=(a.flags&128)!==0;if(v=(p&A.childLanes)!==0,v||(eu(a,A,p,!1),v=(p&A.childLanes)!==0),S){if(v)return TE(a,A,p);A.flags|=128}if(S=A.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),ce(oi,oi.current),v)break;return null;case 22:return A.lanes=0,xE(a,A,p,A.pendingProps);case 24:Hl(A,hi,a.memoizedState.cache)}return tl(a,A,p)}function BE(a,A,p){if(a!==null)if(a.memoizedProps!==A.pendingProps)pi=!0;else{if(!qm(a,p)&&(A.flags&128)===0)return pi=!1,v5(a,A,p);pi=(a.flags&131072)!==0}else pi=!1,Kr&&(A.flags&1048576)!==0&&sC(A,_0,A.index);switch(A.lanes=0,A.tag){case 16:e:{var v=A.pendingProps;if(a=$A(A.elementType),A.type=a,typeof a=="function")$p(a)?(v=nc(a,v),A.tag=1,A=CE(null,A,a,v,p)):(A.tag=0,A=Hm(null,A,a,v,p));else{if(a!=null){var S=a.$$typeof;if(S===te){A.tag=11,A=gE(null,A,a,v,p);break e}else if(S===M){A.tag=14,A=pE(null,A,a,v,p);break e}}throw A=Ie(a)||a,Error(n(306,A,""))}}return A;case 0:return Hm(a,A,A.type,A.pendingProps,p);case 1:return v=A.type,S=nc(v,A.pendingProps),CE(a,A,v,S,p);case 3:e:{if(Fe(A,A.stateNode.containerInfo),a===null)throw Error(n(387));v=A.pendingProps;var R=A.memoizedState;S=R.element,hm(a,A),k0(A,v,null,p);var j=A.memoizedState;if(v=j.cache,Hl(A,hi,v),v!==R.cache&&lm(A,[hi],p,!0),F0(),v=j.element,R.isDehydrated)if(R={element:v,isDehydrated:!1,cache:j.cache},A.updateQueue.baseState=R,A.memoizedState=R,A.flags&256){A=EE(a,A,v,p);break e}else if(v!==S){S=Ia(Error(n(424)),A),T0(S),A=EE(a,A,v,p);break e}else{switch(a=A.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Un=Da(a.firstChild),Ki=A,Kr=!0,Pl=null,Fa=!0,p=xC(A,null,v,p),A.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(XA(),v===S){A=tl(a,A,p);break e}Wi(a,A,v,p)}A=A.child}return A;case 26:return wh(a,A),a===null?(p=Lb(A.type,null,A.pendingProps,null))?A.memoizedState=p:Kr||(p=A.type,a=A.pendingProps,v=Mh(Ee.current).createElement(p),v[he]=A,v[pe]=a,qi(v,p,a),Gt(v),A.stateNode=v):A.memoizedState=Lb(A.type,a.memoizedProps,A.pendingProps,a.memoizedState),null;case 27:return tt(A),a===null&&Kr&&(v=A.stateNode=Ub(A.type,A.pendingProps,Ee.current),Ki=A,Fa=!0,S=Un,eA(A.type)?(Bx=S,Un=Da(v.firstChild)):Un=S),Wi(a,A,A.pendingProps.children,p),wh(a,A),a===null&&(A.flags|=4194304),A.child;case 5:return a===null&&Kr&&((S=v=Un)&&(v=Y5(v,A.type,A.pendingProps,Fa),v!==null?(A.stateNode=v,Ki=A,Un=Da(v.firstChild),Fa=!1,S=!0):S=!1),S||Ql(A)),tt(A),S=A.type,R=A.pendingProps,j=a!==null?a.memoizedProps:null,v=R.children,Cx(S,R)?v=null:j!==null&&Cx(S,j)&&(A.flags|=32),A.memoizedState!==null&&(S=ym(a,A,u5,null,null,p),$0._currentValue=S),wh(a,A),Wi(a,A,v,p),A.child;case 6:return a===null&&Kr&&((a=p=Un)&&(p=J5(p,A.pendingProps,Fa),p!==null?(A.stateNode=p,Ki=A,Un=null,a=!0):a=!1),a||Ql(A)),null;case 13:return bE(a,A,p);case 4:return Fe(A,A.stateNode.containerInfo),v=A.pendingProps,a===null?A.child=tc(A,null,v,p):Wi(a,A,v,p),A.child;case 11:return gE(a,A,A.type,A.pendingProps,p);case 7:return Wi(a,A,A.pendingProps,p),A.child;case 8:return Wi(a,A,A.pendingProps.children,p),A.child;case 12:return Wi(a,A,A.pendingProps.children,p),A.child;case 10:return v=A.pendingProps,Hl(A,A.type,v.value),Wi(a,A,v.children,p),A.child;case 9:return S=A.type._context,v=A.pendingProps.children,JA(A),S=zi(S),v=v(S),A.flags|=1,Wi(a,A,v,p),A.child;case 14:return pE(a,A,A.type,A.pendingProps,p);case 15:return mE(a,A,A.type,A.pendingProps,p);case 19:return TE(a,A,p);case 31:return w5(a,A,p);case 22:return xE(a,A,p,A.pendingProps);case 24:return JA(A),v=zi(hi),a===null?(S=um(),S===null&&(S=Bn,R=Am(),S.pooledCache=R,R.refCount++,R!==null&&(S.pooledCacheLanes|=p),S=R),A.memoizedState={parent:v,cache:S},dm(A),Hl(A,hi,S)):((a.lanes&p)!==0&&(hm(a,A),k0(A,null,null,p),F0()),S=a.memoizedState,R=A.memoizedState,S.parent!==v?(S={parent:v,cache:v},A.memoizedState=S,A.lanes===0&&(A.memoizedState=A.updateQueue.baseState=S),Hl(A,hi,v)):(v=R.cache,Hl(A,hi,v),v!==S.cache&&lm(A,[hi],p,!0))),Wi(a,A,A.pendingProps.children,p),A.child;case 29:throw A.pendingProps}throw Error(n(156,A.tag))}function rl(a){a.flags|=4}function Xm(a,A,p,v,S){if((A=(a.mode&32)!==0)&&(A=!1),A){if(a.flags|=16777216,(S&335544128)===S)if(a.stateNode.complete)a.flags|=8192;else if(eb())a.flags|=8192;else throw ec=ih,fm}else a.flags&=-16777217}function SE(a,A){if(A.type!=="stylesheet"||(A.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Vb(A))if(eb())a.flags|=8192;else throw ec=ih,fm}function yh(a,A){A!==null&&(a.flags|=4),a.flags&16384&&(A=a.tag!==22?Be():536870912,a.lanes|=A,fu|=A)}function P0(a,A){if(!Kr)switch(a.tailMode){case"hidden":A=a.tail;for(var p=null;A!==null;)A.alternate!==null&&(p=A),A=A.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?A||a.tail===null?a.tail=null:a.tail.sibling=null:v.sibling=null}}function Mn(a){var A=a.alternate!==null&&a.alternate.child===a.child,p=0,v=0;if(A)for(var S=a.child;S!==null;)p|=S.lanes|S.childLanes,v|=S.subtreeFlags&65011712,v|=S.flags&65011712,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)p|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=v,a.childLanes=p,A}function y5(a,A,p){var v=A.pendingProps;switch(nm(A),A.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(A),null;case 1:return Mn(A),null;case 3:return p=A.stateNode,v=null,a!==null&&(v=a.memoizedState.cache),A.memoizedState.cache!==v&&(A.flags|=2048),Zo(hi),He(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&($c(A)?rl(A):a===null||a.memoizedState.isDehydrated&&(A.flags&256)===0||(A.flags|=1024,sm())),Mn(A),null;case 26:var S=A.type,R=A.memoizedState;return a===null?(rl(A),R!==null?(Mn(A),SE(A,R)):(Mn(A),Xm(A,S,null,v,p))):R?R!==a.memoizedState?(rl(A),Mn(A),SE(A,R)):(Mn(A),A.flags&=-16777217):(a=a.memoizedProps,a!==v&&rl(A),Mn(A),Xm(A,S,a,v,p)),null;case 27:if(Tt(A),p=Ee.current,S=A.type,a!==null&&A.stateNode!=null)a.memoizedProps!==v&&rl(A);else{if(!v){if(A.stateNode===null)throw Error(n(166));return Mn(A),null}a=oe.current,$c(A)?oC(A):(a=Ub(S,v,p),A.stateNode=a,rl(A))}return Mn(A),null;case 5:if(Tt(A),S=A.type,a!==null&&A.stateNode!=null)a.memoizedProps!==v&&rl(A);else{if(!v){if(A.stateNode===null)throw Error(n(166));return Mn(A),null}if(R=oe.current,$c(A))oC(A);else{var j=Mh(Ee.current);switch(R){case 1:R=j.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:R=j.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":R=j.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":R=j.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":R=j.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof v.is=="string"?j.createElement("select",{is:v.is}):j.createElement("select"),v.multiple?R.multiple=!0:v.size&&(R.size=v.size);break;default:R=typeof v.is=="string"?j.createElement(S,{is:v.is}):j.createElement(S)}}R[he]=A,R[pe]=v;e:for(j=A.child;j!==null;){if(j.tag===5||j.tag===6)R.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===A)break e;for(;j.sibling===null;){if(j.return===null||j.return===A)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}A.stateNode=R;e:switch(qi(R,S,v),S){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&rl(A)}}return Mn(A),Xm(A,A.type,a===null?null:a.memoizedProps,A.pendingProps,p),null;case 6:if(a&&A.stateNode!=null)a.memoizedProps!==v&&rl(A);else{if(typeof v!="string"&&A.stateNode===null)throw Error(n(166));if(a=Ee.current,$c(A)){if(a=A.stateNode,p=A.memoizedProps,v=null,S=Ki,S!==null)switch(S.tag){case 27:case 5:v=S.memoizedProps}a[he]=A,a=!!(a.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||bb(a.nodeValue,p)),a||Ql(A,!0)}else a=Mh(a).createTextNode(v),a[he]=A,A.stateNode=a}return Mn(A),null;case 31:if(p=A.memoizedState,a===null||a.memoizedState!==null){if(v=$c(A),p!==null){if(a===null){if(!v)throw Error(n(318));if(a=A.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[he]=A}else XA(),(A.flags&128)===0&&(A.memoizedState=null),A.flags|=4;Mn(A),a=!1}else p=sm(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),a=!0;if(!a)return A.flags&256?(Aa(A),A):(Aa(A),null);if((A.flags&128)!==0)throw Error(n(558))}return Mn(A),null;case 13:if(v=A.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(S=$c(A),v!==null&&v.dehydrated!==null){if(a===null){if(!S)throw Error(n(318));if(S=A.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[he]=A}else XA(),(A.flags&128)===0&&(A.memoizedState=null),A.flags|=4;Mn(A),S=!1}else S=sm(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=S),S=!0;if(!S)return A.flags&256?(Aa(A),A):(Aa(A),null)}return Aa(A),(A.flags&128)!==0?(A.lanes=p,A):(p=v!==null,a=a!==null&&a.memoizedState!==null,p&&(v=A.child,S=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(S=v.alternate.memoizedState.cachePool.pool),R=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(R=v.memoizedState.cachePool.pool),R!==S&&(v.flags|=2048)),p!==a&&p&&(A.child.flags|=8192),yh(A,A.updateQueue),Mn(A),null);case 4:return He(),a===null&&mx(A.stateNode.containerInfo),Mn(A),null;case 10:return Zo(A.type),Mn(A),null;case 19:if(q(oi),v=A.memoizedState,v===null)return Mn(A),null;if(S=(A.flags&128)!==0,R=v.rendering,R===null)if(S)P0(v,!1);else{if(ei!==0||a!==null&&(a.flags&128)!==0)for(a=A.child;a!==null;){if(R=lh(a),R!==null){for(A.flags|=128,P0(v,!1),a=R.updateQueue,A.updateQueue=a,yh(A,a),A.subtreeFlags=0,a=p,p=A.child;p!==null;)rC(p,a),p=p.sibling;return ce(oi,oi.current&1|2),Kr&&Yo(A,v.treeForkCount),A.child}a=a.sibling}v.tail!==null&&Ue()>Th&&(A.flags|=128,S=!0,P0(v,!1),A.lanes=4194304)}else{if(!S)if(a=lh(R),a!==null){if(A.flags|=128,S=!0,a=a.updateQueue,A.updateQueue=a,yh(A,a),P0(v,!0),v.tail===null&&v.tailMode==="hidden"&&!R.alternate&&!Kr)return Mn(A),null}else 2*Ue()-v.renderingStartTime>Th&&p!==536870912&&(A.flags|=128,S=!0,P0(v,!1),A.lanes=4194304);v.isBackwards?(R.sibling=A.child,A.child=R):(a=v.last,a!==null?a.sibling=R:A.child=R,v.last=R)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=Ue(),a.sibling=null,p=oi.current,ce(oi,S?p&1|2:p&1),Kr&&Yo(A,v.treeForkCount),a):(Mn(A),null);case 22:case 23:return Aa(A),xm(),v=A.memoizedState!==null,a!==null?a.memoizedState!==null!==v&&(A.flags|=8192):v&&(A.flags|=8192),v?(p&536870912)!==0&&(A.flags&128)===0&&(Mn(A),A.subtreeFlags&6&&(A.flags|=8192)):Mn(A),p=A.updateQueue,p!==null&&yh(A,p.retryQueue),p=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),v=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),v!==p&&(A.flags|=2048),a!==null&&q(ZA),null;case 24:return p=null,a!==null&&(p=a.memoizedState.cache),A.memoizedState.cache!==p&&(A.flags|=2048),Zo(hi),Mn(A),null;case 25:return null;case 30:return null}throw Error(n(156,A.tag))}function C5(a,A){switch(nm(A),A.tag){case 1:return a=A.flags,a&65536?(A.flags=a&-65537|128,A):null;case 3:return Zo(hi),He(),a=A.flags,(a&65536)!==0&&(a&128)===0?(A.flags=a&-65537|128,A):null;case 26:case 27:case 5:return Tt(A),null;case 31:if(A.memoizedState!==null){if(Aa(A),A.alternate===null)throw Error(n(340));XA()}return a=A.flags,a&65536?(A.flags=a&-65537|128,A):null;case 13:if(Aa(A),a=A.memoizedState,a!==null&&a.dehydrated!==null){if(A.alternate===null)throw Error(n(340));XA()}return a=A.flags,a&65536?(A.flags=a&-65537|128,A):null;case 19:return q(oi),null;case 4:return He(),null;case 10:return Zo(A.type),null;case 22:case 23:return Aa(A),xm(),a!==null&&q(ZA),a=A.flags,a&65536?(A.flags=a&-65537|128,A):null;case 24:return Zo(hi),null;case 25:return null;default:return null}}function IE(a,A){switch(nm(A),A.tag){case 3:Zo(hi),He();break;case 26:case 27:case 5:Tt(A);break;case 4:He();break;case 31:A.memoizedState!==null&&Aa(A);break;case 13:Aa(A);break;case 19:q(oi);break;case 10:Zo(A.type);break;case 22:case 23:Aa(A),xm(),a!==null&&q(ZA);break;case 24:Zo(hi)}}function Q0(a,A){try{var p=A.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var S=v.next;p=S;do{if((p.tag&a)===a){v=void 0;var R=p.create,j=p.inst;v=R(),j.destroy=v}p=p.next}while(p!==S)}}catch(le){pn(A,A.return,le)}}function Wl(a,A,p){try{var v=A.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var R=S.next;v=R;do{if((v.tag&a)===a){var j=v.inst,le=j.destroy;if(le!==void 0){j.destroy=void 0,S=A;var Te=p,We=le;try{We()}catch(ot){pn(S,Te,ot)}}}v=v.next}while(v!==R)}}catch(ot){pn(A,A.return,ot)}}function NE(a){var A=a.updateQueue;if(A!==null){var p=a.stateNode;try{vC(A,p)}catch(v){pn(a,a.return,v)}}}function RE(a,A,p){p.props=nc(a.type,a.memoizedProps),p.state=a.memoizedState;try{p.componentWillUnmount()}catch(v){pn(a,A,v)}}function H0(a,A){try{var p=a.ref;if(p!==null){switch(a.tag){case 26:case 27:case 5:var v=a.stateNode;break;case 30:v=a.stateNode;break;default:v=a.stateNode}typeof p=="function"?a.refCleanup=p(v):p.current=v}}catch(S){pn(a,A,S)}}function Eo(a,A){var p=a.ref,v=a.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(S){pn(a,A,S)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){pn(a,A,S)}else p.current=null}function FE(a){var A=a.type,p=a.memoizedProps,v=a.stateNode;try{e:switch(A){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(S){pn(a,a.return,S)}}function Ym(a,A,p){try{var v=a.stateNode;G5(v,a.type,p,A),v[pe]=A}catch(S){pn(a,a.return,S)}}function kE(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&eA(a.type)||a.tag===4}function Jm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||kE(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&eA(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Zm(a,A,p){var v=a.tag;if(v===5||v===6)a=a.stateNode,A?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(a,A):(A=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,A.appendChild(a),p=p._reactRootContainer,p!=null||A.onclick!==null||(A.onclick=Gn));else if(v!==4&&(v===27&&eA(a.type)&&(p=a.stateNode,A=null),a=a.child,a!==null))for(Zm(a,A,p),a=a.sibling;a!==null;)Zm(a,A,p),a=a.sibling}function Ch(a,A,p){var v=a.tag;if(v===5||v===6)a=a.stateNode,A?p.insertBefore(a,A):p.appendChild(a);else if(v!==4&&(v===27&&eA(a.type)&&(p=a.stateNode),a=a.child,a!==null))for(Ch(a,A,p),a=a.sibling;a!==null;)Ch(a,A,p),a=a.sibling}function DE(a){var A=a.stateNode,p=a.memoizedProps;try{for(var v=a.type,S=A.attributes;S.length;)A.removeAttributeNode(S[0]);qi(A,v,p),A[he]=a,A[pe]=p}catch(R){pn(a,a.return,R)}}var nl=!1,mi=!1,$m=!1,UE=typeof WeakSet=="function"?WeakSet:Set,Di=null;function E5(a,A){if(a=a.containerInfo,vx=Vh,a=Z(a),se(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var S=v.anchorOffset,R=v.focusNode;v=v.focusOffset;try{p.nodeType,R.nodeType}catch{p=null;break e}var j=0,le=-1,Te=-1,We=0,ot=0,dt=a,Ye=null;t:for(;;){for(var rt;dt!==p||S!==0&&dt.nodeType!==3||(le=j+S),dt!==R||v!==0&&dt.nodeType!==3||(Te=j+v),dt.nodeType===3&&(j+=dt.nodeValue.length),(rt=dt.firstChild)!==null;)Ye=dt,dt=rt;for(;;){if(dt===a)break t;if(Ye===p&&++We===S&&(le=j),Ye===R&&++ot===v&&(Te=j),(rt=dt.nextSibling)!==null)break;dt=Ye,Ye=dt.parentNode}dt=rt}p=le===-1||Te===-1?null:{start:le,end:Te}}else p=null}p=p||{start:0,end:0}}else p=null;for(yx={focusedElem:a,selectionRange:p},Vh=!1,Di=A;Di!==null;)if(A=Di,a=A.child,(A.subtreeFlags&1028)!==0&&a!==null)a.return=A,Di=a;else for(;Di!==null;){switch(A=Di,R=A.alternate,a=A.flags,A.tag){case 0:if((a&4)!==0&&(a=A.updateQueue,a=a!==null?a.events:null,a!==null))for(p=0;p<a.length;p++)S=a[p],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&R!==null){a=void 0,p=A,S=R.memoizedProps,R=R.memoizedState,v=p.stateNode;try{var qt=nc(p.type,S);a=v.getSnapshotBeforeUpdate(qt,R),v.__reactInternalSnapshotBeforeUpdate=a}catch(Ar){pn(p,p.return,Ar)}}break;case 3:if((a&1024)!==0){if(a=A.stateNode.containerInfo,p=a.nodeType,p===9)bx(a);else if(p===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":bx(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=A.sibling,a!==null){a.return=A.return,Di=a;break}Di=A.return}}function ME(a,A,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:sl(a,p),v&4&&Q0(5,p);break;case 1:if(sl(a,p),v&4)if(a=p.stateNode,A===null)try{a.componentDidMount()}catch(j){pn(p,p.return,j)}else{var S=nc(p.type,A.memoizedProps);A=A.memoizedState;try{a.componentDidUpdate(S,A,a.__reactInternalSnapshotBeforeUpdate)}catch(j){pn(p,p.return,j)}}v&64&&NE(p),v&512&&H0(p,p.return);break;case 3:if(sl(a,p),v&64&&(a=p.updateQueue,a!==null)){if(A=null,p.child!==null)switch(p.child.tag){case 27:case 5:A=p.child.stateNode;break;case 1:A=p.child.stateNode}try{vC(a,A)}catch(j){pn(p,p.return,j)}}break;case 27:A===null&&v&4&&DE(p);case 26:case 5:sl(a,p),A===null&&v&4&&FE(p),v&512&&H0(p,p.return);break;case 12:sl(a,p);break;case 31:sl(a,p),v&4&&PE(a,p);break;case 13:sl(a,p),v&4&&QE(a,p),v&64&&(a=p.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(p=F5.bind(null,p),Z5(a,p))));break;case 22:if(v=p.memoizedState!==null||nl,!v){A=A!==null&&A.memoizedState!==null||mi,S=nl;var R=mi;nl=v,(mi=A)&&!R?al(a,p,(p.subtreeFlags&8772)!==0):sl(a,p),nl=S,mi=R}break;case 30:break;default:sl(a,p)}}function OE(a){var A=a.alternate;A!==null&&(a.alternate=null,OE(A)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(A=a.stateNode,A!==null&&ht(A)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Qn=null,zs=!1;function il(a,A,p){for(p=p.child;p!==null;)LE(a,A,p),p=p.sibling}function LE(a,A,p){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(yt,p)}catch{}switch(p.tag){case 26:mi||Eo(p,A),il(a,A,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:mi||Eo(p,A);var v=Qn,S=zs;eA(p.type)&&(Qn=p.stateNode,zs=!1),il(a,A,p),Y0(p.stateNode),Qn=v,zs=S;break;case 5:mi||Eo(p,A);case 6:if(v=Qn,S=zs,Qn=null,il(a,A,p),Qn=v,zs=S,Qn!==null)if(zs)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(p.stateNode)}catch(R){pn(p,A,R)}else try{Qn.removeChild(p.stateNode)}catch(R){pn(p,A,R)}break;case 18:Qn!==null&&(zs?(a=Qn,Nb(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,p.stateNode),vu(a)):Nb(Qn,p.stateNode));break;case 4:v=Qn,S=zs,Qn=p.stateNode.containerInfo,zs=!0,il(a,A,p),Qn=v,zs=S;break;case 0:case 11:case 14:case 15:Wl(2,p,A),mi||Wl(4,p,A),il(a,A,p);break;case 1:mi||(Eo(p,A),v=p.stateNode,typeof v.componentWillUnmount=="function"&&RE(p,A,v)),il(a,A,p);break;case 21:il(a,A,p);break;case 22:mi=(v=mi)||p.memoizedState!==null,il(a,A,p),mi=v;break;default:il(a,A,p)}}function PE(a,A){if(A.memoizedState===null&&(a=A.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{vu(a)}catch(p){pn(A,A.return,p)}}}function QE(a,A){if(A.memoizedState===null&&(a=A.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{vu(a)}catch(p){pn(A,A.return,p)}}function b5(a){switch(a.tag){case 31:case 13:case 19:var A=a.stateNode;return A===null&&(A=a.stateNode=new UE),A;case 22:return a=a.stateNode,A=a._retryCache,A===null&&(A=a._retryCache=new UE),A;default:throw Error(n(435,a.tag))}}function Eh(a,A){var p=b5(a);A.forEach(function(v){if(!p.has(v)){p.add(v);var S=k5.bind(null,a,v);v.then(S,S)}})}function Ws(a,A){var p=A.deletions;if(p!==null)for(var v=0;v<p.length;v++){var S=p[v],R=a,j=A,le=j;e:for(;le!==null;){switch(le.tag){case 27:if(eA(le.type)){Qn=le.stateNode,zs=!1;break e}break;case 5:Qn=le.stateNode,zs=!1;break e;case 3:case 4:Qn=le.stateNode.containerInfo,zs=!0;break e}le=le.return}if(Qn===null)throw Error(n(160));LE(R,j,S),Qn=null,zs=!1,R=S.alternate,R!==null&&(R.return=null),S.return=null}if(A.subtreeFlags&13886)for(A=A.child;A!==null;)HE(A,a),A=A.sibling}var $a=null;function HE(a,A){var p=a.alternate,v=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ws(A,a),qs(a),v&4&&(Wl(3,a,a.return),Q0(3,a),Wl(5,a,a.return));break;case 1:Ws(A,a),qs(a),v&512&&(mi||p===null||Eo(p,p.return)),v&64&&nl&&(a=a.updateQueue,a!==null&&(v=a.callbacks,v!==null&&(p=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var S=$a;if(Ws(A,a),qs(a),v&512&&(mi||p===null||Eo(p,p.return)),v&4){var R=p!==null?p.memoizedState:null;if(v=a.memoizedState,p===null)if(v===null)if(a.stateNode===null){e:{v=a.type,p=a.memoizedProps,S=S.ownerDocument||S;t:switch(v){case"title":R=S.getElementsByTagName("title")[0],(!R||R[Xe]||R[he]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=S.createElement(v),S.head.insertBefore(R,S.querySelector("head > title"))),qi(R,v,p),R[he]=a,Gt(R),v=R;break e;case"link":var j=Hb("link","href",S).get(v+(p.href||""));if(j){for(var le=0;le<j.length;le++)if(R=j[le],R.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&R.getAttribute("rel")===(p.rel==null?null:p.rel)&&R.getAttribute("title")===(p.title==null?null:p.title)&&R.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){j.splice(le,1);break t}}R=S.createElement(v),qi(R,v,p),S.head.appendChild(R);break;case"meta":if(j=Hb("meta","content",S).get(v+(p.content||""))){for(le=0;le<j.length;le++)if(R=j[le],R.getAttribute("content")===(p.content==null?null:""+p.content)&&R.getAttribute("name")===(p.name==null?null:p.name)&&R.getAttribute("property")===(p.property==null?null:p.property)&&R.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&R.getAttribute("charset")===(p.charSet==null?null:p.charSet)){j.splice(le,1);break t}}R=S.createElement(v),qi(R,v,p),S.head.appendChild(R);break;default:throw Error(n(468,v))}R[he]=a,Gt(R),v=R}a.stateNode=v}else jb(S,a.type,a.stateNode);else a.stateNode=Qb(S,v,a.memoizedProps);else R!==v?(R===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):R.count--,v===null?jb(S,a.type,a.stateNode):Qb(S,v,a.memoizedProps)):v===null&&a.stateNode!==null&&Ym(a,a.memoizedProps,p.memoizedProps)}break;case 27:Ws(A,a),qs(a),v&512&&(mi||p===null||Eo(p,p.return)),p!==null&&v&4&&Ym(a,a.memoizedProps,p.memoizedProps);break;case 5:if(Ws(A,a),qs(a),v&512&&(mi||p===null||Eo(p,p.return)),a.flags&32){S=a.stateNode;try{Os(S,"")}catch(qt){pn(a,a.return,qt)}}v&4&&a.stateNode!=null&&(S=a.memoizedProps,Ym(a,S,p!==null?p.memoizedProps:S)),v&1024&&($m=!0);break;case 6:if(Ws(A,a),qs(a),v&4){if(a.stateNode===null)throw Error(n(162));v=a.memoizedProps,p=a.stateNode;try{p.nodeValue=v}catch(qt){pn(a,a.return,qt)}}break;case 3:if(Ph=null,S=$a,$a=Oh(A.containerInfo),Ws(A,a),$a=S,qs(a),v&4&&p!==null&&p.memoizedState.isDehydrated)try{vu(A.containerInfo)}catch(qt){pn(a,a.return,qt)}$m&&($m=!1,jE(a));break;case 4:v=$a,$a=Oh(a.stateNode.containerInfo),Ws(A,a),qs(a),$a=v;break;case 12:Ws(A,a),qs(a);break;case 31:Ws(A,a),qs(a),v&4&&(v=a.updateQueue,v!==null&&(a.updateQueue=null,Eh(a,v)));break;case 13:Ws(A,a),qs(a),a.child.flags&8192&&a.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(_h=Ue()),v&4&&(v=a.updateQueue,v!==null&&(a.updateQueue=null,Eh(a,v)));break;case 22:S=a.memoizedState!==null;var Te=p!==null&&p.memoizedState!==null,We=nl,ot=mi;if(nl=We||S,mi=ot||Te,Ws(A,a),mi=ot,nl=We,qs(a),v&8192)e:for(A=a.stateNode,A._visibility=S?A._visibility&-2:A._visibility|1,S&&(p===null||Te||nl||mi||ic(a)),p=null,A=a;;){if(A.tag===5||A.tag===26){if(p===null){Te=p=A;try{if(R=Te.stateNode,S)j=R.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{le=Te.stateNode;var dt=Te.memoizedProps.style,Ye=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;le.style.display=Ye==null||typeof Ye=="boolean"?"":(""+Ye).trim()}}catch(qt){pn(Te,Te.return,qt)}}}else if(A.tag===6){if(p===null){Te=A;try{Te.stateNode.nodeValue=S?"":Te.memoizedProps}catch(qt){pn(Te,Te.return,qt)}}}else if(A.tag===18){if(p===null){Te=A;try{var rt=Te.stateNode;S?Rb(rt,!0):Rb(Te.stateNode,!1)}catch(qt){pn(Te,Te.return,qt)}}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===a)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;p===A&&(p=null),A=A.return}p===A&&(p=null),A.sibling.return=A.return,A=A.sibling}v&4&&(v=a.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,Eh(a,p))));break;case 19:Ws(A,a),qs(a),v&4&&(v=a.updateQueue,v!==null&&(a.updateQueue=null,Eh(a,v)));break;case 30:break;case 21:break;default:Ws(A,a),qs(a)}}function qs(a){var A=a.flags;if(A&2){try{for(var p,v=a.return;v!==null;){if(kE(v)){p=v;break}v=v.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var S=p.stateNode,R=Jm(a);Ch(a,R,S);break;case 5:var j=p.stateNode;p.flags&32&&(Os(j,""),p.flags&=-33);var le=Jm(a);Ch(a,le,j);break;case 3:case 4:var Te=p.stateNode.containerInfo,We=Jm(a);Zm(a,We,Te);break;default:throw Error(n(161))}}catch(ot){pn(a,a.return,ot)}a.flags&=-3}A&4096&&(a.flags&=-4097)}function jE(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var A=a;jE(A),A.tag===5&&A.flags&1024&&A.stateNode.reset(),a=a.sibling}}function sl(a,A){if(A.subtreeFlags&8772)for(A=A.child;A!==null;)ME(a,A.alternate,A),A=A.sibling}function ic(a){for(a=a.child;a!==null;){var A=a;switch(A.tag){case 0:case 11:case 14:case 15:Wl(4,A,A.return),ic(A);break;case 1:Eo(A,A.return);var p=A.stateNode;typeof p.componentWillUnmount=="function"&&RE(A,A.return,p),ic(A);break;case 27:Y0(A.stateNode);case 26:case 5:Eo(A,A.return),ic(A);break;case 22:A.memoizedState===null&&ic(A);break;case 30:ic(A);break;default:ic(A)}a=a.sibling}}function al(a,A,p){for(p=p&&(A.subtreeFlags&8772)!==0,A=A.child;A!==null;){var v=A.alternate,S=a,R=A,j=R.flags;switch(R.tag){case 0:case 11:case 15:al(S,R,p),Q0(4,R);break;case 1:if(al(S,R,p),v=R,S=v.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(We){pn(v,v.return,We)}if(v=R,S=v.updateQueue,S!==null){var le=v.stateNode;try{var Te=S.shared.hiddenCallbacks;if(Te!==null)for(S.shared.hiddenCallbacks=null,S=0;S<Te.length;S++)wC(Te[S],le)}catch(We){pn(v,v.return,We)}}p&&j&64&&NE(R),H0(R,R.return);break;case 27:DE(R);case 26:case 5:al(S,R,p),p&&v===null&&j&4&&FE(R),H0(R,R.return);break;case 12:al(S,R,p);break;case 31:al(S,R,p),p&&j&4&&PE(S,R);break;case 13:al(S,R,p),p&&j&4&&QE(S,R);break;case 22:R.memoizedState===null&&al(S,R,p),H0(R,R.return);break;case 30:break;default:al(S,R,p)}A=A.sibling}}function ex(a,A){var p=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),a=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(a=A.memoizedState.cachePool.pool),a!==p&&(a!=null&&a.refCount++,p!=null&&B0(p))}function tx(a,A){a=null,A.alternate!==null&&(a=A.alternate.memoizedState.cache),A=A.memoizedState.cache,A!==a&&(A.refCount++,a!=null&&B0(a))}function eo(a,A,p,v){if(A.subtreeFlags&10256)for(A=A.child;A!==null;)VE(a,A,p,v),A=A.sibling}function VE(a,A,p,v){var S=A.flags;switch(A.tag){case 0:case 11:case 15:eo(a,A,p,v),S&2048&&Q0(9,A);break;case 1:eo(a,A,p,v);break;case 3:eo(a,A,p,v),S&2048&&(a=null,A.alternate!==null&&(a=A.alternate.memoizedState.cache),A=A.memoizedState.cache,A!==a&&(A.refCount++,a!=null&&B0(a)));break;case 12:if(S&2048){eo(a,A,p,v),a=A.stateNode;try{var R=A.memoizedProps,j=R.id,le=R.onPostCommit;typeof le=="function"&&le(j,A.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Te){pn(A,A.return,Te)}}else eo(a,A,p,v);break;case 31:eo(a,A,p,v);break;case 13:eo(a,A,p,v);break;case 23:break;case 22:R=A.stateNode,j=A.alternate,A.memoizedState!==null?R._visibility&2?eo(a,A,p,v):j0(a,A):R._visibility&2?eo(a,A,p,v):(R._visibility|=2,Au(a,A,p,v,(A.subtreeFlags&10256)!==0||!1)),S&2048&&ex(j,A);break;case 24:eo(a,A,p,v),S&2048&&tx(A.alternate,A);break;default:eo(a,A,p,v)}}function Au(a,A,p,v,S){for(S=S&&((A.subtreeFlags&10256)!==0||!1),A=A.child;A!==null;){var R=a,j=A,le=p,Te=v,We=j.flags;switch(j.tag){case 0:case 11:case 15:Au(R,j,le,Te,S),Q0(8,j);break;case 23:break;case 22:var ot=j.stateNode;j.memoizedState!==null?ot._visibility&2?Au(R,j,le,Te,S):j0(R,j):(ot._visibility|=2,Au(R,j,le,Te,S)),S&&We&2048&&ex(j.alternate,j);break;case 24:Au(R,j,le,Te,S),S&&We&2048&&tx(j.alternate,j);break;default:Au(R,j,le,Te,S)}A=A.sibling}}function j0(a,A){if(A.subtreeFlags&10256)for(A=A.child;A!==null;){var p=a,v=A,S=v.flags;switch(v.tag){case 22:j0(p,v),S&2048&&ex(v.alternate,v);break;case 24:j0(p,v),S&2048&&tx(v.alternate,v);break;default:j0(p,v)}A=A.sibling}}var V0=8192;function cu(a,A,p){if(a.subtreeFlags&V0)for(a=a.child;a!==null;)GE(a,A,p),a=a.sibling}function GE(a,A,p){switch(a.tag){case 26:cu(a,A,p),a.flags&V0&&a.memoizedState!==null&&c6(p,$a,a.memoizedState,a.memoizedProps);break;case 5:cu(a,A,p);break;case 3:case 4:var v=$a;$a=Oh(a.stateNode.containerInfo),cu(a,A,p),$a=v;break;case 22:a.memoizedState===null&&(v=a.alternate,v!==null&&v.memoizedState!==null?(v=V0,V0=16777216,cu(a,A,p),V0=v):cu(a,A,p));break;default:cu(a,A,p)}}function KE(a){var A=a.alternate;if(A!==null&&(a=A.child,a!==null)){A.child=null;do A=a.sibling,a.sibling=null,a=A;while(a!==null)}}function G0(a){var A=a.deletions;if((a.flags&16)!==0){if(A!==null)for(var p=0;p<A.length;p++){var v=A[p];Di=v,WE(v,a)}KE(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)zE(a),a=a.sibling}function zE(a){switch(a.tag){case 0:case 11:case 15:G0(a),a.flags&2048&&Wl(9,a,a.return);break;case 3:G0(a);break;case 12:G0(a);break;case 22:var A=a.stateNode;a.memoizedState!==null&&A._visibility&2&&(a.return===null||a.return.tag!==13)?(A._visibility&=-3,bh(a)):G0(a);break;default:G0(a)}}function bh(a){var A=a.deletions;if((a.flags&16)!==0){if(A!==null)for(var p=0;p<A.length;p++){var v=A[p];Di=v,WE(v,a)}KE(a)}for(a=a.child;a!==null;){switch(A=a,A.tag){case 0:case 11:case 15:Wl(8,A,A.return),bh(A);break;case 22:p=A.stateNode,p._visibility&2&&(p._visibility&=-3,bh(A));break;default:bh(A)}a=a.sibling}}function WE(a,A){for(;Di!==null;){var p=Di;switch(p.tag){case 0:case 11:case 15:Wl(8,p,A);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:B0(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Di=v;else e:for(p=a;Di!==null;){v=Di;var S=v.sibling,R=v.return;if(OE(v),v===p){Di=null;break e}if(S!==null){S.return=R,Di=S;break e}Di=R}}}var _5={getCacheForType:function(a){var A=zi(hi),p=A.data.get(a);return p===void 0&&(p=a(),A.data.set(a,p)),p},cacheSignal:function(){return zi(hi).controller.signal}},T5=typeof WeakMap=="function"?WeakMap:Map,An=0,Bn=null,Mr=null,Pr=0,gn=0,ca=null,ql=!1,uu=!1,rx=!1,ol=0,ei=0,Xl=0,sc=0,nx=0,ua=0,fu=0,K0=null,Xs=null,ix=!1,_h=0,qE=0,Th=1/0,Bh=null,Yl=null,Ti=0,Jl=null,du=null,ll=0,sx=0,ax=null,XE=null,z0=0,ox=null;function fa(){return(An&2)!==0&&Pr!==0?Pr&-Pr:de.T!==null?dx():ie()}function YE(){if(ua===0)if((Pr&536870912)===0||Kr){var a=Mt;Mt<<=1,(Mt&3932160)===0&&(Mt=262144),ua=a}else ua=536870912;return a=la.current,a!==null&&(a.flags|=32),ua}function Ys(a,A,p){(a===Bn&&(gn===2||gn===9)||a.cancelPendingCommit!==null)&&(hu(a,0),Zl(a,Pr,ua,!1)),at(a,p),((An&2)===0||a!==Bn)&&(a===Bn&&((An&2)===0&&(sc|=p),ei===4&&Zl(a,Pr,ua,!1)),bo(a))}function JE(a,A,p){if((An&6)!==0)throw Error(n(327));var v=!p&&(A&127)===0&&(A&a.expiredLanes)===0||Vr(a,A),S=v?I5(a,A):Ax(a,A,!0),R=v;do{if(S===0){uu&&!v&&Zl(a,A,0,!1);break}else{if(p=a.current.alternate,R&&!B5(p)){S=Ax(a,A,!1),R=!1;continue}if(S===2){if(R=A,a.errorRecoveryDisabledLanes&R)var j=0;else j=a.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){A=j;e:{var le=a;S=K0;var Te=le.current.memoizedState.isDehydrated;if(Te&&(hu(le,j).flags|=256),j=Ax(le,j,!1),j!==2){if(rx&&!Te){le.errorRecoveryDisabledLanes|=R,sc|=R,S=4;break e}R=Xs,Xs=S,R!==null&&(Xs===null?Xs=R:Xs.push.apply(Xs,R))}S=j}if(R=!1,S!==2)continue}}if(S===1){hu(a,0),Zl(a,A,0,!0);break}e:{switch(v=a,R=S,R){case 0:case 1:throw Error(n(345));case 4:if((A&4194048)!==A)break;case 6:Zl(v,A,ua,!ql);break e;case 2:Xs=null;break;case 3:case 5:break;default:throw Error(n(329))}if((A&62914560)===A&&(S=_h+300-Ue(),10<S)){if(Zl(v,A,ua,!ql),qr(v,0,!0)!==0)break e;ll=A,v.timeoutHandle=Sb(ZE.bind(null,v,p,Xs,Bh,ix,A,ua,sc,fu,ql,R,"Throttled",-0,0),S);break e}ZE(v,p,Xs,Bh,ix,A,ua,sc,fu,ql,R,null,-0,0)}}break}while(!0);bo(a)}function ZE(a,A,p,v,S,R,j,le,Te,We,ot,dt,Ye,rt){if(a.timeoutHandle=-1,dt=A.subtreeFlags,dt&8192||(dt&16785408)===16785408){dt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},GE(A,R,dt);var qt=(R&62914560)===R?_h-Ue():(R&4194048)===R?qE-Ue():0;if(qt=u6(dt,qt),qt!==null){ll=R,a.cancelPendingCommit=qt(ab.bind(null,a,A,R,p,v,S,j,le,Te,ot,dt,null,Ye,rt)),Zl(a,R,j,!We);return}}ab(a,A,R,p,v,S,j,le,Te)}function B5(a){for(var A=a;;){var p=A.tag;if((p===0||p===11||p===15)&&A.flags&16384&&(p=A.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var S=p[v],R=S.getSnapshot;S=S.value;try{if(!y(R(),S))return!1}catch{return!1}}if(p=A.child,A.subtreeFlags&16384&&p!==null)p.return=A,A=p;else{if(A===a)break;for(;A.sibling===null;){if(A.return===null||A.return===a)return!0;A=A.return}A.sibling.return=A.return,A=A.sibling}}return!0}function Zl(a,A,p,v){A&=~nx,A&=~sc,a.suspendedLanes|=A,a.pingedLanes&=~A,v&&(a.warmLanes|=A),v=a.expirationTimes;for(var S=A;0<S;){var R=31-Re(S),j=1<<R;v[R]=-1,S&=~j}p!==0&&lr(a,p,A)}function Sh(){return(An&6)===0?(W0(0),!1):!0}function lx(){if(Mr!==null){if(gn===0)var a=Mr.return;else a=Mr,Jo=YA=null,bm(a),iu=null,I0=0,a=Mr;for(;a!==null;)IE(a.alternate,a),a=a.return;Mr=null}}function hu(a,A){var p=a.timeoutHandle;p!==-1&&(a.timeoutHandle=-1,W5(p)),p=a.cancelPendingCommit,p!==null&&(a.cancelPendingCommit=null,p()),ll=0,lx(),Bn=a,Mr=p=Xo(a.current,null),Pr=A,gn=0,ca=null,ql=!1,uu=Vr(a,A),rx=!1,fu=ua=nx=sc=Xl=ei=0,Xs=K0=null,ix=!1,(A&8)!==0&&(A|=A&32);var v=a.entangledLanes;if(v!==0)for(a=a.entanglements,v&=A;0<v;){var S=31-Re(v),R=1<<S;A|=a[S],v&=~R}return ol=A,Xd(),p}function $E(a,A){Sr=null,de.H=O0,A===nu||A===nh?(A=gC(),gn=3):A===fm?(A=gC(),gn=4):gn=A===Qm?8:A!==null&&typeof A=="object"&&typeof A.then=="function"?6:1,ca=A,Mr===null&&(ei=1,mh(a,Ia(A,a.current)))}function eb(){var a=la.current;return a===null?!0:(Pr&4194048)===Pr?ka===null:(Pr&62914560)===Pr||(Pr&536870912)!==0?a===ka:!1}function tb(){var a=de.H;return de.H=O0,a===null?O0:a}function rb(){var a=de.A;return de.A=_5,a}function Ih(){ei=4,ql||(Pr&4194048)!==Pr&&la.current!==null||(uu=!0),(Xl&134217727)===0&&(sc&134217727)===0||Bn===null||Zl(Bn,Pr,ua,!1)}function Ax(a,A,p){var v=An;An|=2;var S=tb(),R=rb();(Bn!==a||Pr!==A)&&(Bh=null,hu(a,A)),A=!1;var j=ei;e:do try{if(gn!==0&&Mr!==null){var le=Mr,Te=ca;switch(gn){case 8:lx(),j=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(A=!0);var We=gn;if(gn=0,ca=null,gu(a,le,Te,We),p&&uu){j=0;break e}break;default:We=gn,gn=0,ca=null,gu(a,le,Te,We)}}S5(),j=ei;break}catch(ot){$E(a,ot)}while(!0);return A&&a.shellSuspendCounter++,Jo=YA=null,An=v,de.H=S,de.A=R,Mr===null&&(Bn=null,Pr=0,Xd()),j}function S5(){for(;Mr!==null;)nb(Mr)}function I5(a,A){var p=An;An|=2;var v=tb(),S=rb();Bn!==a||Pr!==A?(Bh=null,Th=Ue()+500,hu(a,A)):uu=Vr(a,A);e:do try{if(gn!==0&&Mr!==null){A=Mr;var R=ca;t:switch(gn){case 1:gn=0,ca=null,gu(a,A,R,1);break;case 2:case 9:if(dC(R)){gn=0,ca=null,ib(A);break}A=function(){gn!==2&&gn!==9||Bn!==a||(gn=7),bo(a)},R.then(A,A);break e;case 3:gn=7;break e;case 4:gn=5;break e;case 7:dC(R)?(gn=0,ca=null,ib(A)):(gn=0,ca=null,gu(a,A,R,7));break;case 5:var j=null;switch(Mr.tag){case 26:j=Mr.memoizedState;case 5:case 27:var le=Mr;if(j?Vb(j):le.stateNode.complete){gn=0,ca=null;var Te=le.sibling;if(Te!==null)Mr=Te;else{var We=le.return;We!==null?(Mr=We,Nh(We)):Mr=null}break t}}gn=0,ca=null,gu(a,A,R,5);break;case 6:gn=0,ca=null,gu(a,A,R,6);break;case 8:lx(),ei=6;break e;default:throw Error(n(462))}}N5();break}catch(ot){$E(a,ot)}while(!0);return Jo=YA=null,de.H=v,de.A=S,An=p,Mr!==null?0:(Bn=null,Pr=0,Xd(),ei)}function N5(){for(;Mr!==null&&!er();)nb(Mr)}function nb(a){var A=BE(a.alternate,a,ol);a.memoizedProps=a.pendingProps,A===null?Nh(a):Mr=A}function ib(a){var A=a,p=A.alternate;switch(A.tag){case 15:case 0:A=yE(p,A,A.pendingProps,A.type,void 0,Pr);break;case 11:A=yE(p,A,A.pendingProps,A.type.render,A.ref,Pr);break;case 5:bm(A);default:IE(p,A),A=Mr=rC(A,ol),A=BE(p,A,ol)}a.memoizedProps=a.pendingProps,A===null?Nh(a):Mr=A}function gu(a,A,p,v){Jo=YA=null,bm(A),iu=null,I0=0;var S=A.return;try{if(x5(a,S,A,p,Pr)){ei=1,mh(a,Ia(p,a.current)),Mr=null;return}}catch(R){if(S!==null)throw Mr=S,R;ei=1,mh(a,Ia(p,a.current)),Mr=null;return}A.flags&32768?(Kr||v===1?a=!0:uu||(Pr&536870912)!==0?a=!1:(ql=a=!0,(v===2||v===9||v===3||v===6)&&(v=la.current,v!==null&&v.tag===13&&(v.flags|=16384))),sb(A,a)):Nh(A)}function Nh(a){var A=a;do{if((A.flags&32768)!==0){sb(A,ql);return}a=A.return;var p=y5(A.alternate,A,ol);if(p!==null){Mr=p;return}if(A=A.sibling,A!==null){Mr=A;return}Mr=A=a}while(A!==null);ei===0&&(ei=5)}function sb(a,A){do{var p=C5(a.alternate,a);if(p!==null){p.flags&=32767,Mr=p;return}if(p=a.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!A&&(a=a.sibling,a!==null)){Mr=a;return}Mr=a=p}while(a!==null);ei=6,Mr=null}function ab(a,A,p,v,S,R,j,le,Te){a.cancelPendingCommit=null;do Rh();while(Ti!==0);if((An&6)!==0)throw Error(n(327));if(A!==null){if(A===a.current)throw Error(n(177));if(R=A.lanes|A.childLanes,R|=Jp,lt(a,p,R,j,le,Te),a===Bn&&(Mr=Bn=null,Pr=0),du=A,Jl=a,ll=p,sx=R,ax=S,XE=v,(A.subtreeFlags&10256)!==0||(A.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,D5(cr,function(){return ub(),null})):(a.callbackNode=null,a.callbackPriority=0),v=(A.flags&13878)!==0,(A.subtreeFlags&13878)!==0||v){v=de.T,de.T=null,S=we.p,we.p=2,j=An,An|=4;try{E5(a,A,p)}finally{An=j,we.p=S,de.T=v}}Ti=1,ob(),lb(),Ab()}}function ob(){if(Ti===1){Ti=0;var a=Jl,A=du,p=(A.flags&13878)!==0;if((A.subtreeFlags&13878)!==0||p){p=de.T,de.T=null;var v=we.p;we.p=2;var S=An;An|=4;try{HE(A,a);var R=yx,j=Z(a.containerInfo),le=R.focusedElem,Te=R.selectionRange;if(j!==le&&le&&le.ownerDocument&&H(le.ownerDocument.documentElement,le)){if(Te!==null&&se(le)){var We=Te.start,ot=Te.end;if(ot===void 0&&(ot=We),"selectionStart"in le)le.selectionStart=We,le.selectionEnd=Math.min(ot,le.value.length);else{var dt=le.ownerDocument||document,Ye=dt&&dt.defaultView||window;if(Ye.getSelection){var rt=Ye.getSelection(),qt=le.textContent.length,Ar=Math.min(Te.start,qt),En=Te.end===void 0?Ar:Math.min(Te.end,qt);!rt.extend&&Ar>En&&(j=En,En=Ar,Ar=j);var Me=D(le,Ar),ke=D(le,En);if(Me&&ke&&(rt.rangeCount!==1||rt.anchorNode!==Me.node||rt.anchorOffset!==Me.offset||rt.focusNode!==ke.node||rt.focusOffset!==ke.offset)){var ze=dt.createRange();ze.setStart(Me.node,Me.offset),rt.removeAllRanges(),Ar>En?(rt.addRange(ze),rt.extend(ke.node,ke.offset)):(ze.setEnd(ke.node,ke.offset),rt.addRange(ze))}}}}for(dt=[],rt=le;rt=rt.parentNode;)rt.nodeType===1&&dt.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<dt.length;le++){var ct=dt[le];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}Vh=!!vx,yx=vx=null}finally{An=S,we.p=v,de.T=p}}a.current=A,Ti=2}}function lb(){if(Ti===2){Ti=0;var a=Jl,A=du,p=(A.flags&8772)!==0;if((A.subtreeFlags&8772)!==0||p){p=de.T,de.T=null;var v=we.p;we.p=2;var S=An;An|=4;try{ME(a,A.alternate,A)}finally{An=S,we.p=v,de.T=p}}Ti=3}}function Ab(){if(Ti===4||Ti===3){Ti=0,Nr();var a=Jl,A=du,p=ll,v=XE;(A.subtreeFlags&10256)!==0||(A.flags&10256)!==0?Ti=5:(Ti=0,du=Jl=null,cb(a,a.pendingLanes));var S=a.pendingLanes;if(S===0&&(Yl=null),di(p),A=A.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(yt,A,void 0,(A.current.flags&128)===128)}catch{}if(v!==null){A=de.T,S=we.p,we.p=2,de.T=null;try{for(var R=a.onRecoverableError,j=0;j<v.length;j++){var le=v[j];R(le.value,{componentStack:le.stack})}}finally{de.T=A,we.p=S}}(ll&3)!==0&&Rh(),bo(a),S=a.pendingLanes,(p&261930)!==0&&(S&42)!==0?a===ox?z0++:(z0=0,ox=a):z0=0,W0(0)}}function cb(a,A){(a.pooledCacheLanes&=A)===0&&(A=a.pooledCache,A!=null&&(a.pooledCache=null,B0(A)))}function Rh(){return ob(),lb(),Ab(),ub()}function ub(){if(Ti!==5)return!1;var a=Jl,A=sx;sx=0;var p=di(ll),v=de.T,S=we.p;try{we.p=32>p?32:p,de.T=null,p=ax,ax=null;var R=Jl,j=ll;if(Ti=0,du=Jl=null,ll=0,(An&6)!==0)throw Error(n(331));var le=An;if(An|=4,zE(R.current),VE(R,R.current,j,p),An=le,W0(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(yt,R)}catch{}return!0}finally{we.p=S,de.T=v,cb(a,A)}}function fb(a,A,p){A=Ia(p,A),A=Pm(a.stateNode,A,2),a=Gl(a,A,2),a!==null&&(at(a,2),bo(a))}function pn(a,A,p){if(a.tag===3)fb(a,a,p);else for(;A!==null;){if(A.tag===3){fb(A,a,p);break}else if(A.tag===1){var v=A.stateNode;if(typeof A.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Yl===null||!Yl.has(v))){a=Ia(p,a),p=dE(2),v=Gl(A,p,2),v!==null&&(hE(p,v,A,a),at(v,2),bo(v));break}}A=A.return}}function cx(a,A,p){var v=a.pingCache;if(v===null){v=a.pingCache=new T5;var S=new Set;v.set(A,S)}else S=v.get(A),S===void 0&&(S=new Set,v.set(A,S));S.has(p)||(rx=!0,S.add(p),a=R5.bind(null,a,A,p),A.then(a,a))}function R5(a,A,p){var v=a.pingCache;v!==null&&v.delete(A),a.pingedLanes|=a.suspendedLanes&p,a.warmLanes&=~p,Bn===a&&(Pr&p)===p&&(ei===4||ei===3&&(Pr&62914560)===Pr&&300>Ue()-_h?(An&2)===0&&hu(a,0):nx|=p,fu===Pr&&(fu=0)),bo(a)}function db(a,A){A===0&&(A=Be()),a=WA(a,A),a!==null&&(at(a,A),bo(a))}function F5(a){var A=a.memoizedState,p=0;A!==null&&(p=A.retryLane),db(a,p)}function k5(a,A){var p=0;switch(a.tag){case 31:case 13:var v=a.stateNode,S=a.memoizedState;S!==null&&(p=S.retryLane);break;case 19:v=a.stateNode;break;case 22:v=a.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(A),db(a,p)}function D5(a,A){return mt(a,A)}var Fh=null,pu=null,ux=!1,kh=!1,fx=!1,$l=0;function bo(a){a!==pu&&a.next===null&&(pu===null?Fh=pu=a:pu=pu.next=a),kh=!0,ux||(ux=!0,M5())}function W0(a,A){if(!fx&&kh){fx=!0;do for(var p=!1,v=Fh;v!==null;){if(a!==0){var S=v.pendingLanes;if(S===0)var R=0;else{var j=v.suspendedLanes,le=v.pingedLanes;R=(1<<31-Re(42|a)+1)-1,R&=S&~(j&~le),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(p=!0,mb(v,R))}else R=Pr,R=qr(v,v===Bn?R:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(R&3)===0||Vr(v,R)||(p=!0,mb(v,R));v=v.next}while(p);fx=!1}}function U5(){hb()}function hb(){kh=ux=!1;var a=0;$l!==0&&z5()&&(a=$l);for(var A=Ue(),p=null,v=Fh;v!==null;){var S=v.next,R=gb(v,A);R===0?(v.next=null,p===null?Fh=S:p.next=S,S===null&&(pu=p)):(p=v,(a!==0||(R&3)!==0)&&(kh=!0)),v=S}Ti!==0&&Ti!==5||W0(a),$l!==0&&($l=0)}function gb(a,A){for(var p=a.suspendedLanes,v=a.pingedLanes,S=a.expirationTimes,R=a.pendingLanes&-62914561;0<R;){var j=31-Re(R),le=1<<j,Te=S[j];Te===-1?((le&p)===0||(le&v)!==0)&&(S[j]=Us(le,A)):Te<=A&&(a.expiredLanes|=le),R&=~le}if(A=Bn,p=Pr,p=qr(a,a===A?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),v=a.callbackNode,p===0||a===A&&(gn===2||gn===9)||a.cancelPendingCommit!==null)return v!==null&&v!==null&&At(v),a.callbackNode=null,a.callbackPriority=0;if((p&3)===0||Vr(a,p)){if(A=p&-p,A===a.callbackPriority)return A;switch(v!==null&&At(v),di(p)){case 2:case 8:p=Zt;break;case 32:p=cr;break;case 268435456:p=Ht;break;default:p=cr}return v=pb.bind(null,a),p=mt(p,v),a.callbackPriority=A,a.callbackNode=p,A}return v!==null&&v!==null&&At(v),a.callbackPriority=2,a.callbackNode=null,2}function pb(a,A){if(Ti!==0&&Ti!==5)return a.callbackNode=null,a.callbackPriority=0,null;var p=a.callbackNode;if(Rh()&&a.callbackNode!==p)return null;var v=Pr;return v=qr(a,a===Bn?v:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),v===0?null:(JE(a,v,A),gb(a,Ue()),a.callbackNode!=null&&a.callbackNode===p?pb.bind(null,a):null)}function mb(a,A){if(Rh())return null;JE(a,A,!0)}function M5(){q5(function(){(An&6)!==0?mt(Lt,U5):hb()})}function dx(){if($l===0){var a=tu;a===0&&(a=Rt,Rt<<=1,(Rt&261888)===0&&(Rt=256)),$l=a}return $l}function xb(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ls(""+a)}function wb(a,A){var p=A.ownerDocument.createElement("input");return p.name=A.name,p.value=A.value,a.id&&p.setAttribute("form",a.id),A.parentNode.insertBefore(p,A),a=new FormData(a),p.parentNode.removeChild(p),a}function O5(a,A,p,v,S){if(A==="submit"&&p&&p.stateNode===S){var R=xb((S[pe]||null).action),j=v.submitter;j&&(A=(A=j[pe]||null)?xb(A.formAction):j.getAttribute("formAction"),A!==null&&(R=A,j=null));var le=new Yn("action","action",null,v,S);a.push({event:le,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if($l!==0){var Te=j?wb(S,j):new FormData(S);km(p,{pending:!0,data:Te,method:S.method,action:R},null,Te)}}else typeof R=="function"&&(le.preventDefault(),Te=j?wb(S,j):new FormData(S),km(p,{pending:!0,data:Te,method:S.method,action:R},R,Te))},currentTarget:S}]})}}for(var hx=0;hx<b0.length;hx++){var gx=b0[hx],L5=gx.toLowerCase(),P5=gx[0].toUpperCase()+gx.slice(1);Za(L5,"on"+P5)}Za(Ks,"onAnimationEnd"),Za(Gi,"onAnimationIteration"),Za(un,"onAnimationStart"),Za("dblclick","onDoubleClick"),Za("focusin","onFocus"),Za("focusout","onBlur"),Za(_i,"onTransitionRun"),Za(bs,"onTransitionStart"),Za(Ol,"onTransitionCancel"),Za(qo,"onTransitionEnd"),Vn("onMouseEnter",["mouseout","mouseover"]),Vn("onMouseLeave",["mouseout","mouseover"]),Vn("onPointerEnter",["pointerout","pointerover"]),Vn("onPointerLeave",["pointerout","pointerover"]),nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var q0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(q0));function vb(a,A){A=(A&4)!==0;for(var p=0;p<a.length;p++){var v=a[p],S=v.event;v=v.listeners;e:{var R=void 0;if(A)for(var j=v.length-1;0<=j;j--){var le=v[j],Te=le.instance,We=le.currentTarget;if(le=le.listener,Te!==R&&S.isPropagationStopped())break e;R=le,S.currentTarget=We;try{R(S)}catch(ot){qd(ot)}S.currentTarget=null,R=Te}else for(j=0;j<v.length;j++){if(le=v[j],Te=le.instance,We=le.currentTarget,le=le.listener,Te!==R&&S.isPropagationStopped())break e;R=le,S.currentTarget=We;try{R(S)}catch(ot){qd(ot)}S.currentTarget=null,R=Te}}}}function Or(a,A){var p=A[Ve];p===void 0&&(p=A[Ve]=new Set);var v=a+"__bubble";p.has(v)||(yb(A,a,2,!1),p.add(v))}function px(a,A,p){var v=0;A&&(v|=4),yb(p,a,v,A)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function mx(a){if(!a[Dh]){a[Dh]=!0,it.forEach(function(p){p!=="selectionchange"&&(Q5.has(p)||px(p,!1,a),px(p,!0,a))});var A=a.nodeType===9?a:a.ownerDocument;A===null||A[Dh]||(A[Dh]=!0,px("selectionchange",!1,A))}}function yb(a,A,p,v){switch(Yb(A)){case 2:var S=h6;break;case 8:S=g6;break;default:S=Fx}p=S.bind(null,A,p,a),S=void 0,!QA||A!=="touchstart"&&A!=="touchmove"&&A!=="wheel"||(S=!0),v?S!==void 0?a.addEventListener(A,p,{capture:!0,passive:S}):a.addEventListener(A,p,!0):S!==void 0?a.addEventListener(A,p,{passive:S}):a.addEventListener(A,p,!1)}function xx(a,A,p,v,S){var R=v;if((A&1)===0&&(A&2)===0&&v!==null)e:for(;;){if(v===null)return;var j=v.tag;if(j===3||j===4){var le=v.stateNode.containerInfo;if(le===S)break;if(j===4)for(j=v.return;j!==null;){var Te=j.tag;if((Te===3||Te===4)&&j.stateNode.containerInfo===S)return;j=j.return}for(;le!==null;){if(j=wt(le),j===null)return;if(Te=j.tag,Te===5||Te===6||Te===26||Te===27){v=R=j;continue e}le=le.parentNode}}v=v.return}Kc(function(){var We=R,ot=Ul(p),dt=[];e:{var Ye=Wd.get(a);if(Ye!==void 0){var rt=Yn,qt=a;switch(a){case"keypress":if(sa(p)===0)break e;case"keydown":case"keyup":rt=Ko;break;case"focusin":qt="focus",rt=wo;break;case"focusout":qt="blur",rt=wo;break;case"beforeblur":case"afterblur":rt=wo;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=jo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Wc;break;case Ks:case Gi:case un:rt=gr;break;case qo:rt=Gs;break;case"scroll":case"scrollend":rt=HA;break;case"wheel":rt=qc;break;case"copy":case"cut":case"paste":rt=Vo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=tn;break;case"toggle":case"beforetoggle":rt=Ba}var Ar=(A&4)!==0,En=!Ar&&(a==="scroll"||a==="scrollend"),Me=Ar?Ye!==null?Ye+"Capture":null:Ye;Ar=[];for(var ke=We,ze;ke!==null;){var ct=ke;if(ze=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||ze===null||Me===null||(ct=sr(ke,Me),ct!=null&&Ar.push(X0(ke,ct,ze))),En)break;ke=ke.return}0<Ar.length&&(Ye=new rt(Ye,qt,null,p,ot),dt.push({event:Ye,listeners:Ar}))}}if((A&7)===0){e:{if(Ye=a==="mouseover"||a==="pointerover",rt=a==="mouseout"||a==="pointerout",Ye&&p!==mo&&(qt=p.relatedTarget||p.fromElement)&&(wt(qt)||qt[Ce]))break e;if((rt||Ye)&&(Ye=ot.window===ot?ot:(Ye=ot.ownerDocument)?Ye.defaultView||Ye.parentWindow:window,rt?(qt=p.relatedTarget||p.toElement,rt=We,qt=qt?wt(qt):null,qt!==null&&(En=s(qt),Ar=qt.tag,qt!==En||Ar!==5&&Ar!==27&&Ar!==6)&&(qt=null)):(rt=null,qt=We),rt!==qt)){if(Ar=en,ct="onMouseLeave",Me="onMouseEnter",ke="mouse",(a==="pointerout"||a==="pointerover")&&(Ar=tn,ct="onPointerLeave",Me="onPointerEnter",ke="pointer"),En=rt==null?Ye:Et(rt),ze=qt==null?Ye:Et(qt),Ye=new Ar(ct,ke+"leave",rt,p,ot),Ye.target=En,Ye.relatedTarget=ze,ct=null,wt(ot)===We&&(Ar=new Ar(Me,ke+"enter",qt,p,ot),Ar.target=ze,Ar.relatedTarget=En,ct=Ar),En=ct,rt&&qt)t:{for(Ar=H5,Me=rt,ke=qt,ze=0,ct=Me;ct;ct=Ar(ct))ze++;ct=0;for(var ar=ke;ar;ar=Ar(ar))ct++;for(;0<ze-ct;)Me=Ar(Me),ze--;for(;0<ct-ze;)ke=Ar(ke),ct--;for(;ze--;){if(Me===ke||ke!==null&&Me===ke.alternate){Ar=Me;break t}Me=Ar(Me),ke=Ar(ke)}Ar=null}else Ar=null;rt!==null&&Cb(dt,Ye,rt,Ar,!1),qt!==null&&En!==null&&Cb(dt,En,qt,Ar,!0)}}e:{if(Ye=We?Et(We):window,rt=Ye.nodeName&&Ye.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Ye.type==="file")var sn=aa;else if(Vi(Ye))if(zd)sn=x;else{sn=f;var Yt=l}else rt=Ye.nodeName,!rt||rt.toLowerCase()!=="input"||Ye.type!=="checkbox"&&Ye.type!=="radio"?We&&dn(We.elementType)&&(sn=aa):sn=g;if(sn&&(sn=sn(a,We))){ki(dt,sn,p,ot);break e}Yt&&Yt(a,Ye,We),a==="focusout"&&We&&Ye.type==="number"&&We.memoizedProps.value!=null&&me(Ye,"number",Ye.value)}switch(Yt=We?Et(We):window,a){case"focusin":(Vi(Yt)||Yt.contentEditable==="true")&&(Se=Yt,Ne=We,Le=null);break;case"focusout":Le=Ne=Se=null;break;case"mousedown":Ze=!0;break;case"contextmenu":case"mouseup":case"dragend":Ze=!1,_t(dt,p,ot);break;case"selectionchange":if(ye)break;case"keydown":case"keyup":_t(dt,p,ot)}var Fr;if(L)e:{switch(a){case"compositionstart":var Qr="onCompositionStart";break e;case"compositionend":Qr="onCompositionEnd";break e;case"compositionupdate":Qr="onCompositionUpdate";break e}Qr=void 0}else Rr?nn(a,p)&&(Qr="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(Qr="onCompositionStart");Qr&&(Qe&&p.locale!=="ko"&&(Rr||Qr!=="onCompositionStart"?Qr==="onCompositionEnd"&&Rr&&(Fr=Hs()):(as=ot,Qs="value"in as?as.value:as.textContent,Rr=!0)),Yt=Uh(We,Qr),0<Yt.length&&(Qr=new jA(Qr,a,null,p,ot),dt.push({event:Qr,listeners:Yt}),Fr?Qr.data=Fr:(Fr=Nn(p),Fr!==null&&(Qr.data=Fr)))),(Fr=ue?Tn(a,p):Kn(a,p))&&(Qr=Uh(We,"onBeforeInput"),0<Qr.length&&(Yt=new jA("onBeforeInput","beforeinput",null,p,ot),dt.push({event:Yt,listeners:Qr}),Yt.data=Fr)),O5(dt,a,We,p,ot)}vb(dt,A)})}function X0(a,A,p){return{instance:a,listener:A,currentTarget:p}}function Uh(a,A){for(var p=A+"Capture",v=[];a!==null;){var S=a,R=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||R===null||(S=sr(a,p),S!=null&&v.unshift(X0(a,S,R)),S=sr(a,A),S!=null&&v.push(X0(a,S,R))),a.tag===3)return v;a=a.return}return[]}function H5(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Cb(a,A,p,v,S){for(var R=A._reactName,j=[];p!==null&&p!==v;){var le=p,Te=le.alternate,We=le.stateNode;if(le=le.tag,Te!==null&&Te===v)break;le!==5&&le!==26&&le!==27||We===null||(Te=We,S?(We=sr(p,R),We!=null&&j.unshift(X0(p,We,Te))):S||(We=sr(p,R),We!=null&&j.push(X0(p,We,Te)))),p=p.return}j.length!==0&&a.push({event:A,listeners:j})}var j5=/\r\n?/g,V5=/\u0000|\uFFFD/g;function Eb(a){return(typeof a=="string"?a:""+a).replace(j5,`
`).replace(V5,"")}function bb(a,A){return A=Eb(A),Eb(a)===A}function Cn(a,A,p,v,S,R){switch(p){case"children":typeof v=="string"?A==="body"||A==="textarea"&&v===""||Os(a,v):(typeof v=="number"||typeof v=="bigint")&&A!=="body"&&Os(a,""+v);break;case"className":ba(a,"class",v);break;case"tabIndex":ba(a,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":ba(a,p,v);break;case"style":$t(a,v,R);break;case"data":if(A!=="object"){ba(a,"data",v);break}case"src":case"href":if(v===""&&(A!=="a"||p!=="href")){a.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){a.removeAttribute(p);break}v=Ls(""+v),a.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){a.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(p==="formAction"?(A!=="input"&&Cn(a,A,"name",S.name,S,null),Cn(a,A,"formEncType",S.formEncType,S,null),Cn(a,A,"formMethod",S.formMethod,S,null),Cn(a,A,"formTarget",S.formTarget,S,null)):(Cn(a,A,"encType",S.encType,S,null),Cn(a,A,"method",S.method,S,null),Cn(a,A,"target",S.target,S,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){a.removeAttribute(p);break}v=Ls(""+v),a.setAttribute(p,v);break;case"onClick":v!=null&&(a.onclick=Gn);break;case"onScroll":v!=null&&Or("scroll",a);break;case"onScrollEnd":v!=null&&Or("scrollend",a);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(S.children!=null)throw Error(n(60));a.innerHTML=p}}break;case"multiple":a.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":a.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){a.removeAttribute("xlink:href");break}p=Ls(""+v),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?a.setAttribute(p,""+v):a.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?a.setAttribute(p,""):a.removeAttribute(p);break;case"capture":case"download":v===!0?a.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?a.setAttribute(p,v):a.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?a.setAttribute(p,v):a.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?a.removeAttribute(p):a.setAttribute(p,v);break;case"popover":Or("beforetoggle",a),Or("toggle",a),qn(a,"popover",v);break;case"xlinkActuate":is(a,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":is(a,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":is(a,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":is(a,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":is(a,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":is(a,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":is(a,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":is(a,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":is(a,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":qn(a,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Gc.get(p)||p,qn(a,p,v))}}function wx(a,A,p,v,S,R){switch(p){case"style":$t(a,v,R);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(S.children!=null)throw Error(n(60));a.innerHTML=p}}break;case"children":typeof v=="string"?Os(a,v):(typeof v=="number"||typeof v=="bigint")&&Os(a,""+v);break;case"onScroll":v!=null&&Or("scroll",a);break;case"onScrollEnd":v!=null&&Or("scrollend",a);break;case"onClick":v!=null&&(a.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xr.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(S=p.endsWith("Capture"),A=p.slice(2,S?p.length-7:void 0),R=a[pe]||null,R=R!=null?R[p]:null,typeof R=="function"&&a.removeEventListener(A,R,S),typeof v=="function")){typeof R!="function"&&R!==null&&(p in a?a[p]=null:a.hasAttribute(p)&&a.removeAttribute(p)),a.addEventListener(A,v,S);break e}p in a?a[p]=v:v===!0?a.setAttribute(p,""):qn(a,p,v)}}}function qi(a,A,p){switch(A){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Or("error",a),Or("load",a);var v=!1,S=!1,R;for(R in p)if(p.hasOwnProperty(R)){var j=p[R];if(j!=null)switch(R){case"src":v=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,A));default:Cn(a,A,R,j,p,null)}}S&&Cn(a,A,"srcSet",p.srcSet,p,null),v&&Cn(a,A,"src",p.src,p,null);return;case"input":Or("invalid",a);var le=R=j=S=null,Te=null,We=null;for(v in p)if(p.hasOwnProperty(v)){var ot=p[v];if(ot!=null)switch(v){case"name":S=ot;break;case"type":j=ot;break;case"checked":Te=ot;break;case"defaultChecked":We=ot;break;case"value":R=ot;break;case"defaultValue":le=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(n(137,A));break;default:Cn(a,A,v,ot,p,null)}}je(a,R,le,Te,We,j,S,!1);return;case"select":Or("invalid",a),v=j=R=null;for(S in p)if(p.hasOwnProperty(S)&&(le=p[S],le!=null))switch(S){case"value":R=le;break;case"defaultValue":j=le;break;case"multiple":v=le;default:Cn(a,A,S,le,p,null)}A=R,p=j,a.multiple=!!v,A!=null?Ft(a,!!v,A,!1):p!=null&&Ft(a,!!v,p,!0);return;case"textarea":Or("invalid",a),R=S=v=null;for(j in p)if(p.hasOwnProperty(j)&&(le=p[j],le!=null))switch(j){case"value":v=le;break;case"defaultValue":S=le;break;case"children":R=le;break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(n(91));break;default:Cn(a,A,j,le,p,null)}ii(a,v,S,R);return;case"option":for(Te in p)if(p.hasOwnProperty(Te)&&(v=p[Te],v!=null))switch(Te){case"selected":a.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Cn(a,A,Te,v,p,null)}return;case"dialog":Or("beforetoggle",a),Or("toggle",a),Or("cancel",a),Or("close",a);break;case"iframe":case"object":Or("load",a);break;case"video":case"audio":for(v=0;v<q0.length;v++)Or(q0[v],a);break;case"image":Or("error",a),Or("load",a);break;case"details":Or("toggle",a);break;case"embed":case"source":case"link":Or("error",a),Or("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in p)if(p.hasOwnProperty(We)&&(v=p[We],v!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,A));default:Cn(a,A,We,v,p,null)}return;default:if(dn(A)){for(ot in p)p.hasOwnProperty(ot)&&(v=p[ot],v!==void 0&&wx(a,A,ot,v,p,void 0));return}}for(le in p)p.hasOwnProperty(le)&&(v=p[le],v!=null&&Cn(a,A,le,v,p,null))}function G5(a,A,p,v){switch(A){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,R=null,j=null,le=null,Te=null,We=null,ot=null;for(rt in p){var dt=p[rt];if(p.hasOwnProperty(rt)&&dt!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":Te=dt;default:v.hasOwnProperty(rt)||Cn(a,A,rt,null,v,dt)}}for(var Ye in v){var rt=v[Ye];if(dt=p[Ye],v.hasOwnProperty(Ye)&&(rt!=null||dt!=null))switch(Ye){case"type":R=rt;break;case"name":S=rt;break;case"checked":We=rt;break;case"defaultChecked":ot=rt;break;case"value":j=rt;break;case"defaultValue":le=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,A));break;default:rt!==dt&&Cn(a,A,Ye,rt,v,dt)}}Dn(a,j,le,Te,We,ot,R,S);return;case"select":rt=j=le=Ye=null;for(R in p)if(Te=p[R],p.hasOwnProperty(R)&&Te!=null)switch(R){case"value":break;case"multiple":rt=Te;default:v.hasOwnProperty(R)||Cn(a,A,R,null,v,Te)}for(S in v)if(R=v[S],Te=p[S],v.hasOwnProperty(S)&&(R!=null||Te!=null))switch(S){case"value":Ye=R;break;case"defaultValue":le=R;break;case"multiple":j=R;default:R!==Te&&Cn(a,A,S,R,v,Te)}A=le,p=j,v=rt,Ye!=null?Ft(a,!!p,Ye,!1):!!v!=!!p&&(A!=null?Ft(a,!!p,A,!0):Ft(a,!!p,p?[]:"",!1));return;case"textarea":rt=Ye=null;for(le in p)if(S=p[le],p.hasOwnProperty(le)&&S!=null&&!v.hasOwnProperty(le))switch(le){case"value":break;case"children":break;default:Cn(a,A,le,null,v,S)}for(j in v)if(S=v[j],R=p[j],v.hasOwnProperty(j)&&(S!=null||R!=null))switch(j){case"value":Ye=S;break;case"defaultValue":rt=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==R&&Cn(a,A,j,S,v,R)}In(a,Ye,rt);return;case"option":for(var qt in p)if(Ye=p[qt],p.hasOwnProperty(qt)&&Ye!=null&&!v.hasOwnProperty(qt))switch(qt){case"selected":a.selected=!1;break;default:Cn(a,A,qt,null,v,Ye)}for(Te in v)if(Ye=v[Te],rt=p[Te],v.hasOwnProperty(Te)&&Ye!==rt&&(Ye!=null||rt!=null))switch(Te){case"selected":a.selected=Ye&&typeof Ye!="function"&&typeof Ye!="symbol";break;default:Cn(a,A,Te,Ye,v,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ar in p)Ye=p[Ar],p.hasOwnProperty(Ar)&&Ye!=null&&!v.hasOwnProperty(Ar)&&Cn(a,A,Ar,null,v,Ye);for(We in v)if(Ye=v[We],rt=p[We],v.hasOwnProperty(We)&&Ye!==rt&&(Ye!=null||rt!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(n(137,A));break;default:Cn(a,A,We,Ye,v,rt)}return;default:if(dn(A)){for(var En in p)Ye=p[En],p.hasOwnProperty(En)&&Ye!==void 0&&!v.hasOwnProperty(En)&&wx(a,A,En,void 0,v,Ye);for(ot in v)Ye=v[ot],rt=p[ot],!v.hasOwnProperty(ot)||Ye===rt||Ye===void 0&&rt===void 0||wx(a,A,ot,Ye,v,rt);return}}for(var Me in p)Ye=p[Me],p.hasOwnProperty(Me)&&Ye!=null&&!v.hasOwnProperty(Me)&&Cn(a,A,Me,null,v,Ye);for(dt in v)Ye=v[dt],rt=p[dt],!v.hasOwnProperty(dt)||Ye===rt||Ye==null&&rt==null||Cn(a,A,dt,Ye,v,rt)}function _b(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function K5(){if(typeof performance.getEntriesByType=="function"){for(var a=0,A=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var S=p[v],R=S.transferSize,j=S.initiatorType,le=S.duration;if(R&&le&&_b(j)){for(j=0,le=S.responseEnd,v+=1;v<p.length;v++){var Te=p[v],We=Te.startTime;if(We>le)break;var ot=Te.transferSize,dt=Te.initiatorType;ot&&_b(dt)&&(Te=Te.responseEnd,j+=ot*(Te<le?1:(le-We)/(Te-We)))}if(--v,A+=8*(R+j)/(S.duration/1e3),a++,10<a)break}}if(0<a)return A/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var vx=null,yx=null;function Mh(a){return a.nodeType===9?a:a.ownerDocument}function Tb(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bb(a,A){if(a===0)switch(A){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&A==="foreignObject"?0:a}function Cx(a,A){return a==="textarea"||a==="noscript"||typeof A.children=="string"||typeof A.children=="number"||typeof A.children=="bigint"||typeof A.dangerouslySetInnerHTML=="object"&&A.dangerouslySetInnerHTML!==null&&A.dangerouslySetInnerHTML.__html!=null}var Ex=null;function z5(){var a=window.event;return a&&a.type==="popstate"?a===Ex?!1:(Ex=a,!0):(Ex=null,!1)}var Sb=typeof setTimeout=="function"?setTimeout:void 0,W5=typeof clearTimeout=="function"?clearTimeout:void 0,Ib=typeof Promise=="function"?Promise:void 0,q5=typeof queueMicrotask=="function"?queueMicrotask:typeof Ib<"u"?function(a){return Ib.resolve(null).then(a).catch(X5)}:Sb;function X5(a){setTimeout(function(){throw a})}function eA(a){return a==="head"}function Nb(a,A){var p=A,v=0;do{var S=p.nextSibling;if(a.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"||p==="/&"){if(v===0){a.removeChild(S),vu(A);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")Y0(a.ownerDocument.documentElement);else if(p==="head"){p=a.ownerDocument.head,Y0(p);for(var R=p.firstChild;R;){var j=R.nextSibling,le=R.nodeName;R[Xe]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&R.rel.toLowerCase()==="stylesheet"||p.removeChild(R),R=j}}else p==="body"&&Y0(a.ownerDocument.body);p=S}while(p);vu(A)}function Rb(a,A){var p=a;a=0;do{var v=p.nextSibling;if(p.nodeType===1?A?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(A?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(a===0)break;a--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||a++;p=v}while(p)}function bx(a){var A=a.firstChild;for(A&&A.nodeType===10&&(A=A.nextSibling);A;){var p=A;switch(A=A.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":bx(p),ht(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}a.removeChild(p)}}function Y5(a,A,p,v){for(;a.nodeType===1;){var S=p;if(a.nodeName.toLowerCase()!==A.toLowerCase()){if(!v&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(v){if(!a[Xe])switch(A){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(R=a.getAttribute("rel"),R==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(R!==S.rel||a.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||a.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||a.getAttribute("title")!==(S.title==null?null:S.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(R=a.getAttribute("src"),(R!==(S.src==null?null:S.src)||a.getAttribute("type")!==(S.type==null?null:S.type)||a.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&R&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(A==="input"&&a.type==="hidden"){var R=S.name==null?null:""+S.name;if(S.type==="hidden"&&a.getAttribute("name")===R)return a}else return a;if(a=Da(a.nextSibling),a===null)break}return null}function J5(a,A,p){if(A==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!p||(a=Da(a.nextSibling),a===null))return null;return a}function Fb(a,A){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!A||(a=Da(a.nextSibling),a===null))return null;return a}function _x(a){return a.data==="$?"||a.data==="$~"}function Tx(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function Z5(a,A){var p=a.ownerDocument;if(a.data==="$~")a._reactRetry=A;else if(a.data!=="$?"||p.readyState!=="loading")A();else{var v=function(){A(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),a._reactRetry=v}}function Da(a){for(;a!=null;a=a.nextSibling){var A=a.nodeType;if(A===1||A===3)break;if(A===8){if(A=a.data,A==="$"||A==="$!"||A==="$?"||A==="$~"||A==="&"||A==="F!"||A==="F")break;if(A==="/$"||A==="/&")return null}}return a}var Bx=null;function kb(a){a=a.nextSibling;for(var A=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"||p==="/&"){if(A===0)return Da(a.nextSibling);A--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||A++}a=a.nextSibling}return null}function Db(a){a=a.previousSibling;for(var A=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(A===0)return a;A--}else p!=="/$"&&p!=="/&"||A++}a=a.previousSibling}return null}function Ub(a,A,p){switch(A=Mh(p),a){case"html":if(a=A.documentElement,!a)throw Error(n(452));return a;case"head":if(a=A.head,!a)throw Error(n(453));return a;case"body":if(a=A.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Y0(a){for(var A=a.attributes;A.length;)a.removeAttributeNode(A[0]);ht(a)}var Ua=new Map,Mb=new Set;function Oh(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Al=we.d;we.d={f:$5,r:e6,D:t6,C:r6,L:n6,m:i6,X:a6,S:s6,M:o6};function $5(){var a=Al.f(),A=Sh();return a||A}function e6(a){var A=vt(a);A!==null&&A.tag===5&&A.type==="form"?$C(A):Al.r(a)}var mu=typeof document>"u"?null:document;function Ob(a,A,p){var v=mu;if(v&&typeof A=="string"&&A){var S=ur(A);S='link[rel="'+a+'"][href="'+S+'"]',typeof p=="string"&&(S+='[crossorigin="'+p+'"]'),Mb.has(S)||(Mb.add(S),a={rel:a,crossOrigin:p,href:A},v.querySelector(S)===null&&(A=v.createElement("link"),qi(A,"link",a),Gt(A),v.head.appendChild(A)))}}function t6(a){Al.D(a),Ob("dns-prefetch",a,null)}function r6(a,A){Al.C(a,A),Ob("preconnect",a,A)}function n6(a,A,p){Al.L(a,A,p);var v=mu;if(v&&a&&A){var S='link[rel="preload"][as="'+ur(A)+'"]';A==="image"&&p&&p.imageSrcSet?(S+='[imagesrcset="'+ur(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(S+='[imagesizes="'+ur(p.imageSizes)+'"]')):S+='[href="'+ur(a)+'"]';var R=S;switch(A){case"style":R=xu(a);break;case"script":R=wu(a)}Ua.has(R)||(a=C({rel:"preload",href:A==="image"&&p&&p.imageSrcSet?void 0:a,as:A},p),Ua.set(R,a),v.querySelector(S)!==null||A==="style"&&v.querySelector(J0(R))||A==="script"&&v.querySelector(Z0(R))||(A=v.createElement("link"),qi(A,"link",a),Gt(A),v.head.appendChild(A)))}}function i6(a,A){Al.m(a,A);var p=mu;if(p&&a){var v=A&&typeof A.as=="string"?A.as:"script",S='link[rel="modulepreload"][as="'+ur(v)+'"][href="'+ur(a)+'"]',R=S;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=wu(a)}if(!Ua.has(R)&&(a=C({rel:"modulepreload",href:a},A),Ua.set(R,a),p.querySelector(S)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Z0(R)))return}v=p.createElement("link"),qi(v,"link",a),Gt(v),p.head.appendChild(v)}}}function s6(a,A,p){Al.S(a,A,p);var v=mu;if(v&&a){var S=St(v).hoistableStyles,R=xu(a);A=A||"default";var j=S.get(R);if(!j){var le={loading:0,preload:null};if(j=v.querySelector(J0(R)))le.loading=5;else{a=C({rel:"stylesheet",href:a,"data-precedence":A},p),(p=Ua.get(R))&&Sx(a,p);var Te=j=v.createElement("link");Gt(Te),qi(Te,"link",a),Te._p=new Promise(function(We,ot){Te.onload=We,Te.onerror=ot}),Te.addEventListener("load",function(){le.loading|=1}),Te.addEventListener("error",function(){le.loading|=2}),le.loading|=4,Lh(j,A,v)}j={type:"stylesheet",instance:j,count:1,state:le},S.set(R,j)}}}function a6(a,A){Al.X(a,A);var p=mu;if(p&&a){var v=St(p).hoistableScripts,S=wu(a),R=v.get(S);R||(R=p.querySelector(Z0(S)),R||(a=C({src:a,async:!0},A),(A=Ua.get(S))&&Ix(a,A),R=p.createElement("script"),Gt(R),qi(R,"link",a),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},v.set(S,R))}}function o6(a,A){Al.M(a,A);var p=mu;if(p&&a){var v=St(p).hoistableScripts,S=wu(a),R=v.get(S);R||(R=p.querySelector(Z0(S)),R||(a=C({src:a,async:!0,type:"module"},A),(A=Ua.get(S))&&Ix(a,A),R=p.createElement("script"),Gt(R),qi(R,"link",a),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},v.set(S,R))}}function Lb(a,A,p,v){var S=(S=Ee.current)?Oh(S):null;if(!S)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(A=xu(p.href),p=St(S).hoistableStyles,v=p.get(A),v||(v={type:"style",instance:null,count:0,state:null},p.set(A,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){a=xu(p.href);var R=St(S).hoistableStyles,j=R.get(a);if(j||(S=S.ownerDocument||S,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(a,j),(R=S.querySelector(J0(a)))&&!R._p&&(j.instance=R,j.state.loading=5),Ua.has(a)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Ua.set(a,p),R||l6(S,a,p,j.state))),A&&v===null)throw Error(n(528,""));return j}if(A&&v!==null)throw Error(n(529,""));return null;case"script":return A=p.async,p=p.src,typeof p=="string"&&A&&typeof A!="function"&&typeof A!="symbol"?(A=wu(p),p=St(S).hoistableScripts,v=p.get(A),v||(v={type:"script",instance:null,count:0,state:null},p.set(A,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function xu(a){return'href="'+ur(a)+'"'}function J0(a){return'link[rel="stylesheet"]['+a+"]"}function Pb(a){return C({},a,{"data-precedence":a.precedence,precedence:null})}function l6(a,A,p,v){a.querySelector('link[rel="preload"][as="style"]['+A+"]")?v.loading=1:(A=a.createElement("link"),v.preload=A,A.addEventListener("load",function(){return v.loading|=1}),A.addEventListener("error",function(){return v.loading|=2}),qi(A,"link",p),Gt(A),a.head.appendChild(A))}function wu(a){return'[src="'+ur(a)+'"]'}function Z0(a){return"script[async]"+a}function Qb(a,A,p){if(A.count++,A.instance===null)switch(A.type){case"style":var v=a.querySelector('style[data-href~="'+ur(p.href)+'"]');if(v)return A.instance=v,Gt(v),v;var S=C({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(a.ownerDocument||a).createElement("style"),Gt(v),qi(v,"style",S),Lh(v,p.precedence,a),A.instance=v;case"stylesheet":S=xu(p.href);var R=a.querySelector(J0(S));if(R)return A.state.loading|=4,A.instance=R,Gt(R),R;v=Pb(p),(S=Ua.get(S))&&Sx(v,S),R=(a.ownerDocument||a).createElement("link"),Gt(R);var j=R;return j._p=new Promise(function(le,Te){j.onload=le,j.onerror=Te}),qi(R,"link",v),A.state.loading|=4,Lh(R,p.precedence,a),A.instance=R;case"script":return R=wu(p.src),(S=a.querySelector(Z0(R)))?(A.instance=S,Gt(S),S):(v=p,(S=Ua.get(R))&&(v=C({},p),Ix(v,S)),a=a.ownerDocument||a,S=a.createElement("script"),Gt(S),qi(S,"link",v),a.head.appendChild(S),A.instance=S);case"void":return null;default:throw Error(n(443,A.type))}else A.type==="stylesheet"&&(A.state.loading&4)===0&&(v=A.instance,A.state.loading|=4,Lh(v,p.precedence,a));return A.instance}function Lh(a,A,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=v.length?v[v.length-1]:null,R=S,j=0;j<v.length;j++){var le=v[j];if(le.dataset.precedence===A)R=le;else if(R!==S)break}R?R.parentNode.insertBefore(a,R.nextSibling):(A=p.nodeType===9?p.head:p,A.insertBefore(a,A.firstChild))}function Sx(a,A){a.crossOrigin==null&&(a.crossOrigin=A.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=A.referrerPolicy),a.title==null&&(a.title=A.title)}function Ix(a,A){a.crossOrigin==null&&(a.crossOrigin=A.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=A.referrerPolicy),a.integrity==null&&(a.integrity=A.integrity)}var Ph=null;function Hb(a,A,p){if(Ph===null){var v=new Map,S=Ph=new Map;S.set(p,v)}else S=Ph,v=S.get(p),v||(v=new Map,S.set(p,v));if(v.has(a))return v;for(v.set(a,null),p=p.getElementsByTagName(a),S=0;S<p.length;S++){var R=p[S];if(!(R[Xe]||R[he]||a==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var j=R.getAttribute(A)||"";j=a+j;var le=v.get(j);le?le.push(R):v.set(j,[R])}}return v}function jb(a,A,p){a=a.ownerDocument||a,a.head.insertBefore(p,A==="title"?a.querySelector("head > title"):null)}function A6(a,A,p){if(p===1||A.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof A.precedence!="string"||typeof A.href!="string"||A.href==="")break;return!0;case"link":if(typeof A.rel!="string"||typeof A.href!="string"||A.href===""||A.onLoad||A.onError)break;switch(A.rel){case"stylesheet":return a=A.disabled,typeof A.precedence=="string"&&a==null;default:return!0}case"script":if(A.async&&typeof A.async!="function"&&typeof A.async!="symbol"&&!A.onLoad&&!A.onError&&A.src&&typeof A.src=="string")return!0}return!1}function Vb(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function c6(a,A,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var S=xu(v.href),R=A.querySelector(J0(S));if(R){A=R._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(a.count++,a=Qh.bind(a),A.then(a,a)),p.state.loading|=4,p.instance=R,Gt(R);return}R=A.ownerDocument||A,v=Pb(v),(S=Ua.get(S))&&Sx(v,S),R=R.createElement("link"),Gt(R);var j=R;j._p=new Promise(function(le,Te){j.onload=le,j.onerror=Te}),qi(R,"link",v),p.instance=R}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(p,A),(A=p.state.preload)&&(p.state.loading&3)===0&&(a.count++,p=Qh.bind(a),A.addEventListener("load",p),A.addEventListener("error",p))}}var Nx=0;function u6(a,A){return a.stylesheets&&a.count===0&&jh(a,a.stylesheets),0<a.count||0<a.imgCount?function(p){var v=setTimeout(function(){if(a.stylesheets&&jh(a,a.stylesheets),a.unsuspend){var R=a.unsuspend;a.unsuspend=null,R()}},6e4+A);0<a.imgBytes&&Nx===0&&(Nx=62500*K5());var S=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&jh(a,a.stylesheets),a.unsuspend)){var R=a.unsuspend;a.unsuspend=null,R()}},(a.imgBytes>Nx?50:800)+A);return a.unsuspend=p,function(){a.unsuspend=null,clearTimeout(v),clearTimeout(S)}}:null}function Qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jh(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Hh=null;function jh(a,A){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Hh=new Map,A.forEach(f6,a),Hh=null,Qh.call(a))}function f6(a,A){if(!(A.state.loading&4)){var p=Hh.get(a);if(p)var v=p.get(null);else{p=new Map,Hh.set(a,p);for(var S=a.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<S.length;R++){var j=S[R];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(p.set(j.dataset.precedence,j),v=j)}v&&p.set(null,v)}S=A.instance,j=S.getAttribute("data-precedence"),R=p.get(j)||v,R===v&&p.set(null,S),p.set(j,S),this.count++,v=Qh.bind(this),S.addEventListener("load",v),S.addEventListener("error",v),R?R.parentNode.insertBefore(S,R.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(S,a.firstChild)),A.state.loading|=4}}var $0={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ge,_currentValue2:Ge,_threadCount:0};function d6(a,A,p,v,S,R,j,le,Te){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ut(0),this.hiddenUpdates=ut(null),this.identifierPrefix=v,this.onUncaughtError=S,this.onCaughtError=R,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Te,this.incompleteTransitions=new Map}function Gb(a,A,p,v,S,R,j,le,Te,We,ot,dt){return a=new d6(a,A,p,j,Te,We,ot,dt,le),A=1,R===!0&&(A|=24),R=oa(3,null,null,A),a.current=R,R.stateNode=a,A=Am(),A.refCount++,a.pooledCache=A,A.refCount++,R.memoizedState={element:v,isDehydrated:p,cache:A},dm(R),a}function Kb(a){return a?(a=Yc,a):Yc}function zb(a,A,p,v,S,R){S=Kb(S),v.context===null?v.context=S:v.pendingContext=S,v=Vl(A),v.payload={element:p},R=R===void 0?null:R,R!==null&&(v.callback=R),p=Gl(a,v,A),p!==null&&(Ys(p,a,A),R0(p,a,A))}function Wb(a,A){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<A?p:A}}function Rx(a,A){Wb(a,A),(a=a.alternate)&&Wb(a,A)}function qb(a){if(a.tag===13||a.tag===31){var A=WA(a,67108864);A!==null&&Ys(A,a,67108864),Rx(a,67108864)}}function Xb(a){if(a.tag===13||a.tag===31){var A=fa();A=kn(A);var p=WA(a,A);p!==null&&Ys(p,a,A),Rx(a,A)}}var Vh=!0;function h6(a,A,p,v){var S=de.T;de.T=null;var R=we.p;try{we.p=2,Fx(a,A,p,v)}finally{we.p=R,de.T=S}}function g6(a,A,p,v){var S=de.T;de.T=null;var R=we.p;try{we.p=8,Fx(a,A,p,v)}finally{we.p=R,de.T=S}}function Fx(a,A,p,v){if(Vh){var S=kx(v);if(S===null)xx(a,A,v,Gh,p),Jb(a,v);else if(m6(S,a,A,p,v))v.stopPropagation();else if(Jb(a,v),A&4&&-1<p6.indexOf(a)){for(;S!==null;){var R=vt(S);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var j=Tr(R.pendingLanes);if(j!==0){var le=R;for(le.pendingLanes|=2,le.entangledLanes|=2;j;){var Te=1<<31-Re(j);le.entanglements[1]|=Te,j&=~Te}bo(R),(An&6)===0&&(Th=Ue()+500,W0(0))}}break;case 31:case 13:le=WA(R,2),le!==null&&Ys(le,R,2),Sh(),Rx(R,2)}if(R=kx(v),R===null&&xx(a,A,v,Gh,p),R===S)break;S=R}S!==null&&v.stopPropagation()}else xx(a,A,v,null,p)}}function kx(a){return a=Ul(a),Dx(a)}var Gh=null;function Dx(a){if(Gh=null,a=wt(a),a!==null){var A=s(a);if(A===null)a=null;else{var p=A.tag;if(p===13){if(a=o(A),a!==null)return a;a=null}else if(p===31){if(a=c(A),a!==null)return a;a=null}else if(p===3){if(A.stateNode.current.memoizedState.isDehydrated)return A.tag===3?A.stateNode.containerInfo:null;a=null}else A!==a&&(a=null)}}return Gh=a,null}function Yb(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(It()){case Lt:return 2;case Zt:return 8;case cr:case hr:return 32;case Ht:return 268435456;default:return 32}default:return 32}}var Ux=!1,tA=null,rA=null,nA=null,ef=new Map,tf=new Map,iA=[],p6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jb(a,A){switch(a){case"focusin":case"focusout":tA=null;break;case"dragenter":case"dragleave":rA=null;break;case"mouseover":case"mouseout":nA=null;break;case"pointerover":case"pointerout":ef.delete(A.pointerId);break;case"gotpointercapture":case"lostpointercapture":tf.delete(A.pointerId)}}function rf(a,A,p,v,S,R){return a===null||a.nativeEvent!==R?(a={blockedOn:A,domEventName:p,eventSystemFlags:v,nativeEvent:R,targetContainers:[S]},A!==null&&(A=vt(A),A!==null&&qb(A)),a):(a.eventSystemFlags|=v,A=a.targetContainers,S!==null&&A.indexOf(S)===-1&&A.push(S),a)}function m6(a,A,p,v,S){switch(A){case"focusin":return tA=rf(tA,a,A,p,v,S),!0;case"dragenter":return rA=rf(rA,a,A,p,v,S),!0;case"mouseover":return nA=rf(nA,a,A,p,v,S),!0;case"pointerover":var R=S.pointerId;return ef.set(R,rf(ef.get(R)||null,a,A,p,v,S)),!0;case"gotpointercapture":return R=S.pointerId,tf.set(R,rf(tf.get(R)||null,a,A,p,v,S)),!0}return!1}function Zb(a){var A=wt(a.target);if(A!==null){var p=s(A);if(p!==null){if(A=p.tag,A===13){if(A=o(p),A!==null){a.blockedOn=A,Ae(a.priority,function(){Xb(p)});return}}else if(A===31){if(A=c(p),A!==null){a.blockedOn=A,Ae(a.priority,function(){Xb(p)});return}}else if(A===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Kh(a){if(a.blockedOn!==null)return!1;for(var A=a.targetContainers;0<A.length;){var p=kx(a.nativeEvent);if(p===null){p=a.nativeEvent;var v=new p.constructor(p.type,p);mo=v,p.target.dispatchEvent(v),mo=null}else return A=vt(p),A!==null&&qb(A),a.blockedOn=p,!1;A.shift()}return!0}function $b(a,A,p){Kh(a)&&p.delete(A)}function x6(){Ux=!1,tA!==null&&Kh(tA)&&(tA=null),rA!==null&&Kh(rA)&&(rA=null),nA!==null&&Kh(nA)&&(nA=null),ef.forEach($b),tf.forEach($b)}function zh(a,A){a.blockedOn===A&&(a.blockedOn=null,Ux||(Ux=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,x6)))}var Wh=null;function e_(a){Wh!==a&&(Wh=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Wh===a&&(Wh=null);for(var A=0;A<a.length;A+=3){var p=a[A],v=a[A+1],S=a[A+2];if(typeof v!="function"){if(Dx(v||p)===null)continue;break}var R=vt(p);R!==null&&(a.splice(A,3),A-=3,km(R,{pending:!0,data:S,method:p.method,action:v},v,S))}}))}function vu(a){function A(Te){return zh(Te,a)}tA!==null&&zh(tA,a),rA!==null&&zh(rA,a),nA!==null&&zh(nA,a),ef.forEach(A),tf.forEach(A);for(var p=0;p<iA.length;p++){var v=iA[p];v.blockedOn===a&&(v.blockedOn=null)}for(;0<iA.length&&(p=iA[0],p.blockedOn===null);)Zb(p),p.blockedOn===null&&iA.shift();if(p=(a.ownerDocument||a).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var S=p[v],R=p[v+1],j=S[pe]||null;if(typeof R=="function")j||e_(p);else if(j){var le=null;if(R&&R.hasAttribute("formAction")){if(S=R,j=R[pe]||null)le=j.formAction;else if(Dx(S)!==null)continue}else le=j.action;typeof le=="function"?p[v+1]=le:(p.splice(v,3),v-=3),e_(p)}}}function t_(){function a(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(j){return S=j})},focusReset:"manual",scroll:"manual"})}function A(){S!==null&&(S(),S=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,S=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",A),navigation.addEventListener("navigateerror",A),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",A),navigation.removeEventListener("navigateerror",A),S!==null&&(S(),S=null)}}}function Mx(a){this._internalRoot=a}qh.prototype.render=Mx.prototype.render=function(a){var A=this._internalRoot;if(A===null)throw Error(n(409));var p=A.current,v=fa();zb(p,v,a,A,null,null)},qh.prototype.unmount=Mx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var A=a.containerInfo;zb(a.current,2,null,a,null,null),Sh(),A[Ce]=null}};function qh(a){this._internalRoot=a}qh.prototype.unstable_scheduleHydration=function(a){if(a){var A=ie();a={blockedOn:null,target:a,priority:A};for(var p=0;p<iA.length&&A!==0&&A<iA[p].priority;p++);iA.splice(p,0,a),p===0&&Zb(a)}};var r_=e.version;if(r_!=="19.2.4")throw Error(n(527,r_,"19.2.4"));we.findDOMNode=function(a){var A=a._reactInternals;if(A===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=d(A),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var w6={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:de,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{yt=Xh.inject(w6),_e=Xh}catch{}}return sf.createRoot=function(a,A){if(!i(a))throw Error(n(299));var p=!1,v="",S=AE,R=cE,j=uE;return A!=null&&(A.unstable_strictMode===!0&&(p=!0),A.identifierPrefix!==void 0&&(v=A.identifierPrefix),A.onUncaughtError!==void 0&&(S=A.onUncaughtError),A.onCaughtError!==void 0&&(R=A.onCaughtError),A.onRecoverableError!==void 0&&(j=A.onRecoverableError)),A=Gb(a,1,!1,null,null,p,v,null,S,R,j,t_),a[Ce]=A.current,mx(a),new Mx(A)},sf.hydrateRoot=function(a,A,p){if(!i(a))throw Error(n(299));var v=!1,S="",R=AE,j=cE,le=uE,Te=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onUncaughtError!==void 0&&(R=p.onUncaughtError),p.onCaughtError!==void 0&&(j=p.onCaughtError),p.onRecoverableError!==void 0&&(le=p.onRecoverableError),p.formState!==void 0&&(Te=p.formState)),A=Gb(a,1,!0,A,p??null,v,S,Te,R,j,le,t_),A.context=Kb(null),p=A.current,v=fa(),v=kn(v),S=Vl(v),S.callback=null,Gl(p,S,v),p=v,A.current.lanes=p,at(A,p),bo(A),a[Ce]=A.current,mx(a),new qh(A)},sf.version="19.2.4",sf}var f_;function R6(){if(f_)return Px.exports;f_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Px.exports=N6(),Px.exports}var F6=R6();const k6=Av(F6);var d_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},D6=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],o=t[r++],c=t[r++],h=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},UI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,h=i+2<t.length,d=h?t[i+2]:0,m=s>>2,C=(s&3)<<4|c>>4;let b=(c&15)<<2|d>>6,I=d&63;h||(I=64,o||(b=64)),n.push(r[m],r[C],r[b],r[I])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):D6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],c=i<t.length?r[t.charAt(i)]:0;++i;const d=i<t.length?r[t.charAt(i)]:64;++i;const C=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||C==null)throw new U6;const b=s<<2|c>>4;if(n.push(b),d!==64){const I=c<<4&240|d>>2;if(n.push(I),C!==64){const F=d<<6&192|C;n.push(F)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class U6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M6=function(t){const e=DI(t);return UI.encodeByteArray(e,!0)},u1=function(t){return M6(t).replace(/\./g,"")},MI=function(t){try{return UI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=()=>O6().__FIREBASE_DEFAULTS__,P6=()=>{if(typeof process>"u"||typeof d_>"u")return;const t=d_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Q6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&MI(t[1]);return e&&JSON.parse(e)},op=()=>{try{return L6()||P6()||Q6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OI=t=>{var e,r;return(r=(e=op())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},H6=t=>{const e=OI(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},LI=()=>{var t;return(t=op())===null||t===void 0?void 0:t.config},PI=t=>{var e;return(e=op())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u1(JSON.stringify(r)),u1(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ws())}function K6(){var t;const e=(t=op())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function z6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function W6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q6(){const t=ws();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function X6(){return!K6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HI(){try{return typeof indexedDB=="object"}catch{return!1}}function jI(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}function Y6(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="FirebaseError";class ho extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=J6,Object.setPrototypeOf(this,ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rc.prototype.create)}}class Rc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Z6(s,n):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new ho(i,c,n)}}function Z6(t,e){return t.replace($6,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const $6=/\{\$([^}]+)}/g;function eD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ed(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],o=e[i];if(h_(s)&&h_(o)){if(!ed(s,o))return!1}else if(s!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function h_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function gf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function pf(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function tD(t,e){const r=new rD(t,e);return r.subscribe.bind(r)}class rD{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");nD(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Vx),i.error===void 0&&(i.error=Vx),i.complete===void 0&&(i.complete=Vx);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nD(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Vx(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=1e3,sD=2,aD=14400*1e3,oD=.5;function g_(t,e=iD,r=sD){const n=e*Math.pow(r,t),i=Math.round(oD*n*(Math.random()-.5)*2);return Math.min(aD,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new j6;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cD(e))try{this.getOrInitializeService({instanceIdentifier:oc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=oc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oc){return this.instances.has(e)}getOptions(e=oc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);n===c&&o.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:AD(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=oc){return this.component?this.component.multipleInstances?e:oc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AD(t){return t===oc?void 0:t}function cD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new lD(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(zr||(zr={}));const fD={debug:zr.DEBUG,verbose:zr.VERBOSE,info:zr.INFO,warn:zr.WARN,error:zr.ERROR,silent:zr.SILENT},dD=zr.INFO,hD={[zr.DEBUG]:"log",[zr.VERBOSE]:"log",[zr.INFO]:"info",[zr.WARN]:"warn",[zr.ERROR]:"error"},gD=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=hD[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let lp=class{constructor(e){this.name=e,this._logLevel=dD,this._logHandler=gD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zr.DEBUG,...e),this._logHandler(this,zr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zr.VERBOSE,...e),this._logHandler(this,zr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zr.INFO,...e),this._logHandler(this,zr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zr.WARN,...e),this._logHandler(this,zr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zr.ERROR,...e),this._logHandler(this,zr.ERROR,...e)}};const pD=(t,e)=>e.some(r=>t instanceof r);let p_,m_;function mD(){return p_||(p_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xD(){return m_||(m_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VI=new WeakMap,H2=new WeakMap,GI=new WeakMap,Gx=new WeakMap,uv=new WeakMap;function wD(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(EA(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&VI.set(r,t)}).catch(()=>{}),uv.set(e,t),e}function vD(t){if(H2.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});H2.set(t,e)}let j2={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return H2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GI.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return EA(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yD(t){j2=t(j2)}function CD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Kx(this),e,...r);return GI.set(n,e.sort?e.sort():[e]),EA(n)}:xD().includes(t)?function(...e){return t.apply(Kx(this),e),EA(VI.get(this))}:function(...e){return EA(t.apply(Kx(this),e))}}function ED(t){return typeof t=="function"?CD(t):(t instanceof IDBTransaction&&vD(t),pD(t,mD())?new Proxy(t,j2):t)}function EA(t){if(t instanceof IDBRequest)return wD(t);if(Gx.has(t))return Gx.get(t);const e=ED(t);return e!==t&&(Gx.set(t,e),uv.set(e,t)),e}const Kx=t=>uv.get(t);function KI(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=EA(o);return n&&o.addEventListener("upgradeneeded",h=>{n(EA(o.result),h.oldVersion,h.newVersion,EA(o.transaction),h)}),r&&o.addEventListener("blocked",h=>r(h.oldVersion,h.newVersion,h)),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const bD=["get","getKey","getAll","getAllKeys","count"],_D=["put","add","delete","clear"],zx=new Map;function x_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zx.get(e))return zx.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=_D.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||bD.includes(r)))return;const s=async function(o,...c){const h=this.transaction(o,i?"readwrite":"readonly");let d=h.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[r](...c),i&&h.done]))[0]};return zx.set(e,s),s}yD(t=>({...t,get:(e,r,n)=>x_(e,r)||t.get(e,r,n),has:(e,r)=>!!x_(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(BD(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function BD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const V2="@firebase/app",w_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new lp("@firebase/app"),SD="@firebase/app-compat",ID="@firebase/analytics-compat",ND="@firebase/analytics",RD="@firebase/app-check-compat",FD="@firebase/app-check",kD="@firebase/auth",DD="@firebase/auth-compat",UD="@firebase/database",MD="@firebase/data-connect",OD="@firebase/database-compat",LD="@firebase/functions",PD="@firebase/functions-compat",QD="@firebase/installations",HD="@firebase/installations-compat",jD="@firebase/messaging",VD="@firebase/messaging-compat",GD="@firebase/performance",KD="@firebase/performance-compat",zD="@firebase/remote-config",WD="@firebase/remote-config-compat",qD="@firebase/storage",XD="@firebase/storage-compat",YD="@firebase/firestore",JD="@firebase/vertexai-preview",ZD="@firebase/firestore-compat",$D="firebase",eU="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="[DEFAULT]",tU={[V2]:"fire-core",[SD]:"fire-core-compat",[ND]:"fire-analytics",[ID]:"fire-analytics-compat",[FD]:"fire-app-check",[RD]:"fire-app-check-compat",[kD]:"fire-auth",[DD]:"fire-auth-compat",[UD]:"fire-rtdb",[MD]:"fire-data-connect",[OD]:"fire-rtdb-compat",[LD]:"fire-fn",[PD]:"fire-fn-compat",[QD]:"fire-iid",[HD]:"fire-iid-compat",[jD]:"fire-fcm",[VD]:"fire-fcm-compat",[GD]:"fire-perf",[KD]:"fire-perf-compat",[zD]:"fire-rc",[WD]:"fire-rc-compat",[qD]:"fire-gcs",[XD]:"fire-gcs-compat",[YD]:"fire-fst",[ZD]:"fire-fst-compat",[JD]:"fire-vertex","fire-js":"fire-js",[$D]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Map,rU=new Map,K2=new Map;function v_(t,e){try{t.container.addComponent(e)}catch(r){Cl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ko(t){const e=t.name;if(K2.has(e))return Cl.debug(`There were multiple attempts to register component ${e}.`),!1;K2.set(e,t);for(const r of f1.values())v_(r,t);for(const r of rU.values())v_(r,t);return!0}function Fc(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function So(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bA=new Rc("app","Firebase",nU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bA.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=eU;function zI(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:G2,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw bA.create("bad-app-name",{appName:String(i)});if(r||(r=LI()),!r)throw bA.create("no-options");const s=f1.get(i);if(s){if(ed(r,s.options)&&ed(n,s.config))return s;throw bA.create("duplicate-app",{appName:i})}const o=new uD(i);for(const h of K2.values())o.addComponent(h);const c=new iU(r,n,o);return f1.set(i,c),c}function fv(t=G2){const e=f1.get(t);if(!e&&t===G2&&LI())return zI();if(!e)throw bA.create("no-app",{appName:t});return e}function Ga(t,e,r){var n;let i=(n=tU[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cl.warn(c.join(" "));return}ko(new co(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="firebase-heartbeat-database",aU=1,td="firebase-heartbeat-store";let Wx=null;function WI(){return Wx||(Wx=KI(sU,aU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(td)}catch(r){console.warn(r)}}}}).catch(t=>{throw bA.create("idb-open",{originalErrorMessage:t.message})})),Wx}async function oU(t){try{const r=(await WI()).transaction(td),n=await r.objectStore(td).get(qI(t));return await r.done,n}catch(e){if(e instanceof ho)Cl.warn(e.message);else{const r=bA.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cl.warn(r.message)}}}async function y_(t,e){try{const n=(await WI()).transaction(td,"readwrite");await n.objectStore(td).put(e,qI(t)),await n.done}catch(r){if(r instanceof ho)Cl.warn(r.message);else{const n=bA.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Cl.warn(n.message)}}}function qI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=1024,AU=720*60*60*1e3;class cU{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new fU(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=C_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=AU}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Cl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=C_(),{heartbeatsToSend:n,unsentEntries:i}=uU(this._heartbeatsCache.heartbeats),s=u1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Cl.warn(r),""}}}function C_(){return new Date().toISOString().substring(0,10)}function uU(t,e=lU){const r=[];let n=t.slice();for(const i of t){const s=r.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),E_(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),E_(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class fU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HI()?jI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await oU(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return y_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return y_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function E_(t){return u1(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t){ko(new co("platform-logger",e=>new TD(e),"PRIVATE")),ko(new co("heartbeat",e=>new cU(e),"PRIVATE")),Ga(V2,w_,t),Ga(V2,w_,"esm2017"),Ga("fire-js","")}dU("");var hU="firebase",gU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ga(hU,gU,"app");var b_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gc,XI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,P){function O(){}O.prototype=P.prototype,M.D=P.prototype,M.prototype=new O,M.prototype.constructor=M,M.C=function(ee,Y,X){for(var G=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)G[Ie-2]=arguments[Ie];return P.prototype[Y].apply(ee,G)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,P,O){O||(O=0);var ee=Array(16);if(typeof P=="string")for(var Y=0;16>Y;++Y)ee[Y]=P.charCodeAt(O++)|P.charCodeAt(O++)<<8|P.charCodeAt(O++)<<16|P.charCodeAt(O++)<<24;else for(Y=0;16>Y;++Y)ee[Y]=P[O++]|P[O++]<<8|P[O++]<<16|P[O++]<<24;P=M.g[0],O=M.g[1],Y=M.g[2];var X=M.g[3],G=P+(X^O&(Y^X))+ee[0]+3614090360&4294967295;P=O+(G<<7&4294967295|G>>>25),G=X+(Y^P&(O^Y))+ee[1]+3905402710&4294967295,X=P+(G<<12&4294967295|G>>>20),G=Y+(O^X&(P^O))+ee[2]+606105819&4294967295,Y=X+(G<<17&4294967295|G>>>15),G=O+(P^Y&(X^P))+ee[3]+3250441966&4294967295,O=Y+(G<<22&4294967295|G>>>10),G=P+(X^O&(Y^X))+ee[4]+4118548399&4294967295,P=O+(G<<7&4294967295|G>>>25),G=X+(Y^P&(O^Y))+ee[5]+1200080426&4294967295,X=P+(G<<12&4294967295|G>>>20),G=Y+(O^X&(P^O))+ee[6]+2821735955&4294967295,Y=X+(G<<17&4294967295|G>>>15),G=O+(P^Y&(X^P))+ee[7]+4249261313&4294967295,O=Y+(G<<22&4294967295|G>>>10),G=P+(X^O&(Y^X))+ee[8]+1770035416&4294967295,P=O+(G<<7&4294967295|G>>>25),G=X+(Y^P&(O^Y))+ee[9]+2336552879&4294967295,X=P+(G<<12&4294967295|G>>>20),G=Y+(O^X&(P^O))+ee[10]+4294925233&4294967295,Y=X+(G<<17&4294967295|G>>>15),G=O+(P^Y&(X^P))+ee[11]+2304563134&4294967295,O=Y+(G<<22&4294967295|G>>>10),G=P+(X^O&(Y^X))+ee[12]+1804603682&4294967295,P=O+(G<<7&4294967295|G>>>25),G=X+(Y^P&(O^Y))+ee[13]+4254626195&4294967295,X=P+(G<<12&4294967295|G>>>20),G=Y+(O^X&(P^O))+ee[14]+2792965006&4294967295,Y=X+(G<<17&4294967295|G>>>15),G=O+(P^Y&(X^P))+ee[15]+1236535329&4294967295,O=Y+(G<<22&4294967295|G>>>10),G=P+(Y^X&(O^Y))+ee[1]+4129170786&4294967295,P=O+(G<<5&4294967295|G>>>27),G=X+(O^Y&(P^O))+ee[6]+3225465664&4294967295,X=P+(G<<9&4294967295|G>>>23),G=Y+(P^O&(X^P))+ee[11]+643717713&4294967295,Y=X+(G<<14&4294967295|G>>>18),G=O+(X^P&(Y^X))+ee[0]+3921069994&4294967295,O=Y+(G<<20&4294967295|G>>>12),G=P+(Y^X&(O^Y))+ee[5]+3593408605&4294967295,P=O+(G<<5&4294967295|G>>>27),G=X+(O^Y&(P^O))+ee[10]+38016083&4294967295,X=P+(G<<9&4294967295|G>>>23),G=Y+(P^O&(X^P))+ee[15]+3634488961&4294967295,Y=X+(G<<14&4294967295|G>>>18),G=O+(X^P&(Y^X))+ee[4]+3889429448&4294967295,O=Y+(G<<20&4294967295|G>>>12),G=P+(Y^X&(O^Y))+ee[9]+568446438&4294967295,P=O+(G<<5&4294967295|G>>>27),G=X+(O^Y&(P^O))+ee[14]+3275163606&4294967295,X=P+(G<<9&4294967295|G>>>23),G=Y+(P^O&(X^P))+ee[3]+4107603335&4294967295,Y=X+(G<<14&4294967295|G>>>18),G=O+(X^P&(Y^X))+ee[8]+1163531501&4294967295,O=Y+(G<<20&4294967295|G>>>12),G=P+(Y^X&(O^Y))+ee[13]+2850285829&4294967295,P=O+(G<<5&4294967295|G>>>27),G=X+(O^Y&(P^O))+ee[2]+4243563512&4294967295,X=P+(G<<9&4294967295|G>>>23),G=Y+(P^O&(X^P))+ee[7]+1735328473&4294967295,Y=X+(G<<14&4294967295|G>>>18),G=O+(X^P&(Y^X))+ee[12]+2368359562&4294967295,O=Y+(G<<20&4294967295|G>>>12),G=P+(O^Y^X)+ee[5]+4294588738&4294967295,P=O+(G<<4&4294967295|G>>>28),G=X+(P^O^Y)+ee[8]+2272392833&4294967295,X=P+(G<<11&4294967295|G>>>21),G=Y+(X^P^O)+ee[11]+1839030562&4294967295,Y=X+(G<<16&4294967295|G>>>16),G=O+(Y^X^P)+ee[14]+4259657740&4294967295,O=Y+(G<<23&4294967295|G>>>9),G=P+(O^Y^X)+ee[1]+2763975236&4294967295,P=O+(G<<4&4294967295|G>>>28),G=X+(P^O^Y)+ee[4]+1272893353&4294967295,X=P+(G<<11&4294967295|G>>>21),G=Y+(X^P^O)+ee[7]+4139469664&4294967295,Y=X+(G<<16&4294967295|G>>>16),G=O+(Y^X^P)+ee[10]+3200236656&4294967295,O=Y+(G<<23&4294967295|G>>>9),G=P+(O^Y^X)+ee[13]+681279174&4294967295,P=O+(G<<4&4294967295|G>>>28),G=X+(P^O^Y)+ee[0]+3936430074&4294967295,X=P+(G<<11&4294967295|G>>>21),G=Y+(X^P^O)+ee[3]+3572445317&4294967295,Y=X+(G<<16&4294967295|G>>>16),G=O+(Y^X^P)+ee[6]+76029189&4294967295,O=Y+(G<<23&4294967295|G>>>9),G=P+(O^Y^X)+ee[9]+3654602809&4294967295,P=O+(G<<4&4294967295|G>>>28),G=X+(P^O^Y)+ee[12]+3873151461&4294967295,X=P+(G<<11&4294967295|G>>>21),G=Y+(X^P^O)+ee[15]+530742520&4294967295,Y=X+(G<<16&4294967295|G>>>16),G=O+(Y^X^P)+ee[2]+3299628645&4294967295,O=Y+(G<<23&4294967295|G>>>9),G=P+(Y^(O|~X))+ee[0]+4096336452&4294967295,P=O+(G<<6&4294967295|G>>>26),G=X+(O^(P|~Y))+ee[7]+1126891415&4294967295,X=P+(G<<10&4294967295|G>>>22),G=Y+(P^(X|~O))+ee[14]+2878612391&4294967295,Y=X+(G<<15&4294967295|G>>>17),G=O+(X^(Y|~P))+ee[5]+4237533241&4294967295,O=Y+(G<<21&4294967295|G>>>11),G=P+(Y^(O|~X))+ee[12]+1700485571&4294967295,P=O+(G<<6&4294967295|G>>>26),G=X+(O^(P|~Y))+ee[3]+2399980690&4294967295,X=P+(G<<10&4294967295|G>>>22),G=Y+(P^(X|~O))+ee[10]+4293915773&4294967295,Y=X+(G<<15&4294967295|G>>>17),G=O+(X^(Y|~P))+ee[1]+2240044497&4294967295,O=Y+(G<<21&4294967295|G>>>11),G=P+(Y^(O|~X))+ee[8]+1873313359&4294967295,P=O+(G<<6&4294967295|G>>>26),G=X+(O^(P|~Y))+ee[15]+4264355552&4294967295,X=P+(G<<10&4294967295|G>>>22),G=Y+(P^(X|~O))+ee[6]+2734768916&4294967295,Y=X+(G<<15&4294967295|G>>>17),G=O+(X^(Y|~P))+ee[13]+1309151649&4294967295,O=Y+(G<<21&4294967295|G>>>11),G=P+(Y^(O|~X))+ee[4]+4149444226&4294967295,P=O+(G<<6&4294967295|G>>>26),G=X+(O^(P|~Y))+ee[11]+3174756917&4294967295,X=P+(G<<10&4294967295|G>>>22),G=Y+(P^(X|~O))+ee[2]+718787259&4294967295,Y=X+(G<<15&4294967295|G>>>17),G=O+(X^(Y|~P))+ee[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(Y+(G<<21&4294967295|G>>>11))&4294967295,M.g[2]=M.g[2]+Y&4294967295,M.g[3]=M.g[3]+X&4294967295}n.prototype.u=function(M,P){P===void 0&&(P=M.length);for(var O=P-this.blockSize,ee=this.B,Y=this.h,X=0;X<P;){if(Y==0)for(;X<=O;)i(this,M,X),X+=this.blockSize;if(typeof M=="string"){for(;X<P;)if(ee[Y++]=M.charCodeAt(X++),Y==this.blockSize){i(this,ee),Y=0;break}}else for(;X<P;)if(ee[Y++]=M[X++],Y==this.blockSize){i(this,ee),Y=0;break}}this.h=Y,this.o+=P},n.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;var O=8*this.o;for(P=M.length-8;P<M.length;++P)M[P]=O&255,O/=256;for(this.u(M),M=Array(16),P=O=0;4>P;++P)for(var ee=0;32>ee;ee+=8)M[O++]=this.g[P]>>>ee&255;return M};function s(M,P){var O=c;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=P(M)}function o(M,P){this.h=P;for(var O=[],ee=!0,Y=M.length-1;0<=Y;Y--){var X=M[Y]|0;ee&&X==P||(O[Y]=X,ee=!1)}this.g=O}var c={};function h(M){return-128<=M&&128>M?s(M,function(P){return new o([P|0],0>P?-1:0)}):new o([M|0],0>M?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return C;if(0>M)return U(d(-M));for(var P=[],O=1,ee=0;M>=O;ee++)P[ee]=M/O|0,O*=4294967296;return new o(P,0)}function m(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return U(m(M.substring(1),P));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=d(Math.pow(P,8)),ee=C,Y=0;Y<M.length;Y+=8){var X=Math.min(8,M.length-Y),G=parseInt(M.substring(Y,Y+X),P);8>X?(X=d(Math.pow(P,X)),ee=ee.j(X).add(d(G))):(ee=ee.j(O),ee=ee.add(d(G)))}return ee}var C=h(0),b=h(1),I=h(16777216);t=o.prototype,t.m=function(){if(k(this))return-U(this).m();for(var M=0,P=1,O=0;O<this.g.length;O++){var ee=this.i(O);M+=(0<=ee?ee:4294967296+ee)*P,P*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(F(this))return"0";if(k(this))return"-"+U(this).toString(M);for(var P=d(Math.pow(M,6)),O=this,ee="";;){var Y=te(O,P).g;O=V(O,Y.j(P));var X=((0<O.g.length?O.g[0]:O.h)>>>0).toString(M);if(O=Y,F(O))return X+ee;for(;6>X.length;)X="0"+X;ee=X+ee}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function F(M){if(M.h!=0)return!1;for(var P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function k(M){return M.h==-1}t.l=function(M){return M=V(this,M),k(M)?-1:F(M)?0:1};function U(M){for(var P=M.g.length,O=[],ee=0;ee<P;ee++)O[ee]=~M.g[ee];return new o(O,~M.h).add(b)}t.abs=function(){return k(this)?U(this):this},t.add=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],ee=0,Y=0;Y<=P;Y++){var X=ee+(this.i(Y)&65535)+(M.i(Y)&65535),G=(X>>>16)+(this.i(Y)>>>16)+(M.i(Y)>>>16);ee=G>>>16,X&=65535,G&=65535,O[Y]=G<<16|X}return new o(O,O[O.length-1]&-2147483648?-1:0)};function V(M,P){return M.add(U(P))}t.j=function(M){if(F(this)||F(M))return C;if(k(this))return k(M)?U(this).j(U(M)):U(U(this).j(M));if(k(M))return U(this.j(U(M)));if(0>this.l(I)&&0>M.l(I))return d(this.m()*M.m());for(var P=this.g.length+M.g.length,O=[],ee=0;ee<2*P;ee++)O[ee]=0;for(ee=0;ee<this.g.length;ee++)for(var Y=0;Y<M.g.length;Y++){var X=this.i(ee)>>>16,G=this.i(ee)&65535,Ie=M.i(Y)>>>16,ge=M.i(Y)&65535;O[2*ee+2*Y]+=G*ge,K(O,2*ee+2*Y),O[2*ee+2*Y+1]+=X*ge,K(O,2*ee+2*Y+1),O[2*ee+2*Y+1]+=G*Ie,K(O,2*ee+2*Y+1),O[2*ee+2*Y+2]+=X*Ie,K(O,2*ee+2*Y+2)}for(ee=0;ee<P;ee++)O[ee]=O[2*ee+1]<<16|O[2*ee];for(ee=P;ee<2*P;ee++)O[ee]=0;return new o(O,0)};function K(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function Q(M,P){this.g=M,this.h=P}function te(M,P){if(F(P))throw Error("division by zero");if(F(M))return new Q(C,C);if(k(M))return P=te(U(M),P),new Q(U(P.g),U(P.h));if(k(P))return P=te(M,U(P)),new Q(U(P.g),P.h);if(30<M.g.length){if(k(M)||k(P))throw Error("slowDivide_ only works with positive integers.");for(var O=b,ee=P;0>=ee.l(M);)O=re(O),ee=re(ee);var Y=z(O,1),X=z(ee,1);for(ee=z(ee,2),O=z(O,2);!F(ee);){var G=X.add(ee);0>=G.l(M)&&(Y=Y.add(O),X=G),ee=z(ee,1),O=z(O,1)}return P=V(M,Y.j(P)),new Q(Y,P)}for(Y=C;0<=M.l(P);){for(O=Math.max(1,Math.floor(M.m()/P.m())),ee=Math.ceil(Math.log(O)/Math.LN2),ee=48>=ee?1:Math.pow(2,ee-48),X=d(O),G=X.j(P);k(G)||0<G.l(M);)O-=ee,X=d(O),G=X.j(P);F(X)&&(X=b),Y=Y.add(X),M=V(M,G)}return new Q(Y,M)}t.A=function(M){return te(this,M).h},t.and=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],ee=0;ee<P;ee++)O[ee]=this.i(ee)&M.i(ee);return new o(O,this.h&M.h)},t.or=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],ee=0;ee<P;ee++)O[ee]=this.i(ee)|M.i(ee);return new o(O,this.h|M.h)},t.xor=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],ee=0;ee<P;ee++)O[ee]=this.i(ee)^M.i(ee);return new o(O,this.h^M.h)};function re(M){for(var P=M.g.length+1,O=[],ee=0;ee<P;ee++)O[ee]=M.i(ee)<<1|M.i(ee-1)>>>31;return new o(O,M.h)}function z(M,P){var O=P>>5;P%=32;for(var ee=M.g.length-O,Y=[],X=0;X<ee;X++)Y[X]=0<P?M.i(X+O)>>>P|M.i(X+O+1)<<32-P:M.i(X+O);return new o(Y,M.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,XI=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,gc=o}).apply(typeof b_<"u"?b_:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YI,mf,JI,Yg,z2,ZI,$I,e3;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(B,L,W){return B==Array.prototype||B==Object.prototype||(B[L]=W.value),B};function r(B){B=[typeof globalThis=="object"&&globalThis,B,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var L=0;L<B.length;++L){var W=B[L];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var n=r(this);function i(B,L){if(L)e:{var W=n;B=B.split(".");for(var ue=0;ue<B.length-1;ue++){var Qe=B[ue];if(!(Qe in W))break e;W=W[Qe]}B=B[B.length-1],ue=W[B],L=L(ue),L!=ue&&L!=null&&e(W,B,{configurable:!0,writable:!0,value:L})}}function s(B,L){B instanceof String&&(B+="");var W=0,ue=!1,Qe={next:function(){if(!ue&&W<B.length){var $e=W++;return{value:L($e,B[$e]),done:!1}}return ue=!0,{done:!0,value:void 0}}};return Qe[Symbol.iterator]=function(){return Qe},Qe}i("Array.prototype.values",function(B){return B||function(){return s(this,function(L,W){return W})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function h(B){var L=typeof B;return L=L!="object"?L:B?Array.isArray(B)?"array":L:"null",L=="array"||L=="object"&&typeof B.length=="number"}function d(B){var L=typeof B;return L=="object"&&B!=null||L=="function"}function m(B,L,W){return B.call.apply(B.bind,arguments)}function C(B,L,W){if(!B)throw Error();if(2<arguments.length){var ue=Array.prototype.slice.call(arguments,2);return function(){var Qe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Qe,ue),B.apply(L,Qe)}}return function(){return B.apply(L,arguments)}}function b(B,L,W){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:C,b.apply(null,arguments)}function I(B,L){var W=Array.prototype.slice.call(arguments,1);return function(){var ue=W.slice();return ue.push.apply(ue,arguments),B.apply(this,ue)}}function F(B,L){function W(){}W.prototype=L.prototype,B.aa=L.prototype,B.prototype=new W,B.prototype.constructor=B,B.Qb=function(ue,Qe,$e){for(var Ut=Array(arguments.length-2),nn=2;nn<arguments.length;nn++)Ut[nn-2]=arguments[nn];return L.prototype[Qe].apply(ue,Ut)}}function k(B){const L=B.length;if(0<L){const W=Array(L);for(let ue=0;ue<L;ue++)W[ue]=B[ue];return W}return[]}function U(B,L){for(let W=1;W<arguments.length;W++){const ue=arguments[W];if(h(ue)){const Qe=B.length||0,$e=ue.length||0;B.length=Qe+$e;for(let Ut=0;Ut<$e;Ut++)B[Qe+Ut]=ue[Ut]}else B.push(ue)}}class V{constructor(L,W){this.i=L,this.j=W,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function K(B){return/^[\s\xa0]*$/.test(B)}function Q(){var B=c.navigator;return B&&(B=B.userAgent)?B:""}function te(B){return te[" "](B),B}te[" "]=function(){};var re=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function z(B,L,W){for(const ue in B)L.call(W,B[ue],ue,B)}function M(B,L){for(const W in B)L.call(void 0,B[W],W,B)}function P(B){const L={};for(const W in B)L[W]=B[W];return L}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(B,L){let W,ue;for(let Qe=1;Qe<arguments.length;Qe++){ue=arguments[Qe];for(W in ue)B[W]=ue[W];for(let $e=0;$e<O.length;$e++)W=O[$e],Object.prototype.hasOwnProperty.call(ue,W)&&(B[W]=ue[W])}}function Y(B){var L=1;B=B.split(":");const W=[];for(;0<L&&B.length;)W.push(B.shift()),L--;return B.length&&W.push(B.join(":")),W}function X(B){c.setTimeout(()=>{throw B},0)}function G(){var B=be;let L=null;return B.g&&(L=B.g,B.g=B.g.next,B.g||(B.h=null),L.next=null),L}class Ie{constructor(){this.h=this.g=null}add(L,W){const ue=ge.get();ue.set(L,W),this.h?this.h.next=ue:this.g=ue,this.h=ue}}var ge=new V(()=>new de,B=>B.reset());class de{constructor(){this.next=this.g=this.h=null}set(L,W){this.h=L,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let we,Ge=!1,be=new Ie,De=()=>{const B=c.Promise.resolve(void 0);we=()=>{B.then(ne)}};var ne=()=>{for(var B;B=G();){try{B.h.call(B.g)}catch(W){X(W)}var L=ge;L.j(B),100>L.h&&(L.h++,B.next=L.g,L.g=B)}Ge=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(B,L){this.type=B,this.g=this.target=L,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var oe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var B=!1,L=Object.defineProperty({},"passive",{get:function(){B=!0}});try{const W=()=>{};c.addEventListener("test",W,L),c.removeEventListener("test",W,L)}catch{}return B})();function ae(B,L){if(ce.call(this,B?B.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,B){var W=this.type=B.type,ue=B.changedTouches&&B.changedTouches.length?B.changedTouches[0]:null;if(this.target=B.target||B.srcElement,this.g=L,L=B.relatedTarget){if(re){e:{try{te(L.nodeName);var Qe=!0;break e}catch{}Qe=!1}Qe||(L=null)}}else W=="mouseover"?L=B.fromElement:W=="mouseout"&&(L=B.toElement);this.relatedTarget=L,ue?(this.clientX=ue.clientX!==void 0?ue.clientX:ue.pageX,this.clientY=ue.clientY!==void 0?ue.clientY:ue.pageY,this.screenX=ue.screenX||0,this.screenY=ue.screenY||0):(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0),this.button=B.button,this.key=B.key||"",this.ctrlKey=B.ctrlKey,this.altKey=B.altKey,this.shiftKey=B.shiftKey,this.metaKey=B.metaKey,this.pointerId=B.pointerId||0,this.pointerType=typeof B.pointerType=="string"?B.pointerType:Ee[B.pointerType]||"",this.state=B.state,this.i=B,B.defaultPrevented&&ae.aa.h.call(this)}}F(ae,ce);var Ee={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var B=this.i;B.preventDefault?B.preventDefault():B.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function He(B,L,W,ue,Qe){this.listener=B,this.proxy=null,this.src=L,this.type=W,this.capture=!!ue,this.ha=Qe,this.key=++Fe,this.da=this.fa=!1}function tt(B){B.da=!0,B.listener=null,B.proxy=null,B.src=null,B.ha=null}function Tt(B){this.src=B,this.g={},this.h=0}Tt.prototype.add=function(B,L,W,ue,Qe){var $e=B.toString();B=this.g[$e],B||(B=this.g[$e]=[],this.h++);var Ut=Oe(B,L,ue,Qe);return-1<Ut?(L=B[Ut],W||(L.fa=!1)):(L=new He(L,this.src,$e,!!ue,Qe),L.fa=W,B.push(L)),L};function ve(B,L){var W=L.type;if(W in B.g){var ue=B.g[W],Qe=Array.prototype.indexOf.call(ue,L,void 0),$e;($e=0<=Qe)&&Array.prototype.splice.call(ue,Qe,1),$e&&(tt(L),B.g[W].length==0&&(delete B.g[W],B.h--))}}function Oe(B,L,W,ue){for(var Qe=0;Qe<B.length;++Qe){var $e=B[Qe];if(!$e.da&&$e.listener==L&&$e.capture==!!W&&$e.ha==ue)return Qe}return-1}var st="closure_lm_"+(1e6*Math.random()|0),Bt={};function kt(B,L,W,ue,Qe){if(Array.isArray(L)){for(var $e=0;$e<L.length;$e++)kt(B,L[$e],W,ue,Qe);return null}return W=It(W),B&&B[Ke]?B.K(L,W,d(ue)?!!ue.capture:!1,Qe):ft(B,L,W,!1,ue,Qe)}function ft(B,L,W,ue,Qe,$e){if(!L)throw Error("Invalid event type");var Ut=d(Qe)?!!Qe.capture:!!Qe,nn=Nr(B);if(nn||(B[st]=nn=new Tt(B)),W=nn.add(L,W,ue,Ut,$e),W.proxy)return W;if(ue=Ot(),W.proxy=ue,ue.src=B,ue.listener=W,B.addEventListener)oe||(Qe=Ut),Qe===void 0&&(Qe=!1),B.addEventListener(L.toString(),ue,Qe);else if(B.attachEvent)B.attachEvent(At(L.toString()),ue);else if(B.addListener&&B.removeListener)B.addListener(ue);else throw Error("addEventListener and attachEvent are unavailable.");return W}function Ot(){function B(W){return L.call(B.src,B.listener,W)}const L=er;return B}function jt(B,L,W,ue,Qe){if(Array.isArray(L))for(var $e=0;$e<L.length;$e++)jt(B,L[$e],W,ue,Qe);else ue=d(ue)?!!ue.capture:!!ue,W=It(W),B&&B[Ke]?(B=B.i,L=String(L).toString(),L in B.g&&($e=B.g[L],W=Oe($e,W,ue,Qe),-1<W&&(tt($e[W]),Array.prototype.splice.call($e,W,1),$e.length==0&&(delete B.g[L],B.h--)))):B&&(B=Nr(B))&&(L=B.g[L.toString()],B=-1,L&&(B=Oe(L,W,ue,Qe)),(W=-1<B?L[B]:null)&&mt(W))}function mt(B){if(typeof B!="number"&&B&&!B.da){var L=B.src;if(L&&L[Ke])ve(L.i,B);else{var W=B.type,ue=B.proxy;L.removeEventListener?L.removeEventListener(W,ue,B.capture):L.detachEvent?L.detachEvent(At(W),ue):L.addListener&&L.removeListener&&L.removeListener(ue),(W=Nr(L))?(ve(W,B),W.h==0&&(W.src=null,L[st]=null)):tt(B)}}}function At(B){return B in Bt?Bt[B]:Bt[B]="on"+B}function er(B,L){if(B.da)B=!0;else{L=new ae(L,this);var W=B.listener,ue=B.ha||B.src;B.fa&&mt(B),B=W.call(ue,L)}return B}function Nr(B){return B=B[st],B instanceof Tt?B:null}var Ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(B){return typeof B=="function"?B:(B[Ue]||(B[Ue]=function(L){return B.handleEvent(L)}),B[Ue])}function Lt(){q.call(this),this.i=new Tt(this),this.M=this,this.F=null}F(Lt,q),Lt.prototype[Ke]=!0,Lt.prototype.removeEventListener=function(B,L,W,ue){jt(this,B,L,W,ue)};function Zt(B,L){var W,ue=B.F;if(ue)for(W=[];ue;ue=ue.F)W.push(ue);if(B=B.M,ue=L.type||L,typeof L=="string")L=new ce(L,B);else if(L instanceof ce)L.target=L.target||B;else{var Qe=L;L=new ce(ue,B),ee(L,Qe)}if(Qe=!0,W)for(var $e=W.length-1;0<=$e;$e--){var Ut=L.g=W[$e];Qe=cr(Ut,ue,!0,L)&&Qe}if(Ut=L.g=B,Qe=cr(Ut,ue,!0,L)&&Qe,Qe=cr(Ut,ue,!1,L)&&Qe,W)for($e=0;$e<W.length;$e++)Ut=L.g=W[$e],Qe=cr(Ut,ue,!1,L)&&Qe}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var B=this.i,L;for(L in B.g){for(var W=B.g[L],ue=0;ue<W.length;ue++)tt(W[ue]);delete B.g[L],B.h--}}this.F=null},Lt.prototype.K=function(B,L,W,ue){return this.i.add(String(B),L,!1,W,ue)},Lt.prototype.L=function(B,L,W,ue){return this.i.add(String(B),L,!0,W,ue)};function cr(B,L,W,ue){if(L=B.i.g[String(L)],!L)return!0;L=L.concat();for(var Qe=!0,$e=0;$e<L.length;++$e){var Ut=L[$e];if(Ut&&!Ut.da&&Ut.capture==W){var nn=Ut.listener,Nn=Ut.ha||Ut.src;Ut.fa&&ve(B.i,Ut),Qe=nn.call(Nn,ue)!==!1&&Qe}}return Qe&&!ue.defaultPrevented}function hr(B,L,W){if(typeof B=="function")W&&(B=b(B,W));else if(B&&typeof B.handleEvent=="function")B=b(B.handleEvent,B);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:c.setTimeout(B,L||0)}function Ht(B){B.g=hr(()=>{B.g=null,B.i&&(B.i=!1,Ht(B))},B.l);const L=B.h;B.h=null,B.m.apply(null,L)}class mr extends q{constructor(L,W){super(),this.m=L,this.l=W,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pt(B){q.call(this),this.h=B,this.g={}}F(pt,q);var yt=[];function _e(B){z(B.g,function(L,W){this.g.hasOwnProperty(W)&&mt(L)},B),B.g={}}pt.prototype.N=function(){pt.aa.N.call(this),_e(this)},pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nt=c.JSON.stringify,Re=c.JSON.parse,Dt=class{stringify(B){return c.JSON.stringify(B,void 0)}parse(B){return c.JSON.parse(B,void 0)}};function rr(){}rr.prototype.h=null;function et(B){return B.h||(B.h=B.i())}function Rt(){}var Mt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kr(){ce.call(this,"d")}F(kr,ce);function Tr(){ce.call(this,"c")}F(Tr,ce);var qr={},Vr=null;function Us(){return Vr=Vr||new Lt}qr.La="serverreachability";function Be(B){ce.call(this,qr.La,B)}F(Be,ce);function ut(B){const L=Us();Zt(L,new Be(L))}qr.STAT_EVENT="statevent";function at(B,L){ce.call(this,qr.STAT_EVENT,B),this.stat=L}F(at,ce);function lt(B){const L=Us();Zt(L,new at(L,B))}qr.Ma="timingevent";function lr(B,L){ce.call(this,qr.Ma,B),this.size=L}F(lr,ce);function $r(B,L){if(typeof B!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){B()},L)}function Sn(){this.g=!0}Sn.prototype.xa=function(){this.g=!1};function kn(B,L,W,ue,Qe,$e){B.info(function(){if(B.g)if($e)for(var Ut="",nn=$e.split("&"),Nn=0;Nn<nn.length;Nn++){var Rr=nn[Nn].split("=");if(1<Rr.length){var Tn=Rr[0];Rr=Rr[1];var Kn=Tn.split("_");Ut=2<=Kn.length&&Kn[1]=="type"?Ut+(Tn+"="+Rr+"&"):Ut+(Tn+"=redacted&")}}else Ut=null;else Ut=$e;return"XMLHTTP REQ ("+ue+") [attempt "+Qe+"]: "+L+`
`+W+`
`+Ut})}function di(B,L,W,ue,Qe,$e,Ut){B.info(function(){return"XMLHTTP RESP ("+ue+") [ attempt "+Qe+"]: "+L+`
`+W+`
`+$e+" "+Ut})}function ie(B,L,W,ue){B.info(function(){return"XMLHTTP TEXT ("+L+"): "+fe(B,W)+(ue?" "+ue:"")})}function Ae(B,L){B.info(function(){return"TIMEOUT: "+L})}Sn.prototype.info=function(){};function fe(B,L){if(!B.g)return L;if(!L)return null;try{var W=JSON.parse(L);if(W){for(B=0;B<W.length;B++)if(Array.isArray(W[B])){var ue=W[B];if(!(2>ue.length)){var Qe=ue[1];if(Array.isArray(Qe)&&!(1>Qe.length)){var $e=Qe[0];if($e!="noop"&&$e!="stop"&&$e!="close")for(var Ut=1;Ut<Qe.length;Ut++)Qe[Ut]=""}}}}return Nt(W)}catch{return L}}var he={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ce;function Ve(){}F(Ve,rr),Ve.prototype.g=function(){return new XMLHttpRequest},Ve.prototype.i=function(){return{}},Ce=new Ve;function nt(B,L,W,ue){this.j=B,this.i=L,this.l=W,this.R=ue||1,this.U=new pt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}var qe={},Xe={};function ht(B,L,W){B.L=1,B.v=In(ur(L)),B.m=W,B.P=!0,wt(B,null)}function wt(B,L){B.F=Date.now(),St(B),B.A=ur(B.v);var W=B.A,ue=B.R;Array.isArray(ue)||(ue=[String(ue)]),wn(W.i,"t",ue),B.C=0,W=B.j.J,B.h=new Pe,B.g=Wc(B.j,W?L:null,!B.m),0<B.O&&(B.M=new mr(b(B.Y,B,B.g),B.O)),L=B.U,W=B.g,ue=B.ca;var Qe="readystatechange";Array.isArray(Qe)||(Qe&&(yt[0]=Qe.toString()),Qe=yt);for(var $e=0;$e<Qe.length;$e++){var Ut=kt(W,Qe[$e],ue||L.handleEvent,!1,L.h||L);if(!Ut)break;L.g[Ut.key]=Ut}L=B.H?P(B.H):{},B.m?(B.u||(B.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",B.g.ea(B.A,B.u,B.m,L)):(B.u="GET",B.g.ea(B.A,B.u,null,L)),ut(),kn(B.i,B.u,B.A,B.l,B.R,B.m)}nt.prototype.ca=function(B){B=B.target;const L=this.M;L&&Hi(B)==3?L.j():this.Y(B)},nt.prototype.Y=function(B){try{if(B==this.g)e:{const Kn=Hi(this.g);var L=this.g.Ba();const ai=this.g.Z();if(!(3>Kn)&&(Kn!=3||this.g&&(this.h.h||this.g.oa()||Ho(this.g)))){this.J||Kn!=4||L==7||(L==8||0>=ai?ut(3):ut(2)),it(this);var W=this.g.Z();this.X=W;t:if(vt(this)){var ue=Ho(this.g);B="";var Qe=ue.length,$e=Hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),Xr(this);var Ut="";break t}this.h.i=new c.TextDecoder}for(L=0;L<Qe;L++)this.h.h=!0,B+=this.h.i.decode(ue[L],{stream:!($e&&L==Qe-1)});ue.length=0,this.h.g+=B,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=W==200,di(this.i,this.u,this.A,this.l,this.R,Kn,W),this.o){if(this.T&&!this.K){t:{if(this.g){var nn,Nn=this.g;if((nn=Nn.g?Nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(nn)){var Rr=nn;break t}}Rr=null}if(W=Rr)ie(this.i,this.l,W,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vn(this,W);else{this.o=!1,this.s=3,lt(12),nr(this),Xr(this);break e}}if(this.P){W=!0;let Vi;for(;!this.J&&this.C<Ut.length;)if(Vi=Et(this,Ut),Vi==Xe){Kn==4&&(this.s=4,lt(14),W=!1),ie(this.i,this.l,null,"[Incomplete Response]");break}else if(Vi==qe){this.s=4,lt(15),ie(this.i,this.l,Ut,"[Invalid Chunk]"),W=!1;break}else ie(this.i,this.l,Vi,null),Vn(this,Vi);if(vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kn!=4||Ut.length!=0||this.h.h||(this.s=1,lt(16),W=!1),this.o=this.o&&W,!W)ie(this.i,this.l,Ut,"[Invalid Chunked Response]"),nr(this),Xr(this);else if(0<Ut.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),Go(Tn),Tn.M=!0,lt(11))}}else ie(this.i,this.l,Ut,null),Vn(this,Ut);Kn==4&&nr(this),this.o&&!this.J&&(Kn==4?_n(this.j,this):(this.o=!1,St(this)))}else en(this.g),W==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),nr(this),Xr(this)}}}catch{}finally{}};function vt(B){return B.g?B.u=="GET"&&B.L!=2&&B.j.Ca:!1}function Et(B,L){var W=B.C,ue=L.indexOf(`
`,W);return ue==-1?Xe:(W=Number(L.substring(W,ue)),isNaN(W)?qe:(ue+=1,ue+W>L.length?Xe:(L=L.slice(ue,ue+W),B.C=ue+W,L)))}nt.prototype.cancel=function(){this.J=!0,nr(this)};function St(B){B.S=Date.now()+B.I,Gt(B,B.I)}function Gt(B,L){if(B.B!=null)throw Error("WatchDog timer not null");B.B=$r(b(B.ba,B),L)}function it(B){B.B&&(c.clearTimeout(B.B),B.B=null)}nt.prototype.ba=function(){this.B=null;const B=Date.now();0<=B-this.S?(Ae(this.i,this.A),this.L!=2&&(ut(),lt(17)),nr(this),this.s=2,Xr(this)):Gt(this,this.S-B)};function Xr(B){B.j.G==0||B.J||_n(B.j,B)}function nr(B){it(B);var L=B.M;L&&typeof L.ma=="function"&&L.ma(),B.M=null,_e(B.U),B.g&&(L=B.g,B.g=null,L.abort(),L.ma())}function Vn(B,L){try{var W=B.j;if(W.G!=0&&(W.g==B||qn(W.h,B))){if(!B.K&&qn(W.h,B)&&W.G==3){try{var ue=W.Da.g.parse(L)}catch{ue=null}if(Array.isArray(ue)&&ue.length==3){var Qe=ue;if(Qe[0]==0){e:if(!W.u){if(W.g)if(W.g.F+3e3<B.F)Ta(W),wo(W);else break e;VA(W),lt(18)}}else W.za=Qe[1],0<W.za-W.T&&37500>Qe[2]&&W.F&&W.v==0&&!W.C&&(W.C=$r(b(W.Za,W),6e3));if(1>=yr(W.h)&&W.ca){try{W.ca()}catch{}W.ca=void 0}}else ji(W,11)}else if((B.K||W.g==B)&&Ta(W),!K(L))for(Qe=W.Da.g.parse(L),L=0;L<Qe.length;L++){let Rr=Qe[L];if(W.T=Rr[0],Rr=Rr[1],W.G==2)if(Rr[0]=="c"){W.K=Rr[1],W.ia=Rr[2];const Tn=Rr[3];Tn!=null&&(W.la=Tn,W.j.info("VER="+W.la));const Kn=Rr[4];Kn!=null&&(W.Aa=Kn,W.j.info("SVER="+W.Aa));const ai=Rr[5];ai!=null&&typeof ai=="number"&&0<ai&&(ue=1.5*ai,W.L=ue,W.j.info("backChannelRequestTimeoutMs_="+ue)),ue=W;const Vi=B.g;if(Vi){const ki=Vi.g?Vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ki){var $e=ue.h;$e.g||ki.indexOf("spdy")==-1&&ki.indexOf("quic")==-1&&ki.indexOf("h2")==-1||($e.j=$e.l,$e.g=new Set,$e.h&&(ba($e,$e.h),$e.h=null))}if(ue.D){const Ja=Vi.g?Vi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ja&&(ue.ya=Ja,Ft(ue.I,ue.D,Ja))}}W.G=3,W.l&&W.l.ua(),W.ba&&(W.R=Date.now()-B.F,W.j.info("Handshake RTT: "+W.R+"ms")),ue=W;var Ut=B;if(ue.qa=tr(ue,ue.J?ue.ia:null,ue.W),Ut.K){is(ue.h,Ut);var nn=Ut,Nn=ue.L;Nn&&(nn.I=Nn),nn.B&&(it(nn),St(nn)),ue.g=Ut}else zc(ue);0<W.i.length&&gr(W)}else Rr[0]!="stop"&&Rr[0]!="close"||ji(W,7);else W.G==3&&(Rr[0]=="stop"||Rr[0]=="close"?Rr[0]=="stop"?ji(W,7):Vs(W):Rr[0]!="noop"&&W.l&&W.l.ta(Rr),W.v=0)}}ut(4)}catch{}}var qa=class{constructor(B,L){this.g=B,this.map=L}};function Br(B){this.l=B||10,c.PerformanceNavigationTiming?(B=c.performance.getEntriesByType("navigation"),B=0<B.length&&(B[0].nextHopProtocol=="hq"||B[0].nextHopProtocol=="h2")):B=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=B?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xr(B){return B.h?!0:B.g?B.g.size>=B.j:!1}function yr(B){return B.h?1:B.g?B.g.size:0}function qn(B,L){return B.h?B.h==L:B.g?B.g.has(L):!1}function ba(B,L){B.g?B.g.add(L):B.h=L}function is(B,L){B.h&&B.h==L?B.h=null:B.g&&B.g.has(L)&&B.g.delete(L)}Br.prototype.cancel=function(){if(this.i=Gr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const B of this.g.values())B.cancel();this.g.clear()}};function Gr(B){if(B.h!=null)return B.i.concat(B.h.D);if(B.g!=null&&B.g.size!==0){let L=B.i;for(const W of B.g.values())L=L.concat(W.D);return L}return k(B.i)}function na(B){if(B.V&&typeof B.V=="function")return B.V();if(typeof Map<"u"&&B instanceof Map||typeof Set<"u"&&B instanceof Set)return Array.from(B.values());if(typeof B=="string")return B.split("");if(h(B)){for(var L=[],W=B.length,ue=0;ue<W;ue++)L.push(B[ue]);return L}L=[],W=0;for(ue in B)L[W++]=B[ue];return L}function C0(B){if(B.na&&typeof B.na=="function")return B.na();if(!B.V||typeof B.V!="function"){if(typeof Map<"u"&&B instanceof Map)return Array.from(B.keys());if(!(typeof Set<"u"&&B instanceof Set)){if(h(B)||typeof B=="string"){var L=[];B=B.length;for(var W=0;W<B;W++)L.push(W);return L}L=[],W=0;for(const ue in B)L[W++]=ue;return L}}}function xn(B,L){if(B.forEach&&typeof B.forEach=="function")B.forEach(L,void 0);else if(h(B)||typeof B=="string")Array.prototype.forEach.call(B,L,void 0);else for(var W=C0(B),ue=na(B),Qe=ue.length,$e=0;$e<Qe;$e++)L.call(void 0,ue[$e],W&&W[$e],B)}var Ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dl(B,L){if(B){B=B.split("&");for(var W=0;W<B.length;W++){var ue=B[W].indexOf("="),Qe=null;if(0<=ue){var $e=B[W].substring(0,ue);Qe=B[W].substring(ue+1)}else $e=B[W];L($e,Qe?decodeURIComponent(Qe.replace(/\+/g," ")):"")}}}function ss(B){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,B instanceof ss){this.h=B.h,Dn(this,B.j),this.o=B.o,this.g=B.g,je(this,B.s),this.l=B.l;var L=B.i,W=new Ls;W.i=L.i,L.g&&(W.g=new Map(L.g),W.h=L.h),me(this,W),this.m=B.m}else B&&(L=String(B).match(Ms))?(this.h=!1,Dn(this,L[1]||"",!0),this.o=ii(L[2]||""),this.g=ii(L[3]||"",!0),je(this,L[4]),this.l=ii(L[5]||"",!0),me(this,L[6]||"",!0),this.m=ii(L[7]||"")):(this.h=!1,this.i=new Ls(null,this.h))}ss.prototype.toString=function(){var B=[],L=this.j;L&&B.push(Os(L,Fi,!0),":");var W=this.g;return(W||L=="file")&&(B.push("//"),(L=this.o)&&B.push(Os(L,Fi,!0),"@"),B.push(encodeURIComponent(String(W)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),W=this.s,W!=null&&B.push(":",String(W))),(W=this.l)&&(this.g&&W.charAt(0)!="/"&&B.push("/"),B.push(Os(W,W.charAt(0)=="/"?dn:$t,!0))),(W=this.i.toString())&&B.push("?",W),(W=this.m)&&B.push("#",Os(W,E0)),B.join("")};function ur(B){return new ss(B)}function Dn(B,L,W){B.j=W?ii(L,!0):L,B.j&&(B.j=B.j.replace(/:$/,""))}function je(B,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);B.s=L}else B.s=null}function me(B,L,W){L instanceof Ls?(B.i=L,ia(B.i,B.h)):(W||(L=Os(L,Gc)),B.i=new Ls(L,B.h))}function Ft(B,L,W){B.i.set(L,W)}function In(B){return Ft(B,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),B}function ii(B,L){return B?L?decodeURI(B.replace(/%25/g,"%2525")):decodeURIComponent(B):""}function Os(B,L,W){return typeof B=="string"?(B=encodeURI(B).replace(L,PA),W&&(B=B.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B):null}function PA(B){return B=B.charCodeAt(0),"%"+(B>>4&15).toString(16)+(B&15).toString(16)}var Fi=/[#\/\?@]/g,$t=/[#\?:]/g,dn=/[#\?]/g,Gc=/[#\?@]/g,E0=/#/g;function Ls(B,L){this.h=this.g=null,this.i=B||null,this.j=!!L}function Gn(B){B.g||(B.g=new Map,B.h=0,B.i&&Dl(B.i,function(L,W){B.add(decodeURIComponent(L.replace(/\+/g," ")),W)}))}t=Ls.prototype,t.add=function(B,L){Gn(this),this.i=null,B=bi(this,B);var W=this.g.get(B);return W||this.g.set(B,W=[]),W.push(L),this.h+=1,this};function mo(B,L){Gn(B),L=bi(B,L),B.g.has(L)&&(B.i=null,B.h-=B.g.get(L).length,B.g.delete(L))}function Ul(B,L){return Gn(B),L=bi(B,L),B.g.has(L)}t.forEach=function(B,L){Gn(this),this.g.forEach(function(W,ue){W.forEach(function(Qe){B.call(L,Qe,ue,this)},this)},this)},t.na=function(){Gn(this);const B=Array.from(this.g.values()),L=Array.from(this.g.keys()),W=[];for(let ue=0;ue<L.length;ue++){const Qe=B[ue];for(let $e=0;$e<Qe.length;$e++)W.push(L[ue])}return W},t.V=function(B){Gn(this);let L=[];if(typeof B=="string")Ul(this,B)&&(L=L.concat(this.g.get(bi(this,B))));else{B=Array.from(this.g.values());for(let W=0;W<B.length;W++)L=L.concat(B[W])}return L},t.set=function(B,L){return Gn(this),this.i=null,B=bi(this,B),Ul(this,B)&&(this.h-=this.g.get(B).length),this.g.set(B,[L]),this.h+=1,this},t.get=function(B,L){return B?(B=this.V(B),0<B.length?String(B[0]):L):L};function wn(B,L,W){mo(B,L),0<W.length&&(B.i=null,B.g.set(bi(B,L),k(W)),B.h+=W.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const B=[],L=Array.from(this.g.keys());for(var W=0;W<L.length;W++){var ue=L[W];const $e=encodeURIComponent(String(ue)),Ut=this.V(ue);for(ue=0;ue<Ut.length;ue++){var Qe=$e;Ut[ue]!==""&&(Qe+="="+encodeURIComponent(String(Ut[ue]))),B.push(Qe)}}return this.i=B.join("&")};function bi(B,L){return L=String(L),B.j&&(L=L.toLowerCase()),L}function ia(B,L){L&&!B.j&&(Gn(B),B.i=null,B.g.forEach(function(W,ue){var Qe=ue.toLowerCase();ue!=Qe&&(mo(this,ue),wn(this,Qe,W))},B)),B.j=L}function ir(B,L){const W=new Sn;if(c.Image){const ue=new Image;ue.onload=I(sr,W,"TestLoadImage: loaded",!0,L,ue),ue.onerror=I(sr,W,"TestLoadImage: error",!1,L,ue),ue.onabort=I(sr,W,"TestLoadImage: abort",!1,L,ue),ue.ontimeout=I(sr,W,"TestLoadImage: timeout",!1,L,ue),c.setTimeout(function(){ue.ontimeout&&ue.ontimeout()},1e4),ue.src=B}else L(!1)}function Kc(B,L){const W=new Sn,ue=new AbortController,Qe=setTimeout(()=>{ue.abort(),sr(W,"TestPingServer: timeout",!1,L)},1e4);fetch(B,{signal:ue.signal}).then($e=>{clearTimeout(Qe),$e.ok?sr(W,"TestPingServer: ok",!0,L):sr(W,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(Qe),sr(W,"TestPingServer: error",!1,L)})}function sr(B,L,W,ue,Qe){try{Qe&&(Qe.onload=null,Qe.onerror=null,Qe.onabort=null,Qe.ontimeout=null),ue(W)}catch{}}function hn(){this.g=new Dt}function QA(B,L,W){const ue=W||"";try{xn(B,function(Qe,$e){let Ut=Qe;d(Qe)&&(Ut=Nt(Qe)),L.push(ue+$e+"="+encodeURIComponent(Ut))})}catch(Qe){throw L.push(ue+"type="+encodeURIComponent("_badmap")),Qe}}function Ps(B){this.l=B.Ub||null,this.j=B.eb||!1}F(Ps,rr),Ps.prototype.g=function(){return new as(this.l,this.j)},Ps.prototype.i=(function(B){return function(){return B}})({});function as(B,L){Lt.call(this),this.D=B,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(as,Lt),t=as.prototype,t.open=function(B,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=B,this.A=L,this.readyState=1,Hs(this)},t.send=function(B){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};B&&(L.body=B),(this.D||c).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_a(this)),this.readyState=0},t.Sa=function(B){if(this.g&&(this.l=B,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=B.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")B.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in B){if(this.j=B.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qs(this)}else B.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qs(B){B.j.read().then(B.Pa.bind(B)).catch(B.ga.bind(B))}t.Pa=function(B){if(this.g){if(this.o&&B.value)this.response.push(B.value);else if(!this.o){var L=B.value?B.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!B.done}))&&(this.response=this.responseText+=L)}B.done?_a(this):Hs(this),this.readyState==3&&Qs(this)}},t.Ra=function(B){this.g&&(this.response=this.responseText=B,_a(this))},t.Qa=function(B){this.g&&(this.response=B,_a(this))},t.ga=function(){this.g&&_a(this)};function _a(B){B.readyState=4,B.l=null,B.j=null,B.v=null,Hs(B)}t.setRequestHeader=function(B,L){this.u.append(B,L)},t.getResponseHeader=function(B){return this.h&&this.h.get(B.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const B=[],L=this.h.entries();for(var W=L.next();!W.done;)W=W.value,B.push(W[0]+": "+W[1]),W=L.next();return B.join(`\r
`)};function Hs(B){B.onreadystatechange&&B.onreadystatechange.call(B)}Object.defineProperty(as.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(B){this.m=B?"include":"same-origin"}});function sa(B){let L="";return z(B,function(W,ue){L+=ue,L+=":",L+=W,L+=`\r
`}),L}function js(B,L,W){e:{for(ue in W){var ue=!1;break e}ue=!0}ue||(W=sa(W),typeof B=="string"?W!=null&&encodeURIComponent(String(W)):Ft(B,L,W))}function vn(B){Lt.call(this),this.headers=new Map,this.o=B||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(vn,Lt);var Xn=/^https?$/i,Cs=["POST","PUT"];t=vn.prototype,t.Ha=function(B){this.J=B},t.ea=function(B,L,W,ue){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+B);L=L?L.toUpperCase():"GET",this.D=B,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ce.g(),this.v=this.o?et(this.o):et(Ce),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(L,String(B),!0),this.B=!1}catch($e){Yn(this,$e);return}if(B=W||"",W=new Map(this.headers),ue)if(Object.getPrototypeOf(ue)===Object.prototype)for(var Qe in ue)W.set(Qe,ue[Qe]);else if(typeof ue.keys=="function"&&typeof ue.get=="function")for(const $e of ue.keys())W.set($e,ue.get($e));else throw Error("Unknown input type for opt_headers: "+String(ue));ue=Array.from(W.keys()).find($e=>$e.toLowerCase()=="content-type"),Qe=c.FormData&&B instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Cs,L,void 0))||ue||Qe||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$e,Ut]of W)this.g.setRequestHeader($e,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ml(this),this.u=!0,this.g.send(B),this.u=!1}catch($e){Yn(this,$e)}};function Yn(B,L){B.h=!1,B.g&&(B.j=!0,B.g.abort(),B.j=!1),B.l=L,B.m=5,Xa(B),Ya(B)}function Xa(B){B.A||(B.A=!0,Zt(B,"complete"),Zt(B,"error"))}t.abort=function(B){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=B||7,Zt(this,"complete"),Zt(this,"abort"),Ya(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),vn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?HA(this):this.bb())},t.bb=function(){HA(this)};function HA(B){if(B.h&&typeof o<"u"&&(!B.v[1]||Hi(B)!=4||B.Z()!=2)){if(B.u&&Hi(B)==4)hr(B.Ea,0,B);else if(Zt(B,"readystatechange"),Hi(B)==4){B.h=!1;try{const Ut=B.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var W;if(!(W=L)){var ue;if(ue=Ut===0){var Qe=String(B.D).match(Ms)[1]||null;!Qe&&c.self&&c.self.location&&(Qe=c.self.location.protocol.slice(0,-1)),ue=!Xn.test(Qe?Qe.toLowerCase():"")}W=ue}if(W)Zt(B,"complete"),Zt(B,"success");else{B.m=6;try{var $e=2<Hi(B)?B.g.statusText:""}catch{$e=""}B.l=$e+" ["+B.Z()+"]",Xa(B)}}finally{Ya(B)}}}}function Ya(B,L){if(B.g){Ml(B);const W=B.g,ue=B.v[0]?()=>{}:null;B.g=null,B.v=null,L||Zt(B,"ready");try{W.onreadystatechange=ue}catch{}}}function Ml(B){B.I&&(c.clearTimeout(B.I),B.I=null)}t.isActive=function(){return!!this.g};function Hi(B){return B.g?B.g.readyState:0}t.Z=function(){try{return 2<Hi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(B){if(this.g){var L=this.g.responseText;return B&&L.indexOf(B)==0&&(L=L.substring(B.length)),Re(L)}};function Ho(B){try{if(!B.g)return null;if("response"in B.g)return B.g.response;switch(B.H){case"":case"text":return B.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in B.g)return B.g.mozResponseArrayBuffer}return null}catch{return null}}function en(B){const L={};B=(B.g&&2<=Hi(B)&&B.g.getAllResponseHeaders()||"").split(`\r
`);for(let ue=0;ue<B.length;ue++){if(K(B[ue]))continue;var W=Y(B[ue]);const Qe=W[0];if(W=W[1],typeof W!="string")continue;W=W.trim();const $e=L[Qe]||[];L[Qe]=$e,$e.push(W)}M(L,function(ue){return ue.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xo(B,L,W){return W&&W.internalChannelParams&&W.internalChannelParams[B]||L}function jo(B){this.Aa=0,this.i=[],this.j=new Sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xo("failFast",!1,B),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xo("baseRetryDelayMs",5e3,B),this.cb=xo("retryDelaySeedMs",1e4,B),this.Wa=xo("forwardChannelMaxRetries",2,B),this.wa=xo("forwardChannelRequestTimeoutMs",2e4,B),this.pa=B&&B.xmlHttpFactory||void 0,this.Xa=B&&B.Tb||void 0,this.Ca=B&&B.useFetchStreams||!1,this.L=void 0,this.J=B&&B.supportsCrossDomainXhr||!1,this.K="",this.h=new Br(B&&B.concurrentRequestLimit),this.Da=new hn,this.P=B&&B.fastHandshake||!1,this.O=B&&B.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=B&&B.Rb||!1,B&&B.xa&&this.j.xa(),B&&B.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&B&&B.detectBufferingProxy||!1,this.ja=void 0,B&&B.longPollingTimeout&&0<B.longPollingTimeout&&(this.ja=B.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jo.prototype,t.la=8,t.G=1,t.connect=function(B,L,W,ue){lt(0),this.W=B,this.H=L||{},W&&ue!==void 0&&(this.H.OSID=W,this.H.OAID=ue),this.F=this.X,this.I=tr(this,null,this.W),gr(this)};function Vs(B){if(Je(B),B.G==3){var L=B.U++,W=ur(B.I);if(Ft(W,"SID",B.K),Ft(W,"RID",L),Ft(W,"TYPE","terminate"),vo(B,W),L=new nt(B,B.j,L),L.L=2,L.v=In(ur(W)),W=!1,c.navigator&&c.navigator.sendBeacon)try{W=c.navigator.sendBeacon(L.v.toString(),"")}catch{}!W&&c.Image&&(new Image().src=L.v,W=!0),W||(L.g=Wc(L.j,null),L.g.ea(L.v)),L.F=Date.now(),St(L)}tn(B)}function wo(B){B.g&&(Go(B),B.g.cancel(),B.g=null)}function Je(B){wo(B),B.u&&(c.clearTimeout(B.u),B.u=null),Ta(B),B.h.cancel(),B.s&&(typeof B.s=="number"&&c.clearTimeout(B.s),B.s=null)}function gr(B){if(!xr(B.h)&&!B.s){B.s=!0;var L=B.Ga;we||De(),Ge||(we(),Ge=!0),be.add(L,B),B.B=0}}function si(B,L){return yr(B.h)>=B.h.j-(B.s?1:0)?!1:B.s?(B.i=L.D.concat(B.i),!0):B.G==1||B.G==2||B.B>=(B.Va?0:B.Wa)?!1:(B.s=$r(b(B.Ga,B,L),Ko(B,B.B)),B.B++,!0)}t.Ga=function(B){if(this.s)if(this.s=null,this.G==1){if(!B){this.U=Math.floor(1e5*Math.random()),B=this.U++;const Qe=new nt(this,this.j,B);let $e=this.o;if(this.S&&($e?($e=P($e),ee($e,this.S)):$e=this.S),this.m!==null||this.O||(Qe.H=$e,$e=null),this.P)e:{for(var L=0,W=0;W<this.i.length;W++){t:{var ue=this.i[W];if("__data__"in ue.map&&(ue=ue.map.__data__,typeof ue=="string")){ue=ue.length;break t}ue=void 0}if(ue===void 0)break;if(L+=ue,4096<L){L=W;break e}if(L===4096||W===this.i.length-1){L=W+1;break e}}L=1e3}else L=1e3;L=jA(this,Qe,L),W=ur(this.I),Ft(W,"RID",B),Ft(W,"CVER",22),this.D&&Ft(W,"X-HTTP-Session-Id",this.D),vo(this,W),$e&&(this.O?L="headers="+encodeURIComponent(String(sa($e)))+"&"+L:this.m&&js(W,this.m,$e)),ba(this.h,Qe),this.Ua&&Ft(W,"TYPE","init"),this.P?(Ft(W,"$req",L),Ft(W,"SID","null"),Qe.T=!0,ht(Qe,W,null)):ht(Qe,W,L),this.G=2}}else this.G==3&&(B?Vo(this,B):this.i.length==0||xr(this.h)||Vo(this))};function Vo(B,L){var W;L?W=L.l:W=B.U++;const ue=ur(B.I);Ft(ue,"SID",B.K),Ft(ue,"RID",W),Ft(ue,"AID",B.T),vo(B,ue),B.m&&B.o&&js(ue,B.m,B.o),W=new nt(B,B.j,W,B.B+1),B.m===null&&(W.H=B.o),L&&(B.i=L.D.concat(B.i)),L=jA(B,W,1e3),W.I=Math.round(.5*B.wa)+Math.round(.5*B.wa*Math.random()),ba(B.h,W),ht(W,ue,L)}function vo(B,L){B.H&&z(B.H,function(W,ue){Ft(L,ue,W)}),B.l&&xn({},function(W,ue){Ft(L,ue,W)})}function jA(B,L,W){W=Math.min(B.i.length,W);var ue=B.l?b(B.l.Na,B.l,B):null;e:{var Qe=B.i;let $e=-1;for(;;){const Ut=["count="+W];$e==-1?0<W?($e=Qe[0].g,Ut.push("ofs="+$e)):$e=0:Ut.push("ofs="+$e);let nn=!0;for(let Nn=0;Nn<W;Nn++){let Rr=Qe[Nn].g;const Tn=Qe[Nn].map;if(Rr-=$e,0>Rr)$e=Math.max(0,Qe[Nn].g-100),nn=!1;else try{QA(Tn,Ut,"req"+Rr+"_")}catch{ue&&ue(Tn)}}if(nn){ue=Ut.join("&");break e}}}return B=B.i.splice(0,W),L.D=B,ue}function zc(B){if(!B.g&&!B.u){B.Y=1;var L=B.Fa;we||De(),Ge||(we(),Ge=!0),be.add(L,B),B.v=0}}function VA(B){return B.g||B.u||3<=B.v?!1:(B.Y++,B.u=$r(b(B.Fa,B),Ko(B,B.v)),B.v++,!0)}t.Fa=function(){if(this.u=null,Pn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var B=2*this.R;this.j.info("BP detection timer enabled: "+B),this.A=$r(b(this.ab,this),B)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),wo(this),Pn(this))};function Go(B){B.A!=null&&(c.clearTimeout(B.A),B.A=null)}function Pn(B){B.g=new nt(B,B.j,"rpc",B.Y),B.m===null&&(B.g.H=B.o),B.g.O=0;var L=ur(B.qa);Ft(L,"RID","rpc"),Ft(L,"SID",B.K),Ft(L,"AID",B.T),Ft(L,"CI",B.F?"0":"1"),!B.F&&B.ja&&Ft(L,"TO",B.ja),Ft(L,"TYPE","xmlhttp"),vo(B,L),B.m&&B.o&&js(L,B.m,B.o),B.L&&(B.g.I=B.L);var W=B.g;B=B.ia,W.L=1,W.v=In(ur(L)),W.m=null,W.P=!0,wt(W,B)}t.Za=function(){this.C!=null&&(this.C=null,wo(this),VA(this),lt(19))};function Ta(B){B.C!=null&&(c.clearTimeout(B.C),B.C=null)}function _n(B,L){var W=null;if(B.g==L){Ta(B),Go(B),B.g=null;var ue=2}else if(qn(B.h,L))W=L.D,is(B.h,L),ue=1;else return;if(B.G!=0){if(L.o)if(ue==1){W=L.m?L.m.length:0,L=Date.now()-L.F;var Qe=B.B;ue=Us(),Zt(ue,new lr(ue,W)),gr(B)}else zc(B);else if(Qe=L.s,Qe==3||Qe==0&&0<L.X||!(ue==1&&si(B,L)||ue==2&&VA(B)))switch(W&&0<W.length&&(L=B.h,L.i=L.i.concat(W)),Qe){case 1:ji(B,5);break;case 4:ji(B,10);break;case 3:ji(B,6);break;default:ji(B,2)}}}function Ko(B,L){let W=B.Ta+Math.floor(Math.random()*B.cb);return B.isActive()||(W*=2),W*L}function ji(B,L){if(B.j.info("Error code "+L),L==2){var W=b(B.fb,B),ue=B.Xa;const Qe=!ue;ue=new ss(ue||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Dn(ue,"https"),In(ue),Qe?ir(ue.toString(),W):Kc(ue.toString(),W)}else lt(2);B.G=0,B.l&&B.l.sa(L),tn(B),Je(B)}t.fb=function(B){B?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function tn(B){if(B.G=0,B.ka=[],B.l){const L=Gr(B.h);(L.length!=0||B.i.length!=0)&&(U(B.ka,L),U(B.ka,B.i),B.h.i.length=0,k(B.i),B.i.length=0),B.l.ra()}}function tr(B,L,W){var ue=W instanceof ss?ur(W):new ss(W);if(ue.g!="")L&&(ue.g=L+"."+ue.g),je(ue,ue.s);else{var Qe=c.location;ue=Qe.protocol,L=L?L+"."+Qe.hostname:Qe.hostname,Qe=+Qe.port;var $e=new ss(null);ue&&Dn($e,ue),L&&($e.g=L),Qe&&je($e,Qe),W&&($e.l=W),ue=$e}return W=B.D,L=B.ya,W&&L&&Ft(ue,W,L),Ft(ue,"VER",B.la),vo(B,ue),ue}function Wc(B,L,W){if(L&&!B.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=B.Ca&&!B.pa?new vn(new Ps({eb:W})):new vn(B.pa),L.Ha(B.J),L}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cn(){}t=cn.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Gs(){}Gs.prototype.g=function(B,L){return new Jn(B,L)};function Jn(B,L){Lt.call(this),this.g=new jo(L),this.l=B,this.h=L&&L.messageUrlParams||null,B=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(B?B["X-Client-Protocol"]="webchannel":B={"X-Client-Protocol":"webchannel"}),this.g.o=B,B=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(B?B["X-WebChannel-Content-Type"]=L.messageContentType:B={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(B?B["X-WebChannel-Client-Profile"]=L.va:B={"X-WebChannel-Client-Profile":L.va}),this.g.S=B,(B=L&&L.Sb)&&!K(B)&&(this.g.m=B),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!K(L)&&(this.g.D=L,B=this.h,B!==null&&L in B&&(B=this.h,L in B&&delete B[L])),this.j=new Ba(this)}F(Jn,Lt),Jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Vs(this.g)},Jn.prototype.o=function(B){var L=this.g;if(typeof B=="string"){var W={};W.__data__=B,B=W}else this.u&&(W={},W.__data__=Nt(B),B=W);L.i.push(new qa(L.Ya++,B)),L.G==3&&gr(L)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Vs(this.g),delete this.g,Jn.aa.N.call(this)};function qc(B){kr.call(this),B.__headers__&&(this.headers=B.__headers__,this.statusCode=B.__status__,delete B.__headers__,delete B.__status__);var L=B.__sm__;if(L){e:{for(const W in L){B=W;break e}B=void 0}(this.i=B)&&(B=this.i,L=L!==null&&B in L?L[B]:void 0),this.data=L}else this.data=B}F(qc,kr);function Es(){Tr.call(this),this.status=1}F(Es,Tr);function Ba(B){this.g=B}F(Ba,cn),Ba.prototype.ua=function(){Zt(this.g,"a")},Ba.prototype.ta=function(B){Zt(this.g,new qc(B))},Ba.prototype.sa=function(B){Zt(this.g,new Es)},Ba.prototype.ra=function(){Zt(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,e3=function(){return new Gs},$I=function(){return Us()},ZI=qr,z2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},he.NO_ERROR=0,he.TIMEOUT=8,he.HTTP_ERROR=6,Yg=he,pe.COMPLETE="complete",JI=pe,Rt.EventType=Mt,Mt.OPEN="a",Mt.CLOSE="b",Mt.ERROR="c",Mt.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,mf=Rt,vn.prototype.listenOnce=vn.prototype.L,vn.prototype.getLastError=vn.prototype.Ka,vn.prototype.getLastErrorCode=vn.prototype.Ba,vn.prototype.getStatus=vn.prototype.Z,vn.prototype.getResponseJson=vn.prototype.Oa,vn.prototype.getResponseText=vn.prototype.oa,vn.prototype.send=vn.prototype.ea,vn.prototype.setWithCredentials=vn.prototype.Ha,YI=vn}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});const __="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}us.UNAUTHENTICATED=new us(null),us.GOOGLE_CREDENTIALS=new us("google-credentials-uid"),us.FIRST_PARTY=new us("first-party-uid"),us.MOCK_USER=new us("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u0="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new lp("@firebase/firestore");function af(){return yc.logLevel}function Xt(t,...e){if(yc.logLevel<=zr.DEBUG){const r=e.map(dv);yc.debug(`Firestore (${u0}): ${t}`,...r)}}function El(t,...e){if(yc.logLevel<=zr.ERROR){const r=e.map(dv);yc.error(`Firestore (${u0}): ${t}`,...r)}}function $u(t,...e){if(yc.logLevel<=zr.WARN){const r=e.map(dv);yc.warn(`Firestore (${u0}): ${t}`,...r)}}function dv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t="Unexpected state"){const e=`FIRESTORE (${u0}) INTERNAL ASSERTION FAILED: `+t;throw El(e),new Error(e)}function mn(t,e){t||pr()}function _r(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends ho{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(us.UNAUTHENTICATED)))}shutdown(){}}class mU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class xU{constructor(e){this.t=e,this.currentUser=us.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){mn(this.o===void 0);let n=this.i;const i=h=>this.i!==n?(n=this.i,r(h)):Promise.resolve();let s=new ml;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ml,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const h=s;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},c=h=>{Xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(Xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ml)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(mn(typeof n.accessToken=="string"),new t3(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mn(e===null||typeof e=="string"),new us(e)}}class wU{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=us.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vU{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new wU(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(us.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){mn(this.o===void 0);const n=s=>{s.error!=null&&Xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Xt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const i=s=>{Xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(mn(typeof r.token=="string"),this.R=r.token,new yU(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=EU(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%e.length))}return n}}function on(t,e){return t<e?-1:t>e?1:0}function e0(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new zt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new zt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new zt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ni.fromMillis(Date.now())}static fromDate(e){return Ni.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Ni(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?on(this.nanoseconds,e.nanoseconds):on(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Er(e)}static min(){return new Er(new Ni(0,0))}static max(){return new Er(new Ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,r,n){r===void 0?r=0:r>e.length&&pr(),n===void 0?n=e.length-r:n>e.length-r&&pr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return rd.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof rd?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=e.get(i),o=r.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class On extends rd{construct(e,r,n){return new On(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new zt(gt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new On(r)}static emptyPath(){return new On([])}}const bU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zi extends rd{construct(e,r,n){return new Zi(e,r,n)}static isValidIdentifier(e){return bU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Zi(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new zt(gt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new zt(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new zt(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(n+=c,i++):(s(),i++)}if(s(),o)throw new zt(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zi(r)}static emptyPath(){return new Zi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.path=e}static fromPath(e){return new or(On.fromString(e))}static fromName(e){return new or(On.fromString(e).popFirst(5))}static empty(){return new or(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&On.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return On.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new or(new On(e.slice()))}}function _U(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Er.fromTimestamp(n===1e9?new Ni(r+1,0):new Ni(r,n));return new IA(i,or.empty(),e)}function TU(t){return new IA(t.readTime,t.key,-1)}class IA{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new IA(Er.min(),or.empty(),-1)}static max(){return new IA(Er.max(),or.empty(),-1)}}function BU(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=or.comparator(t.documentKey,e.documentKey),r!==0?r:on(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(t){if(t.code!==gt.FAILED_PRECONDITION||t.message!==SU)throw t;Xt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&pr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ct(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Ct?r:Ct.resolve(r)}catch(r){return Ct.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Ct.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Ct.reject(r)}static resolve(e){return new Ct(((r,n)=>{r(e)}))}static reject(e){return new Ct(((r,n)=>{n(e)}))}static waitFor(e){return new Ct(((r,n)=>{let i=0,s=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++s,o&&s===i&&r()}),(h=>n(h)))})),o=!0,s===i&&r()}))}static or(e){let r=Ct.resolve(!1);for(const n of e)r=r.next((i=>i?Ct.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,s)=>{n.push(r.call(this,i,s))})),this.waitFor(n)}static mapArray(e,r){return new Ct(((n,i)=>{const s=e.length,o=new Array(s);let c=0;for(let h=0;h<s;h++){const d=h;r(e[d]).next((m=>{o[d]=m,++c,c===s&&n(o)}),(m=>i(m)))}}))}static doWhile(e,r){return new Ct(((n,i)=>{const s=()=>{e()===!0?r().next((()=>{s()}),i):n()};s()}))}}function NU(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function bd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hv.oe=-1;function Ap(t){return t==null}function d1(t){return t===0&&1/t==-1/0}function RU(t){return typeof t=="number"&&Number.isInteger(t)&&!d1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function kc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function n3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,r){this.comparator=e,this.root=r||Yi.EMPTY}insert(e,r){return new Wn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yi{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??Yi.RED,this.left=i??Yi.EMPTY,this.right=s??Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new Yi(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Yi.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pr();const e=this.left.check();if(e!==this.right.check())throw pr();return e+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1;Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw pr()}get value(){throw pr()}get color(){throw pr()}get left(){throw pr()}get right(){throw pr()}copy(e,r,n,i,s){return this}insert(e,r,n){return new Yi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new B_(this.data.getIterator())}getIteratorFrom(e){return new B_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof es)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new es(this.comparator);return r.data=e,r}}class B_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.fields=e,e.sort(Zi.comparator)}static empty(){return new va([])}unionWith(e){let r=new es(Zi.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new va(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return e0(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new i3("Invalid base64 string: "+s):s}})(e);return new ns(r)}static fromUint8Array(e){const r=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new ns(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return on(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ns.EMPTY_BYTE_STRING=new ns("");const FU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function NA(t){if(mn(!!t),typeof t=="string"){let e=0;const r=FU.exec(t);if(mn(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:fi(t.seconds),nanos:fi(t.nanos)}}function fi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cc(t){return typeof t=="string"?ns.fromBase64String(t):ns.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function pv(t){const e=t.mapValue.fields.__previous_value__;return gv(e)?pv(e):e}function nd(t){const e=NA(t.mapValue.fields.__local_write_time__.timestampValue);return new Ni(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,r,n,i,s,o,c,h,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d}}class id{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new id("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof id&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h={mapValue:{}};function Ec(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gv(t)?4:UU(t)?9007199254740991:DU(t)?10:11:pr()}function Do(t,e){if(t===e)return!0;const r=Ec(t);if(r!==Ec(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nd(t).isEqual(nd(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=NA(i.timestampValue),c=NA(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Cc(i.bytesValue).isEqual(Cc(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return fi(i.geoPointValue.latitude)===fi(s.geoPointValue.latitude)&&fi(i.geoPointValue.longitude)===fi(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return fi(i.integerValue)===fi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=fi(i.doubleValue),c=fi(s.doubleValue);return o===c?d1(o)===d1(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return e0(t.arrayValue.values||[],e.arrayValue.values||[],Do);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(T_(o)!==T_(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(c[h]===void 0||!Do(o[h],c[h])))return!1;return!0})(t,e);default:return pr()}}function sd(t,e){return(t.values||[]).find((r=>Do(r,e)))!==void 0}function t0(t,e){if(t===e)return 0;const r=Ec(t),n=Ec(e);if(r!==n)return on(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return on(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const c=fi(s.integerValue||s.doubleValue),h=fi(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(t,e);case 3:return S_(t.timestampValue,e.timestampValue);case 4:return S_(nd(t),nd(e));case 5:return on(t.stringValue,e.stringValue);case 6:return(function(s,o){const c=Cc(s),h=Cc(o);return c.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const c=s.split("/"),h=o.split("/");for(let d=0;d<c.length&&d<h.length;d++){const m=on(c[d],h[d]);if(m!==0)return m}return on(c.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const c=on(fi(s.latitude),fi(o.latitude));return c!==0?c:on(fi(s.longitude),fi(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return I_(t.arrayValue,e.arrayValue);case 10:return(function(s,o){var c,h,d,m;const C=s.fields||{},b=o.fields||{},I=(c=C.value)===null||c===void 0?void 0:c.arrayValue,F=(h=b.value)===null||h===void 0?void 0:h.arrayValue,k=on(((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0,((m=F==null?void 0:F.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:I_(I,F)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===$h.mapValue&&o===$h.mapValue)return 0;if(s===$h.mapValue)return 1;if(o===$h.mapValue)return-1;const c=s.fields||{},h=Object.keys(c),d=o.fields||{},m=Object.keys(d);h.sort(),m.sort();for(let C=0;C<h.length&&C<m.length;++C){const b=on(h[C],m[C]);if(b!==0)return b;const I=t0(c[h[C]],d[m[C]]);if(I!==0)return I}return on(h.length,m.length)})(t.mapValue,e.mapValue);default:throw pr()}}function S_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return on(t,e);const r=NA(t),n=NA(e),i=on(r.seconds,n.seconds);return i!==0?i:on(r.nanos,n.nanos)}function I_(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=t0(r[i],n[i]);if(s)return s}return on(r.length,n.length)}function r0(t){return W2(t)}function W2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=NA(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Cc(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return or.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=W2(s);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const o of n)s?s=!1:i+=",",i+=`${o}:${W2(r.fields[o])}`;return i+"}"})(t.mapValue):pr()}function N_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function q2(t){return!!t&&"integerValue"in t}function mv(t){return!!t&&"arrayValue"in t}function R_(t){return!!t&&"nullValue"in t}function F_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jg(t){return!!t&&"mapValue"in t}function DU(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Df(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return kc(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=Df(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Df(t.arrayValue.values[r]);return e}return Object.assign({},t)}function UU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.value=e}static empty(){return new $s({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Jg(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(r)}setAll(e){let r=Zi.emptyPath(),n={},i=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const h=this.getFieldsMap(r);this.applyChanges(h,n,i),n={},i=[],r=c.popLast()}o?n[c.lastSegment()]=Df(o):i.push(c.lastSegment())}));const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());Jg(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Do(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Jg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){kc(r,((i,s)=>e[i]=s));for(const i of n)delete e[i]}clone(){return new $s(Df(this.value))}}function s3(t){const e=[];return kc(t.fields,((r,n)=>{const i=new Zi([r]);if(Jg(n)){const s=s3(n.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new va(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,r,n,i,s,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new hs(e,0,Er.min(),Er.min(),Er.min(),$s.empty(),0)}static newFoundDocument(e,r,n,i){return new hs(e,1,r,Er.min(),n,i,0)}static newNoDocument(e,r){return new hs(e,2,r,Er.min(),Er.min(),$s.empty(),0)}static newUnknownDocument(e,r){return new hs(e,3,r,Er.min(),Er.min(),$s.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Er.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$s.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$s.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Er.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,r){this.position=e,this.inclusive=r}}function k_(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?n=or.comparator(or.fromName(o.referenceValue),r.key):n=t0(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function D_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Do(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,r="asc"){this.field=e,this.dir=r}}function MU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{}class Ei extends a3{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new LU(e,r,n):r==="array-contains"?new HU(e,n):r==="in"?new jU(e,n):r==="not-in"?new VU(e,n):r==="array-contains-any"?new GU(e,n):new Ei(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new PU(e,n):new QU(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(t0(r,this.value)):r!==null&&Ec(this.value)===Ec(r)&&this.matchesComparison(t0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class uo extends a3{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new uo(e,r)}matches(e){return o3(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function o3(t){return t.op==="and"}function l3(t){return OU(t)&&o3(t)}function OU(t){for(const e of t.filters)if(e instanceof uo)return!1;return!0}function X2(t){if(t instanceof Ei)return t.field.canonicalString()+t.op.toString()+r0(t.value);if(l3(t))return t.filters.map((e=>X2(e))).join(",");{const e=t.filters.map((r=>X2(r))).join(",");return`${t.op}(${e})`}}function A3(t,e){return t instanceof Ei?(function(n,i){return i instanceof Ei&&n.op===i.op&&n.field.isEqual(i.field)&&Do(n.value,i.value)})(t,e):t instanceof uo?(function(n,i){return i instanceof uo&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,o,c)=>s&&A3(o,i.filters[c])),!0):!1})(t,e):void pr()}function c3(t){return t instanceof Ei?(function(r){return`${r.field.canonicalString()} ${r.op} ${r0(r.value)}`})(t):t instanceof uo?(function(r){return r.op.toString()+" {"+r.getFilters().map(c3).join(" ,")+"}"})(t):"Filter"}class LU extends Ei{constructor(e,r,n){super(e,r,n),this.key=or.fromName(n.referenceValue)}matches(e){const r=or.comparator(e.key,this.key);return this.matchesComparison(r)}}class PU extends Ei{constructor(e,r){super(e,"in",r),this.keys=u3("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class QU extends Ei{constructor(e,r){super(e,"not-in",r),this.keys=u3("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function u3(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>or.fromName(n.referenceValue)))}class HU extends Ei{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return mv(r)&&sd(r.arrayValue,this.value)}}class jU extends Ei{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&sd(this.value.arrayValue,r)}}class VU extends Ei{constructor(e,r){super(e,"not-in",r)}matches(e){if(sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!sd(this.value.arrayValue,r)}}class GU extends Ei{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!mv(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>sd(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,r=null,n=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}}function U_(t,e=null,r=[],n=[],i=null,s=null,o=null){return new KU(t,e,r,n,i,s,o)}function xv(t){const e=_r(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>X2(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),Ap(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>r0(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>r0(n))).join(",")),e.ue=r}return e.ue}function wv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!MU(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!A3(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!D_(t.startAt,e.startAt)&&D_(t.endAt,e.endAt)}function Y2(t){return or.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,r=null,n=[],i=[],s=null,o="F",c=null,h=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zU(t,e,r,n,i,s,o,c){return new _d(t,e,r,n,i,s,o,c)}function cp(t){return new _d(t)}function M_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function f3(t){return t.collectionGroup!==null}function Uf(t){const e=_r(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new es(Zi.comparator);return o.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new g1(s,n))})),r.has(Zi.keyField().canonicalString())||e.ce.push(new g1(Zi.keyField(),n))}return e.ce}function Io(t){const e=_r(t);return e.le||(e.le=WU(e,Uf(t))),e.le}function WU(t,e){if(t.limitType==="F")return U_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new g1(i.field,s)}));const r=t.endAt?new h1(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new h1(t.startAt.position,t.startAt.inclusive):null;return U_(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function J2(t,e){const r=t.filters.concat([e]);return new _d(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Z2(t,e,r){return new _d(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function up(t,e){return wv(Io(t),Io(e))&&t.limitType===e.limitType}function d3(t){return`${xv(Io(t))}|lt:${t.limitType}`}function Iu(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>c3(i))).join(", ")}]`),Ap(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>r0(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>r0(i))).join(",")),`Target(${n})`})(Io(t))}; limitType=${t.limitType})`}function fp(t,e){return e.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):or.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(t,e)&&(function(n,i){for(const s of Uf(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(o,c,h){const d=k_(o,c,h);return o.inclusive?d<=0:d<0})(n.startAt,Uf(n),i)||n.endAt&&!(function(o,c,h){const d=k_(o,c,h);return o.inclusive?d>=0:d>0})(n.endAt,Uf(n),i))})(t,e)}function qU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function h3(t){return(e,r)=>{let n=!1;for(const i of Uf(t)){const s=XU(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function XU(t,e,r){const n=t.field.isKeyField()?or.comparator(e.key,r.key):(function(s,o,c){const h=o.data.field(s),d=c.data.field(s);return h!==null&&d!==null?t0(h,d):pr()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return pr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kc(this.inner,((r,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return n3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=new Wn(or.comparator);function bl(){return YU}const g3=new Wn(or.comparator);function xf(...t){let e=g3;for(const r of t)e=e.insert(r.key,r);return e}function p3(t){let e=g3;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function uc(){return Mf()}function m3(){return Mf()}function Mf(){return new f0((t=>t.toString()),((t,e)=>t.isEqual(e)))}const JU=new Wn(or.comparator),ZU=new es(or.comparator);function jr(...t){let e=ZU;for(const r of t)e=e.add(r);return e}const $U=new es(on);function eM(){return $U}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:d1(e)?"-0":e}}function x3(t){return{integerValue:""+t}}function tM(t,e){return RU(e)?x3(e):vv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this._=void 0}}function rM(t,e,r){return t instanceof p1?(function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gv(s)&&(s=pv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}})(r,e):t instanceof ad?v3(t,e):t instanceof od?y3(t,e):(function(i,s){const o=w3(i,s),c=O_(o)+O_(i.Pe);return q2(o)&&q2(i.Pe)?x3(c):vv(i.serializer,c)})(t,e)}function nM(t,e,r){return t instanceof ad?v3(t,e):t instanceof od?y3(t,e):r}function w3(t,e){return t instanceof m1?(function(n){return q2(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class p1 extends dp{}class ad extends dp{constructor(e){super(),this.elements=e}}function v3(t,e){const r=C3(e);for(const n of t.elements)r.some((i=>Do(i,n)))||r.push(n);return{arrayValue:{values:r}}}class od extends dp{constructor(e){super(),this.elements=e}}function y3(t,e){let r=C3(e);for(const n of t.elements)r=r.filter((i=>!Do(i,n)));return{arrayValue:{values:r}}}class m1 extends dp{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function O_(t){return fi(t.integerValue||t.doubleValue)}function C3(t){return mv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function iM(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof ad&&i instanceof ad||n instanceof od&&i instanceof od?e0(n.elements,i.elements,Do):n instanceof m1&&i instanceof m1?Do(n.Pe,i.Pe):n instanceof p1&&i instanceof p1})(t.transform,e.transform)}class sM{constructor(e,r){this.version=e,this.transformResults=r}}class ea{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ea}static exists(e){return new ea(void 0,e)}static updateTime(e){return new ea(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hp{}function E3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gp(t.key,ea.none()):new Td(t.key,t.data,ea.none());{const r=t.data,n=$s.empty();let i=new es(Zi.comparator);for(let s of e.fields)if(!i.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),i=i.add(s)}return new UA(t.key,n,new va(i.toArray()),ea.none())}}function aM(t,e,r){t instanceof Td?(function(i,s,o){const c=i.value.clone(),h=P_(i.fieldTransforms,s,o.transformResults);c.setAll(h),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof UA?(function(i,s,o){if(!Zg(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=P_(i.fieldTransforms,s,o.transformResults),h=s.data;h.setAll(b3(i)),h.setAll(c),s.convertToFoundDocument(o.version,h).setHasCommittedMutations()})(t,e,r):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function Of(t,e,r,n){return t instanceof Td?(function(s,o,c,h){if(!Zg(s.precondition,o))return c;const d=s.value.clone(),m=Q_(s.fieldTransforms,h,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,r,n):t instanceof UA?(function(s,o,c,h){if(!Zg(s.precondition,o))return c;const d=Q_(s.fieldTransforms,h,o),m=o.data;return m.setAll(b3(s)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((C=>C.field)))})(t,e,r,n):(function(s,o,c){return Zg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function oM(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=w3(n.transform,i||null);s!=null&&(r===null&&(r=$s.empty()),r.set(n.field,s))}return r||null}function L_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&e0(n,i,((s,o)=>iM(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Td extends hp{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class UA extends hp{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function b3(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function P_(t,e,r){const n=new Map;mn(t.length===r.length);for(let i=0;i<r.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);n.set(s.field,nM(o,c,r[i]))}return n}function Q_(t,e,r){const n=new Map;for(const i of t){const s=i.transform,o=r.data.field(i.field);n.set(i.field,rM(s,o,e))}return n}class gp extends hp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lM extends hp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aM(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Of(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Of(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=m3();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=r.has(i.key)?null:c;const h=E3(o,c);h!==null&&n.set(i.key,h),o.isValidDocument()||o.convertToNoDocument(Er.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),jr())}isEqual(e){return this.batchId===e.batchId&&e0(this.mutations,e.mutations,((r,n)=>L_(r,n)))&&e0(this.baseMutations,e.baseMutations,((r,n)=>L_(r,n)))}}class yv{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){mn(e.mutations.length===n.length);let i=(function(){return JU})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,n[o].version);return new yv(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wi,Yr;function fM(t){switch(t){default:return pr();case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0}}function _3(t){if(t===void 0)return El("GRPC error has no .code"),gt.UNKNOWN;switch(t){case wi.OK:return gt.OK;case wi.CANCELLED:return gt.CANCELLED;case wi.UNKNOWN:return gt.UNKNOWN;case wi.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case wi.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case wi.INTERNAL:return gt.INTERNAL;case wi.UNAVAILABLE:return gt.UNAVAILABLE;case wi.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case wi.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case wi.NOT_FOUND:return gt.NOT_FOUND;case wi.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case wi.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case wi.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case wi.ABORTED:return gt.ABORTED;case wi.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case wi.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case wi.DATA_LOSS:return gt.DATA_LOSS;default:return pr()}}(Yr=wi||(wi={}))[Yr.OK=0]="OK",Yr[Yr.CANCELLED=1]="CANCELLED",Yr[Yr.UNKNOWN=2]="UNKNOWN",Yr[Yr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yr[Yr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yr[Yr.NOT_FOUND=5]="NOT_FOUND",Yr[Yr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yr[Yr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yr[Yr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yr[Yr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yr[Yr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yr[Yr.ABORTED=10]="ABORTED",Yr[Yr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yr[Yr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yr[Yr.INTERNAL=13]="INTERNAL",Yr[Yr.UNAVAILABLE=14]="UNAVAILABLE",Yr[Yr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new gc([4294967295,4294967295],0);function H_(t){const e=dM().encode(t),r=new XI;return r.update(e),new Uint8Array(r.digest())}function j_(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new gc([r,n],0),new gc([i,s],0)]}class Cv{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new wf(`Invalid padding: ${r}`);if(n<0)throw new wf(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new wf(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new wf(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=gc.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(gc.fromNumber(n)));return i.compare(hM)===1&&(i=new gc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=H_(e),[n,i]=j_(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,i,s);if(!this.de(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Cv(s,i,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=H_(e),[n,i]=j_(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,i,s);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class wf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Bd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new pp(Er.min(),i,new Wn(on),bl(),jr())}}class Bd{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Bd(n,r,jr(),jr(),jr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class T3{constructor(e,r){this.targetId=e,this.me=r}}class B3{constructor(e,r,n=ns.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class V_{constructor(){this.fe=0,this.ge=K_(),this.pe=ns.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=jr(),r=jr(),n=jr();return this.ge.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:pr()}})),new Bd(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=K_()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,mn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gM{constructor(e){this.Le=e,this.Be=new Map,this.ke=bl(),this.qe=G_(),this.Qe=new Wn(on)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:pr()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,i)=>{this.ze(i)&&r(i)}))}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const s=i.target;if(Y2(s))if(n===0){const o=new or(s.path);this.Ue(r,o,hs.newNoDocument(o,Er.min()))}else mn(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),h=c?this.Xe(c,e,o):1;if(h!==0){this.je(r);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,d)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let o,c;try{o=Cc(n).toUint8Array()}catch(h){if(h instanceof i3)return $u("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Cv(o,i,s)}catch(h){return $u(h instanceof wf?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach((s=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,s,null),i++)})),i}rt(e){const r=new Map;this.Be.forEach(((s,o)=>{const c=this.Je(o);if(c){if(s.current&&Y2(c.target)){const h=new or(c.target.path);this.ke.get(h)!==null||this.it(o,h)||this.Ue(o,h,hs.newNoDocument(h,e))}s.be&&(r.set(o,s.ve()),s.Ce())}}));let n=jr();this.qe.forEach(((s,o)=>{let c=!0;o.forEachWhile((h=>{const d=this.Je(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(s))})),this.ke.forEach(((s,o)=>o.setReadTime(e)));const i=new pp(e,r,this.Qe,this.ke,n);return this.ke=bl(),this.qe=G_(),this.Qe=new Wn(on),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new V_,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new es(on),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Xt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new V_),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function G_(){return new Wn(or.comparator)}function K_(){return new Wn(or.comparator)}const pM={asc:"ASCENDING",desc:"DESCENDING"},mM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xM={and:"AND",or:"OR"};class wM{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function $2(t,e){return t.useProto3Json||Ap(e)?e:{value:e}}function x1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vM(t,e){return x1(t,e.toTimestamp())}function No(t){return mn(!!t),Er.fromTimestamp((function(r){const n=NA(r);return new Ni(n.seconds,n.nanos)})(t))}function Ev(t,e){return ew(t,e).canonicalString()}function ew(t,e){const r=(function(i){return new On(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function I3(t){const e=On.fromString(t);return mn(D3(e)),e}function tw(t,e){return Ev(t.databaseId,e.path)}function qx(t,e){const r=I3(e);if(r.get(1)!==t.databaseId.projectId)throw new zt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new zt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new or(R3(r))}function N3(t,e){return Ev(t.databaseId,e)}function yM(t){const e=I3(t);return e.length===4?On.emptyPath():R3(e)}function rw(t){return new On(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R3(t){return mn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function z_(t,e,r){return{name:tw(t,e),fields:r.value.mapValue.fields}}function CM(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:pr()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,m){return d.useProto3Json?(mn(m===void 0||typeof m=="string"),ns.fromBase64String(m||"")):(mn(m===void 0||m instanceof Buffer||m instanceof Uint8Array),ns.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const m=d.code===void 0?gt.UNKNOWN:_3(d.code);return new zt(m,d.message||"")})(o);r=new B3(n,i,s,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=qx(t,n.document.name),s=No(n.document.updateTime),o=n.document.createTime?No(n.document.createTime):Er.min(),c=new $s({mapValue:{fields:n.document.fields}}),h=hs.newFoundDocument(i,s,o,c),d=n.targetIds||[],m=n.removedTargetIds||[];r=new $g(d,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=qx(t,n.document),s=n.readTime?No(n.readTime):Er.min(),o=hs.newNoDocument(i,s),c=n.removedTargetIds||[];r=new $g([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=qx(t,n.document),s=n.removedTargetIds||[];r=new $g([],s,i,null)}else{if(!("filter"in e))return pr();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,o=new uM(i,s),c=n.targetId;r=new T3(c,o)}}return r}function EM(t,e){let r;if(e instanceof Td)r={update:z_(t,e.key,e.value)};else if(e instanceof gp)r={delete:tw(t,e.key)};else if(e instanceof UA)r={update:z_(t,e.key,e.data),updateMask:FM(e.fieldMask)};else{if(!(e instanceof lM))return pr();r={verify:tw(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(s,o){const c=o.transform;if(c instanceof p1)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ad)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof od)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof m1)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw pr()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:vM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pr()})(t,e.precondition)),r}function bM(t,e){return t&&t.length>0?(mn(e!==void 0),t.map((r=>(function(i,s){let o=i.updateTime?No(i.updateTime):No(s);return o.isEqual(Er.min())&&(o=No(s)),new sM(o,i.transformResults||[])})(r,e)))):[]}function _M(t,e){return{documents:[N3(t,e.path)]}}function TM(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=N3(t,i);const s=(function(d){if(d.length!==0)return k3(uo.create(d,"and"))})(e.filters);s&&(r.structuredQuery.where=s);const o=(function(d){if(d.length!==0)return d.map((m=>(function(b){return{field:Nu(b.field),direction:IM(b.dir)}})(m)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=$2(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{_t:r,parent:i}}function BM(t){let e=yM(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){mn(n===1);const m=r.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];r.where&&(s=(function(C){const b=F3(C);return b instanceof uo&&l3(b)?b.getFilters():[b]})(r.where));let o=[];r.orderBy&&(o=(function(C){return C.map((b=>(function(F){return new g1(Ru(F.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(b)))})(r.orderBy));let c=null;r.limit&&(c=(function(C){let b;return b=typeof C=="object"?C.value:C,Ap(b)?null:b})(r.limit));let h=null;r.startAt&&(h=(function(C){const b=!!C.before,I=C.values||[];return new h1(I,b)})(r.startAt));let d=null;return r.endAt&&(d=(function(C){const b=!C.before,I=C.values||[];return new h1(I,b)})(r.endAt)),zU(e,i,o,s,c,"F",h,d)}function SM(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pr()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function F3(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ru(r.unaryFilter.field);return Ei.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ru(r.unaryFilter.field);return Ei.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ru(r.unaryFilter.field);return Ei.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ru(r.unaryFilter.field);return Ei.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pr()}})(t):t.fieldFilter!==void 0?(function(r){return Ei.create(Ru(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pr()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return uo.create(r.compositeFilter.filters.map((n=>F3(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pr()}})(r.compositeFilter.op))})(t):pr()}function IM(t){return pM[t]}function NM(t){return mM[t]}function RM(t){return xM[t]}function Nu(t){return{fieldPath:t.canonicalString()}}function Ru(t){return Zi.fromServerFormat(t.fieldPath)}function k3(t){return t instanceof Ei?(function(r){if(r.op==="=="){if(F_(r.value))return{unaryFilter:{field:Nu(r.field),op:"IS_NAN"}};if(R_(r.value))return{unaryFilter:{field:Nu(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(F_(r.value))return{unaryFilter:{field:Nu(r.field),op:"IS_NOT_NAN"}};if(R_(r.value))return{unaryFilter:{field:Nu(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nu(r.field),op:NM(r.op),value:r.value}}})(t):t instanceof uo?(function(r){const n=r.getFilters().map((i=>k3(i)));return n.length===1?n[0]:{compositeFilter:{op:RM(r.op),filters:n}}})(t):pr()}function FM(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function D3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,r,n,i,s=Er.min(),o=Er.min(),c=ns.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new pA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new pA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.ct=e}}function DM(t){const e=BM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Z2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.un=new MM}addToCollectionParentIndex(e,r){return this.un.add(r),Ct.resolve()}getCollectionParents(e,r){return Ct.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ct.resolve()}deleteFieldIndex(e,r){return Ct.resolve()}deleteAllFieldIndexes(e){return Ct.resolve()}createTargetIndexes(e,r){return Ct.resolve()}getDocumentsMatchingTarget(e,r){return Ct.resolve(null)}getIndexType(e,r){return Ct.resolve(0)}getFieldIndexes(e,r){return Ct.resolve([])}getNextCollectionGroupToUpdate(e){return Ct.resolve(null)}getMinOffset(e,r){return Ct.resolve(IA.min())}getMinOffsetFromCollectionGroup(e,r){return Ct.resolve(IA.min())}updateCollectionGroup(e,r,n){return Ct.resolve()}updateIndexEntries(e,r){return Ct.resolve()}}class MM{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new es(On.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new es(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n0(0)}static kn(){return new n0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.changes=new f0((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,hs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ct.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&Of(n.mutation,i,va.empty(),Ni.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,jr()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=jr()){const i=uc();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((s=>{let o=xf();return s.forEach(((c,h)=>{o=o.insert(c,h.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=uc();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,jr())))}populateOverlays(e,r,n){const i=[];return n.forEach((s=>{r.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,i){let s=bl();const o=Mf(),c=(function(){return Mf()})();return r.forEach(((h,d)=>{const m=n.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof UA)?s=s.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),Of(m.mutation,d,m.mutation.getFieldMask(),Ni.now())):o.set(d.key,va.empty())})),this.recalculateAndSaveOverlays(e,s).next((h=>(h.forEach(((d,m)=>o.set(d,m))),r.forEach(((d,m)=>{var C;return c.set(d,new LM(m,(C=o.get(d))!==null&&C!==void 0?C:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=Mf();let i=new Wn(((o,c)=>o-c)),s=jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((h=>{const d=r.get(h);if(d===null)return;let m=n.get(h)||va.empty();m=c.applyToLocalView(d,m),n.set(h,m);const C=(i.get(c.batchId)||jr()).add(h);i=i.insert(c.batchId,C)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,m=h.value,C=m3();m.forEach((b=>{if(!s.has(b)){const I=E3(r.get(b),n.get(b));I!==null&&C.set(b,I),s=s.add(b)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,C))}return Ct.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(o){return or.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):f3(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):Ct.resolve(uc());let c=-1,h=s;return o.next((d=>Ct.forEach(d,((m,C)=>(c<C.largestBatchId&&(c=C.largestBatchId),s.get(m)?Ct.resolve():this.remoteDocumentCache.getEntry(e,m).next((b=>{h=h.insert(m,b)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,h,d,jr()))).next((m=>({batchId:c,changes:p3(m)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new or(r)).next((n=>{let i=xf();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let o=xf();return this.indexManager.getCollectionParents(e,s).next((c=>Ct.forEach(c,(h=>{const d=(function(C,b){return new _d(b,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(r,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next((m=>{m.forEach(((C,b)=>{o=o.insert(C,b)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i)))).next((o=>{s.forEach(((h,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,hs.newInvalidDocument(m)))}));let c=xf();return o.forEach(((h,d)=>{const m=s.get(h);m!==void 0&&Of(m.mutation,d,va.empty(),Ni.now()),fp(r,d)&&(c=c.insert(h,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ct.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:No(i.createTime)}})(r)),Ct.resolve()}getNamedQuery(e,r){return Ct.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(i){return{name:i.name,query:DM(i.bundledQuery),readTime:No(i.readTime)}})(r)),Ct.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.overlays=new Wn(or.comparator),this.Ir=new Map}getOverlay(e,r){return Ct.resolve(this.overlays.get(r))}getOverlays(e,r){const n=uc();return Ct.forEach(r,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,s)=>{this.ht(e,r,s)})),Ct.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Ir.delete(n)),Ct.resolve()}getOverlaysForCollection(e,r,n){const i=uc(),s=r.length+1,o=new or(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>n&&i.set(h.getKey(),h)}return Ct.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new Wn(((d,m)=>d-m));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let m=s.get(d.largestBatchId);m===null&&(m=uc(),s=s.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=uc(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,m)=>c.set(d,m))),!(c.size()>=i)););return Ct.resolve(c)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new cM(r,n));let s=this.Ir.get(r);s===void 0&&(s=jr(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.sessionToken=ns.EMPTY_BYTE_STRING}getSessionToken(e){return Ct.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ct.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.Tr=new es(Mi.Er),this.dr=new es(Mi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Mi(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Mi(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new or(new On([])),n=new Mi(r,e),i=new Mi(r,e+1),s=[];return this.dr.forEachInRange([n,i],(o=>{this.Vr(o),s.push(o.key)})),s}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new or(new On([])),n=new Mi(r,e),i=new Mi(r,e+1);let s=jr();return this.dr.forEachInRange([n,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const r=new Mi(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Mi{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return or.comparator(e.key,r.key)||on(e.wr,r.wr)}static Ar(e,r){return on(e.wr,r.wr)||or.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new es(Mi.Er)}checkEmpty(e){return Ct.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AM(s,r,n,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new Mi(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Ct.resolve(o)}lookupMutationBatch(e,r){return Ct.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),s=i<0?0:i;return Ct.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ct.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Mi(r,0),i=new Mi(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,i],(o=>{const c=this.Dr(o.wr);s.push(c)})),Ct.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new es(on);return r.forEach((i=>{const s=new Mi(i,0),o=new Mi(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],(c=>{n=n.add(c.wr)}))})),Ct.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;or.isDocumentKey(s)||(s=s.child(""));const o=new Mi(new or(s),0);let c=new es(on);return this.br.forEachWhile((h=>{const d=h.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.wr)),!0)}),o),Ct.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const i=this.Dr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){mn(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ct.forEach(r.mutations,(i=>{const s=new Mi(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Mi(r,0),i=this.br.firstAfterOrEqual(n);return Ct.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ct.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.Mr=e,this.docs=(function(){return new Wn(or.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ct.resolve(n?n.document.mutableCopy():hs.newInvalidDocument(r))}getEntries(e,r){let n=bl();return r.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():hs.newInvalidDocument(i))})),Ct.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=bl();const o=r.path,c=new or(o.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:m}}=h.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||BU(TU(m),n)<=0||(i.has(m.key)||fp(r,m))&&(s=s.insert(m.key,m.mutableCopy()))}return Ct.resolve(s)}getAllFromCollectionGroup(e,r,n,i){pr()}Or(e,r){return Ct.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new KM(this)}getSize(e){return Ct.resolve(this.size)}}class KM extends OM{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),Ct.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.persistence=e,this.Nr=new f0((r=>xv(r)),wv),this.lastRemoteSnapshotVersion=Er.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bv,this.targetCount=0,this.kr=n0.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,i)=>r(i))),Ct.resolve()}getLastRemoteSnapshotVersion(e){return Ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ct.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ct.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ct.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new n0(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ct.resolve()}updateTargetData(e,r){return this.Kn(r),Ct.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ct.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),Ct.waitFor(s).next((()=>i))}getTargetCount(e){return Ct.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ct.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ct.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),Ct.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ct.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ct.resolve(n)}containsKey(e,r){return Ct.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,r){this.qr={},this.overlays={},this.Qr=new hv(0),this.Kr=!1,this.Kr=!0,this.$r=new jM,this.referenceDelegate=e(this),this.Ur=new zM(this),this.indexManager=new UM,this.remoteDocumentCache=(function(i){return new GM(i)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new kM(r),this.Gr=new QM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new HM,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new VM(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Xt("MemoryPersistence","Starting transaction:",e);const i=new qM(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((s=>this.referenceDelegate.jr(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Hr(e,r){return Ct.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class qM extends IU{constructor(e){super(),this.currentSequenceNumber=e}}class _v{constructor(e){this.persistence=e,this.Jr=new bv,this.Yr=null}static Zr(e){return new _v(e)}get Xr(){if(this.Yr)return this.Yr;throw pr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ct.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ct.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ct.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((i=>this.Xr.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((s=>this.Xr.add(s.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ct.forEach(this.Xr,(n=>{const i=or.fromPath(n);return this.ei(e,i).next((s=>{s||r.removeEntry(i,Er.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Ct.or([()=>Ct.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=jr(),i=jr();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Tv(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return X6()?8:NU(ws())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.Yi(e,r).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.Zi(e,r,i,n).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new XM;return this.Xi(e,r,o).next((c=>{if(s.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>s.result))}es(e,r,n,i){return n.documentReadCount<this.ji?(af()<=zr.DEBUG&&Xt("QueryEngine","SDK will not create cache indexes for query:",Iu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ct.resolve()):(af()<=zr.DEBUG&&Xt("QueryEngine","Query:",Iu(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(af()<=zr.DEBUG&&Xt("QueryEngine","The SDK decides to create cache indexes for query:",Iu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Io(r))):Ct.resolve())}Yi(e,r){if(M_(r))return Ct.resolve(null);let n=Io(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=Z2(r,null,"F"),n=Io(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const o=jr(...s);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((h=>{const d=this.ts(r,c);return this.ns(r,d,o,h.readTime)?this.Yi(e,Z2(r,null,"F")):this.rs(e,d,r,h)}))))})))))}Zi(e,r,n,i){return M_(r)||i.isEqual(Er.min())?Ct.resolve(null):this.Ji.getDocuments(e,n).next((s=>{const o=this.ts(r,s);return this.ns(r,o,n,i)?Ct.resolve(null):(af()<=zr.DEBUG&&Xt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Iu(r)),this.rs(e,o,r,_U(i,-1)).next((c=>c)))}))}ts(e,r){let n=new es(h3(e));return r.forEach(((i,s)=>{fp(e,s)&&(n=n.add(s))})),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,r,n){return af()<=zr.DEBUG&&Xt("QueryEngine","Using full collection scan to execute query:",Iu(r)),this.Ji.getDocumentsMatchingQuery(e,r,IA.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((s=>(r.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new Wn(on),this._s=new f0((s=>xv(s)),wv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function ZM(t,e,r,n){return new JM(t,e,r,n)}async function U3(t,e){const r=_r(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((s=>{const o=[],c=[];let h=jr();for(const d of i){o.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}for(const d of s){c.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}return r.localDocuments.getDocuments(n,h).next((d=>({hs:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function $M(t,e){const r=_r(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,h,d,m){const C=d.batch,b=C.keys();let I=Ct.resolve();return b.forEach((F=>{I=I.next((()=>m.getEntry(h,F))).next((k=>{const U=d.docVersions.get(F);mn(U!==null),k.version.compareTo(U)<0&&(C.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),m.addEntry(k)))}))})),I.next((()=>c.mutationQueue.removeMutationBatch(h,C)))})(r,n,e,s).next((()=>s.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let h=jr();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function M3(t){const e=_r(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function eO(t,e){const r=_r(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const c=[];e.targetChanges.forEach(((m,C)=>{const b=i.get(C);if(!b)return;c.push(r.Ur.removeMatchingKeys(s,m.removedDocuments,C).next((()=>r.Ur.addMatchingKeys(s,m.addedDocuments,C))));let I=b.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(C)!==null?I=I.withResumeToken(ns.EMPTY_BYTE_STRING,Er.min()).withLastLimboFreeSnapshotVersion(Er.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,n)),i=i.insert(C,I),(function(k,U,V){return k.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(b,I,m)&&c.push(r.Ur.updateTargetData(s,I))}));let h=bl(),d=jr();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(s,m))})),c.push(tO(s,o,e.documentUpdates).next((m=>{h=m.Ps,d=m.Is}))),!n.isEqual(Er.min())){const m=r.Ur.getLastRemoteSnapshotVersion(s).next((C=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n)));c.push(m)}return Ct.waitFor(c).next((()=>o.apply(s))).next((()=>r.localDocuments.getLocalViewOfDocuments(s,h,d))).next((()=>h))})).then((s=>(r.os=i,s)))}function tO(t,e,r){let n=jr(),i=jr();return r.forEach((s=>n=n.add(s))),e.getEntries(t,n).next((s=>{let o=bl();return r.forEach(((c,h)=>{const d=s.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Er.min())?(e.removeEntry(c,h.readTime),o=o.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),o=o.insert(c,h)):Xt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)})),{Ps:o,Is:i}}))}function rO(t,e){const r=_r(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function nO(t,e){const r=_r(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Ur.getTargetData(n,e).next((s=>s?(i=s,Ct.resolve(i)):r.Ur.allocateTargetId(n).next((o=>(i=new pA(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function nw(t,e,r){const n=_r(t),i=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,(o=>n.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!bd(o))throw o;Xt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function W_(t,e,r){const n=_r(t);let i=Er.min(),s=jr();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(h,d,m){const C=_r(h),b=C._s.get(m);return b!==void 0?Ct.resolve(C.os.get(b)):C.Ur.getTargetData(d,m)})(n,o,Io(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((h=>{s=h}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?i:Er.min(),r?s:jr()))).next((c=>(iO(n,qU(e),c),{documents:c,Ts:s})))))}function iO(t,e,r){let n=t.us.get(e)||Er.min();r.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),t.us.set(e,n)}class q_{constructor(){this.activeTargetIds=eM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sO{constructor(){this.so=new q_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new q_,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg=null;function Xx(){return eg===null?eg=(function(){return 268435456+Math.round(2147483648*Math.random())})():eg++,"0x"+eg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="WebChannelConnection";class AO extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(r,n,i,s,o){const c=Xx(),h=this.xo(r,n.toUriEncodedString());Xt("RestConnection",`Sending RPC '${r}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(r,h,d,i).then((m=>(Xt("RestConnection",`Received RPC '${r}' ${c}: `,m),m)),(m=>{throw $u("RestConnection",`RPC '${r}' ${c} failed with error: `,m,"url: ",h,"request:",i),m}))}Lo(r,n,i,s,o,c){return this.Mo(r,n,i,s,o)}Oo(r,n,i){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+u0})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>r[o]=s)),i&&i.headers.forEach(((s,o)=>r[o]=s))}xo(r,n){const i=oO[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const s=Xx();return new Promise(((o,c)=>{const h=new YI;h.setWithCredentials(!0),h.listenOnce(JI.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Yg.NO_ERROR:const m=h.getResponseJson();Xt(ls,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),o(m);break;case Yg.TIMEOUT:Xt(ls,`RPC '${e}' ${s} timed out`),c(new zt(gt.DEADLINE_EXCEEDED,"Request time out"));break;case Yg.HTTP_ERROR:const C=h.getStatus();if(Xt(ls,`RPC '${e}' ${s} failed with status:`,C,"response text:",h.getResponseText()),C>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const I=b==null?void 0:b.error;if(I&&I.status&&I.message){const F=(function(U){const V=U.toLowerCase().replace(/_/g,"-");return Object.values(gt).indexOf(V)>=0?V:gt.UNKNOWN})(I.status);c(new zt(F,I.message))}else c(new zt(gt.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new zt(gt.UNAVAILABLE,"Connection failed."));break;default:pr()}}finally{Xt(ls,`RPC '${e}' ${s} completed.`)}}));const d=JSON.stringify(i);Xt(ls,`RPC '${e}' ${s} sending request:`,i),h.send(r,"POST",d,n,15)}))}Bo(e,r,n){const i=Xx(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=e3(),c=$I(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,r,n),h.encodeInitMessageHeaders=!0;const m=s.join("");Xt(ls,`Creating RPC '${e}' stream ${i}: ${m}`,h);const C=o.createWebChannel(m,h);let b=!1,I=!1;const F=new lO({Io:U=>{I?Xt(ls,`Not sending because RPC '${e}' stream ${i} is closed:`,U):(b||(Xt(ls,`Opening RPC '${e}' stream ${i} transport.`),C.open(),b=!0),Xt(ls,`RPC '${e}' stream ${i} sending:`,U),C.send(U))},To:()=>C.close()}),k=(U,V,K)=>{U.listen(V,(Q=>{try{K(Q)}catch(te){setTimeout((()=>{throw te}),0)}}))};return k(C,mf.EventType.OPEN,(()=>{I||(Xt(ls,`RPC '${e}' stream ${i} transport opened.`),F.yo())})),k(C,mf.EventType.CLOSE,(()=>{I||(I=!0,Xt(ls,`RPC '${e}' stream ${i} transport closed`),F.So())})),k(C,mf.EventType.ERROR,(U=>{I||(I=!0,$u(ls,`RPC '${e}' stream ${i} transport errored:`,U),F.So(new zt(gt.UNAVAILABLE,"The operation could not be completed")))})),k(C,mf.EventType.MESSAGE,(U=>{var V;if(!I){const K=U.data[0];mn(!!K);const Q=K,te=Q.error||((V=Q[0])===null||V===void 0?void 0:V.error);if(te){Xt(ls,`RPC '${e}' stream ${i} received error:`,te);const re=te.status;let z=(function(O){const ee=wi[O];if(ee!==void 0)return _3(ee)})(re),M=te.message;z===void 0&&(z=gt.INTERNAL,M="Unknown error status: "+re+" with message "+te.message),I=!0,F.So(new zt(z,M)),C.close()}else Xt(ls,`RPC '${e}' stream ${i} received:`,K),F.bo(K)}})),k(c,ZI.STAT_EVENT,(U=>{U.stat===z2.PROXY?Xt(ls,`RPC '${e}' stream ${i} detected buffering proxy`):U.stat===z2.NOPROXY&&Xt(ls,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{F.wo()}),0),F}}function Yx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t){return new wM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,r,n=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&Xt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,r,n,i,s,o,c,h){this.ui=e,this.Ho=n,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new O3(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===gt.RESOURCE_EXHAUSTED?(El(r.toString()),El("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===gt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.Yo===r&&this.P_(n,i)}),(n=>{e((()=>{const i=new zt(gt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{n((()=>this.I_(i)))})),this.stream.onMessage((i=>{n((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Xt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(Xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cO extends L3{constructor(e,r,n,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=CM(this.serializer,e),n=(function(s){if(!("targetChange"in s))return Er.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Er.min():o.readTime?No(o.readTime):Er.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=rw(this.serializer),r.addTarget=(function(s,o){let c;const h=o.target;if(c=Y2(h)?{documents:_M(s,h)}:{query:TM(s,h)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=S3(s,o.resumeToken);const d=$2(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Er.min())>0){c.readTime=x1(s,o.snapshotVersion.toTimestamp());const d=$2(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const n=SM(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=rw(this.serializer),r.removeTarget=e,this.a_(r)}}class uO extends L3{constructor(e,r,n,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return mn(!!e.streamToken),this.lastStreamToken=e.streamToken,mn(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=bM(e.writeResults,e.commitTime),n=No(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=rw(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>EM(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new zt(gt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Mo(e,ew(r,n),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new zt(gt.UNKNOWN,s.toString())}))}Lo(e,r,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,ew(r,n),i,o,c,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new zt(gt.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class dO{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(El(r),this.D_=!1):Xt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((o=>{n.enqueueAndForget((async()=>{Dc(this)&&(Xt("RemoteStore","Restarting streams for network reachability change."),await(async function(h){const d=_r(h);d.L_.add(4),await Sd(d),d.q_.set("Unknown"),d.L_.delete(4),await xp(d)})(this))}))})),this.q_=new dO(n,i)}}async function xp(t){if(Dc(t))for(const e of t.B_)await e(!0)}async function Sd(t){for(const e of t.B_)await e(!1)}function P3(t,e){const r=_r(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Nv(r)?Iv(r):d0(r).r_()&&Sv(r,e))}function Bv(t,e){const r=_r(t),n=d0(r);r.N_.delete(e),n.r_()&&Q3(r,e),r.N_.size===0&&(n.r_()?n.o_():Dc(r)&&r.q_.set("Unknown"))}function Sv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Er.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}d0(t).A_(e)}function Q3(t,e){t.Q_.xe(e),d0(t).R_(e)}function Iv(t){t.Q_=new gM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),d0(t).start(),t.q_.v_()}function Nv(t){return Dc(t)&&!d0(t).n_()&&t.N_.size>0}function Dc(t){return _r(t).L_.size===0}function H3(t){t.Q_=void 0}async function gO(t){t.q_.set("Online")}async function pO(t){t.N_.forEach(((e,r)=>{Sv(t,e)}))}async function mO(t,e){H3(t),Nv(t)?(t.q_.M_(e),Iv(t)):t.q_.set("Unknown")}async function xO(t,e,r){if(t.q_.set("Online"),e instanceof B3&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})(t,e)}catch(n){Xt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await w1(t,n)}else if(e instanceof $g?t.Q_.Ke(e):e instanceof T3?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Er.min()))try{const n=await M3(t.localStore);r.compareTo(n)>=0&&await(function(s,o){const c=s.Q_.rt(o);return c.targetChanges.forEach(((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const m=s.N_.get(d);m&&s.N_.set(d,m.withResumeToken(h.resumeToken,o))}})),c.targetMismatches.forEach(((h,d)=>{const m=s.N_.get(h);if(!m)return;s.N_.set(h,m.withResumeToken(ns.EMPTY_BYTE_STRING,m.snapshotVersion)),Q3(s,h);const C=new pA(m.target,h,d,m.sequenceNumber);Sv(s,C)})),s.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){Xt("RemoteStore","Failed to raise snapshot:",n),await w1(t,n)}}async function w1(t,e,r){if(!bd(e))throw e;t.L_.add(1),await Sd(t),t.q_.set("Offline"),r||(r=()=>M3(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Xt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await xp(t)}))}function j3(t,e){return e().catch((r=>w1(t,r,e)))}async function wp(t){const e=_r(t),r=RA(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wO(e);)try{const i=await rO(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,vO(e,i)}catch(i){await w1(e,i)}V3(e)&&G3(e)}function wO(t){return Dc(t)&&t.O_.length<10}function vO(t,e){t.O_.push(e);const r=RA(t);r.r_()&&r.V_&&r.m_(e.mutations)}function V3(t){return Dc(t)&&!RA(t).n_()&&t.O_.length>0}function G3(t){RA(t).start()}async function yO(t){RA(t).p_()}async function CO(t){const e=RA(t);for(const r of t.O_)e.m_(r.mutations)}async function EO(t,e,r){const n=t.O_.shift(),i=yv.from(n,e,r);await j3(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await wp(t)}async function bO(t,e){e&&RA(t).V_&&await(async function(n,i){if((function(o){return fM(o)&&o!==gt.ABORTED})(i.code)){const s=n.O_.shift();RA(n).s_(),await j3(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await wp(n)}})(t,e),V3(t)&&G3(t)}async function Y_(t,e){const r=_r(t);r.asyncQueue.verifyOperationInProgress(),Xt("RemoteStore","RemoteStore received new credentials");const n=Dc(r);r.L_.add(3),await Sd(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await xp(r)}async function _O(t,e){const r=_r(t);e?(r.L_.delete(2),await xp(r)):e||(r.L_.add(2),await Sd(r),r.q_.set("Unknown"))}function d0(t){return t.K_||(t.K_=(function(r,n,i){const s=_r(r);return s.w_(),new cO(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:gO.bind(null,t),Ro:pO.bind(null,t),mo:mO.bind(null,t),d_:xO.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),Nv(t)?Iv(t):t.q_.set("Unknown")):(await t.K_.stop(),H3(t))}))),t.K_}function RA(t){return t.U_||(t.U_=(function(r,n,i){const s=_r(r);return s.w_(),new uO(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:yO.bind(null,t),mo:bO.bind(null,t),f_:CO.bind(null,t),g_:EO.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await wp(t)):(await t.U_.stop(),t.O_.length>0&&(Xt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new ml,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const o=Date.now()+n,c=new Rv(e,r,o,i,s);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new zt(gt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fv(t,e){if(El("AsyncQueue",`${e}: ${t}`),bd(t))return new zt(gt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this.comparator=e?(r,n)=>e(r,n)||or.comparator(r.key,n.key):(r,n)=>or.comparator(r.key,n.key),this.keyedMap=xf(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new Vu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Vu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Vu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.W_=new Wn(or.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):pr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class i0{constructor(e,r,n,i,s,o,c,h,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,i,s){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new i0(e,r,Vu.emptySet(r),o,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class BO{constructor(){this.queries=Z_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=_r(r),s=i.queries;i.queries=Z_(),s.forEach(((o,c)=>{for(const h of c.j_)h.onError(n)}))})(this,new zt(gt.ABORTED,"Firestore shutting down"))}}function Z_(){return new f0((t=>d3(t)),up)}async function kv(t,e){const r=_r(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.H_()&&e.J_()&&(n=2):(s=new TO,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(i,!0);break;case 1:s.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const c=Fv(o,`Initialization of query '${Iu(e.query)}' failed`);return void e.onError(c)}r.queries.set(i,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&Uv(r)}async function Dv(t,e){const r=_r(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function SO(t,e){const r=_r(t);let n=!1;for(const i of e){const s=i.query,o=r.queries.get(s);if(o){for(const c of o.j_)c.X_(i)&&(n=!0);o.z_=i}}n&&Uv(r)}function IO(t,e,r){const n=_r(t),i=n.queries.get(e);if(i)for(const s of i.j_)s.onError(r);n.queries.delete(e)}function Uv(t){t.Y_.forEach((e=>{e.next()}))}var iw,$_;($_=iw||(iw={})).ea="default",$_.Cache="cache";class Mv{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new i0(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=i0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==iw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.key=e}}class z3{constructor(e){this.key=e}}class NO{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=jr(),this.mutatedKeys=jr(),this.Aa=h3(e),this.Ra=new Vu(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new J_,i=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,C)=>{const b=i.get(m),I=fp(this.query,C)?C:null,F=!!b&&this.mutatedKeys.has(b.key),k=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let U=!1;b&&I?b.data.isEqual(I.data)?F!==k&&(n.track({type:3,doc:I}),U=!0):this.ga(b,I)||(n.track({type:2,doc:I}),U=!0,(h&&this.Aa(I,h)>0||d&&this.Aa(I,d)<0)&&(c=!0)):!b&&I?(n.track({type:0,doc:I}),U=!0):b&&!I&&(n.track({type:1,doc:b}),U=!0,(h||d)&&(c=!0)),U&&(I?(o=o.add(I),s=k?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),n.track({type:1,doc:m})}return{Ra:o,fa:n,ns:c,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((m,C)=>(function(I,F){const k=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pr()}};return k(I)-k(F)})(m.type,C.type)||this.Aa(m.doc,C.doc))),this.pa(n),i=i!=null&&i;const c=r&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,d=h!==this.Ea;return this.Ea=h,o.length!==0||d?{snapshot:new i0(this.query,e.Ra,s,o,e.mutatedKeys,h===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new J_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=jr(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new z3(n))})),this.da.forEach((n=>{e.has(n)||r.push(new K3(n))})),r}ba(e){this.Ta=e.Ts,this.da=jr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return i0.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RO{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class FO{constructor(e){this.key=e,this.va=!1}}class kO{constructor(e,r,n,i,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new f0((c=>d3(c)),up),this.Ma=new Map,this.xa=new Set,this.Oa=new Wn(or.comparator),this.Na=new Map,this.La=new bv,this.Ba={},this.ka=new Map,this.qa=n0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DO(t,e,r=!0){const n=Z3(t);let i;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await W3(n,e,r,!0),i}async function UO(t,e){const r=Z3(t);await W3(r,e,!0,!1)}async function W3(t,e,r,n){const i=await nO(t.localStore,Io(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let c;return n&&(c=await MO(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&P3(t.remoteStore,i),c}async function MO(t,e,r,n,i){t.Ka=(C,b,I)=>(async function(k,U,V,K){let Q=U.view.ma(V);Q.ns&&(Q=await W_(k.localStore,U.query,!1).then((({documents:M})=>U.view.ma(M,Q))));const te=K&&K.targetChanges.get(U.targetId),re=K&&K.targetMismatches.get(U.targetId)!=null,z=U.view.applyChanges(Q,k.isPrimaryClient,te,re);return tT(k,U.targetId,z.wa),z.snapshot})(t,C,b,I);const s=await W_(t.localStore,e,!0),o=new NO(e,s.Ts),c=o.ma(s.documents),h=Bd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,h);tT(t,r,d.wa);const m=new RO(e,r,o);return t.Fa.set(e,m),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),d.snapshot}async function OO(t,e,r){const n=_r(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);if(s.length>1)return n.Ma.set(i.targetId,s.filter((o=>!up(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await nw(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Bv(n.remoteStore,i.targetId),sw(n,i.targetId)})).catch(Ed)):(sw(n,i.targetId),await nw(n.localStore,i.targetId,!0))}async function LO(t,e){const r=_r(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Bv(r.remoteStore,n.targetId))}async function PO(t,e,r){const n=zO(t);try{const i=await(function(o,c){const h=_r(o),d=Ni.now(),m=c.reduce(((I,F)=>I.add(F.key)),jr());let C,b;return h.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let F=bl(),k=jr();return h.cs.getEntries(I,m).next((U=>{F=U,F.forEach(((V,K)=>{K.isValidDocument()||(k=k.add(V))}))})).next((()=>h.localDocuments.getOverlayedDocuments(I,F))).next((U=>{C=U;const V=[];for(const K of c){const Q=oM(K,C.get(K.key).overlayedDocument);Q!=null&&V.push(new UA(K.key,Q,s3(Q.value.mapValue),ea.exists(!0)))}return h.mutationQueue.addMutationBatch(I,d,V,c)})).next((U=>{b=U;const V=U.applyToLocalDocumentSet(C,k);return h.documentOverlayCache.saveOverlays(I,U.batchId,V)}))})).then((()=>({batchId:b.batchId,changes:p3(C)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(o,c,h){let d=o.Ba[o.currentUser.toKey()];d||(d=new Wn(on)),d=d.insert(c,h),o.Ba[o.currentUser.toKey()]=d})(n,i.batchId,r),await Id(n,i.changes),await wp(n.remoteStore)}catch(i){const s=Fv(i,"Failed to persist write");r.reject(s)}}async function q3(t,e){const r=_r(t);try{const n=await eO(r.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=r.Na.get(s);o&&(mn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?mn(o.va):i.removedDocuments.size>0&&(mn(o.va),o.va=!1))})),await Id(r,n,e)}catch(n){await Ed(n)}}function eT(t,e,r){const n=_r(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach(((s,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const h=_r(o);h.onlineState=c;let d=!1;h.queries.forEach(((m,C)=>{for(const b of C.j_)b.Z_(c)&&(d=!0)})),d&&Uv(h)})(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function QO(t,e,r){const n=_r(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),s=i&&i.key;if(s){let o=new Wn(or.comparator);o=o.insert(s,hs.newNoDocument(s,Er.min()));const c=jr().add(s),h=new pp(Er.min(),new Map,new Wn(on),o,c);await q3(n,h),n.Oa=n.Oa.remove(s),n.Na.delete(e),Ov(n)}else await nw(n.localStore,e,!1).then((()=>sw(n,e,r))).catch(Ed)}async function HO(t,e){const r=_r(t),n=e.batch.batchId;try{const i=await $M(r.localStore,e);Y3(r,n,null),X3(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Id(r,i)}catch(i){await Ed(i)}}async function jO(t,e,r){const n=_r(t);try{const i=await(function(o,c){const h=_r(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let m;return h.mutationQueue.lookupMutationBatch(d,c).next((C=>(mn(C!==null),m=C.keys(),h.mutationQueue.removeMutationBatch(d,C)))).next((()=>h.mutationQueue.performConsistencyCheck(d))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(d,m,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m))).next((()=>h.localDocuments.getDocuments(d,m)))}))})(n.localStore,e);Y3(n,e,r),X3(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Id(n,i)}catch(i){await Ed(i)}}function X3(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function Y3(t,e,r){const n=_r(t);let i=n.Ba[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function sw(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||J3(t,n)}))}function J3(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Bv(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),Ov(t))}function tT(t,e,r){for(const n of r)n instanceof K3?(t.La.addReference(n.key,e),VO(t,n)):n instanceof z3?(Xt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||J3(t,n.key)):pr()}function VO(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Xt("SyncEngine","New document in limbo: "+r),t.xa.add(n),Ov(t))}function Ov(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new or(On.fromString(e)),n=t.qa.next();t.Na.set(n,new FO(r)),t.Oa=t.Oa.insert(r,n),P3(t.remoteStore,new pA(Io(cp(r.path)),n,"TargetPurposeLimboResolution",hv.oe))}}async function Id(t,e,r){const n=_r(t),i=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,h)=>{o.push(n.Ka(h,e,r).then((d=>{var m;if((d||r)&&n.isPrimaryClient){const C=d?!d.fromCache:(m=r==null?void 0:r.targetChanges.get(h.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(h.targetId,C?"current":"not-current")}if(d){i.push(d);const C=Tv.Wi(h.targetId,d);s.push(C)}})))})),await Promise.all(o),n.Ca.d_(i),await(async function(h,d){const m=_r(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>Ct.forEach(d,(b=>Ct.forEach(b.$i,(I=>m.persistence.referenceDelegate.addReference(C,b.targetId,I))).next((()=>Ct.forEach(b.Ui,(I=>m.persistence.referenceDelegate.removeReference(C,b.targetId,I)))))))))}catch(C){if(!bd(C))throw C;Xt("LocalStore","Failed to update sequence numbers: "+C)}for(const C of d){const b=C.targetId;if(!C.fromCache){const I=m.os.get(b),F=I.snapshotVersion,k=I.withLastLimboFreeSnapshotVersion(F);m.os=m.os.insert(b,k)}}})(n.localStore,s))}async function GO(t,e){const r=_r(t);if(!r.currentUser.isEqual(e)){Xt("SyncEngine","User change. New user:",e.toKey());const n=await U3(r.localStore,e);r.currentUser=e,(function(s,o){s.ka.forEach((c=>{c.forEach((h=>{h.reject(new zt(gt.CANCELLED,o))}))})),s.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Id(r,n.hs)}}function KO(t,e){const r=_r(t),n=r.Na.get(e);if(n&&n.va)return jr().add(n.key);{let i=jr();const s=r.Ma.get(e);if(!s)return i;for(const o of s){const c=r.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function Z3(t){const e=_r(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=q3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QO.bind(null,e),e.Ca.d_=SO.bind(null,e.eventManager),e.Ca.$a=IO.bind(null,e.eventManager),e}function zO(t){const e=_r(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jO.bind(null,e),e}class v1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return ZM(this.persistence,new YM,e.initialUser,this.serializer)}Ga(e){return new WM(_v.Zr,this.serializer)}Wa(e){return new sO}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}v1.provider={build:()=>new v1};class aw{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>eT(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=GO.bind(null,this.syncEngine),await _O(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BO})()}createDatastore(e){const r=mp(e.databaseInfo.databaseId),n=(function(s){return new AO(s)})(e.databaseInfo);return(function(s,o,c,h){return new fO(s,o,c,h)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,s,o,c){return new hO(n,i,s,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>eT(this.syncEngine,r,0)),(function(){return X_.D()?new X_:new aO})())}createSyncEngine(e,r){return(function(i,s,o,c,h,d,m){const C=new kO(i,s,o,c,h,d);return m&&(C.Qa=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(i){const s=_r(i);Xt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Sd(s),s.k_.shutdown(),s.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}aw.provider={build:()=>new aw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):El("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=us.UNAUTHENTICATED,this.clientId=r3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async o=>{Xt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(Xt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ml;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Fv(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Jx(t,e){t.asyncQueue.verifyOperationInProgress(),Xt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await U3(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function rT(t,e){t.asyncQueue.verifyOperationInProgress();const r=await qO(t);Xt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>Y_(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>Y_(e.remoteStore,i))),t._onlineComponents=e}async function qO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Xt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jx(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===gt.FAILED_PRECONDITION||i.code===gt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;$u("Error using user provided cache. Falling back to memory cache: "+r),await Jx(t,new v1)}}else Xt("FirestoreClient","Using default OfflineComponentProvider"),await Jx(t,new v1);return t._offlineComponents}async function $3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Xt("FirestoreClient","Using user provided OnlineComponentProvider"),await rT(t,t._uninitializedComponentsProvider._online)):(Xt("FirestoreClient","Using default OnlineComponentProvider"),await rT(t,new aw))),t._onlineComponents}function XO(t){return $3(t).then((e=>e.syncEngine))}async function y1(t){const e=await $3(t),r=e.eventManager;return r.onListen=DO.bind(null,e.syncEngine),r.onUnlisten=OO.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=UO.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=LO.bind(null,e.syncEngine),r}function YO(t,e,r={}){const n=new ml;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,c,h,d){const m=new Lv({next:b=>{m.Za(),o.enqueueAndForget((()=>Dv(s,C)));const I=b.docs.has(c);!I&&b.fromCache?d.reject(new zt(gt.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&b.fromCache&&h&&h.source==="server"?d.reject(new zt(gt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(b)},error:b=>d.reject(b)}),C=new Mv(cp(c.path),m,{includeMetadataChanges:!0,_a:!0});return kv(s,C)})(await y1(t),t.asyncQueue,e,r,n))),n.promise}function JO(t,e,r={}){const n=new ml;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,c,h,d){const m=new Lv({next:b=>{m.Za(),o.enqueueAndForget((()=>Dv(s,C))),b.fromCache&&h.source==="server"?d.reject(new zt(gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(b)},error:b=>d.reject(b)}),C=new Mv(c,m,{includeMetadataChanges:!0,_a:!0});return kv(s,C)})(await y1(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t,e,r){if(!r)throw new zt(gt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZO(t,e,r,n){if(e===!0&&n===!0)throw new zt(gt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function iT(t){if(!or.isDocumentKey(t))throw new zt(gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sT(t){if(or.isDocumentKey(t))throw new zt(gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pr()}function ta(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new zt(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=vp(t);throw new zt(gt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new zt(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new zt(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eN((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new zt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new zt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new zt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yp{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new zt(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new zt(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aT(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new pU;switch(n.type){case"firstParty":return new vU(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new zt(gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=nT.get(r);n&&(Xt("ComponentProvider","Removing Datastore"),nT.delete(r),n.terminate())})(this),Promise.resolve()}}function $O(t,e,r,n={}){var i;const s=(t=ta(t,yp))._getSettings(),o=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&$u("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let c,h;if(typeof n.mockUserToken=="string")c=n.mockUserToken,h=us.MOCK_USER;else{c=V6(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new zt(gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new us(d)}t._authCredentials=new mU(new t3(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Uc(this.firestore,e,this._query)}}class ms{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _A(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ms(this.firestore,e,this._key)}}class _A extends Uc{constructor(e,r,n){super(e,r,cp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ms(this.firestore,null,new or(e))}withConverter(e){return new _A(this.firestore,e,this._path)}}function Ts(t,e,...r){if(t=Ln(t),tN("collection","path",e),t instanceof yp){const n=On.fromString(e,...r);return sT(n),new _A(t,null,n)}{if(!(t instanceof ms||t instanceof _A))throw new zt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(On.fromString(e,...r));return sT(n),new _A(t.firestore,null,n)}}function Jt(t,e,...r){if(t=Ln(t),arguments.length===1&&(e=r3.newId()),tN("doc","path",e),t instanceof yp){const n=On.fromString(e,...r);return iT(n),new ms(t,null,new or(n))}{if(!(t instanceof ms||t instanceof _A))throw new zt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(On.fromString(e,...r));return iT(n),new ms(t.firestore,t instanceof _A?t.converter:null,new or(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new O3(this,"async_queue_retry"),this.Vu=()=>{const n=Yx();n&&Xt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Yx();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Yx();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new ml;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bd(e))throw e;Xt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const i=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw El("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=Rv.createAndSchedule(this,e,r,n,(s=>this.yu(s)));return this.Tu.push(i),i}fu(){this.Eu&&pr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function lT(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class _l extends yp{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new oT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oT(e),this._firestoreClient=void 0,await e}}}function eL(t,e){const r=typeof t=="object"?t:fv(),n=typeof t=="string"?t:"(default)",i=Fc(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=H6("firestore");s&&$O(i,...s)}return i}function Nd(t){if(t._terminated)throw new zt(gt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tL(t),t._firestoreClient}function tL(t){var e,r,n;const i=t._freezeSettings(),s=(function(c,h,d,m){return new kU(c,h,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,eN(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new WO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&(function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new s0(ns.fromBase64String(e))}catch(r){throw new zt(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new s0(ns.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new zt(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new zt(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new zt(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return on(this._lat,e._lat)||on(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=/^__.*__$/;class nL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new UA(e,this.data,this.fieldMask,r,this.fieldTransforms):new Td(e,this.data,r,this.fieldTransforms)}}class rN{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new UA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function nN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pr()}}class jv{constructor(e,r,n,i,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return C1(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nN(this.Cu)&&rL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class iL{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||mp(e)}Qu(e,r,n,i=!1){return new jv({Cu:e,methodName:r,qu:n,path:Zi.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cp(t){const e=t._freezeSettings(),r=mp(t._databaseId);return new iL(t._databaseId,!!e.ignoreUndefinedProperties,r)}function iN(t,e,r,n,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,r,i);Vv("Data must be an object, but it was:",o,n);const c=oN(n,o);let h,d;if(s.merge)h=new va(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const m=[];for(const C of s.mergeFields){const b=ow(e,C,r);if(!o.contains(b))throw new zt(gt.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);AN(m,b)||m.push(b)}h=new va(m),d=o.fieldTransforms.filter((C=>h.covers(C.field)))}else h=null,d=o.fieldTransforms;return new nL(new $s(c),h,d)}class Ep extends Pv{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ep}}function sN(t,e,r,n){const i=t.Qu(1,e,r);Vv("Data must be an object, but it was:",i,n);const s=[],o=$s.empty();kc(n,((h,d)=>{const m=Gv(e,h,r);d=Ln(d);const C=i.Nu(m);if(d instanceof Ep)s.push(m);else{const b=Fd(d,C);b!=null&&(s.push(m),o.set(m,b))}}));const c=new va(s);return new rN(o,c,i.fieldTransforms)}function aN(t,e,r,n,i,s){const o=t.Qu(1,e,r),c=[ow(e,n,r)],h=[i];if(s.length%2!=0)throw new zt(gt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<s.length;b+=2)c.push(ow(e,s[b])),h.push(s[b+1]);const d=[],m=$s.empty();for(let b=c.length-1;b>=0;--b)if(!AN(d,c[b])){const I=c[b];let F=h[b];F=Ln(F);const k=o.Nu(I);if(F instanceof Ep)d.push(I);else{const U=Fd(F,k);U!=null&&(d.push(I),m.set(I,U))}}const C=new va(d);return new rN(m,C,o.fieldTransforms)}function sL(t,e,r,n=!1){return Fd(r,t.Qu(n?4:3,e))}function Fd(t,e){if(lN(t=Ln(t)))return Vv("Unsupported field value:",e,t),oN(t,e);if(t instanceof Pv)return(function(n,i){if(!nN(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,i){const s=[];let o=0;for(const c of n){let h=Fd(c,i.Lu(o));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),o++}return{arrayValue:{values:s}}})(t,e)}return(function(n,i){if((n=Ln(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return tM(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ni.fromDate(n);return{timestampValue:x1(i.serializer,s)}}if(n instanceof Ni){const s=new Ni(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:x1(i.serializer,s)}}if(n instanceof Qv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof s0)return{bytesValue:S3(i.serializer,n._byteString)};if(n instanceof ms){const s=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ev(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Hv)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw c.Bu("VectorValues must only contain numeric values.");return vv(c.serializer,h)}))}}}}}})(n,i);throw i.Bu(`Unsupported field value: ${vp(n)}`)})(t,e)}function oN(t,e){const r={};return n3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kc(t,((n,i)=>{const s=Fd(i,e.Mu(n));s!=null&&(r[n]=s)})),{mapValue:{fields:r}}}function lN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ni||t instanceof Qv||t instanceof s0||t instanceof ms||t instanceof Pv||t instanceof Hv)}function Vv(t,e,r){if(!lN(r)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(r)){const n=vp(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function ow(t,e,r){if((e=Ln(e))instanceof Rd)return e._internalPath;if(typeof e=="string")return Gv(t,e);throw C1("Field path arguments must be of type string or ",t,!1,void 0,r)}const aL=new RegExp("[~\\*/\\[\\]]");function Gv(t,e,r){if(e.search(aL)>=0)throw C1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Rd(...e.split("."))._internalPath}catch{throw C1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function C1(t,e,r,n,i){const s=n&&!n.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||o)&&(h+=" (found",s&&(h+=` in field ${n}`),o&&(h+=` in document ${i}`),h+=")"),new zt(gt.INVALID_ARGUMENT,c+t+h)}function AN(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ms(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Kv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class oL extends cN{data(){return super.data()}}function Kv(t,e){return typeof e=="string"?Gv(t,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new zt(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zv{}class lL extends zv{}function tg(t,e,...r){let n=[];e instanceof zv&&n.push(e),n=n.concat(r),(function(s){const o=s.filter((h=>h instanceof Wv)).length,c=s.filter((h=>h instanceof bp)).length;if(o>1||o>0&&c>0)throw new zt(gt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class bp extends lL{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new bp(e,r,n)}_apply(e){const r=this._parse(e);return fN(e._query,r),new Uc(e.firestore,e.converter,J2(e._query,r))}_parse(e){const r=Cp(e.firestore);return(function(s,o,c,h,d,m,C){let b;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new zt(gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){cT(C,m);const I=[];for(const F of C)I.push(AT(h,s,F));b={arrayValue:{values:I}}}else b=AT(h,s,C)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||cT(C,m),b=sL(c,o,C,m==="in"||m==="not-in");return Ei.create(d,m,b)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function rg(t,e,r){const n=e,i=Kv("where",t);return bp._create(i,n,r)}class Wv extends zv{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Wv(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:uo.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,s){let o=i;const c=s.getFlattenedFilters();for(const h of c)fN(o,h),o=J2(o,h)})(e._query,r),new Uc(e.firestore,e.converter,J2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function AT(t,e,r){if(typeof(r=Ln(r))=="string"){if(r==="")throw new zt(gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f3(e)&&r.indexOf("/")!==-1)throw new zt(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(On.fromString(r));if(!or.isDocumentKey(n))throw new zt(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return N_(t,new or(n))}if(r instanceof ms)return N_(t,r._key);throw new zt(gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vp(r)}.`)}function cT(t,e){if(!Array.isArray(t)||t.length===0)throw new zt(gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fN(t,e){const r=(function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new zt(gt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new zt(gt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class AL{convertValue(e,r="none"){switch(Ec(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Cc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw pr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return kc(e,((i,s)=>{n[i]=this.convertValue(s,r)})),n}convertVectorValue(e){var r,n,i;const s=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((o=>fi(o.doubleValue)));return new Hv(s)}convertGeoPoint(e){return new Qv(fi(e.latitude),fi(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=pv(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(nd(e));default:return null}}convertTimestamp(e){const r=NA(e);return new Ni(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=On.fromString(e);mn(D3(n));const i=new id(n.get(1),n.get(3)),s=new or(n.popFirst(5));return i.isEqual(r)||El(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hN extends cN{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new e1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Kv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class e1 extends hN{data(e={}){return super.data(e)}}class gN{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new vf(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new e1(this._firestore,this._userDataWriter,n.key,n,new vf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new zt(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const h=new e1(i._firestore,i._userDataWriter,c.doc.key,c.doc,new vf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const h=new e1(i._firestore,i._userDataWriter,c.doc.key,c.doc,new vf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:cL(c.type),doc:h,oldIndex:d,newIndex:m}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function cL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){t=ta(t,ms);const e=ta(t.firestore,_l);return YO(Nd(e),t._key).then((r=>pN(e,t,r)))}class qv extends AL{constructor(e){super(),this.firestore=e}convertBytes(e){return new s0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ms(this.firestore,null,r)}}function ng(t){t=ta(t,Uc);const e=ta(t.firestore,_l),r=Nd(e),n=new qv(e);return uN(t._query),JO(r,t._query).then((i=>new gN(e,n,t,i)))}function Ur(t,e,r){t=ta(t,ms);const n=ta(t.firestore,_l),i=dN(t.converter,e,r);return _p(n,[iN(Cp(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,ea.none())])}function Fu(t,e,r,...n){t=ta(t,ms);const i=ta(t.firestore,_l),s=Cp(i);let o;return o=typeof(e=Ln(e))=="string"||e instanceof Rd?aN(s,"updateDoc",t._key,e,r,n):sN(s,"updateDoc",t._key,e),_p(i,[o.toMutation(t._key,ea.exists(!0))])}function ga(t){return _p(ta(t.firestore,_l),[new gp(t._key,ea.none())])}function da(t,...e){var r,n,i;t=Ln(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||lT(e[o])||(s=e[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(lT(e[o])){const C=e[o];e[o]=(r=C.next)===null||r===void 0?void 0:r.bind(C),e[o+1]=(n=C.error)===null||n===void 0?void 0:n.bind(C),e[o+2]=(i=C.complete)===null||i===void 0?void 0:i.bind(C)}let h,d,m;if(t instanceof ms)d=ta(t.firestore,_l),m=cp(t._key.path),h={next:C=>{e[o]&&e[o](pN(d,t,C))},error:e[o+1],complete:e[o+2]};else{const C=ta(t,Uc);d=ta(C.firestore,_l),m=C._query;const b=new qv(d);h={next:I=>{e[o]&&e[o](new gN(d,b,C,I))},error:e[o+1],complete:e[o+2]},uN(t._query)}return(function(b,I,F,k){const U=new Lv(k),V=new Mv(I,U,F);return b.asyncQueue.enqueueAndForget((async()=>kv(await y1(b),V))),()=>{U.Za(),b.asyncQueue.enqueueAndForget((async()=>Dv(await y1(b),V)))}})(Nd(d),m,c,h)}function _p(t,e){return(function(n,i){const s=new ml;return n.asyncQueue.enqueueAndForget((async()=>PO(await XO(n),i,s))),s.promise})(Nd(t),e)}function pN(t,e,r){const n=r.docs.get(e._key),i=new qv(t);return new hN(t,i,e._key,n,new vf(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Cp(e)}set(e,r,n){this._verifyNotCommitted();const i=Zx(e,this._firestore),s=dN(i.converter,r,n),o=iN(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(o.toMutation(i._key,ea.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const s=Zx(e,this._firestore);let o;return o=typeof(r=Ln(r))=="string"||r instanceof Rd?aN(this._dataReader,"WriteBatch.update",s._key,r,n,i):sN(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,ea.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Zx(e,this._firestore);return this._mutations=this._mutations.concat(new gp(r._key,ea.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zt(gt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zx(t,e){if((t=Ln(t)).firestore!==e)throw new zt(gt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){return Nd(t=ta(t,_l)),new fL(t,(e=>_p(t,e)))}(function(e,r=!0){(function(i){u0=i})(c0),ko(new co("firestore",((n,{instanceIdentifier:i,options:s})=>{const o=n.getProvider("app").getImmediate(),c=new _l(new xU(n.getProvider("auth-internal")),new CU(n.getProvider("app-check-internal")),(function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new zt(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new id(d.options.projectId,m)})(o,i),o);return s=Object.assign({useFetchStreams:r},s),c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),Ga(__,"4.7.3",e),Ga(__,"4.7.3","esm2017")})();const mN="@firebase/installations",Xv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=1e4,wN=`w:${Xv}`,vN="FIS_v2",dL="https://firebaseinstallations.googleapis.com/v1",hL=3600*1e3,gL="installations",pL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bc=new Rc(gL,pL,mL);function yN(t){return t instanceof ho&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN({projectId:t}){return`${dL}/projects/${t}/installations`}function EN(t){return{token:t.token,requestStatus:2,expiresIn:wL(t.expiresIn),creationTime:Date.now()}}async function bN(t,e){const n=(await e.json()).error;return bc.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function _N({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xL(t,{refreshToken:e}){const r=_N(t);return r.append("Authorization",vL(e)),r}async function TN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function wL(t){return Number(t.replace("s","000"))}function vL(t){return`${vN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=CN(t),i=_N(t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:r,authVersion:vN,appId:t.appId,sdkVersion:wN},c={method:"POST",headers:i,body:JSON.stringify(o)},h=await TN(()=>fetch(n,c));if(h.ok){const d=await h.json();return{fid:d.fid||r,registrationStatus:2,refreshToken:d.refreshToken,authToken:EN(d.authToken)}}else throw await bN("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=/^[cdef][\w-]{21}$/,lw="";function bL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=_L(t);return EL.test(r)?r:lw}catch{return lw}}function _L(t){return CL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new Map;function IN(t,e){const r=Tp(t);NN(r,e),TL(r,e)}function NN(t,e){const r=SN.get(t);if(r)for(const n of r)n(e)}function TL(t,e){const r=BL();r&&r.postMessage({key:t,fid:e}),SL()}let fc=null;function BL(){return!fc&&"BroadcastChannel"in self&&(fc=new BroadcastChannel("[Firebase] FID Change"),fc.onmessage=t=>{NN(t.data.key,t.data.fid)}),fc}function SL(){SN.size===0&&fc&&(fc.close(),fc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="firebase-installations-database",NL=1,_c="firebase-installations-store";let $x=null;function Yv(){return $x||($x=KI(IL,NL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_c)}}})),$x}async function E1(t,e){const r=Tp(t),i=(await Yv()).transaction(_c,"readwrite"),s=i.objectStore(_c),o=await s.get(r);return await s.put(e,r),await i.done,(!o||o.fid!==e.fid)&&IN(t,e.fid),e}async function RN(t){const e=Tp(t),n=(await Yv()).transaction(_c,"readwrite");await n.objectStore(_c).delete(e),await n.done}async function Bp(t,e){const r=Tp(t),i=(await Yv()).transaction(_c,"readwrite"),s=i.objectStore(_c),o=await s.get(r),c=e(o);return c===void 0?await s.delete(r):await s.put(c,r),await i.done,c&&(!o||o.fid!==c.fid)&&IN(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jv(t){let e;const r=await Bp(t.appConfig,n=>{const i=RL(n),s=FL(t,i);return e=s.registrationPromise,s.installationEntry});return r.fid===lw?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function RL(t){const e=t||{fid:bL(),registrationStatus:0};return FN(e)}function FL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(bc.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=kL(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DL(t)}:{installationEntry:e}}async function kL(t,e){try{const r=await yL(t,e);return E1(t.appConfig,r)}catch(r){throw yN(r)&&r.customData.serverCode===409?await RN(t.appConfig):await E1(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function DL(t){let e=await uT(t.appConfig);for(;e.registrationStatus===1;)await BN(100),e=await uT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await Jv(t);return n||r}return e}function uT(t){return Bp(t,e=>{if(!e)throw bc.create("installation-not-found");return FN(e)})}function FN(t){return UL(t)?{fid:t.fid,registrationStatus:0}:t}function UL(t){return t.registrationStatus===1&&t.registrationTime+xN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML({appConfig:t,heartbeatServiceProvider:e},r){const n=OL(t,r),i=xL(t,r),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:wN,appId:t.appId}},c={method:"POST",headers:i,body:JSON.stringify(o)},h=await TN(()=>fetch(n,c));if(h.ok){const d=await h.json();return EN(d)}else throw await bN("Generate Auth Token",h)}function OL(t,{fid:e}){return`${CN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zv(t,e=!1){let r;const n=await Bp(t.appConfig,s=>{if(!kN(s))throw bc.create("not-registered");const o=s.authToken;if(!e&&QL(o))return s;if(o.requestStatus===1)return r=LL(t,e),s;{if(!navigator.onLine)throw bc.create("app-offline");const c=jL(s);return r=PL(t,c),c}});return r?await r:n.authToken}async function LL(t,e){let r=await fT(t.appConfig);for(;r.authToken.requestStatus===1;)await BN(100),r=await fT(t.appConfig);const n=r.authToken;return n.requestStatus===0?Zv(t,e):n}function fT(t){return Bp(t,e=>{if(!kN(e))throw bc.create("not-registered");const r=e.authToken;return VL(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function PL(t,e){try{const r=await ML(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await E1(t.appConfig,n),r}catch(r){if(yN(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await RN(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await E1(t.appConfig,n)}throw r}}function kN(t){return t!==void 0&&t.registrationStatus===2}function QL(t){return t.requestStatus===2&&!HL(t)}function HL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+hL}function jL(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function VL(t){return t.requestStatus===1&&t.requestTime+xN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t){const e=t,{installationEntry:r,registrationPromise:n}=await Jv(e);return n?n.catch(console.error):Zv(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e=!1){const r=t;return await zL(r),(await Zv(r,e)).token}async function zL(t){const{registrationPromise:e}=await Jv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){if(!t||!t.options)throw e2("App Configuration");if(!t.name)throw e2("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw e2(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function e2(t){return bc.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="installations",qL="installations-internal",XL=t=>{const e=t.getProvider("app").getImmediate(),r=WL(e),n=Fc(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},YL=t=>{const e=t.getProvider("app").getImmediate(),r=Fc(e,DN).getImmediate();return{getId:()=>GL(r),getToken:i=>KL(r,i)}};function JL(){ko(new co(DN,XL,"PUBLIC")),ko(new co(qL,YL,"PRIVATE"))}JL();Ga(mN,Xv);Ga(mN,Xv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="analytics",ZL="firebase_id",$L="origin",eP=60*1e3,tP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$v="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new lp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ca=new Rc("analytics","Analytics",rP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t){if(!t.startsWith($v)){const e=Ca.create("invalid-gtag-resource",{gtagURL:t});return ra.warn(e.message),""}return t}function UN(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function iP(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function sP(t,e){const r=iP("firebase-js-sdk-policy",{createScriptURL:nP}),n=document.createElement("script"),i=`${$v}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function aP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function oP(t,e,r,n,i,s){const o=n[i];try{if(o)await e[o];else{const h=(await UN(r)).find(d=>d.measurementId===i);h&&await e[h.appId]}}catch(c){ra.error(c)}t("config",i,s)}async function lP(t,e,r,n,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const c=await UN(r);for(const h of o){const d=c.find(C=>C.measurementId===h),m=d&&e[d.appId];if(m)s.push(m);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",n,i||{})}catch(s){ra.error(s)}}function AP(t,e,r,n){async function i(s,...o){try{if(s==="event"){const[c,h]=o;await lP(t,e,r,c,h)}else if(s==="config"){const[c,h]=o;await oP(t,e,r,n,c,h)}else if(s==="consent"){const[c,h]=o;t("consent",c,h)}else if(s==="get"){const[c,h,d]=o;t("get",c,h,d)}else if(s==="set"){const[c]=o;t("set",c)}else t(s,...o)}catch(c){ra.error(c)}}return i}function cP(t,e,r,n,i){let s=function(...o){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=AP(s,t,e,r),{gtagCore:s,wrappedGtag:window[i]}}function uP(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes($v)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=30,dP=1e3;class hP{constructor(e={},r=dP){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const MN=new hP;function gP(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function pP(t){var e;const{appId:r,apiKey:n}=t,i={method:"GET",headers:gP(n)},s=tP.replace("{app-id}",r),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let c="";try{const h=await o.json();!((e=h.error)===null||e===void 0)&&e.message&&(c=h.error.message)}catch{}throw Ca.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function mP(t,e=MN,r){const{appId:n,apiKey:i,measurementId:s}=t.options;if(!n)throw Ca.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:n};throw Ca.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new vP;return setTimeout(async()=>{c.abort()},eP),ON({appId:n,apiKey:i,measurementId:s},o,c,e)}async function ON(t,{throttleEndTimeMillis:e,backoffCount:r},n,i=MN){var s;const{appId:o,measurementId:c}=t;try{await xP(n,e)}catch(h){if(c)return ra.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:c};throw h}try{const h=await pP(t);return i.deleteThrottleMetadata(o),h}catch(h){const d=h;if(!wP(d)){if(i.deleteThrottleMetadata(o),c)return ra.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:c};throw h}const m=Number((s=d==null?void 0:d.customData)===null||s===void 0?void 0:s.httpStatus)===503?g_(r,i.intervalMillis,fP):g_(r,i.intervalMillis),C={throttleEndTimeMillis:Date.now()+m,backoffCount:r+1};return i.setThrottleMetadata(o,C),ra.debug(`Calling attemptFetch again in ${m} millis`),ON(t,C,n,i)}}function xP(t,e){return new Promise((r,n)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(r,i);t.addEventListener(()=>{clearTimeout(s),n(Ca.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function wP(t){if(!(t instanceof ho)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class vP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function yP(t,e,r,n,i){if(i&&i.global){t("event",r,n);return}else{const s=await e,o=Object.assign(Object.assign({},n),{send_to:s});t("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(){if(HI())try{await jI()}catch(t){return ra.warn(Ca.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ra.warn(Ca.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function EP(t,e,r,n,i,s,o){var c;const h=mP(t);h.then(I=>{r[I.measurementId]=I.appId,t.options.measurementId&&I.measurementId!==t.options.measurementId&&ra.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>ra.error(I)),e.push(h);const d=CP().then(I=>{if(I)return n.getId()}),[m,C]=await Promise.all([h,d]);uP(s)||sP(s,m.measurementId),i("js",new Date);const b=(c=o==null?void 0:o.config)!==null&&c!==void 0?c:{};return b[$L]="firebase",b.update=!0,C!=null&&(b[ZL]=C),i("config",m.measurementId,b),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.app=e}_delete(){return delete Lf[this.app.options.appId],Promise.resolve()}}let Lf={},dT=[];const hT={};let t2="dataLayer",_P="gtag",gT,LN,pT=!1;function TP(){const t=[];if(QI()&&t.push("This is a browser extension environment."),Y6()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,i)=>`(${i+1}) ${n}`).join(" "),r=Ca.create("invalid-analytics-context",{errorInfo:e});ra.warn(r.message)}}function BP(t,e,r){TP();const n=t.options.appId;if(!n)throw Ca.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ra.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ca.create("no-api-key");if(Lf[n]!=null)throw Ca.create("already-exists",{id:n});if(!pT){aP(t2);const{wrappedGtag:s,gtagCore:o}=cP(Lf,dT,hT,t2,_P);LN=s,gT=o,pT=!0}return Lf[n]=EP(t,dT,hT,e,gT,t2,r),new bP(t)}function SP(t=fv()){t=Ln(t);const e=Fc(t,b1);return e.isInitialized()?e.getImmediate():IP(t)}function IP(t,e={}){const r=Fc(t,b1);if(r.isInitialized()){const i=r.getImmediate();if(ed(e,r.getOptions()))return i;throw Ca.create("already-initialized")}return r.initialize({options:e})}function NP(t,e,r,n){t=Ln(t),yP(LN,Lf[t.app.options.appId],e,r,n).catch(i=>ra.error(i))}const mT="@firebase/analytics",xT="0.10.8";function RP(){ko(new co(b1,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return BP(n,i,r)},"PUBLIC")),ko(new co("analytics-internal",t,"PRIVATE")),Ga(mT,xT),Ga(mT,xT,"esm2017");function t(e){try{const r=e.getProvider(b1).getImmediate();return{logEvent:(n,i,s)=>NP(r,n,i,s)}}catch(r){throw Ca.create("interop-component-reg-failed",{reason:r})}}}RP();function ey(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function PN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FP=PN,QN=new Rc("auth","Firebase",PN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new lp("@firebase/auth");function kP(t,...e){_1.logLevel<=zr.WARN&&_1.warn(`Auth (${c0}): ${t}`,...e)}function t1(t,...e){_1.logLevel<=zr.ERROR&&_1.error(`Auth (${c0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t,...e){throw ty(t,...e)}function Ro(t,...e){return ty(t,...e)}function HN(t,e,r){const n=Object.assign(Object.assign({},FP()),{[e]:r});return new Rc("auth","Firebase",n).create(e,{appName:t.name})}function xl(t){return HN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ty(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return QN.create(t,...e)}function dr(t,e,...r){if(!t)throw ty(e,...r)}function dl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw t1(e),new Error(e)}function Tl(t,e){t||dl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function DP(){return wT()==="http:"||wT()==="https:"}function wT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DP()||QI()||"connection"in navigator)?navigator.onLine:!0}function MP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,r){this.shortDelay=e,this.longDelay=r,Tl(r>e,"Short delay should be less than long delay!"),this.isMobile=G6()||W6()}get(){return UP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t,e){Tl(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=new kd(3e4,6e4);function MA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nl(t,e,r,n,i={}){return VN(t,i,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const c=Cd(Object.assign({key:t.config.apiKey},o)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:h},s);return z6()||(d.referrerPolicy="no-referrer"),jN.fetch()(GN(t,t.config.apiHost,r,c),d)})}async function VN(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},OP),e);try{const i=new QP(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw sg(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw sg(t,"credential-already-in-use",o);if(h==="EMAIL_EXISTS")throw sg(t,"email-already-in-use",o);if(h==="USER_DISABLED")throw sg(t,"user-disabled",o);const m=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw HN(t,m,d);fo(t,m)}}catch(i){if(i instanceof ho)throw i;fo(t,"network-request-failed",{message:String(i)})}}async function Dd(t,e,r,n,i={}){const s=await Nl(t,e,r,n,i);return"mfaPendingCredential"in s&&fo(t,"multi-factor-auth-required",{_serverResponse:s}),s}function GN(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?ry(t.config,i):`${t.config.apiScheme}://${i}`}function PP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ro(this.auth,"network-request-failed")),LP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sg(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Ro(t,e,n);return i.customData._tokenResponse=r,i}function vT(t){return t!==void 0&&t.enterprise!==void 0}class HP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return PP(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function jP(t,e){return Nl(t,"GET","/v2/recaptchaConfig",MA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(t,e){return Nl(t,"POST","/v1/accounts:delete",e)}async function KN(t,e){return Nl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GP(t,e=!1){const r=Ln(t),n=await r.getIdToken(e),i=ny(n);dr(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:Pf(r2(i.auth_time)),issuedAtTime:Pf(r2(i.iat)),expirationTime:Pf(r2(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function r2(t){return Number(t)*1e3}function ny(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return t1("JWT malformed, contained fewer than 3 sections"),null;try{const i=MI(r);return i?JSON.parse(i):(t1("Failed to decode base64 JWT payload"),null)}catch(i){return t1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yT(t){const e=ny(t);return dr(e,"internal-error"),dr(typeof e.exp<"u","internal-error"),dr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a0(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ho&&KP(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function KP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pf(this.lastLoginAt),this.creationTime=Pf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(t){var e;const r=t.auth,n=await t.getIdToken(),i=await a0(t,KN(r,{idToken:n}));dr(i==null?void 0:i.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?zN(s.providerUserInfo):[],c=qP(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),m=h?d:!1,C={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new cw(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(t,C)}async function WP(t){const e=Ln(t);await T1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qP(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function zN(t){return t.map(e=>{var{providerId:r}=e,n=ey(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e){const r=await VN(t,{},async()=>{const n=Cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=GN(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",jN.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function YP(t,e){return Nl(t,"POST","/v2/accounts:revokeToken",MA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dr(e.idToken,"internal-error"),dr(typeof e.idToken<"u","internal-error"),dr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){dr(e.length!==0,"internal-error");const r=yT(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(dr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await XP(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,o=new Gu;return n&&(dr(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(dr(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(dr(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gu,this.toJSON())}_performRefresh(){return dl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e){dr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hl{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=ey(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await a0(this,this.stsTokenManager.getToken(this.auth,e));return dr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return GP(this,e)}reload(){return WP(this)}_assign(e){this!==e&&(dr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new hl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){dr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await T1(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(So(this.auth.app))return Promise.reject(xl(this.auth));const e=await this.getIdToken();return await a0(this,VP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,o,c,h,d,m;const C=(n=r.displayName)!==null&&n!==void 0?n:void 0,b=(i=r.email)!==null&&i!==void 0?i:void 0,I=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,F=(o=r.photoURL)!==null&&o!==void 0?o:void 0,k=(c=r.tenantId)!==null&&c!==void 0?c:void 0,U=(h=r._redirectEventId)!==null&&h!==void 0?h:void 0,V=(d=r.createdAt)!==null&&d!==void 0?d:void 0,K=(m=r.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:Q,emailVerified:te,isAnonymous:re,providerData:z,stsTokenManager:M}=r;dr(Q&&M,e,"internal-error");const P=Gu.fromJSON(this.name,M);dr(typeof Q=="string",e,"internal-error"),aA(C,e.name),aA(b,e.name),dr(typeof te=="boolean",e,"internal-error"),dr(typeof re=="boolean",e,"internal-error"),aA(I,e.name),aA(F,e.name),aA(k,e.name),aA(U,e.name),aA(V,e.name),aA(K,e.name);const O=new hl({uid:Q,auth:e,email:b,emailVerified:te,displayName:C,isAnonymous:re,photoURL:F,phoneNumber:I,tenantId:k,stsTokenManager:P,createdAt:V,lastLoginAt:K});return z&&Array.isArray(z)&&(O.providerData=z.map(ee=>Object.assign({},ee))),U&&(O._redirectEventId=U),O}static async _fromIdTokenResponse(e,r,n=!1){const i=new Gu;i.updateFromServerResponse(r);const s=new hl({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await T1(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];dr(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?zN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Gu;c.updateFromIdToken(n);const h=new hl({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Map;function gl(t){Tl(t instanceof Function,"Expected a class definition");let e=CT.get(t);return e?(Tl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,CT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}WN.type="NONE";const ET=WN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t,e,r){return`firebase:${t}:${e}:${r}`}class Ku{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=r1(this.userKey,i.apiKey,s),this.fullPersistenceKey=r1("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ku(gl(ET),e,n);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||gl(ET);const o=r1(n,e.config.apiKey,e.name);let c=null;for(const d of r)try{const m=await d._get(o);if(m){const C=hl._fromJSON(e,m);d!==s&&(c=C),s=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ku(s,e,n):(s=h[0],c&&await s._set(o,c.toJSON()),await Promise.all(r.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Ku(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($N(e))return"Blackberry";if(eR(e))return"Webos";if(XN(e))return"Safari";if((e.includes("chrome/")||YN(e))&&!e.includes("edge/"))return"Chrome";if(ZN(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function qN(t=ws()){return/firefox\//i.test(t)}function XN(t=ws()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YN(t=ws()){return/crios\//i.test(t)}function JN(t=ws()){return/iemobile/i.test(t)}function ZN(t=ws()){return/android/i.test(t)}function $N(t=ws()){return/blackberry/i.test(t)}function eR(t=ws()){return/webos/i.test(t)}function iy(t=ws()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JP(t=ws()){var e;return iy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZP(){return q6()&&document.documentMode===10}function tR(t=ws()){return iy(t)||ZN(t)||eR(t)||$N(t)||/windows phone/i.test(t)||JN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t,e=[]){let r;switch(t){case"Browser":r=bT(ws());break;case"Worker":r=`${bT(ws())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${c0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,c)=>{try{const h=e(s);o(h)}catch(h){c(h)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e9(t,e={}){return Nl(t,"GET","/v2/passwordPolicy",MA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=6;class r9{constructor(e){var r,n,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:t9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,s,o,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(r=h.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(n=h.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsNumericCharacter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _T(this),this.idTokenSubscription=new _T(this),this.beforeStateQueue=new $P(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=gl(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ku.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await KN(this,{idToken:e}),n=await hl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(So(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===c)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return dr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await T1(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(So(this.app))return Promise.reject(xl(this));const r=e?Ln(e):null;return r&&dr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&dr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return So(this.app)?Promise.reject(xl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return So(this.app)?Promise.reject(xl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e9(this),r=new r9(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await YP(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&gl(e)||this._popupRedirectResolver;dr(r,this,"argument-error"),this.redirectPersistenceManager=await Ku.create(this,[gl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(dr(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const h=e.addObserver(r,n,i);return()=>{o=!0,h()}}else{const h=e.addObserver(r);return()=>{o=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&kP(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Mc(t){return Ln(t)}class _T{constructor(e){this.auth=e,this.observer=null,this.addObserver=tD(r=>this.observer=r)}get next(){return dr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i9(t){Sp=t}function nR(t){return Sp.loadJS(t)}function s9(){return Sp.recaptchaEnterpriseScript}function a9(){return Sp.gapiScript}function o9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const l9="recaptcha-enterprise",A9="NO_RECAPTCHA";class c9{constructor(e){this.type=l9,this.auth=Mc(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{jP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new HP(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(h=>{c(h)})})}function i(s,o,c){const h=window.grecaptcha;vT(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(A9)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(c=>{if(!r&&vT(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let h=s9();h.length!==0&&(h+=c),nR(h).then(()=>{i(c,s,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function TT(t,e,r,n=!1){const i=new c9(t);let s;try{s=await i.verify(r)}catch{s=await i.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function uw(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await TT(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await TT(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t,e){const r=Fc(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(ed(s,e??{}))return i;fo(i,"already-initialized")}return r.initialize({options:e})}function f9(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(gl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function d9(t,e,r){const n=Mc(t);dr(n._canInitEmulator,n,"emulator-config-failed"),dr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=iR(e),{host:o,port:c}=h9(e),h=c===null?"":`:${c}`;n.config.emulator={url:`${s}//${o}${h}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),g9()}function iR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h9(t){const e=iR(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:BT(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:BT(o)}}}function BT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function g9(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return dl("not implemented")}_getIdTokenResponse(e){return dl("not implemented")}_linkToIdToken(e,r){return dl("not implemented")}_getReauthenticationResolver(e){return dl("not implemented")}}async function p9(t,e){return Nl(t,"POST","/v1/accounts:update",e)}async function m9(t,e){return Nl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x9(t,e){return Dd(t,"POST","/v1/accounts:signInWithPassword",MA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w9(t,e){return Dd(t,"POST","/v1/accounts:signInWithEmailLink",MA(t,e))}async function v9(t,e){return Dd(t,"POST","/v1/accounts:signInWithEmailLink",MA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends sy{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new ld(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ld(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uw(e,r,"signInWithPassword",x9);case"emailLink":return w9(e,{email:this._email,oobCode:this._password});default:fo(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uw(e,n,"signUpPassword",m9);case"emailLink":return v9(e,{idToken:r,email:this._email,oobCode:this._password});default:fo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t,e){return Dd(t,"POST","/v1/accounts:signInWithIdp",MA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9="http://localhost";class Tc extends sy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Tc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):fo("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=ey(r,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Tc(n,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return zu(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,zu(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,zu(e,r)}buildRequest(){const e={requestUri:y9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Cd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E9(t){const e=gf(pf(t)).link,r=e?gf(pf(e)).deep_link_id:null,n=gf(pf(t)).deep_link_id;return(n?gf(pf(n)).link:null)||n||r||e||t}class ay{constructor(e){var r,n,i,s,o,c;const h=gf(pf(e)),d=(r=h.apiKey)!==null&&r!==void 0?r:null,m=(n=h.oobCode)!==null&&n!==void 0?n:null,C=C9((i=h.mode)!==null&&i!==void 0?i:null);dr(d&&m&&C,"argument-error"),this.apiKey=d,this.operation=C,this.code=m,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=h.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const r=E9(e);try{return new ay(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.providerId=h0.PROVIDER_ID}static credential(e,r){return ld._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=ay.parseLink(r);return dr(n,"argument-error"),ld._fromEmailAndCode(e,n.code,n.tenantId)}}h0.PROVIDER_ID="password";h0.EMAIL_PASSWORD_SIGN_IN_METHOD="password";h0.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends sR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA extends Ud{constructor(){super("facebook.com")}static credential(e){return Tc._fromParams({providerId:uA.PROVIDER_ID,signInMethod:uA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uA.credentialFromTaggedObject(e)}static credentialFromError(e){return uA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uA.credential(e.oauthAccessToken)}catch{return null}}}uA.FACEBOOK_SIGN_IN_METHOD="facebook.com";uA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA extends Ud{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Tc._fromParams({providerId:fA.PROVIDER_ID,signInMethod:fA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return fA.credentialFromTaggedObject(e)}static credentialFromError(e){return fA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return fA.credential(r,n)}catch{return null}}}fA.GOOGLE_SIGN_IN_METHOD="google.com";fA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA extends Ud{constructor(){super("github.com")}static credential(e){return Tc._fromParams({providerId:dA.PROVIDER_ID,signInMethod:dA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dA.credentialFromTaggedObject(e)}static credentialFromError(e){return dA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dA.credential(e.oauthAccessToken)}catch{return null}}}dA.GITHUB_SIGN_IN_METHOD="github.com";dA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA extends Ud{constructor(){super("twitter.com")}static credential(e,r){return Tc._fromParams({providerId:hA.PROVIDER_ID,signInMethod:hA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return hA.credentialFromTaggedObject(e)}static credentialFromError(e){return hA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return hA.credential(r,n)}catch{return null}}}hA.TWITTER_SIGN_IN_METHOD="twitter.com";hA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b9(t,e){return Dd(t,"POST","/v1/accounts:signUp",MA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await hl._fromIdTokenResponse(e,n,i),o=ST(n);return new Bc({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=ST(n);return new Bc({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function ST(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1 extends ho{constructor(e,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,B1.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new B1(e,r,n,i)}}function aR(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?B1._fromErrorAndOperation(t,s,e,n):s})}async function _9(t,e,r=!1){const n=await a0(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Bc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T9(t,e,r=!1){const{auth:n}=t;if(So(n.app))return Promise.reject(xl(n));const i="reauthenticate";try{const s=await a0(t,aR(n,i,e,t),r);dr(s.idToken,n,"internal-error");const o=ny(s.idToken);dr(o,n,"internal-error");const{sub:c}=o;return dr(t.uid===c,n,"user-mismatch"),Bc._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fo(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t,e,r=!1){if(So(t.app))return Promise.reject(xl(t));const n="signIn",i=await aR(t,n,e),s=await Bc._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}async function B9(t,e){return oR(Mc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(t){const e=Mc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S9(t,e,r){if(So(t.app))return Promise.reject(xl(t));const n=Mc(t),o=await uw(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",b9).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&lR(t),h}),c=await Bc._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(c.user),c}function I9(t,e,r){return So(t.app)?Promise.reject(xl(t)):B9(Ln(t),h0.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&lR(t),n})}function N9(t,e){return R9(Ln(t),null,e)}async function R9(t,e,r){const{auth:n}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(s.password=r);const o=await a0(t,p9(n,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(t,e){return Ln(t).setPersistence(e)}function k9(t,e,r,n){return Ln(t).onIdTokenChanged(e,r,n)}function D9(t,e,r){return Ln(t).beforeAuthStateChanged(e,r)}function U9(t,e,r,n){return Ln(t).onAuthStateChanged(e,r,n)}function IT(t){return Ln(t).signOut()}const S1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(S1,"1"),this.storage.removeItem(S1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=1e3,O9=10;class cR extends AR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,h)=>{this.notifyListeners(o,h)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);ZP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,O9):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},M9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}cR.type="LOCAL";const uR=cR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR extends AR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}fR.type="SESSION";const dR=fR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Ip(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(o).map(async d=>d(r.origin,s)),h=await L9(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:h})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,h)=>{const d=oy("",20);i.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(C){const b=C;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(b.data.response);break;default:clearTimeout(m),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(){return window}function Q9(t){Fo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){return typeof Fo().WorkerGlobalScope<"u"&&typeof Fo().importScripts=="function"}async function H9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function V9(){return hR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="firebaseLocalStorageDb",G9=1,I1="firebaseLocalStorage",pR="fbase_key";class Md{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Np(t,e){return t.transaction([I1],e?"readwrite":"readonly").objectStore(I1)}function K9(){const t=indexedDB.deleteDatabase(gR);return new Md(t).toPromise()}function fw(){const t=indexedDB.open(gR,G9);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(I1,{keyPath:pR})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(I1)?e(n):(n.close(),await K9(),e(await fw()))})})}async function NT(t,e,r){const n=Np(t,!0).put({[pR]:e,value:r});return new Md(n).toPromise()}async function z9(t,e){const r=Np(t,!1).get(e),n=await new Md(r).toPromise();return n===void 0?null:n.value}function RT(t,e){const r=Np(t,!0).delete(e);return new Md(r).toPromise()}const W9=800,q9=3;class mR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fw(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>q9)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ip._getInstance(V9()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await H9(),!this.activeServiceWorker)return;this.sender=new P9(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fw();return await NT(e,S1,"1"),await RT(e,S1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>NT(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>z9(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>RT(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Np(i,!1).getAll();return new Md(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mR.type="LOCAL";const X9=mR;new kd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9(t,e){return e?gl(e):(dr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly extends sy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zu(e,this._buildIdpRequest())}_linkToIdToken(e,r){return zu(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return zu(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function J9(t){return oR(t.auth,new ly(t),t.bypassAuthState)}function Z9(t){const{auth:e,user:r}=t;return dr(r,e,"internal-error"),T9(r,new ly(t),t.bypassAuthState)}async function $9(t){const{auth:e,user:r}=t;return dr(r,e,"internal-error"),_9(r,new ly(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const h={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J9;case"linkViaPopup":case"linkViaRedirect":return $9;case"reauthViaPopup":case"reauthViaRedirect":return Z9;default:fo(this.auth,"internal-error")}}resolve(e){Tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=new kd(2e3,1e4);class Ou extends xR{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Ou.currentPopupAction&&Ou.currentPopupAction.cancel(),Ou.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return dr(e,this.auth,"internal-error"),e}async onExecution(){Tl(this.filter.length===1,"Popup operations only handle one event");const e=oy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ro(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ro(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ou.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ro(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,e7.get())};e()}}Ou.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7="pendingRedirect",n1=new Map;class r7 extends xR{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=n1.get(this.auth._key());if(!e){try{const n=await n7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}n1.set(this.auth._key(),e)}return this.bypassAuthState||n1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function n7(t,e){const r=a7(e),n=s7(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function i7(t,e){n1.set(t._key(),e)}function s7(t){return gl(t._redirectPersistence)}function a7(t){return r1(t7,t.config.apiKey,t.name)}async function o7(t,e,r=!1){if(So(t.app))return Promise.reject(xl(t));const n=Mc(t),i=Y9(n,e),o=await new r7(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=600*1e3;class A7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c7(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!wR(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ro(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l7&&this.cachedEventUids.clear(),this.cachedEventUids.has(FT(e))}saveEventToCache(e){this.cachedEventUids.add(FT(e)),this.lastProcessedEventTime=Date.now()}}function FT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function c7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(t,e={}){return Nl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d7=/^https?/;async function h7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await u7(t);for(const r of e)try{if(g7(r))return}catch{}fo(t,"unauthorized-domain")}function g7(t){const e=Aw(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!d7.test(r))return!1;if(f7.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7=new kd(3e4,6e4);function kT(){const t=Fo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function m7(t){return new Promise((e,r)=>{var n,i,s;function o(){kT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kT(),r(Ro(t,"network-request-failed"))},timeout:p7.get()})}if(!((i=(n=Fo().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Fo().gapi)===null||s===void 0)&&s.load)o();else{const c=o9("iframefcb");return Fo()[c]=()=>{gapi.load?o():r(Ro(t,"network-request-failed"))},nR(`${a9()}?onload=${c}`).catch(h=>r(h))}}).catch(e=>{throw i1=null,e})}let i1=null;function x7(t){return i1=i1||m7(t),i1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=new kd(5e3,15e3),v7="__/auth/iframe",y7="emulator/auth/iframe",C7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b7(t){const e=t.config;dr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?ry(e,y7):`https://${t.config.authDomain}/${v7}`,n={apiKey:e.apiKey,appName:t.name,v:c0},i=E7.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Cd(n).slice(1)}`}async function _7(t){const e=await x7(t),r=Fo().gapi;return dr(r,t,"internal-error"),e.open({where:document.body,url:b7(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C7,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const o=Ro(t,"network-request-failed"),c=Fo().setTimeout(()=>{s(o)},w7.get());function h(){Fo().clearTimeout(c),i(n)}n.ping(h).then(h,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B7=500,S7=600,I7="_blank",N7="http://localhost";class DT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function R7(t,e,r,n=B7,i=S7){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const h=Object.assign(Object.assign({},T7),{width:n.toString(),height:i.toString(),top:s,left:o}),d=ws().toLowerCase();r&&(c=YN(d)?I7:r),qN(d)&&(e=e||N7,h.scrollbars="yes");const m=Object.entries(h).reduce((b,[I,F])=>`${b}${I}=${F},`,"");if(JP(d)&&c!=="_self")return F7(e||"",c),new DT(null);const C=window.open(e||"",c,m);dr(C,t,"popup-blocked");try{C.focus()}catch{}return new DT(C)}function F7(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7="__/auth/handler",D7="emulator/auth/handler",U7=encodeURIComponent("fac");async function UT(t,e,r,n,i,s){dr(t.config.authDomain,t,"auth-domain-config-required"),dr(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:c0,eventId:i};if(e instanceof sR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",eD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,C]of Object.entries({}))o[m]=C}if(e instanceof Ud){const m=e.getScopes().filter(C=>C!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await t._getAppCheckToken(),d=h?`#${U7}=${encodeURIComponent(h)}`:"";return`${M7(t)}?${Cd(c).slice(1)}${d}`}function M7({config:t}){return t.emulator?ry(t,D7):`https://${t.authDomain}/${k7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="webStorageSupport";class O7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dR,this._completeRedirectFn=o7,this._overrideRedirectResult=i7}async _openPopup(e,r,n,i){var s;Tl((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await UT(e,r,n,Aw(),i);return R7(e,o,oy())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await UT(e,r,n,Aw(),i);return Q9(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(Tl(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await _7(e),n=new A7(e);return r.register("authEvent",i=>(dr(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(n2,{type:n2},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[n2];o!==void 0&&r(!!o),fo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=h7(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return tR()||XN()||iy()}}const L7=O7;var MT="@firebase/auth",OT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){dr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function H7(t){ko(new co("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;dr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rR(t)},d=new n9(n,i,s,h);return f9(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ko(new co("auth-internal",e=>{const r=Mc(e.getProvider("auth").getImmediate());return(n=>new P7(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ga(MT,OT,Q7(t)),Ga(MT,OT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=300,V7=PI("authIdTokenMaxAge")||j7;let LT=null;const G7=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>V7)return;const i=r==null?void 0:r.token;LT!==i&&(LT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function K7(t=fv()){const e=Fc(t,"auth");if(e.isInitialized())return e.getImmediate();const r=u9(t,{popupRedirectResolver:L7,persistence:[X9,uR,dR]}),n=PI("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=G7(s.toString());D9(r,o,()=>o(r.currentUser)),k9(r,c=>o(c))}}const i=OI("auth");return i&&d9(r,`http://${i}`),r}function z7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}i9({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=Ro("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",z7().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});H7("Browser");const W7={apiKey:"AIzaSyC8yzlyr_lSdPWWbmODXThX-vPNAgpAn-c",authDomain:"mama-2951e.firebaseapp.com",projectId:"mama-2951e",storageBucket:"mama-2951e.firebasestorage.app",messagingSenderId:"881003136686",appId:"1:881003136686:web:819d11969d25fe32c28f3f",measurementId:"G-HZDLYN3PK7"},Ay=zI(W7),Pt=eL(Ay),pc=K7(Ay);SP(Ay);F9(pc,uR);const q7=({onNavigateToSignUp:t})=>{const[e,r]=xe.useState(""),[n,i]=xe.useState(""),[s,o]=xe.useState(!1),[c,h]=xe.useState(""),[d,m]=xe.useState(!1),C=async b=>{b.preventDefault(),h(""),m(!0);try{await I9(pc,e.trim(),n)}catch(I){console.error(I),I.code==="auth/invalid-credential"||I.code==="auth/wrong-password"||I.code==="auth/user-not-found"?h("      .     ."):I.code==="auth/invalid-email"?h("    "):I.code==="auth/network-request-failed"?h("   "):h("    .  ")}finally{m(!1)}};return u.jsx("div",{className:"relative w-full h-screen custom-gradient-bg flex items-center justify-center overflow-hidden",children:u.jsxs("div",{className:"w-full h-full md:max-w-4xl md:h-auto md:flex md:rounded-[3rem] md:overflow-hidden md:shadow-2xl md:bg-[#1a1a1a]",children:[u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center px-6 pt-12 md:pt-0 md:bg-black/20 md:p-12",children:[u.jsx("h1",{className:"text-white text-3xl md:text-4xl font-bold mb-2",children:"   "}),u.jsx("h2",{className:"text-white text-5xl md:text-6xl font-extrabold tracking-wider",children:"MAMA"}),u.jsx("p",{className:"text-gray-400 mt-4 text-sm font-medium",children:"    "})]}),u.jsxs("div",{className:"bg-[#1a1a1a] rounded-t-[3rem] md:rounded-none w-full px-8 pt-8 pb-12 flex flex-col items-center transition-all duration-500 border-t border-gray-800 md:border-t-0 md:border-r md:w-[450px] md:h-auto h-full mt-auto md:mt-0 justify-center",children:[u.jsx("div",{className:"w-16 h-1.5 bg-gray-500 rounded-full mb-10 opacity-30 md:hidden"}),u.jsx("h3",{className:"text-white text-3xl font-bold mb-10",children:" "}),c&&u.jsx("div",{className:"w-full bg-red-500/10 border border-red-500/30 rounded-xl py-3 px-4 mb-6 text-red-500 text-center text-sm font-bold animate-in fade-in slide-in-from-top-2",children:c}),u.jsxs("form",{onSubmit:C,className:"w-full space-y-6",children:[u.jsxs("div",{className:"input-container relative",children:[u.jsx("label",{className:"input-label",children:" "}),u.jsx("input",{type:"email",placeholder:"fouad1@gmail.com",className:"custom-input",value:e,onChange:b=>r(b.target.value),required:!0,dir:"ltr"})]}),u.jsxs("div",{className:"input-container relative",children:[u.jsx("label",{className:"input-label",children:" "}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:s?"text":"password",placeholder:"  ",className:"custom-input pl-12",value:n,onChange:b=>i(b.target.value),required:!0}),u.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#57b385] transition-colors",onClick:()=>o(!s),children:s?u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),u.jsx("button",{type:"submit",disabled:d,className:`w-full btn-gradient py-4 rounded-2xl text-white text-xl font-bold shadow-lg hover:brightness-110 active:scale-[0.98] transition-all flex items-center justify-center gap-2 ${d?"opacity-70 cursor-not-allowed":""}`,children:d?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):" "})]}),u.jsx("div",{className:"mt-8 text-center",children:u.jsxs("p",{className:"text-gray-400 text-sm",children:["  "," ",u.jsx("button",{onClick:t,className:"text-[#57b385] cursor-pointer hover:underline font-bold",children:"  "})]})}),u.jsx("div",{className:"mt-auto pt-10 text-center",children:u.jsxs("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-widest",children:["    ",new Date().getFullYear()," MAMA SYSTEMS"]})})]})]})})},X7=({onNavigateToLogin:t,adminEmail:e})=>{const[r,n]=xe.useState(""),[i,s]=xe.useState(""),[o,c]=xe.useState(""),[h,d]=xe.useState(""),[m,C]=xe.useState(!1),[b,I]=xe.useState(""),[F,k]=xe.useState(!1),U=async V=>{if(V.preventDefault(),I(""),k(!0),!i.includes("@")){I("    "),k(!1);return}try{const Q=(await S9(pc,i.trim(),h)).user,te=i.trim().toLowerCase()===e.toLowerCase(),re={manageDebt:!0,editProducts:!0,createInvoices:!0,viewNotifications:!0,viewAdminInvoices:!0,viewPurchasePrice:!0,viewWholesalePrice:!0,manageSuppliers:!0,manageRequests:!0,manageCheckbook:!0,manageSpecialOrders:!0,viewAllWork:!0,isManager:te},z={id:Q.uid,name:r,phone:o,email:i,password:h,permissions:re,status:te?"approved":"pending"};await Ur(Jt(Pt,"staff",Q.uid),JSON.parse(JSON.stringify(z)))}catch(K){console.error(K),K.code==="auth/email-already-in-use"?I("    "):K.code==="auth/weak-password"?I("     6   "):I("    .  ")}finally{k(!1)}};return u.jsx("div",{className:"relative w-full h-screen custom-gradient-bg flex items-center justify-center overflow-hidden font-['Tajawal']",children:u.jsxs("div",{className:"w-full h-full md:max-w-4xl md:h-auto md:flex md:rounded-[3rem] md:overflow-hidden md:shadow-2xl md:bg-[#1a1a1a]",children:[u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center px-6 pt-12 md:pt-0 md:bg-black/20 md:p-12",children:[u.jsx("h1",{className:"text-white text-3xl md:text-4xl font-bold mb-2",children:" "}),u.jsx("h2",{className:"text-white text-5xl md:text-6xl font-extrabold tracking-wider",children:"MAMA"}),u.jsx("p",{className:"text-gray-400 mt-4 text-sm font-medium",children:"    "})]}),u.jsxs("div",{className:"bg-[#1a1a1a] rounded-t-[3rem] md:rounded-none w-full px-8 pt-8 pb-12 flex flex-col items-center transition-all duration-500 border-t border-gray-800 md:border-t-0 md:border-r md:w-[450px] md:h-auto h-full mt-auto md:mt-0 justify-center overflow-y-auto custom-scrollbar",children:[u.jsx("div",{className:"w-16 h-1.5 bg-gray-500 rounded-full mb-10 opacity-30 md:hidden"}),u.jsx("h3",{className:"text-white text-3xl font-bold mb-6",children:"  "}),b&&u.jsx("div",{className:"w-full bg-red-500/10 border border-red-500/30 rounded-xl py-3 px-4 mb-6 text-red-500 text-center text-sm font-bold",children:b}),u.jsxs("form",{onSubmit:U,className:"w-full space-y-4",children:[u.jsxs("div",{className:"input-container relative",children:[u.jsx("label",{className:"input-label",children:" "}),u.jsx("input",{type:"text",placeholder:" ",className:"custom-input",value:r,onChange:V=>n(V.target.value),required:!0})]}),u.jsxs("div",{className:"input-container relative",children:[u.jsx("label",{className:"input-label",children:" "}),u.jsx("input",{type:"email",placeholder:"fouad1@gmail.com",className:"custom-input",value:i,onChange:V=>s(V.target.value),required:!0,dir:"ltr"})]}),u.jsxs("div",{className:"input-container relative",children:[u.jsx("label",{className:"input-label",children:" "}),u.jsx("input",{type:"tel",placeholder:"06XXXXXXXX",className:"custom-input",value:o,onChange:V=>c(V.target.value),required:!0,dir:"ltr"})]}),u.jsxs("div",{className:"input-container relative",children:[u.jsx("label",{className:"input-label",children:" "}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:m?"text":"password",placeholder:"10203040",className:"custom-input pl-12",value:h,onChange:V=>d(V.target.value),required:!0}),u.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",onClick:()=>C(!m),children:m?"":""})]})]}),u.jsx("button",{type:"submit",disabled:F,className:`w-full btn-gradient py-4 rounded-2xl text-white text-xl font-bold shadow-lg active:scale-[0.98] transition-all flex items-center justify-center gap-2 ${F?"opacity-70":""}`,children:F?"  ...":"  "})]}),u.jsx("div",{className:"mt-8 text-center",children:u.jsxs("p",{className:"text-gray-400 text-sm",children:["  "," ",u.jsx("button",{onClick:t,className:"text-[#57b385] cursor-pointer hover:underline font-bold",children:" "})]})})]})]})})},vR=(t,e)=>{const r=window.open("","_blank");if(!r){alert("     ");return}const n=t.items||[];n.reduce((s,o)=>s+o.count,0);const i=`
    <!DOCTYPE html>
    <html lang="ar" dir="rtl">
      <head>
        <title> #${t.id}</title>
        <style>
          @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap');
          
          * {
            box-sizing: border-box;
          }

          body {
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            padding: 0;
            background-color: white;
            color: black;
            font-size: 12px;
          }
          
          .receipt {
            max-width: ${e.receiptSize==="58mm"?"58mm":"80mm"};
            margin: 0 auto;
            padding: 10px 20px; /* Added significant side padding */
          }
          
          .header {
            text-align: center;
            margin-bottom: 10px;
            border-bottom: 1px dashed #000;
            padding-bottom: 10px;
          }
          
          .logo {
            max-width: 60px;
            max-height: 60px;
            margin-bottom: 5px;
          }
          
          .title {
            font-size: 16px;
            font-weight: 800;
            margin: 5px 0;
          }
          
          .info {
            font-size: 10px;
            margin-bottom: 5px;
          }
          
          .customer-info {
            margin-bottom: 10px;
            border-bottom: 1px dashed #000;
            padding-bottom: 5px;
          }
          
          table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
          }
          
          th {
            text-align: right;
            border-bottom: 1px solid #000;
            font-size: 10px;
            padding: 2px 0;
          }
          
          td {
            text-align: right;
            font-size: 10px;
            padding: 4px 0;
            vertical-align: top;
          }
          
          .col-price { text-align: center; }
          .col-total { text-align: left; }
          
          .totals {
            border-top: 1px dashed #000;
            padding-top: 5px;
            margin-top: 5px;
          }
          
          .row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
            font-weight: bold;
          }
          
          .total-row {
            font-size: 14px;
            font-weight: 900;
            margin-top: 5px;
          }
          
          .footer {
            text-align: center;
            margin-top: 15px;
            font-size: 9px;
            border-top: 1px dashed #000;
            padding-top: 10px;
          }

          @media print {
            body { margin: 0; padding: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          
          <!-- Header -->
          <div class="header">
            ${e.businessLogo?`<img src="${e.businessLogo}" class="logo" />`:""}
            <div class="title">${e.businessName}</div>
            <div class="info">${e.userName}</div>
            <div class="info">: ${new Date().toLocaleString("ar-MA")}</div>
            <div class="info"> : ${t.id}</div>
          </div>

          <!-- Customer -->
          <div class="customer-info">
            <div style="font-weight: bold;">: ${t.name}</div>
            ${t.phone?`<div>: ${t.phone}</div>`:""}
          </div>

          <!-- Items -->
          <table>
            <thead>
              <tr>
                <th width="50%"></th>
                <th width="15%" class="col-price"></th>
                <th width="35%" class="col-total"></th>
              </tr>
            </thead>
            <tbody>
              ${n.map(s=>`
                <tr>
                  <td>${s.productName}</td>
                  <td class="col-price">${s.count}</td>
                  <td class="col-total">${s.total.toFixed(2)}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <!-- Totals -->
          <div class="totals">
            <div class="row total-row">
              <span> :</span>
              <span>${t.amount.toFixed(2)} .</span>
            </div>
            <div class="row">
              <span> (${t.method==="direct"?"":""}):</span>
              <span>${t.paidAmount.toFixed(2)} .</span>
            </div>
            ${t.remainingAmount>0?`
            <div class="row" style="color: black;">
              <span> ():</span>
              <span>${t.remainingAmount.toFixed(2)} .</span>
            </div>
            `:""}
          </div>

          <!-- Footer -->
          <div class="footer">
            <p> </p>
            <p>Thank you for your visit</p>
            ${e.showBarcode?`
              <div style="margin-top: 10px;">
                <svg id="barcode"></svg>
              </div>
              <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"><\/script>
              <script>
                try {
                  JsBarcode("#barcode", "${t.id}", {
                    format: "CODE128",
                    width: 1.5,
                    height: 40,
                    displayValue: true,
                    fontSize: 12
                  });
                } catch(e) {}
              <\/script>
            `:""}
          </div>
        </div>

        <script>
          // Print automatically when loaded
          window.onload = function() {
            setTimeout(function() {
              window.print();
              // Optional: window.close();
            }, 500);
          }
        <\/script>
      </body>
    </html>
  `;r.document.write(i),r.document.close()};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dw=function(t,e){return dw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},dw(t,e)};function go(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dw(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var hw=function(){return hw=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hw.apply(this,arguments)};function Bs(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(m){try{d(n.next(m))}catch(C){o(C)}}function h(m){try{d(n.throw(m))}catch(C){o(C)}}function d(m){m.done?s(m.value):i(m.value).then(c,h)}d((n=n.apply(t,[])).next())})}function cs(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return h([d,m])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(m){d=[6,m],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function ag(t,e,r){if(arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var Bl=(function(){function t(e,r,n,i){this.left=e,this.top=r,this.width=n,this.height=i}return t.prototype.add=function(e,r,n,i){return new t(this.left+e,this.top+r,this.width+n,this.height+i)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(i){return i.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t})(),Rp=function(t,e){return Bl.fromClientRect(t,e.getBoundingClientRect())},Y7=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),i=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Bl(0,0,n,i)},Fp=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e},ui=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],i=-1,s="";++i<r;){var o=t[i];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(i+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},PT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var og=0;og<PT.length;og++)J7[PT.charCodeAt(og)]=og;var QT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lg=0;lg<QT.length;lg++)yf[QT.charCodeAt(lg)]=lg;var Z7=function(t){var e=t.length*.75,r=t.length,n,i=0,s,o,c,h;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(d)?d:new Uint8Array(d);for(n=0;n<r;n+=4)s=yf[t.charCodeAt(n)],o=yf[t.charCodeAt(n+1)],c=yf[t.charCodeAt(n+2)],h=yf[t.charCodeAt(n+3)],m[i++]=s<<2|o>>4,m[i++]=(o&15)<<4|c>>2,m[i++]=(c&3)<<6|h&63;return d},$7=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},eQ=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},mc=5,cy=11,i2=2,tQ=cy-mc,yR=65536>>mc,rQ=1<<mc,s2=rQ-1,nQ=1024>>mc,iQ=yR+nQ,sQ=iQ,aQ=32,oQ=sQ+aQ,lQ=65536>>cy,AQ=1<<tQ,cQ=AQ-1,HT=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},uQ=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},fQ=function(t,e){var r=Z7(t),n=Array.isArray(r)?eQ(r):new Uint32Array(r),i=Array.isArray(r)?$7(r):new Uint16Array(r),s=24,o=HT(i,s/2,n[4]/2),c=n[5]===2?HT(i,(s+n[4])/2):uQ(n,Math.ceil((s+n[4])/4));return new dQ(n[0],n[1],n[2],n[3],o,c)},dQ=(function(){function t(e,r,n,i,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>mc],r=(r<<i2)+(e&s2),this.data[r];if(e<=65535)return r=this.index[yR+(e-55296>>mc)],r=(r<<i2)+(e&s2),this.data[r];if(e<this.highStart)return r=oQ-lQ+(e>>cy),r=this.index[r],r+=e>>mc&cQ,r=this.index[r],r=(r<<i2)+(e&s2),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t})(),jT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hQ=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ag=0;Ag<jT.length;Ag++)hQ[jT.charCodeAt(Ag)]=Ag;var gQ="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",VT=50,pQ=1,CR=2,ER=3,mQ=4,xQ=5,GT=7,bR=8,KT=9,mA=10,gw=11,zT=12,pw=13,wQ=14,Cf=15,mw=16,cg=17,of=18,vQ=19,WT=20,xw=21,lf=22,a2=23,yu=24,pa=25,Ef=26,bf=27,Cu=28,yQ=29,Ac=30,CQ=31,ug=32,fg=33,ww=34,vw=35,yw=36,Ad=37,Cw=38,s1=39,a1=40,o2=41,_R=42,EQ=43,bQ=[9001,65288],TR="!",Hr="",dg="",Ew=fQ(gQ),cl=[Ac,yw],bw=[pQ,CR,ER,xQ],BR=[mA,bR],qT=[bf,Ef],_Q=bw.concat(BR),XT=[Cw,s1,a1,ww,vw],TQ=[Cf,pw],BQ=function(t,e){e===void 0&&(e="strict");var r=[],n=[],i=[];return t.forEach(function(s,o){var c=Ew.get(s);if(c>VT?(i.push(!0),c-=VT):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(mw);if(c===mQ||c===gw){if(o===0)return n.push(o),r.push(Ac);var h=r[o-1];return _Q.indexOf(h)===-1?(n.push(n[o-1]),r.push(h)):(n.push(o),r.push(Ac))}if(n.push(o),c===CQ)return r.push(e==="strict"?xw:Ad);if(c===_R||c===yQ)return r.push(Ac);if(c===EQ)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Ad):r.push(Ac);r.push(c)}),[n,r,i]},l2=function(t,e,r,n){var i=n[r];if(Array.isArray(t)?t.indexOf(i)!==-1:t===i)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===e)return!0;if(o!==mA)break}if(i===mA)for(var s=r;s>0;){s--;var c=n[s];if(Array.isArray(t)?t.indexOf(c)!==-1:t===c)for(var h=r;h<=n.length;){h++;var o=n[h];if(o===e)return!0;if(o!==mA)break}if(c!==mA)break}return!1},YT=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===mA)r--;else return n}return 0},SQ=function(t,e,r,n,i){if(r[n]===0)return Hr;var s=n-1;if(Array.isArray(i)&&i[s]===!0)return Hr;var o=s-1,c=s+1,h=e[s],d=o>=0?e[o]:0,m=e[c];if(h===CR&&m===ER)return Hr;if(bw.indexOf(h)!==-1)return TR;if(bw.indexOf(m)!==-1||BR.indexOf(m)!==-1)return Hr;if(YT(s,e)===bR)return dg;if(Ew.get(t[s])===gw||(h===ug||h===fg)&&Ew.get(t[c])===gw||h===GT||m===GT||h===KT||[mA,pw,Cf].indexOf(h)===-1&&m===KT||[cg,of,vQ,yu,Cu].indexOf(m)!==-1||YT(s,e)===lf||l2(a2,lf,s,e)||l2([cg,of],xw,s,e)||l2(zT,zT,s,e))return Hr;if(h===mA)return dg;if(h===a2||m===a2)return Hr;if(m===mw||h===mw)return dg;if([pw,Cf,xw].indexOf(m)!==-1||h===wQ||d===yw&&TQ.indexOf(h)!==-1||h===Cu&&m===yw||m===WT||cl.indexOf(m)!==-1&&h===pa||cl.indexOf(h)!==-1&&m===pa||h===bf&&[Ad,ug,fg].indexOf(m)!==-1||[Ad,ug,fg].indexOf(h)!==-1&&m===Ef||cl.indexOf(h)!==-1&&qT.indexOf(m)!==-1||qT.indexOf(h)!==-1&&cl.indexOf(m)!==-1||[bf,Ef].indexOf(h)!==-1&&(m===pa||[lf,Cf].indexOf(m)!==-1&&e[c+1]===pa)||[lf,Cf].indexOf(h)!==-1&&m===pa||h===pa&&[pa,Cu,yu].indexOf(m)!==-1)return Hr;if([pa,Cu,yu,cg,of].indexOf(m)!==-1)for(var C=s;C>=0;){var b=e[C];if(b===pa)return Hr;if([Cu,yu].indexOf(b)!==-1)C--;else break}if([bf,Ef].indexOf(m)!==-1)for(var C=[cg,of].indexOf(h)!==-1?o:s;C>=0;){var b=e[C];if(b===pa)return Hr;if([Cu,yu].indexOf(b)!==-1)C--;else break}if(Cw===h&&[Cw,s1,ww,vw].indexOf(m)!==-1||[s1,ww].indexOf(h)!==-1&&[s1,a1].indexOf(m)!==-1||[a1,vw].indexOf(h)!==-1&&m===a1||XT.indexOf(h)!==-1&&[WT,Ef].indexOf(m)!==-1||XT.indexOf(m)!==-1&&h===bf||cl.indexOf(h)!==-1&&cl.indexOf(m)!==-1||h===yu&&cl.indexOf(m)!==-1||cl.concat(pa).indexOf(h)!==-1&&m===lf&&bQ.indexOf(t[c])===-1||cl.concat(pa).indexOf(m)!==-1&&h===of)return Hr;if(h===o2&&m===o2){for(var I=r[s],F=1;I>0&&(I--,e[I]===o2);)F++;if(F%2!==0)return Hr}return h===ug&&m===fg?Hr:dg},IQ=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=BQ(t,e.lineBreak),n=r[0],i=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(c){return[pa,Ac,_R].indexOf(c)!==-1?Ad:c}));var o=e.wordBreak==="keep-all"?s.map(function(c,h){return c&&t[h]>=19968&&t[h]<=40959}):void 0;return[n,i,o]},NQ=(function(){function t(e,r,n,i){this.codePoints=e,this.required=r===TR,this.start=n,this.end=i}return t.prototype.slice=function(){return ui.apply(void 0,this.codePoints.slice(this.start,this.end))},t})(),RQ=function(t,e){var r=Fp(t),n=IQ(r,e),i=n[0],s=n[1],o=n[2],c=r.length,h=0,d=0;return{next:function(){if(d>=c)return{done:!0,value:null};for(var m=Hr;d<c&&(m=SQ(r,s,i,++d,o))===Hr;);if(m!==Hr||d===c){var C=new NQ(r,m,h,d);return h=d,{value:C,done:!1}}return{done:!0,value:null}}}},FQ=1,kQ=2,Od=4,JT=8,N1=10,ZT=47,Qf=92,DQ=9,UQ=32,hg=34,Af=61,MQ=35,OQ=36,LQ=37,gg=39,pg=40,cf=41,PQ=95,Zs=45,QQ=33,HQ=60,jQ=62,VQ=64,GQ=91,KQ=93,zQ=61,WQ=123,mg=63,qQ=125,$T=124,XQ=126,YQ=128,eB=65533,A2=42,dc=43,JQ=44,ZQ=58,$Q=59,cd=46,eH=0,tH=8,rH=11,nH=14,iH=31,sH=127,_o=-1,SR=48,IR=97,NR=101,aH=102,oH=117,lH=122,RR=65,FR=69,kR=70,AH=85,cH=90,fs=function(t){return t>=SR&&t<=57},uH=function(t){return t>=55296&&t<=57343},Eu=function(t){return fs(t)||t>=RR&&t<=kR||t>=IR&&t<=aH},fH=function(t){return t>=IR&&t<=lH},dH=function(t){return t>=RR&&t<=cH},hH=function(t){return fH(t)||dH(t)},gH=function(t){return t>=YQ},xg=function(t){return t===N1||t===DQ||t===UQ},R1=function(t){return hH(t)||gH(t)||t===PQ},tB=function(t){return R1(t)||fs(t)||t===Zs},pH=function(t){return t>=eH&&t<=tH||t===rH||t>=nH&&t<=iH||t===sH},cA=function(t,e){return t!==Qf?!1:e!==N1},wg=function(t,e,r){return t===Zs?R1(e)||cA(e,r):R1(t)?!0:!!(t===Qf&&cA(t,e))},c2=function(t,e,r){return t===dc||t===Zs?fs(e)?!0:e===cd&&fs(r):fs(t===cd?e:t)},mH=function(t){var e=0,r=1;(t[e]===dc||t[e]===Zs)&&(t[e]===Zs&&(r=-1),e++);for(var n=[];fs(t[e]);)n.push(t[e++]);var i=n.length?parseInt(ui.apply(void 0,n),10):0;t[e]===cd&&e++;for(var s=[];fs(t[e]);)s.push(t[e++]);var o=s.length,c=o?parseInt(ui.apply(void 0,s),10):0;(t[e]===FR||t[e]===NR)&&e++;var h=1;(t[e]===dc||t[e]===Zs)&&(t[e]===Zs&&(h=-1),e++);for(var d=[];fs(t[e]);)d.push(t[e++]);var m=d.length?parseInt(ui.apply(void 0,d),10):0;return r*(i+c*Math.pow(10,-o))*Math.pow(10,h*m)},xH={type:2},wH={type:3},vH={type:4},yH={type:13},CH={type:8},EH={type:21},bH={type:9},_H={type:10},TH={type:11},BH={type:12},SH={type:14},vg={type:23},IH={type:1},NH={type:25},RH={type:24},FH={type:26},kH={type:27},DH={type:28},UH={type:29},MH={type:31},_w={type:32},DR=(function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Fp(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==_w;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case hg:return this.consumeStringToken(hg);case MQ:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(tB(r)||cA(n,i)){var s=wg(r,n,i)?kQ:FQ,o=this.consumeName();return{type:5,value:o,flags:s}}break;case OQ:if(this.peekCodePoint(0)===Af)return this.consumeCodePoint(),yH;break;case gg:return this.consumeStringToken(gg);case pg:return xH;case cf:return wH;case A2:if(this.peekCodePoint(0)===Af)return this.consumeCodePoint(),SH;break;case dc:if(c2(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case JQ:return vH;case Zs:var c=e,h=this.peekCodePoint(0),d=this.peekCodePoint(1);if(c2(c,h,d))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(wg(c,h,d))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(h===Zs&&d===jQ)return this.consumeCodePoint(),this.consumeCodePoint(),RH;break;case cd:if(c2(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ZT:if(this.peekCodePoint(0)===A2)for(this.consumeCodePoint();;){var m=this.consumeCodePoint();if(m===A2&&(m=this.consumeCodePoint(),m===ZT))return this.consumeToken();if(m===_o)return this.consumeToken()}break;case ZQ:return FH;case $Q:return kH;case HQ:if(this.peekCodePoint(0)===QQ&&this.peekCodePoint(1)===Zs&&this.peekCodePoint(2)===Zs)return this.consumeCodePoint(),this.consumeCodePoint(),NH;break;case VQ:var C=this.peekCodePoint(0),b=this.peekCodePoint(1),I=this.peekCodePoint(2);if(wg(C,b,I)){var o=this.consumeName();return{type:7,value:o}}break;case GQ:return DH;case Qf:if(cA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case KQ:return UH;case zQ:if(this.peekCodePoint(0)===Af)return this.consumeCodePoint(),CH;break;case WQ:return TH;case qQ:return BH;case oH:case AH:var F=this.peekCodePoint(0),k=this.peekCodePoint(1);return F===dc&&(Eu(k)||k===mg)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case $T:if(this.peekCodePoint(0)===Af)return this.consumeCodePoint(),bH;if(this.peekCodePoint(0)===$T)return this.consumeCodePoint(),EH;break;case XQ:if(this.peekCodePoint(0)===Af)return this.consumeCodePoint(),_H;break;case _o:return _w}return xg(e)?(this.consumeWhiteSpace(),MH):fs(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):R1(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ui(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Eu(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===mg&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(ui.apply(void 0,e.map(function(h){return h===mg?SR:h})),16),s=parseInt(ui.apply(void 0,e.map(function(h){return h===mg?kR:h})),16);return{type:30,start:i,end:s}}var o=parseInt(ui.apply(void 0,e),16);if(this.peekCodePoint(0)===Zs&&Eu(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var c=[];Eu(r)&&c.length<6;)c.push(r),r=this.consumeCodePoint();var s=parseInt(ui.apply(void 0,c),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===pg?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===pg?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===_o)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===gg||r===hg){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===_o||this.peekCodePoint(0)===cf)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),vg)}for(;;){var i=this.consumeCodePoint();if(i===_o||i===cf)return{type:22,value:ui.apply(void 0,e)};if(xg(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===_o||this.peekCodePoint(0)===cf?(this.consumeCodePoint(),{type:22,value:ui.apply(void 0,e)}):(this.consumeBadUrlRemnants(),vg);if(i===hg||i===gg||i===pg||pH(i))return this.consumeBadUrlRemnants(),vg;if(i===Qf)if(cA(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),vg;else e.push(i)}},t.prototype.consumeWhiteSpace=function(){for(;xg(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===cf||e===_o)return;cA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var i=Math.min(r,e);n+=ui.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var i=this._value[n];if(i===_o||i===void 0||i===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(i===N1)return this._value.splice(0,n),IH;if(i===Qf){var s=this._value[n+1];s!==_o&&s!==void 0&&(s===N1?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):cA(i,s)&&(r+=this.consumeStringSlice(n),r+=ui(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Od,n=this.peekCodePoint(0);for((n===dc||n===Zs)&&e.push(this.consumeCodePoint());fs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===cd&&fs(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=JT;fs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===FR||n===NR)&&((i===dc||i===Zs)&&fs(s)||fs(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=JT;fs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[mH(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(wg(i,s,o)){var c=this.consumeName();return{type:15,number:r,flags:n,unit:c}}return i===LQ?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Eu(e)){for(var r=ui(e);Eu(this.peekCodePoint(0))&&r.length<6;)r+=ui(this.consumeCodePoint());xg(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||uH(n)||n>1114111?eB:n}return e===_o?eB:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(tB(r))e+=ui(r);else if(cA(r,this.peekCodePoint(0)))e+=ui(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t})(),UR=(function(){function t(e){this._tokens=e}return t.create=function(e){var r=new DR;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||LH(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?_w:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t})(),Ld=function(t){return t.type===15},g0=function(t){return t.type===17},bn=function(t){return t.type===20},OH=function(t){return t.type===0},Tw=function(t,e){return bn(t)&&t.value===e},MR=function(t){return t.type!==31},o0=function(t){return t.type!==31&&t.type!==4},Oo=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},LH=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},FA=function(t){return t.type===17||t.type===15},Ci=function(t){return t.type===16||FA(t)},OR=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},$i={type:17,number:0,flags:Od},uy={type:16,number:50,flags:Od},xA={type:16,number:100,flags:Od},_f=function(t,e,r){var n=t[0],i=t[1];return[Rn(n,e),Rn(typeof i<"u"?i:n,r)]},Rn=function(t,e){if(t.type===16)return t.number/100*e;if(Ld(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},LR="deg",PR="grad",QR="rad",HR="turn",kp={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case LR:return Math.PI*e.number/180;case PR:return Math.PI/200*e.number;case QR:return e.number;case HR:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},jR=function(t){return t.type===15&&(t.unit===LR||t.unit===PR||t.unit===QR||t.unit===HR)},VR=function(t){var e=t.filter(bn).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[$i,$i];case"to top":case"bottom":return ja(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[$i,xA];case"to right":case"left":return ja(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[xA,xA];case"to bottom":case"top":return ja(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[xA,$i];case"to left":case"right":return ja(270)}return 0},ja=function(t){return Math.PI*t/180},TA={name:"color",parse:function(t,e){if(e.type===18){var r=PH[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return wA(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return wA(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return wA(parseInt(n,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return wA(parseInt(n,16),parseInt(i,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var c=wl[e.value.toUpperCase()];if(typeof c<"u")return c}return wl.TRANSPARENT}},BA=function(t){return(255&t)===0},Ui=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+n+","+r+","+e/255+")":"rgb("+i+","+n+","+r+")"},wA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},rB=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},nB=function(t,e){var r=e.filter(o0);if(r.length===3){var n=r.map(rB),i=n[0],s=n[1],o=n[2];return wA(i,s,o,1)}if(r.length===4){var c=r.map(rB),i=c[0],s=c[1],o=c[2],h=c[3];return wA(i,s,o,h)}return 0};function u2(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var iB=function(t,e){var r=e.filter(o0),n=r[0],i=r[1],s=r[2],o=r[3],c=(n.type===17?ja(n.number):kp.parse(t,n))/(Math.PI*2),h=Ci(i)?i.number/100:0,d=Ci(s)?s.number/100:0,m=typeof o<"u"&&Ci(o)?Rn(o,1):1;if(h===0)return wA(d*255,d*255,d*255,1);var C=d<=.5?d*(h+1):d+h-d*h,b=d*2-C,I=u2(b,C,c+1/3),F=u2(b,C,c),k=u2(b,C,c-1/3);return wA(I*255,F*255,k*255,m)},PH={hsl:iB,hsla:iB,rgb:nB,rgba:nB},Hf=function(t,e){return TA.parse(t,UR.create(e).parseComponentValue())},wl={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},QH={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(bn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},HH={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dp=function(t,e){var r=TA.parse(t,e[0]),n=e[1];return n&&Ci(n)?{color:r,stop:n}:{color:r,stop:null}},sB=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=$i),n.stop===null&&(n.stop=xA);for(var i=[],s=0,o=0;o<t.length;o++){var c=t[o].stop;if(c!==null){var h=Rn(c,e);h>s?i.push(h):i.push(s),s=h}else i.push(null)}for(var d=null,o=0;o<i.length;o++){var m=i[o];if(m===null)d===null&&(d=o);else if(d!==null){for(var C=o-d,b=i[d-1],I=(m-b)/(C+1),F=1;F<=C;F++)i[d+F-1]=I*F;d=null}}return t.map(function(k,U){var V=k.color;return{color:V,stop:Math.max(Math.min(1,i[U]/e),0)}})},jH=function(t,e,r){var n=e/2,i=r/2,s=Rn(t[0],e)-n,o=i-Rn(t[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},VH=function(t,e,r){var n=typeof t=="number"?t:jH(t,e,r),i=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,o=r/2,c=i/2,h=Math.sin(n-Math.PI/2)*c,d=Math.cos(n-Math.PI/2)*c;return[i,s-d,s+d,o-h,o+h]},no=function(t,e){return Math.sqrt(t*t+e*e)},aB=function(t,e,r,n,i){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(o,c){var h=c[0],d=c[1],m=no(r-h,n-d);return(i?m<o.optimumDistance:m>o.optimumDistance)?{optimumCorner:c,optimumDistance:m}:o},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},GH=function(t,e,r,n,i){var s=0,o=0;switch(t.size){case 0:t.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-i)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(r),Math.abs(r-i)));break;case 2:if(t.shape===0)s=o=Math.min(no(e,r),no(e,r-i),no(e-n,r),no(e-n,r-i));else if(t.shape===1){var c=Math.min(Math.abs(r),Math.abs(r-i))/Math.min(Math.abs(e),Math.abs(e-n)),h=aB(n,i,e,r,!0),d=h[0],m=h[1];s=no(d-e,(m-r)/c),o=c*s}break;case 1:t.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-i)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(r),Math.abs(r-i)));break;case 3:if(t.shape===0)s=o=Math.max(no(e,r),no(e,r-i),no(e-n,r),no(e-n,r-i));else if(t.shape===1){var c=Math.max(Math.abs(r),Math.abs(r-i))/Math.max(Math.abs(e),Math.abs(e-n)),C=aB(n,i,e,r,!1),d=C[0],m=C[1];s=no(d-e,(m-r)/c),o=c*s}break}return Array.isArray(t.size)&&(s=Rn(t.size[0],n),o=t.size.length===2?Rn(t.size[1],i):s),[s,o]},KH=function(t,e){var r=ja(180),n=[];return Oo(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&o.value==="to"){r=VR(i);return}else if(jR(o)){r=kp.parse(t,o);return}}var c=Dp(t,i);n.push(c)}),{angle:r,stops:n,type:1}},yg=function(t,e){var r=ja(180),n=[];return Oo(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=VR(i);return}else if(jR(o)){r=(kp.parse(t,o)+ja(270))%ja(360);return}}var c=Dp(t,i);n.push(c)}),{angle:r,stops:n,type:1}},zH=function(t,e){var r=ja(180),n=[],i=1,s=0,o=3,c=[];return Oo(e).forEach(function(h,d){var m=h[0];if(d===0){if(bn(m)&&m.value==="linear"){i=1;return}else if(bn(m)&&m.value==="radial"){i=2;return}}if(m.type===18){if(m.name==="from"){var C=TA.parse(t,m.values[0]);n.push({stop:$i,color:C})}else if(m.name==="to"){var C=TA.parse(t,m.values[0]);n.push({stop:xA,color:C})}else if(m.name==="color-stop"){var b=m.values.filter(o0);if(b.length===2){var C=TA.parse(t,b[1]),I=b[0];g0(I)&&n.push({stop:{type:16,number:I.number*100,flags:I.flags},color:C})}}}}),i===1?{angle:(r+ja(180))%ja(360),stops:n,type:i}:{size:o,shape:s,stops:n,position:c,type:i}},GR="closest-side",KR="farthest-side",zR="closest-corner",WR="farthest-corner",qR="circle",XR="ellipse",YR="cover",JR="contain",WH=function(t,e){var r=0,n=3,i=[],s=[];return Oo(e).forEach(function(o,c){var h=!0;if(c===0){var d=!1;h=o.reduce(function(C,b){if(d)if(bn(b))switch(b.value){case"center":return s.push(uy),C;case"top":case"left":return s.push($i),C;case"right":case"bottom":return s.push(xA),C}else(Ci(b)||FA(b))&&s.push(b);else if(bn(b))switch(b.value){case qR:return r=0,!1;case XR:return r=1,!1;case"at":return d=!0,!1;case GR:return n=0,!1;case YR:case KR:return n=1,!1;case JR:case zR:return n=2,!1;case WR:return n=3,!1}else if(FA(b)||Ci(b))return Array.isArray(n)||(n=[]),n.push(b),!1;return C},h)}if(h){var m=Dp(t,o);i.push(m)}}),{size:n,shape:r,stops:i,position:s,type:2}},Cg=function(t,e){var r=0,n=3,i=[],s=[];return Oo(e).forEach(function(o,c){var h=!0;if(c===0?h=o.reduce(function(m,C){if(bn(C))switch(C.value){case"center":return s.push(uy),!1;case"top":case"left":return s.push($i),!1;case"right":case"bottom":return s.push(xA),!1}else if(Ci(C)||FA(C))return s.push(C),!1;return m},h):c===1&&(h=o.reduce(function(m,C){if(bn(C))switch(C.value){case qR:return r=0,!1;case XR:return r=1,!1;case JR:case GR:return n=0,!1;case KR:return n=1,!1;case zR:return n=2,!1;case YR:case WR:return n=3,!1}else if(FA(C)||Ci(C))return Array.isArray(n)||(n=[]),n.push(C),!1;return m},h)),h){var d=Dp(t,o);i.push(d)}}),{size:n,shape:r,stops:i,position:s,type:2}},qH=function(t){return t.type===1},XH=function(t){return t.type===2},fy={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=ZR[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function YH(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!ZR[t.name])}var ZR={"linear-gradient":KH,"-moz-linear-gradient":yg,"-ms-linear-gradient":yg,"-o-linear-gradient":yg,"-webkit-linear-gradient":yg,"radial-gradient":WH,"-moz-radial-gradient":Cg,"-ms-radial-gradient":Cg,"-o-radial-gradient":Cg,"-webkit-radial-gradient":Cg,"-webkit-gradient":zH},JH={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return o0(n)&&YH(n)}).map(function(n){return fy.parse(t,n)})}},ZH={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(bn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},$H={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Oo(e).map(function(r){return r.filter(Ci)}).map(OR)}},ej={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Oo(e).map(function(r){return r.filter(bn).map(function(n){return n.value}).join(" ")}).map(tj)}},tj=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Wu;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Wu||(Wu={}));var rj={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Oo(e).map(function(r){return r.filter(nj)})}},nj=function(t){return bn(t)||Ci(t)},Up=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ij=Up("top"),sj=Up("right"),aj=Up("bottom"),oj=Up("left"),Mp=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return OR(r.filter(Ci))}}},lj=Mp("top-left"),Aj=Mp("top-right"),cj=Mp("bottom-right"),uj=Mp("bottom-left"),Op=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},fj=Op("top"),dj=Op("right"),hj=Op("bottom"),gj=Op("left"),Lp=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Ld(r)?r.number:0}}},pj=Lp("top"),mj=Lp("right"),xj=Lp("bottom"),wj=Lp("left"),vj={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},yj={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Cj={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(bn).reduce(function(r,n){return r|Ej(n.value)},0)}},Ej=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},bj={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},_j={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},F1;(function(t){t.NORMAL="normal",t.STRICT="strict"})(F1||(F1={}));var Tj={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return F1.STRICT;case"normal":default:return F1.NORMAL}}},Bj={name:"line-height",initialValue:"normal",prefix:!1,type:4},oB=function(t,e){return bn(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ci(t)?Rn(t,e):e},Sj={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:fy.parse(t,e)}},Ij={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Bw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Pp=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Nj=Pp("top"),Rj=Pp("right"),Fj=Pp("bottom"),kj=Pp("left"),Dj={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(bn).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Uj={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Qp=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Mj=Qp("top"),Oj=Qp("right"),Lj=Qp("bottom"),Pj=Qp("left"),Qj={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Hj={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},jj={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Tw(e[0],"none")?[]:Oo(e).map(function(r){for(var n={color:wl.TRANSPARENT,offsetX:$i,offsetY:$i,blur:$i},i=0,s=0;s<r.length;s++){var o=r[s];FA(o)?(i===0?n.offsetX=o:i===1?n.offsetY=o:n.blur=o,i++):n.color=TA.parse(t,o)}return n})}},Vj={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Gj={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=Wj[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Kj=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},zj=function(t){var e=t.filter(function(h){return h.type===17}).map(function(h){return h.number}),r=e[0],n=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],c=e[13];return e[14],e[15],e.length===16?[r,n,i,s,o,c]:null},Wj={matrix:Kj,matrix3d:zj},lB={type:16,number:50,flags:Od},qj=[lB,lB],Xj={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Ci);return r.length!==2?qj:[r[0],r[1]]}},Yj={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},jf;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(jf||(jf={}));var Jj={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return jf.BREAK_ALL;case"keep-all":return jf.KEEP_ALL;case"normal":default:return jf.NORMAL}}},Zj={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(g0(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},$R={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},$j={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return g0(e)?e.number:1}},eV={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tV={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(bn).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},rV={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:r.push(i.value);break;case 17:r.push(i.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},nV={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},iV={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(g0(e))return e.number;if(bn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},sV={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(bn).map(function(r){return r.value})}},aV={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Si=function(t,e){return(t&e)!==0},oV={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},lV={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],i=e.filter(MR),s=0;s<i.length;s++){var o=i[s],c=i[s+1];if(o.type===20){var h=c&&g0(c)?c.number:1;n.push({counter:o.value,increment:h})}}return n}},AV={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(MR),i=0;i<n.length;i++){var s=n[i],o=n[i+1];if(bn(s)&&s.value!=="none"){var c=o&&g0(o)?o.number:0;r.push({counter:s.value,reset:c})}}return r}},cV={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Ld).map(function(r){return $R.parse(t,r)})}},uV={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],i=e.filter(OH);if(i.length%2!==0)return null;for(var s=0;s<i.length;s+=2){var o=i[s].value,c=i[s+1].value;n.push({open:o,close:c})}return n}},AB=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},fV={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Tw(e[0],"none")?[]:Oo(e).map(function(r){for(var n={color:255,offsetX:$i,offsetY:$i,blur:$i,spread:$i,inset:!1},i=0,s=0;s<r.length;s++){var o=r[s];Tw(o,"inset")?n.inset=!0:FA(o)?(i===0?n.offsetX=o:i===1?n.offsetY=o:i===2?n.blur=o:n.spread=o,i++):n.color=TA.parse(t,o)}return n})}},dV={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(bn).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},hV={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},gV={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Ld(e)?e.number:0}},pV=(function(){function t(e,r){var n,i;this.animationDuration=Kt(e,cV,r.animationDuration),this.backgroundClip=Kt(e,QH,r.backgroundClip),this.backgroundColor=Kt(e,HH,r.backgroundColor),this.backgroundImage=Kt(e,JH,r.backgroundImage),this.backgroundOrigin=Kt(e,ZH,r.backgroundOrigin),this.backgroundPosition=Kt(e,$H,r.backgroundPosition),this.backgroundRepeat=Kt(e,ej,r.backgroundRepeat),this.backgroundSize=Kt(e,rj,r.backgroundSize),this.borderTopColor=Kt(e,ij,r.borderTopColor),this.borderRightColor=Kt(e,sj,r.borderRightColor),this.borderBottomColor=Kt(e,aj,r.borderBottomColor),this.borderLeftColor=Kt(e,oj,r.borderLeftColor),this.borderTopLeftRadius=Kt(e,lj,r.borderTopLeftRadius),this.borderTopRightRadius=Kt(e,Aj,r.borderTopRightRadius),this.borderBottomRightRadius=Kt(e,cj,r.borderBottomRightRadius),this.borderBottomLeftRadius=Kt(e,uj,r.borderBottomLeftRadius),this.borderTopStyle=Kt(e,fj,r.borderTopStyle),this.borderRightStyle=Kt(e,dj,r.borderRightStyle),this.borderBottomStyle=Kt(e,hj,r.borderBottomStyle),this.borderLeftStyle=Kt(e,gj,r.borderLeftStyle),this.borderTopWidth=Kt(e,pj,r.borderTopWidth),this.borderRightWidth=Kt(e,mj,r.borderRightWidth),this.borderBottomWidth=Kt(e,xj,r.borderBottomWidth),this.borderLeftWidth=Kt(e,wj,r.borderLeftWidth),this.boxShadow=Kt(e,fV,r.boxShadow),this.color=Kt(e,vj,r.color),this.direction=Kt(e,yj,r.direction),this.display=Kt(e,Cj,r.display),this.float=Kt(e,bj,r.cssFloat),this.fontFamily=Kt(e,rV,r.fontFamily),this.fontSize=Kt(e,nV,r.fontSize),this.fontStyle=Kt(e,aV,r.fontStyle),this.fontVariant=Kt(e,sV,r.fontVariant),this.fontWeight=Kt(e,iV,r.fontWeight),this.letterSpacing=Kt(e,_j,r.letterSpacing),this.lineBreak=Kt(e,Tj,r.lineBreak),this.lineHeight=Kt(e,Bj,r.lineHeight),this.listStyleImage=Kt(e,Sj,r.listStyleImage),this.listStylePosition=Kt(e,Ij,r.listStylePosition),this.listStyleType=Kt(e,Bw,r.listStyleType),this.marginTop=Kt(e,Nj,r.marginTop),this.marginRight=Kt(e,Rj,r.marginRight),this.marginBottom=Kt(e,Fj,r.marginBottom),this.marginLeft=Kt(e,kj,r.marginLeft),this.opacity=Kt(e,$j,r.opacity);var s=Kt(e,Dj,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Kt(e,Uj,r.overflowWrap),this.paddingTop=Kt(e,Mj,r.paddingTop),this.paddingRight=Kt(e,Oj,r.paddingRight),this.paddingBottom=Kt(e,Lj,r.paddingBottom),this.paddingLeft=Kt(e,Pj,r.paddingLeft),this.paintOrder=Kt(e,dV,r.paintOrder),this.position=Kt(e,Hj,r.position),this.textAlign=Kt(e,Qj,r.textAlign),this.textDecorationColor=Kt(e,eV,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Kt(e,tV,(i=r.textDecorationLine)!==null&&i!==void 0?i:r.textDecoration),this.textShadow=Kt(e,jj,r.textShadow),this.textTransform=Kt(e,Vj,r.textTransform),this.transform=Kt(e,Gj,r.transform),this.transformOrigin=Kt(e,Xj,r.transformOrigin),this.visibility=Kt(e,Yj,r.visibility),this.webkitTextStrokeColor=Kt(e,hV,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Kt(e,gV,r.webkitTextStrokeWidth),this.wordBreak=Kt(e,Jj,r.wordBreak),this.zIndex=Kt(e,Zj,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return BA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Si(this.display,4)||Si(this.display,33554432)||Si(this.display,268435456)||Si(this.display,536870912)||Si(this.display,67108864)||Si(this.display,134217728)},t})(),mV=(function(){function t(e,r){this.content=Kt(e,oV,r.content),this.quotes=Kt(e,uV,r.quotes)}return t})(),cB=(function(){function t(e,r){this.counterIncrement=Kt(e,lV,r.counterIncrement),this.counterReset=Kt(e,AV,r.counterReset)}return t})(),Kt=function(t,e,r){var n=new DR,i=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(i);var s=new UR(n.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(t,bn(o)?o.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return kp.parse(t,s.parseComponentValue());case"color":return TA.parse(t,s.parseComponentValue());case"image":return fy.parse(t,s.parseComponentValue());case"length":var c=s.parseComponentValue();return FA(c)?c:$i;case"length-percentage":var h=s.parseComponentValue();return Ci(h)?h:$i;case"time":return $R.parse(t,s.parseComponentValue())}break}},xV="data-html2canvas-debug",wV=function(t){var e=t.getAttribute(xV);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Sw=function(t,e){var r=wV(t);return r===1||e===r},Lo=(function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Sw(r,3))debugger;this.styles=new pV(e,window.getComputedStyle(r,null)),Rw(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Rp(this.context,r),Sw(r,4)&&(this.flags|=16)}return t})(),vV="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",uB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Eg=0;Eg<uB.length;Eg++)Tf[uB.charCodeAt(Eg)]=Eg;var yV=function(t){var e=t.length*.75,r=t.length,n,i=0,s,o,c,h;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(d)?d:new Uint8Array(d);for(n=0;n<r;n+=4)s=Tf[t.charCodeAt(n)],o=Tf[t.charCodeAt(n+1)],c=Tf[t.charCodeAt(n+2)],h=Tf[t.charCodeAt(n+3)],m[i++]=s<<2|o>>4,m[i++]=(o&15)<<4|c>>2,m[i++]=(c&3)<<6|h&63;return d},CV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},EV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},xc=5,dy=11,f2=2,bV=dy-xc,eF=65536>>xc,_V=1<<xc,d2=_V-1,TV=1024>>xc,BV=eF+TV,SV=BV,IV=32,NV=SV+IV,RV=65536>>dy,FV=1<<bV,kV=FV-1,fB=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},DV=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},UV=function(t,e){var r=yV(t),n=Array.isArray(r)?EV(r):new Uint32Array(r),i=Array.isArray(r)?CV(r):new Uint16Array(r),s=24,o=fB(i,s/2,n[4]/2),c=n[5]===2?fB(i,(s+n[4])/2):DV(n,Math.ceil((s+n[4])/4));return new MV(n[0],n[1],n[2],n[3],o,c)},MV=(function(){function t(e,r,n,i,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>xc],r=(r<<f2)+(e&d2),this.data[r];if(e<=65535)return r=this.index[eF+(e-55296>>xc)],r=(r<<f2)+(e&d2),this.data[r];if(e<this.highStart)return r=NV-RV+(e>>dy),r=this.index[r],r+=e>>xc&kV,r=this.index[r],r=(r<<f2)+(e&d2),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t})(),dB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",OV=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bg=0;bg<dB.length;bg++)OV[dB.charCodeAt(bg)]=bg;var LV=1,h2=2,g2=3,hB=4,gB=5,PV=7,pB=8,p2=9,m2=10,mB=11,xB=12,wB=13,vB=14,x2=15,QV=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e},HV=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],i=-1,s="";++i<r;){var o=t[i];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(i+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},jV=UV(vV),Pa="",w2="",VV=function(t){return jV.get(t)},GV=function(t,e,r){var n=r-2,i=e[n],s=e[r-1],o=e[r];if(s===h2&&o===g2)return Pa;if(s===h2||s===g2||s===hB||o===h2||o===g2||o===hB)return w2;if(s===pB&&[pB,p2,mB,xB].indexOf(o)!==-1||(s===mB||s===p2)&&(o===p2||o===m2)||(s===xB||s===m2)&&o===m2||o===wB||o===gB||o===PV||s===LV)return Pa;if(s===wB&&o===vB){for(;i===gB;)i=e[--n];if(i===vB)return Pa}if(s===x2&&o===x2){for(var c=0;i===x2;)c++,i=e[--n];if(c%2===0)return Pa}return w2},KV=function(t){var e=QV(t),r=e.length,n=0,i=0,s=e.map(VV);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=Pa;n<r&&(o=GV(e,s,++n))===Pa;);if(o!==Pa||n===r){var c=HV.apply(null,e.slice(i,n));return i=n,{value:c,done:!1}}return{done:!0,value:null}}}},zV=function(t){for(var e=KV(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},WV=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var i=r.getBoundingClientRect(),s=Math.round(i.height);if(t.body.removeChild(n),s===e)return!0}}return!1},qV=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=Fp(n.data).map(function(h){return ui(h)}),s=0,o={},c=i.every(function(h,d){r.setStart(n,s),r.setEnd(n,s+h.length);var m=r.getBoundingClientRect();s+=h.length;var C=m.x>o.x||m.y>o.y;return o=m,d===0?!0:C});return t.body.removeChild(e),c},XV=function(){return typeof new Image().crossOrigin<"u"},YV=function(){return typeof new XMLHttpRequest().responseType=="string"},JV=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},yB=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},ZV=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var i=new Image,s=e.toDataURL();i.src=s;var o=Iw(r,r,0,0,i);return n.fillStyle="red",n.fillRect(0,0,r,r),CB(o).then(function(c){n.drawImage(c,0,0);var h=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var d=t.createElement("div");return d.style.backgroundImage="url("+s+")",d.style.height=r+"px",yB(h)?CB(Iw(r,r,0,0,d)):Promise.reject(!1)}).then(function(c){return n.drawImage(c,0,0),yB(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Iw=function(t,e,r,n,i){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),c=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),c.setAttributeNS(null,"width","100%"),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"x",r.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(c),c.appendChild(i),o},CB=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Xi={get SUPPORT_RANGE_BOUNDS(){var t=WV(document);return Object.defineProperty(Xi,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Xi.SUPPORT_RANGE_BOUNDS&&qV(document);return Object.defineProperty(Xi,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=JV(document);return Object.defineProperty(Xi,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?ZV(document):Promise.resolve(!1);return Object.defineProperty(Xi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=XV();return Object.defineProperty(Xi,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=YV();return Object.defineProperty(Xi,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Xi,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Xi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Vf=(function(){function t(e,r){this.text=e,this.bounds=r}return t})(),$V=function(t,e,r,n){var i=rG(e,r),s=[],o=0;return i.forEach(function(c){if(r.textDecorationLine.length||c.trim().length>0)if(Xi.SUPPORT_RANGE_BOUNDS){var h=EB(n,o,c.length).getClientRects();if(h.length>1){var d=hy(c),m=0;d.forEach(function(b){s.push(new Vf(b,Bl.fromDOMRectList(t,EB(n,m+o,b.length).getClientRects()))),m+=b.length})}else s.push(new Vf(c,Bl.fromDOMRectList(t,h)))}else{var C=n.splitText(c.length);s.push(new Vf(c,eG(t,n))),n=C}else Xi.SUPPORT_RANGE_BOUNDS||(n=n.splitText(c.length));o+=c.length}),s},eG=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var s=Rp(t,n);return n.firstChild&&i.replaceChild(n.firstChild,n),s}}return Bl.EMPTY},EB=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(t,e),i.setEnd(t,e+r),i},hy=function(t){if(Xi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return zV(t)},tG=function(t,e){if(Xi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return iG(t,e)},rG=function(t,e){return e.letterSpacing!==0?hy(t):tG(t,e)},nG=[32,160,4961,65792,65793,4153,4241],iG=function(t,e){for(var r=RQ(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,s=function(){if(i.value){var o=i.value.slice(),c=Fp(o),h="";c.forEach(function(d){nG.indexOf(d)===-1?h+=ui(d):(h.length&&n.push(h),n.push(ui(d)),h="")}),h.length&&n.push(h)}};!(i=r.next()).done;)s();return n},sG=(function(){function t(e,r,n){this.text=aG(r.data,n.textTransform),this.textBounds=$V(e,this.text,n,r)}return t})(),aG=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(oG,lG);case 2:return t.toUpperCase();default:return t}},oG=/(^|\s|:|-|\(|\))([a-z])/g,lG=function(t,e,r){return t.length>0?e+r.toUpperCase():t},tF=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e})(Lo),rF=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e})(Lo),nF=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this,s=new XMLSerializer,o=Rp(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e})(Lo),iF=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.value=n.value,i}return e})(Lo),Nw=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e})(Lo),AG=[{type:15,flags:0,unit:"px",number:3}],cG=[{type:16,flags:0,number:50}],uG=function(t){return t.width>t.height?new Bl(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Bl(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},fG=function(t){var e=t.type===dG?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},k1="checkbox",D1="radio",dG="password",bB=707406591,gy=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=fG(n),(i.type===k1||i.type===D1)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=uG(i.bounds)),i.type){case k1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=AG;break;case D1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=cG;break}return i}return e})(Lo),sF=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return i.value=s&&s.text||"",i}return e})(Lo),aF=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.value=n.value,i}return e})(Lo),oF=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=AF(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Hf(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):wl.TRANSPARENT,o=n.contentWindow.document.body?Hf(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):wl.TRANSPARENT;i.backgroundColor=BA(s)?BA(o)?i.styles.backgroundColor:o:s}}catch{}return i}return e})(Lo),hG=["OL","UL","MENU"],o1=function(t,e,r,n){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,cF(i)&&i.data.trim().length>0)r.textNodes.push(new sG(t,i,r.styles));else if(Lu(i))if(hF(i)&&i.assignedNodes)i.assignedNodes().forEach(function(c){return o1(t,c,r,n)});else{var o=lF(t,i);o.styles.isVisible()&&(gG(i,o,n)?o.flags|=4:pG(o.styles)&&(o.flags|=2),hG.indexOf(i.tagName)!==-1&&(o.flags|=8),r.elements.push(o),i.slot,i.shadowRoot?o1(t,i.shadowRoot,o,n):!U1(i)&&!uF(i)&&!M1(i)&&o1(t,i,o,n))}},lF=function(t,e){return Fw(e)?new tF(t,e):fF(e)?new rF(t,e):uF(e)?new nF(t,e):mG(e)?new iF(t,e):xG(e)?new Nw(t,e):wG(e)?new gy(t,e):M1(e)?new sF(t,e):U1(e)?new aF(t,e):dF(e)?new oF(t,e):new Lo(t,e)},AF=function(t,e){var r=lF(t,e);return r.flags|=4,o1(t,e,r,r),r},gG=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||py(t)&&r.styles.isTransparent()},pG=function(t){return t.isPositioned()||t.isFloating()},cF=function(t){return t.nodeType===Node.TEXT_NODE},Lu=function(t){return t.nodeType===Node.ELEMENT_NODE},Rw=function(t){return Lu(t)&&typeof t.style<"u"&&!l1(t)},l1=function(t){return typeof t.className=="object"},mG=function(t){return t.tagName==="LI"},xG=function(t){return t.tagName==="OL"},wG=function(t){return t.tagName==="INPUT"},vG=function(t){return t.tagName==="HTML"},uF=function(t){return t.tagName==="svg"},py=function(t){return t.tagName==="BODY"},fF=function(t){return t.tagName==="CANVAS"},_B=function(t){return t.tagName==="VIDEO"},Fw=function(t){return t.tagName==="IMG"},dF=function(t){return t.tagName==="IFRAME"},TB=function(t){return t.tagName==="STYLE"},yG=function(t){return t.tagName==="SCRIPT"},U1=function(t){return t.tagName==="TEXTAREA"},M1=function(t){return t.tagName==="SELECT"},hF=function(t){return t.tagName==="SLOT"},BB=function(t){return t.tagName.indexOf("-")>0},CG=(function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,i=e.counterReset,s=!0;n!==null&&n.forEach(function(c){var h=r.counters[c.counter];h&&c.increment!==0&&(s=!1,h.length||h.push(1),h[Math.max(0,h.length-1)]+=c.increment)});var o=[];return s&&i.forEach(function(c){var h=r.counters[c.counter];o.push(c.counter),h||(h=r.counters[c.counter]=[]),h.push(c.reset)}),o},t})(),SB={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},IB={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},EG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},bG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},bu=function(t,e,r,n,i,s){return t<e||t>r?ud(t,i,s.length>0):n.integers.reduce(function(o,c,h){for(;t>=c;)t-=c,o+=n.values[h];return o},"")+s},gF=function(t,e,r,n){var i="";do r||t--,i=n(t)+i,t/=e;while(t*e>=e);return i},Ai=function(t,e,r,n,i){var s=r-e+1;return(t<0?"-":"")+(gF(Math.abs(t),s,n,function(o){return ui(Math.floor(o%s)+e)})+i)},ac=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return gF(Math.abs(t),n,!1,function(i){return e[Math.floor(i%n)]})+r},ku=1,lA=2,AA=4,Bf=8,ul=function(t,e,r,n,i,s){if(t<-9999||t>9999)return ud(t,4,i.length>0);var o=Math.abs(t),c=i;if(o===0)return e[0]+c;for(var h=0;o>0&&h<=4;h++){var d=o%10;d===0&&Si(s,ku)&&c!==""?c=e[d]+c:d>1||d===1&&h===0||d===1&&h===1&&Si(s,lA)||d===1&&h===1&&Si(s,AA)&&t>100||d===1&&h>1&&Si(s,Bf)?c=e[d]+(h>0?r[h-1]:"")+c:d===1&&h>0&&(c=r[h-1]+c),o=Math.floor(o/10)}return(t<0?n:"")+c},NB="",RB="",FB="",v2="",ud=function(t,e,r){var n=r?". ":"",i=r?"":"",s=r?", ":"",o=r?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var c=Ai(t,48,57,!0,n);return c.length<4?"0"+c:c;case 4:return ac(t,"",i);case 6:return bu(t,1,3999,SB,3,n).toLowerCase();case 7:return bu(t,1,3999,SB,3,n);case 8:return Ai(t,945,969,!1,n);case 9:return Ai(t,97,122,!1,n);case 10:return Ai(t,65,90,!1,n);case 11:return Ai(t,1632,1641,!0,n);case 12:case 49:return bu(t,1,9999,IB,3,n);case 35:return bu(t,1,9999,IB,3,n).toLowerCase();case 13:return Ai(t,2534,2543,!0,n);case 14:case 30:return Ai(t,6112,6121,!0,n);case 15:return ac(t,"",i);case 16:return ac(t,"",i);case 17:case 48:return ul(t,"",NB,"",i,lA|AA|Bf);case 47:return ul(t,"",RB,"",i,ku|lA|AA|Bf);case 42:return ul(t,"",NB,"",i,lA|AA|Bf);case 41:return ul(t,"",RB,"",i,ku|lA|AA|Bf);case 26:return ul(t,"","",FB,i,0);case 25:return ul(t,"","",FB,i,ku|lA|AA);case 31:return ul(t,"","",v2,s,ku|lA|AA);case 33:return ul(t,"","",v2,s,0);case 32:return ul(t,"","",v2,s,ku|lA|AA);case 18:return Ai(t,2406,2415,!0,n);case 20:return bu(t,1,19999,bG,3,n);case 21:return Ai(t,2790,2799,!0,n);case 22:return Ai(t,2662,2671,!0,n);case 22:return bu(t,1,10999,EG,3,n);case 23:return ac(t,"");case 24:return ac(t,"");case 27:return Ai(t,3302,3311,!0,n);case 28:return ac(t,"",i);case 29:return ac(t,"",i);case 34:return Ai(t,3792,3801,!0,n);case 37:return Ai(t,6160,6169,!0,n);case 38:return Ai(t,4160,4169,!0,n);case 39:return Ai(t,2918,2927,!0,n);case 40:return Ai(t,1776,1785,!0,n);case 43:return Ai(t,3046,3055,!0,n);case 44:return Ai(t,3174,3183,!0,n);case 45:return Ai(t,3664,3673,!0,n);case 46:return Ai(t,3872,3881,!0,n);case 3:default:return Ai(t,48,57,!0,n)}},pF="data-html2canvas-ignore",kB=(function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new CG,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,i=_G(e,r);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,c=i.contentWindow,h=c.document,d=SG(i).then(function(){return Bs(n,void 0,void 0,function(){var m,C;return cs(this,function(b){switch(b.label){case 0:return this.scrolledElements.forEach(FG),c&&(c.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.scrollY!==r.top||c.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(c.scrollX-r.left,c.scrollY-r.top,0,0))),m=this.options.onclone,C=this.clonedReferenceElement,typeof C>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:h.fonts&&h.fonts.ready?[4,h.fonts.ready]:[3,2];case 1:b.sent(),b.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,BG(h)]:[3,4];case 3:b.sent(),b.label=4;case 4:return typeof m=="function"?[2,Promise.resolve().then(function(){return m(h,C)}).then(function(){return i})]:[2,i]}})})});return h.open(),h.write(NG(document.doctype)+"<html></html>"),RG(this.referenceElement.ownerDocument,s,o),h.replaceChild(h.adoptNode(this.documentElement),h.documentElement),h.close(),d},t.prototype.createElementClone=function(e){if(Sw(e,2))debugger;if(fF(e))return this.createCanvasClone(e);if(_B(e))return this.createVideoClone(e);if(TB(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return Fw(r)&&(Fw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),BB(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return y2(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),i=e.cloneNode(!1);return i.textContent=n,i}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var s=e.getContext("2d"),o=i.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var c=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(c){var h=c.getContextAttributes();(h==null?void 0:h.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},t.prototype.appendChildNode=function(e,r,n){(!Lu(r)||!yG(r)&&!r.hasAttribute(pF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Lu(r)||!TB(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var i=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Lu(s)&&hF(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(c){return i.appendChildNode(r,c,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(cF(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Lu(e)&&(Rw(e)||l1(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var s=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),c=n.getComputedStyle(e,":after");this.referenceElement===e&&Rw(i)&&(this.clonedReferenceElement=i),py(i)&&UG(i);var h=this.counters.parse(new cB(this.context,s)),d=this.resolvePseudoContent(e,i,o,Gf.BEFORE);BB(e)&&(r=!0),_B(e)||this.cloneChildNodes(e,i,r),d&&i.insertBefore(d,i.firstChild);var m=this.resolvePseudoContent(e,i,c,Gf.AFTER);return m&&i.appendChild(m),this.counters.pop(h),(s&&(this.options.copyStyles||l1(e))&&!dF(e)||r)&&y2(s,i),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(U1(e)||M1(e))&&(U1(i)||M1(i))&&(i.value=e.value),i}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,i){var s=this;if(n){var o=n.content,c=r.ownerDocument;if(!(!c||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new cB(this.context,n));var h=new mV(this.context,n),d=c.createElement("html2canvaspseudoelement");y2(n,d),h.content.forEach(function(C){if(C.type===0)d.appendChild(c.createTextNode(C.value));else if(C.type===22){var b=c.createElement("img");b.src=C.value,b.style.opacity="1",d.appendChild(b)}else if(C.type===18){if(C.name==="attr"){var I=C.values.filter(bn);I.length&&d.appendChild(c.createTextNode(e.getAttribute(I[0].value)||""))}else if(C.name==="counter"){var F=C.values.filter(o0),k=F[0],U=F[1];if(k&&bn(k)){var V=s.counters.getCounterValue(k.value),K=U&&bn(U)?Bw.parse(s.context,U.value):3;d.appendChild(c.createTextNode(ud(V,K,!1)))}}else if(C.name==="counters"){var Q=C.values.filter(o0),k=Q[0],te=Q[1],U=Q[2];if(k&&bn(k)){var re=s.counters.getCounterValues(k.value),z=U&&bn(U)?Bw.parse(s.context,U.value):3,M=te&&te.type===0?te.value:"",P=re.map(function(Y){return ud(Y,z,!1)}).join(M);d.appendChild(c.createTextNode(P))}}}else if(C.type===20)switch(C.value){case"open-quote":d.appendChild(c.createTextNode(AB(h.quotes,s.quoteDepth++,!0)));break;case"close-quote":d.appendChild(c.createTextNode(AB(h.quotes,--s.quoteDepth,!1)));break;default:d.appendChild(c.createTextNode(C.value))}}),d.className=kw+" "+Dw;var m=i===Gf.BEFORE?" "+kw:" "+Dw;return l1(r)?r.className.baseValue+=m:r.className+=m,d}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t})(),Gf;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Gf||(Gf={}));var _G=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(pF,"true"),t.body.appendChild(r),r},TG=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},BG=function(t){return Promise.all([].slice.call(t.images,0).map(TG))},SG=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var i=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},IG=["all","d","content"],y2=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);IG.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},NG=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},RG=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},FG=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},kG=":before",DG=":after",kw="___html2canvas___pseudoelement_before",Dw="___html2canvas___pseudoelement_after",DB=`{
    content: "" !important;
    display: none !important;
}`,UG=function(t){MG(t,"."+kw+kG+DB+`
         .`+Dw+DG+DB)},MG=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},mF=(function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t})(),OG=(function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(E2(e)||HG(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Bs(this,void 0,void 0,function(){var r,n,i,s,o=this;return cs(this,function(c){switch(c.label){case 0:return r=mF.isSameOrigin(e),n=!C2(e)&&this._options.useCORS===!0&&Xi.SUPPORT_CORS_IMAGES&&!r,i=!C2(e)&&!r&&!E2(e)&&typeof this._options.proxy=="string"&&Xi.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!C2(e)&&!E2(e)&&!i&&!n?[2]:(s=e,i?[4,this.proxy(s)]:[3,2]);case 1:s=c.sent(),c.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(h,d){var m=new Image;m.onload=function(){return h(m)},m.onerror=d,(jG(s)||n)&&(m.crossOrigin="anonymous"),m.src=s,m.complete===!0&&setTimeout(function(){return h(m)},500),o._options.imageTimeout>0&&setTimeout(function(){return d("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,c.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(s,o){var c=Xi.SUPPORT_RESPONSE_TYPE?"blob":"text",h=new XMLHttpRequest;h.onload=function(){if(h.status===200)if(c==="text")s(h.response);else{var C=new FileReader;C.addEventListener("load",function(){return s(C.result)},!1),C.addEventListener("error",function(b){return o(b)},!1),C.readAsDataURL(h.response)}else o("Failed to proxy resource "+i+" with status code "+h.status)},h.onerror=o;var d=n.indexOf("?")>-1?"&":"?";if(h.open("GET",""+n+d+"url="+encodeURIComponent(e)+"&responseType="+c),c!=="text"&&h instanceof XMLHttpRequest&&(h.responseType=c),r._options.imageTimeout){var m=r._options.imageTimeout;h.timeout=m,h.ontimeout=function(){return o("Timed out ("+m+"ms) proxying "+i)}}h.send()})},t})(),LG=/^data:image\/svg\+xml/i,PG=/^data:image\/.*;base64,/i,QG=/^data:image\/.*/i,HG=function(t){return Xi.SUPPORT_SVG_DRAWING||!VG(t)},C2=function(t){return QG.test(t)},jG=function(t){return PG.test(t)},E2=function(t){return t.substr(0,4)==="blob"},VG=function(t){return t.substr(-3).toLowerCase()==="svg"||LG.test(t)},Vt=(function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t})(),_u=function(t,e,r){return new Vt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},_g=(function(){function t(e,r,n,i){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=i}return t.prototype.subdivide=function(e,r){var n=_u(this.start,this.startControl,e),i=_u(this.startControl,this.endControl,e),s=_u(this.endControl,this.end,e),o=_u(n,i,e),c=_u(i,s,e),h=_u(o,c,e);return r?new t(this.start,n,o,h):new t(h,c,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t})(),Ha=function(t){return t.type===1},GG=(function(){function t(e){var r=e.styles,n=e.bounds,i=_f(r.borderTopLeftRadius,n.width,n.height),s=i[0],o=i[1],c=_f(r.borderTopRightRadius,n.width,n.height),h=c[0],d=c[1],m=_f(r.borderBottomRightRadius,n.width,n.height),C=m[0],b=m[1],I=_f(r.borderBottomLeftRadius,n.width,n.height),F=I[0],k=I[1],U=[];U.push((s+h)/n.width),U.push((F+C)/n.width),U.push((o+k)/n.height),U.push((d+b)/n.height);var V=Math.max.apply(Math,U);V>1&&(s/=V,o/=V,h/=V,d/=V,C/=V,b/=V,F/=V,k/=V);var K=n.width-h,Q=n.height-b,te=n.width-C,re=n.height-k,z=r.borderTopWidth,M=r.borderRightWidth,P=r.borderBottomWidth,O=r.borderLeftWidth,ee=Rn(r.paddingTop,e.bounds.width),Y=Rn(r.paddingRight,e.bounds.width),X=Rn(r.paddingBottom,e.bounds.width),G=Rn(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?Hn(n.left+O/3,n.top+z/3,s-O/3,o-z/3,fn.TOP_LEFT):new Vt(n.left+O/3,n.top+z/3),this.topRightBorderDoubleOuterBox=s>0||o>0?Hn(n.left+K,n.top+z/3,h-M/3,d-z/3,fn.TOP_RIGHT):new Vt(n.left+n.width-M/3,n.top+z/3),this.bottomRightBorderDoubleOuterBox=C>0||b>0?Hn(n.left+te,n.top+Q,C-M/3,b-P/3,fn.BOTTOM_RIGHT):new Vt(n.left+n.width-M/3,n.top+n.height-P/3),this.bottomLeftBorderDoubleOuterBox=F>0||k>0?Hn(n.left+O/3,n.top+re,F-O/3,k-P/3,fn.BOTTOM_LEFT):new Vt(n.left+O/3,n.top+n.height-P/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?Hn(n.left+O*2/3,n.top+z*2/3,s-O*2/3,o-z*2/3,fn.TOP_LEFT):new Vt(n.left+O*2/3,n.top+z*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?Hn(n.left+K,n.top+z*2/3,h-M*2/3,d-z*2/3,fn.TOP_RIGHT):new Vt(n.left+n.width-M*2/3,n.top+z*2/3),this.bottomRightBorderDoubleInnerBox=C>0||b>0?Hn(n.left+te,n.top+Q,C-M*2/3,b-P*2/3,fn.BOTTOM_RIGHT):new Vt(n.left+n.width-M*2/3,n.top+n.height-P*2/3),this.bottomLeftBorderDoubleInnerBox=F>0||k>0?Hn(n.left+O*2/3,n.top+re,F-O*2/3,k-P*2/3,fn.BOTTOM_LEFT):new Vt(n.left+O*2/3,n.top+n.height-P*2/3),this.topLeftBorderStroke=s>0||o>0?Hn(n.left+O/2,n.top+z/2,s-O/2,o-z/2,fn.TOP_LEFT):new Vt(n.left+O/2,n.top+z/2),this.topRightBorderStroke=s>0||o>0?Hn(n.left+K,n.top+z/2,h-M/2,d-z/2,fn.TOP_RIGHT):new Vt(n.left+n.width-M/2,n.top+z/2),this.bottomRightBorderStroke=C>0||b>0?Hn(n.left+te,n.top+Q,C-M/2,b-P/2,fn.BOTTOM_RIGHT):new Vt(n.left+n.width-M/2,n.top+n.height-P/2),this.bottomLeftBorderStroke=F>0||k>0?Hn(n.left+O/2,n.top+re,F-O/2,k-P/2,fn.BOTTOM_LEFT):new Vt(n.left+O/2,n.top+n.height-P/2),this.topLeftBorderBox=s>0||o>0?Hn(n.left,n.top,s,o,fn.TOP_LEFT):new Vt(n.left,n.top),this.topRightBorderBox=h>0||d>0?Hn(n.left+K,n.top,h,d,fn.TOP_RIGHT):new Vt(n.left+n.width,n.top),this.bottomRightBorderBox=C>0||b>0?Hn(n.left+te,n.top+Q,C,b,fn.BOTTOM_RIGHT):new Vt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=F>0||k>0?Hn(n.left,n.top+re,F,k,fn.BOTTOM_LEFT):new Vt(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?Hn(n.left+O,n.top+z,Math.max(0,s-O),Math.max(0,o-z),fn.TOP_LEFT):new Vt(n.left+O,n.top+z),this.topRightPaddingBox=h>0||d>0?Hn(n.left+Math.min(K,n.width-M),n.top+z,K>n.width+M?0:Math.max(0,h-M),Math.max(0,d-z),fn.TOP_RIGHT):new Vt(n.left+n.width-M,n.top+z),this.bottomRightPaddingBox=C>0||b>0?Hn(n.left+Math.min(te,n.width-O),n.top+Math.min(Q,n.height-P),Math.max(0,C-M),Math.max(0,b-P),fn.BOTTOM_RIGHT):new Vt(n.left+n.width-M,n.top+n.height-P),this.bottomLeftPaddingBox=F>0||k>0?Hn(n.left+O,n.top+Math.min(re,n.height-P),Math.max(0,F-O),Math.max(0,k-P),fn.BOTTOM_LEFT):new Vt(n.left+O,n.top+n.height-P),this.topLeftContentBox=s>0||o>0?Hn(n.left+O+G,n.top+z+ee,Math.max(0,s-(O+G)),Math.max(0,o-(z+ee)),fn.TOP_LEFT):new Vt(n.left+O+G,n.top+z+ee),this.topRightContentBox=h>0||d>0?Hn(n.left+Math.min(K,n.width+O+G),n.top+z+ee,K>n.width+O+G?0:h-O+G,d-(z+ee),fn.TOP_RIGHT):new Vt(n.left+n.width-(M+Y),n.top+z+ee),this.bottomRightContentBox=C>0||b>0?Hn(n.left+Math.min(te,n.width-(O+G)),n.top+Math.min(Q,n.height+z+ee),Math.max(0,C-(M+Y)),b-(P+X),fn.BOTTOM_RIGHT):new Vt(n.left+n.width-(M+Y),n.top+n.height-(P+X)),this.bottomLeftContentBox=F>0||k>0?Hn(n.left+O+G,n.top+re,Math.max(0,F-(O+G)),k-(P+X),fn.BOTTOM_LEFT):new Vt(n.left+O+G,n.top+n.height-(P+X))}return t})(),fn;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(fn||(fn={}));var Hn=function(t,e,r,n,i){var s=4*((Math.sqrt(2)-1)/3),o=r*s,c=n*s,h=t+r,d=e+n;switch(i){case fn.TOP_LEFT:return new _g(new Vt(t,d),new Vt(t,d-c),new Vt(h-o,e),new Vt(h,e));case fn.TOP_RIGHT:return new _g(new Vt(t,e),new Vt(t+o,e),new Vt(h,d-c),new Vt(h,d));case fn.BOTTOM_RIGHT:return new _g(new Vt(h,e),new Vt(h,e+c),new Vt(t+o,d),new Vt(t,d));case fn.BOTTOM_LEFT:default:return new _g(new Vt(h,d),new Vt(h-o,d),new Vt(t,e+c),new Vt(t,e))}},O1=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},KG=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},L1=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},zG=(function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t})(),Tg=(function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t})(),WG=(function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t})(),qG=function(t){return t.type===0},xF=function(t){return t.type===1},XG=function(t){return t.type===2},UB=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},YG=function(t,e,r,n,i){return t.map(function(s,o){switch(o){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+i);case 3:return s.add(e,r+i)}return s})},wF=(function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t})(),vF=(function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new GG(this.container),this.container.styles.opacity<1&&this.effects.push(new WG(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new zG(n,i,s))}if(this.container.styles.overflowX!==0){var o=O1(this.curves),c=L1(this.curves);UB(o,c)?this.effects.push(new Tg(o,6)):(this.effects.push(new Tg(o,2)),this.effects.push(new Tg(c,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var s=n.effects.filter(function(h){return!xF(h)});if(r||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=O1(n.curves),c=L1(n.curves);UB(o,c)||i.unshift(new Tg(c,6))}}else i.unshift.apply(i,s);n=n.parent}return i.filter(function(h){return Si(h.target,e)})},t})(),Uw=function(t,e,r,n){t.container.elements.forEach(function(i){var s=Si(i.flags,4),o=Si(i.flags,2),c=new vF(i,t);Si(i.styles.display,2048)&&n.push(c);var h=Si(i.flags,8)?[]:n;if(s||o){var d=s||i.styles.isPositioned()?r:e,m=new wF(c);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var C=i.styles.zIndex.order;if(C<0){var b=0;d.negativeZIndex.some(function(F,k){return C>F.element.container.styles.zIndex.order?(b=k,!1):b>0}),d.negativeZIndex.splice(b,0,m)}else if(C>0){var I=0;d.positiveZIndex.some(function(F,k){return C>=F.element.container.styles.zIndex.order?(I=k+1,!1):I>0}),d.positiveZIndex.splice(I,0,m)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(m)}else i.styles.isFloating()?d.nonPositionedFloats.push(m):d.nonPositionedInlineLevel.push(m);Uw(c,m,s?m:r,h)}else i.styles.isInlineLevel()?e.inlineLevel.push(c):e.nonInlineLevel.push(c),Uw(c,e,r,h);Si(i.flags,8)&&yF(i,h)})},yF=function(t,e){for(var r=t instanceof Nw?t.start:1,n=t instanceof Nw?t.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof iF&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=ud(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},JG=function(t){var e=new vF(t,null),r=new wF(e),n=[];return Uw(e,r,r,n),yF(e.container,n),r},MB=function(t,e){switch(e){case 0:return Va(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Va(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Va(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Va(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},ZG=function(t,e){switch(e){case 0:return Va(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Va(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Va(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Va(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},$G=function(t,e){switch(e){case 0:return Va(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Va(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Va(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Va(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},eK=function(t,e){switch(e){case 0:return Bg(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Bg(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Bg(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Bg(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Bg=function(t,e){var r=[];return Ha(t)?r.push(t.subdivide(.5,!1)):r.push(t),Ha(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Va=function(t,e,r,n){var i=[];return Ha(t)?i.push(t.subdivide(.5,!1)):i.push(t),Ha(r)?i.push(r.subdivide(.5,!0)):i.push(r),Ha(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),Ha(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},CF=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},P1=function(t){var e=t.styles,r=t.bounds,n=Rn(e.paddingLeft,r.width),i=Rn(e.paddingRight,r.width),s=Rn(e.paddingTop,r.width),o=Rn(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+s+o))},tK=function(t,e){return t===0?e.bounds:t===2?P1(e):CF(e)},rK=function(t,e){return t===0?e.bounds:t===2?P1(e):CF(e)},b2=function(t,e,r){var n=tK(Du(t.styles.backgroundOrigin,e),t),i=rK(Du(t.styles.backgroundClip,e),t),s=nK(Du(t.styles.backgroundSize,e),r,n),o=s[0],c=s[1],h=_f(Du(t.styles.backgroundPosition,e),n.width-o,n.height-c),d=iK(Du(t.styles.backgroundRepeat,e),h,s,n,i),m=Math.round(n.left+h[0]),C=Math.round(n.top+h[1]);return[d,m,C,o,c]},Tu=function(t){return bn(t)&&t.value===Wu.AUTO},Sg=function(t){return typeof t=="number"},nK=function(t,e,r){var n=e[0],i=e[1],s=e[2],o=t[0],c=t[1];if(!o)return[0,0];if(Ci(o)&&c&&Ci(c))return[Rn(o,r.width),Rn(c,r.height)];var h=Sg(s);if(bn(o)&&(o.value===Wu.CONTAIN||o.value===Wu.COVER)){if(Sg(s)){var d=r.width/r.height;return d<s!=(o.value===Wu.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var m=Sg(n),C=Sg(i),b=m||C;if(Tu(o)&&(!c||Tu(c))){if(m&&C)return[n,i];if(!h&&!b)return[r.width,r.height];if(b&&h){var I=m?n:i*s,F=C?i:n/s;return[I,F]}var k=m?n:r.width,U=C?i:r.height;return[k,U]}if(h){var V=0,K=0;return Ci(o)?V=Rn(o,r.width):Ci(c)&&(K=Rn(c,r.height)),Tu(o)?V=K*s:(!c||Tu(c))&&(K=V/s),[V,K]}var Q=null,te=null;if(Ci(o)?Q=Rn(o,r.width):c&&Ci(c)&&(te=Rn(c,r.height)),Q!==null&&(!c||Tu(c))&&(te=m&&C?Q/n*i:r.height),te!==null&&Tu(o)&&(Q=m&&C?te/i*n:r.width),Q!==null&&te!==null)return[Q,te];throw new Error("Unable to calculate background-size for element")},Du=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},iK=function(t,e,r,n,i){var s=e[0],o=e[1],c=r[0],h=r[1];switch(t){case 2:return[new Vt(Math.round(n.left),Math.round(n.top+o)),new Vt(Math.round(n.left+n.width),Math.round(n.top+o)),new Vt(Math.round(n.left+n.width),Math.round(h+n.top+o)),new Vt(Math.round(n.left),Math.round(h+n.top+o))];case 3:return[new Vt(Math.round(n.left+s),Math.round(n.top)),new Vt(Math.round(n.left+s+c),Math.round(n.top)),new Vt(Math.round(n.left+s+c),Math.round(n.height+n.top)),new Vt(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Vt(Math.round(n.left+s),Math.round(n.top+o)),new Vt(Math.round(n.left+s+c),Math.round(n.top+o)),new Vt(Math.round(n.left+s+c),Math.round(n.top+o+h)),new Vt(Math.round(n.left+s),Math.round(n.top+o+h))];default:return[new Vt(Math.round(i.left),Math.round(i.top)),new Vt(Math.round(i.left+i.width),Math.round(i.top)),new Vt(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Vt(Math.round(i.left),Math.round(i.height+i.top))]}},sK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",OB="Hidden Text",aK=(function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),i.src=sK,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(OB)),n.appendChild(s),n.appendChild(i);var c=i.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(OB)),n.style.lineHeight="normal",i.style.verticalAlign="super";var h=i.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:c,middle:h}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t})(),EF=(function(){function t(e,r){this.context=e,this.options=r}return t})(),oK=1e4,lK=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new aK(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(r){this.ctx.save(),XG(r)&&(this.ctx.globalAlpha=r.opacity),qG(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),xF(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Bs(this,void 0,void 0,function(){var n;return cs(this,function(i){switch(i.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Bs(this,void 0,void 0,function(){return cs(this,function(n){switch(n.label){case 0:if(Si(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,i){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+i);else{var o=hy(r.text);o.reduce(function(c,h){return s.ctx.fillText(h,c,r.bounds.top+i),c+s.ctx.measureText(h).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),i=dK(r.fontFamily).join(", "),s=Ld(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(r,n){return Bs(this,void 0,void 0,function(){var i,s,o,c,h,d,m,C,b=this;return cs(this,function(I){return i=this.createFontStyle(n),s=i[0],o=i[1],c=i[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",h=this.fontMetrics.getMetrics(o,c),d=h.baseline,m=h.middle,C=n.paintOrder,r.textBounds.forEach(function(F){C.forEach(function(k){switch(k){case 0:b.ctx.fillStyle=Ui(n.color),b.renderTextWithLetterSpacing(F,n.letterSpacing,d);var U=n.textShadow;U.length&&F.text.trim().length&&(U.slice(0).reverse().forEach(function(V){b.ctx.shadowColor=Ui(V.color),b.ctx.shadowOffsetX=V.offsetX.number*b.options.scale,b.ctx.shadowOffsetY=V.offsetY.number*b.options.scale,b.ctx.shadowBlur=V.blur.number,b.renderTextWithLetterSpacing(F,n.letterSpacing,d)}),b.ctx.shadowColor="",b.ctx.shadowOffsetX=0,b.ctx.shadowOffsetY=0,b.ctx.shadowBlur=0),n.textDecorationLine.length&&(b.ctx.fillStyle=Ui(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(V){switch(V){case 1:b.ctx.fillRect(F.bounds.left,Math.round(F.bounds.top+d),F.bounds.width,1);break;case 2:b.ctx.fillRect(F.bounds.left,Math.round(F.bounds.top),F.bounds.width,1);break;case 3:b.ctx.fillRect(F.bounds.left,Math.ceil(F.bounds.top+m),F.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&F.text.trim().length&&(b.ctx.strokeStyle=Ui(n.webkitTextStrokeColor),b.ctx.lineWidth=n.webkitTextStrokeWidth,b.ctx.lineJoin=window.chrome?"miter":"round",b.ctx.strokeText(F.text,F.bounds.left,F.bounds.top+d)),b.ctx.strokeStyle="",b.ctx.lineWidth=0,b.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,i){if(i&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=P1(r),o=L1(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Bs(this,void 0,void 0,function(){var n,i,s,o,c,h,K,K,d,m,C,b,te,I,F,re,k,U,V,K,Q,te,re;return cs(this,function(z){switch(z.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,i=r.curves,s=n.styles,o=0,c=n.textNodes,z.label=1;case 1:return o<c.length?(h=c[o],[4,this.renderTextNode(h,s)]):[3,4];case 2:z.sent(),z.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof tF))return[3,8];z.label=5;case 5:return z.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return K=z.sent(),this.renderReplacedElement(n,i,K),[3,8];case 7:return z.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof rF&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof nF))return[3,12];z.label=9;case 9:return z.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return K=z.sent(),this.renderReplacedElement(n,i,K),[3,12];case 11:return z.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof oF&&n.tree?(d=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,d.render(n.tree)]):[3,14];case 13:m=z.sent(),n.width&&n.height&&this.ctx.drawImage(m,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),z.label=14;case 14:if(n instanceof gy&&(C=Math.min(n.bounds.width,n.bounds.height),n.type===k1?n.checked&&(this.ctx.save(),this.path([new Vt(n.bounds.left+C*.39363,n.bounds.top+C*.79),new Vt(n.bounds.left+C*.16,n.bounds.top+C*.5549),new Vt(n.bounds.left+C*.27347,n.bounds.top+C*.44071),new Vt(n.bounds.left+C*.39694,n.bounds.top+C*.5649),new Vt(n.bounds.left+C*.72983,n.bounds.top+C*.23),new Vt(n.bounds.left+C*.84,n.bounds.top+C*.34085),new Vt(n.bounds.left+C*.39363,n.bounds.top+C*.79)]),this.ctx.fillStyle=Ui(bB),this.ctx.fill(),this.ctx.restore()):n.type===D1&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+C/2,n.bounds.top+C/2,C/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ui(bB),this.ctx.fill(),this.ctx.restore())),AK(n)&&n.value.length){switch(b=this.createFontStyle(s),te=b[0],I=b[1],F=this.fontMetrics.getMetrics(te,I).baseline,this.ctx.font=te,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=uK(n.styles.textAlign),re=P1(n),k=0,n.styles.textAlign){case 1:k+=re.width/2;break;case 2:k+=re.width;break}U=re.add(k,0,0,-re.height/2+1),this.ctx.save(),this.path([new Vt(re.left,re.top),new Vt(re.left+re.width,re.top),new Vt(re.left+re.width,re.top+re.height),new Vt(re.left,re.top+re.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Vf(n.value,U),s.letterSpacing,F),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Si(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(V=n.styles.listStyleImage,V.type!==0)return[3,18];K=void 0,Q=V.url,z.label=15;case 15:return z.trys.push([15,17,,18]),[4,this.context.cache.match(Q)];case 16:return K=z.sent(),this.ctx.drawImage(K,n.bounds.left-(K.width+10),n.bounds.top),[3,18];case 17:return z.sent(),this.context.logger.error("Error loading list-style-image "+Q),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(te=this.createFontStyle(s)[0],this.ctx.font=te,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",re=new Bl(n.bounds.left,n.bounds.top+Rn(n.styles.paddingTop,n.bounds.width),n.bounds.width,oB(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Vf(r.listValue,re),s.letterSpacing,oB(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),z.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Bs(this,void 0,void 0,function(){var n,i,V,s,o,V,c,h,V,d,m,V,C,b,V,I,F,V,k,U,V;return cs(this,function(K){switch(K.label){case 0:if(Si(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:K.sent(),n=0,i=r.negativeZIndex,K.label=2;case 2:return n<i.length?(V=i[n],[4,this.renderStack(V)]):[3,5];case 3:K.sent(),K.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:K.sent(),s=0,o=r.nonInlineLevel,K.label=7;case 7:return s<o.length?(V=o[s],[4,this.renderNode(V)]):[3,10];case 8:K.sent(),K.label=9;case 9:return s++,[3,7];case 10:c=0,h=r.nonPositionedFloats,K.label=11;case 11:return c<h.length?(V=h[c],[4,this.renderStack(V)]):[3,14];case 12:K.sent(),K.label=13;case 13:return c++,[3,11];case 14:d=0,m=r.nonPositionedInlineLevel,K.label=15;case 15:return d<m.length?(V=m[d],[4,this.renderStack(V)]):[3,18];case 16:K.sent(),K.label=17;case 17:return d++,[3,15];case 18:C=0,b=r.inlineLevel,K.label=19;case 19:return C<b.length?(V=b[C],[4,this.renderNode(V)]):[3,22];case 20:K.sent(),K.label=21;case 21:return C++,[3,19];case 22:I=0,F=r.zeroOrAutoZIndexOrTransformedOrOpacity,K.label=23;case 23:return I<F.length?(V=F[I],[4,this.renderStack(V)]):[3,26];case 24:K.sent(),K.label=25;case 25:return I++,[3,23];case 26:k=0,U=r.positiveZIndex,K.label=27;case 27:return k<U.length?(V=U[k],[4,this.renderStack(V)]):[3,30];case 28:K.sent(),K.label=29;case 29:return k++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(i,s){var o=Ha(i)?i.start:i;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),Ha(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(r,n,i,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(r,n,i){var s;if(r.width===n&&r.height===i)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,c=o.createElement("canvas");c.width=Math.max(1,n),c.height=Math.max(1,i);var h=c.getContext("2d");return h.drawImage(r,0,0,r.width,r.height,0,0,n,i),c},e.prototype.renderBackgroundImage=function(r){return Bs(this,void 0,void 0,function(){var n,i,s,o,c,h;return cs(this,function(d){switch(d.label){case 0:n=r.styles.backgroundImage.length-1,i=function(m){var C,b,I,ee,de,we,G,Ie,P,F,ee,de,we,G,Ie,k,U,V,K,Q,te,re,z,M,P,O,ee,Y,X,G,Ie,ge,de,we,Ge,be,De,ne,q,ce,oe,ae;return cs(this,function(Ee){switch(Ee.label){case 0:if(m.type!==0)return[3,5];C=void 0,b=m.url,Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),[4,s.context.cache.match(b)];case 2:return C=Ee.sent(),[3,4];case 3:return Ee.sent(),s.context.logger.error("Error loading background-image "+b),[3,4];case 4:return C&&(I=b2(r,n,[C.width,C.height,C.width/C.height]),ee=I[0],de=I[1],we=I[2],G=I[3],Ie=I[4],P=s.ctx.createPattern(s.resizeImage(C,G,Ie),"repeat"),s.renderRepeat(ee,P,de,we)),[3,6];case 5:qH(m)?(F=b2(r,n,[null,null,null]),ee=F[0],de=F[1],we=F[2],G=F[3],Ie=F[4],k=VH(m.angle,G,Ie),U=k[0],V=k[1],K=k[2],Q=k[3],te=k[4],re=document.createElement("canvas"),re.width=G,re.height=Ie,z=re.getContext("2d"),M=z.createLinearGradient(V,Q,K,te),sB(m.stops,U).forEach(function(Ke){return M.addColorStop(Ke.stop,Ui(Ke.color))}),z.fillStyle=M,z.fillRect(0,0,G,Ie),G>0&&Ie>0&&(P=s.ctx.createPattern(re,"repeat"),s.renderRepeat(ee,P,de,we))):XH(m)&&(O=b2(r,n,[null,null,null]),ee=O[0],Y=O[1],X=O[2],G=O[3],Ie=O[4],ge=m.position.length===0?[uy]:m.position,de=Rn(ge[0],G),we=Rn(ge[ge.length-1],Ie),Ge=GH(m,de,we,G,Ie),be=Ge[0],De=Ge[1],be>0&&De>0&&(ne=s.ctx.createRadialGradient(Y+de,X+we,0,Y+de,X+we,be),sB(m.stops,be*2).forEach(function(Ke){return ne.addColorStop(Ke.stop,Ui(Ke.color))}),s.path(ee),s.ctx.fillStyle=ne,be!==De?(q=r.bounds.left+.5*r.bounds.width,ce=r.bounds.top+.5*r.bounds.height,oe=De/be,ae=1/oe,s.ctx.save(),s.ctx.translate(q,ce),s.ctx.transform(1,0,0,oe,0,0),s.ctx.translate(-q,-ce),s.ctx.fillRect(Y,ae*(X-ce)+ce,G,Ie*ae),s.ctx.restore()):s.ctx.fill())),Ee.label=6;case 6:return n--,[2]}})},s=this,o=0,c=r.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return o<c.length?(h=c[o],[5,i(h)]):[3,4];case 2:d.sent(),d.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,i){return Bs(this,void 0,void 0,function(){return cs(this,function(s){return this.path(MB(i,n)),this.ctx.fillStyle=Ui(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,i,s){return Bs(this,void 0,void 0,function(){var o,c;return cs(this,function(h){switch(h.label){case 0:return n<3?[4,this.renderSolidBorder(r,i,s)]:[3,2];case 1:return h.sent(),[2];case 2:return o=ZG(s,i),this.path(o),this.ctx.fillStyle=Ui(r),this.ctx.fill(),c=$G(s,i),this.path(c),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Bs(this,void 0,void 0,function(){var n,i,s,o,c,h,d,m,C=this;return cs(this,function(b){switch(b.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,i=!BA(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=cK(Du(n.backgroundClip,0),r.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),BA(n.backgroundColor)||(this.ctx.fillStyle=Ui(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:b.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(I){C.ctx.save();var F=O1(r.curves),k=I.inset?0:oK,U=YG(F,-k+(I.inset?1:-1)*I.spread.number,(I.inset?1:-1)*I.spread.number,I.spread.number*(I.inset?-2:2),I.spread.number*(I.inset?-2:2));I.inset?(C.path(F),C.ctx.clip(),C.mask(U)):(C.mask(F),C.ctx.clip(),C.path(U)),C.ctx.shadowOffsetX=I.offsetX.number+k,C.ctx.shadowOffsetY=I.offsetY.number,C.ctx.shadowColor=Ui(I.color),C.ctx.shadowBlur=I.blur.number,C.ctx.fillStyle=I.inset?Ui(I.color):"rgba(0,0,0,1)",C.ctx.fill(),C.ctx.restore()}),b.label=2;case 2:c=0,h=0,d=s,b.label=3;case 3:return h<d.length?(m=d[h],m.style!==0&&!BA(m.color)&&m.width>0?m.style!==2?[3,5]:[4,this.renderDashedDottedBorder(m.color,m.width,c,r.curves,2)]:[3,11]):[3,13];case 4:return b.sent(),[3,11];case 5:return m.style!==3?[3,7]:[4,this.renderDashedDottedBorder(m.color,m.width,c,r.curves,3)];case 6:return b.sent(),[3,11];case 7:return m.style!==4?[3,9]:[4,this.renderDoubleBorder(m.color,m.width,c,r.curves)];case 8:return b.sent(),[3,11];case 9:return[4,this.renderSolidBorder(m.color,c,r.curves)];case 10:b.sent(),b.label=11;case 11:c++,b.label=12;case 12:return h++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,i,s,o){return Bs(this,void 0,void 0,function(){var c,h,d,m,C,b,I,F,k,U,V,K,Q,te,re,z,re,z;return cs(this,function(M){return this.ctx.save(),c=eK(s,i),h=MB(s,i),o===2&&(this.path(h),this.ctx.clip()),Ha(h[0])?(d=h[0].start.x,m=h[0].start.y):(d=h[0].x,m=h[0].y),Ha(h[1])?(C=h[1].end.x,b=h[1].end.y):(C=h[1].x,b=h[1].y),i===0||i===2?I=Math.abs(d-C):I=Math.abs(m-b),this.ctx.beginPath(),o===3?this.formatPath(c):this.formatPath(h.slice(0,2)),F=n<3?n*3:n*2,k=n<3?n*2:n,o===3&&(F=n,k=n),U=!0,I<=F*2?U=!1:I<=F*2+k?(V=I/(2*F+k),F*=V,k*=V):(K=Math.floor((I+k)/(F+k)),Q=(I-K*F)/(K-1),te=(I-(K+1)*F)/K,k=te<=0||Math.abs(k-Q)<Math.abs(k-te)?Q:te),U&&(o===3?this.ctx.setLineDash([0,F+k]):this.ctx.setLineDash([F,k])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ui(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Ha(h[0])&&(re=h[3],z=h[0],this.ctx.beginPath(),this.formatPath([new Vt(re.end.x,re.end.y),new Vt(z.start.x,z.start.y)]),this.ctx.stroke()),Ha(h[1])&&(re=h[1],z=h[2],this.ctx.beginPath(),this.formatPath([new Vt(re.end.x,re.end.y),new Vt(z.start.x,z.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Bs(this,void 0,void 0,function(){var n;return cs(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=JG(r),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(EF),AK=function(t){return t instanceof aF||t instanceof sF?!0:t instanceof gy&&t.type!==D1&&t.type!==k1},cK=function(t,e){switch(t){case 0:return O1(e);case 2:return KG(e);case 1:default:return L1(e)}},uK=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},fK=["-apple-system","system-ui"],dK=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return fK.indexOf(e)===-1}):t},hK=(function(t){go(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(r){return Bs(this,void 0,void 0,function(){var n,i;return cs(this,function(s){switch(s.label){case 0:return n=Iw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,gK(n)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(EF),gK=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},pK=(function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,ag([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,ag([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,ag([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,ag([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t})(),mK=(function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new pK({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new OG(this,e)}return t.instanceCount=1,t})(),Uo=function(t,e){return e===void 0&&(e={}),xK(t,e)};typeof window<"u"&&mF.setContext(window);var xK=function(t,e){return Bs(void 0,void 0,void 0,function(){var r,n,i,s,o,c,h,d,m,C,b,I,F,k,U,V,K,Q,te,re,M,z,M,P,O,ee,Y,X,G,Ie,ge,de,we,Ge,be,De,ne,q,ce,oe;return cs(this,function(ae){switch(ae.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return i={allowTaint:(P=e.allowTaint)!==null&&P!==void 0?P:!1,imageTimeout:(O=e.imageTimeout)!==null&&O!==void 0?O:15e3,proxy:e.proxy,useCORS:(ee=e.useCORS)!==null&&ee!==void 0?ee:!1},s=hw({logging:(Y=e.logging)!==null&&Y!==void 0?Y:!0,cache:e.cache},i),o={windowWidth:(X=e.windowWidth)!==null&&X!==void 0?X:n.innerWidth,windowHeight:(G=e.windowHeight)!==null&&G!==void 0?G:n.innerHeight,scrollX:(Ie=e.scrollX)!==null&&Ie!==void 0?Ie:n.pageXOffset,scrollY:(ge=e.scrollY)!==null&&ge!==void 0?ge:n.pageYOffset},c=new Bl(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),h=new mK(s,c),d=(de=e.foreignObjectRendering)!==null&&de!==void 0?de:!1,m={allowTaint:(we=e.allowTaint)!==null&&we!==void 0?we:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},h.logger.debug("Starting document clone with size "+c.width+"x"+c.height+" scrolled to "+-c.left+","+-c.top),C=new kB(h,t,m),b=C.clonedReferenceElement,b?[4,C.toIFrame(r,c)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return I=ae.sent(),F=py(b)||vG(b)?Y7(b.ownerDocument):Rp(h,b),k=F.width,U=F.height,V=F.left,K=F.top,Q=wK(h,b,e.backgroundColor),te={canvas:e.canvas,backgroundColor:Q,scale:(be=(Ge=e.scale)!==null&&Ge!==void 0?Ge:n.devicePixelRatio)!==null&&be!==void 0?be:1,x:((De=e.x)!==null&&De!==void 0?De:0)+V,y:((ne=e.y)!==null&&ne!==void 0?ne:0)+K,width:(q=e.width)!==null&&q!==void 0?q:Math.ceil(k),height:(ce=e.height)!==null&&ce!==void 0?ce:Math.ceil(U)},d?(h.logger.debug("Document cloned, using foreign object rendering"),M=new hK(h,te),[4,M.render(b)]):[3,3];case 2:return re=ae.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+V+","+K+" with size "+k+"x"+U+" using computed rendering"),h.logger.debug("Starting DOM parsing"),z=AF(h,b),Q===z.styles.backgroundColor&&(z.styles.backgroundColor=wl.TRANSPARENT),h.logger.debug("Starting renderer for element at "+te.x+","+te.y+" with size "+te.width+"x"+te.height),M=new lK(h,te),[4,M.render(z)];case 4:re=ae.sent(),ae.label=5;case 5:return(!((oe=e.removeContainer)!==null&&oe!==void 0)||oe)&&(kB.destroy(I)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,re]}})})},wK=function(t,e,r){var n=e.ownerDocument,i=n.documentElement?Hf(t,getComputedStyle(n.documentElement).backgroundColor):wl.TRANSPARENT,s=n.body?Hf(t,getComputedStyle(n.body).backgroundColor):wl.TRANSPARENT,o=typeof r=="string"?Hf(t,r):r===null?wl.TRANSPARENT:4294967295;return e===n.documentElement?BA(i)?BA(s)?o:s:i:o};const vK=({currentUser:t,onLogout:e,onNavigateToProducts:r,onNavigateToCreateInvoice:n,onNavigateToSettings:i,onNavigateToCustomers:s,onNavigateToNotifications:o,onNavigateToSuppliers:c,onNavigateToClientRequests:h,onNavigateToCheckbook:d,onNavigateToSpecialOrders:m,onNavigateToQuotes:C,onNavigateToTranslation:b,invoices:I,products:F,onEditInvoice:k,onDeleteInvoice:U,onNewInvoiceForCustomer:V,settings:K,unreadNotificationsCount:Q,pendingStaffCount:te=0})=>{const[re,z]=xe.useState("unpaid"),[M,P]=xe.useState(!1),[O,ee]=xe.useState(""),[Y,X]=xe.useState(!1),[G,Ie]=xe.useState(null),[ge,de]=xe.useState(!1);xe.useRef(null);const we=xe.useRef(null);xe.useEffect(()=>{if(G&&K.showBarcode)try{setTimeout(()=>{["hidden-barcode","share-barcode"].forEach(ae=>{const Ee=document.getElementById(ae);Ee&&typeof JsBarcode<"u"&&JsBarcode(Ee,G.id,{format:"CODE128",width:1.5,height:40,displayValue:!0,fontSize:12,lineColor:"#000000"})})},100)}catch(oe){console.error(oe)}},[G,K.showBarcode]);const Ge=oe=>new Intl.NumberFormat("ar-MA",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(oe),be=async()=>{if(!(!G||!we.current)){X(!0);try{(await Uo(we.current,{scale:3,backgroundColor:"#ffffff",useCORS:!0,logging:!1,width:450})).toBlob(async ae=>{if(!ae){X(!1),alert("  ");return}try{const Ee=new ClipboardItem({"image/png":ae});await navigator.clipboard.write([Ee]);let Ke=G.phone?G.phone.replace(/\D/g,""):"";(Ke.startsWith("06")||Ke.startsWith("07")||Ke.startsWith("05"))&&(Ke="212"+Ke.substring(1)),window.open(Ke?`https://wa.me/${Ke}`:"https://wa.me/","_blank")}catch{alert("   ."),window.open("https://wa.me/","_blank")}finally{X(!1)}},"image/png",1)}catch{X(!1)}}},De=()=>{G&&vR(G,K)},ne=()=>{G&&U&&(U(G.id),Ie(null),de(!1))},q=xe.useMemo(()=>I.filter(oe=>{const ae=re==="all"?!0:oe.type===re,Ee=oe.name.includes(O)||oe.id.includes(O);return ae&&Ee}).sort((oe,ae)=>ae.createdAt-oe.createdAt),[I,re,O]),ce=t.permissions.isManager&&te>0;return u.jsxs("div",{className:"w-full min-h-screen md:h-auto bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative shadow-2xl md:shadow-none font-['Tajawal']",children:[G&&u.jsxs("div",{ref:we,style:{position:"fixed",top:0,left:-9999,width:"450px",padding:"30px",backgroundColor:"white",color:"black",fontFamily:"'Tajawal', sans-serif",direction:"rtl",zIndex:-1,border:"1px solid #eee"},children:[u.jsxs("div",{style:{textAlign:"center",borderBottom:"2px solid #000",paddingBottom:"15px",marginBottom:"20px"},children:[K.businessLogo&&u.jsx("img",{src:K.businessLogo,alt:"Logo",style:{maxWidth:"80px",marginBottom:"10px"}}),u.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",margin:"0 0 5px 0"},children:K.businessName}),u.jsx("h1",{style:{fontSize:"26px",fontWeight:"900",margin:"0 0 10px 0"},children:" "}),u.jsxs("p",{style:{fontSize:"14px",color:"#555",margin:0},children:[" : ",G.id]}),u.jsxs("p",{style:{fontSize:"14px",color:"#555",margin:0},children:[": ",G.date]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("p",{style:{fontSize:"16px",margin:"0 0 5px 0",color:"#666"},children:":"}),u.jsx("h2",{style:{fontSize:"22px",fontWeight:"bold",margin:0},children:G.name}),G.phone&&u.jsx("p",{style:{fontSize:"14px",color:"#888",margin:"5px 0 0 0"},children:G.phone})]}),u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"#f3f4f6"},children:[u.jsx("th",{style:{padding:"10px",borderBottom:"2px solid #000",textAlign:"right",fontSize:"16px"},children:""}),u.jsx("th",{style:{padding:"10px",borderBottom:"2px solid #000",textAlign:"center",fontSize:"16px"},children:""}),u.jsx("th",{style:{padding:"10px",borderBottom:"2px solid #000",textAlign:"left",fontSize:"16px"},children:""})]})}),u.jsx("tbody",{children:G.items.map((oe,ae)=>u.jsxs("tr",{style:{borderBottom:"1px dashed #ccc"},children:[u.jsx("td",{style:{padding:"10px",fontSize:"16px",fontWeight:"bold"},children:oe.productName}),u.jsx("td",{style:{padding:"10px",fontSize:"16px",textAlign:"center"},children:oe.count}),u.jsx("td",{style:{padding:"10px",fontSize:"18px",fontWeight:"900",textAlign:"left"},children:Ge(oe.total)})]},ae))})]}),u.jsxs("div",{style:{borderTop:"2px solid #000",paddingTop:"15px",marginTop:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{fontSize:"18px",fontWeight:"bold"},children:" :"}),u.jsxs("span",{style:{fontSize:"24px",fontWeight:"900"},children:[Ge(G.amount)," ."]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px"},children:[u.jsxs("span",{style:{fontSize:"16px"},children:[" (",G.method==="direct"?"":"","):"]}),u.jsxs("span",{style:{fontSize:"16px",fontWeight:"bold",color:"#059669"},children:[Ge(G.paidAmount)," ."]})]}),G.remainingAmount>0&&u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px",backgroundColor:"#fff5f5",padding:"10px",borderRadius:"8px"},children:[u.jsx("span",{style:{fontSize:"18px",fontWeight:"900",color:"#dc2626"},children:" ():"}),u.jsxs("span",{style:{fontSize:"20px",fontWeight:"900",color:"#dc2626",direction:"ltr"},children:[Ge(G.remainingAmount)," DH"]})]}),K.showBarcode&&u.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:u.jsx("svg",{id:"share-barcode"})}),u.jsx("div",{style:{marginTop:"30px",textAlign:"center",fontSize:"12px",color:"#888",borderTop:"1px solid #eee",paddingTop:"10px"},children:u.jsxs("p",{children:["   - ",K.signatureName||"MAMA App"]})})]}),u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20 md:sticky md:top-0 md:border-b md:border-gray-800 md:bg-black/90 md:backdrop-blur-md",children:[u.jsxs("h1",{className:"text-xl font-bold text-gray-100",children:["  ",t.name]}),u.jsxs("div",{className:"flex items-center gap-3",children:[t.permissions.viewNotifications&&u.jsxs("button",{onClick:o,className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-gray-400 hover:text-white transition-colors relative active:scale-95",title:"",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),u.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Q>0&&u.jsx("span",{className:"absolute top-2 right-2.5 w-4 h-4 bg-red-500 rounded-full border border-black text-[8px] flex items-center justify-center text-white font-black animate-bounce",children:Q})]}),u.jsxs("button",{onClick:i,className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-gray-400 hover:text-[#57b385] transition-colors relative active:scale-95",title:"",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),ce&&u.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-500 rounded-full border-2 border-black text-[8px] flex items-center justify-center text-white font-black animate-pulse",children:te})]})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto scroll-smooth custom-scrollbar pb-32 md:px-6",children:[ce&&u.jsx("div",{className:"mx-6 md:mx-0 mt-4 animate-in slide-in-from-top duration-500",children:u.jsxs("div",{onClick:i,className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4 flex items-center justify-between cursor-pointer active:scale-[0.98] transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center text-white shadow-lg shadow-orange-900/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-bold text-orange-500",children:"  "}),u.jsxs("p",{className:"text-[10px] text-gray-500",children:[" ",te,"    "]})]})]}),u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"text-orange-500",children:u.jsx("path",{d:"m9 18 6-6-6-6"})})]})}),u.jsxs("div",{className:"md:grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 md:gap-4 md:mb-6 mt-4",children:[t.permissions.manageSuppliers&&u.jsx("div",{className:"px-6 md:px-0 pt-4 pb-0 md:py-0",children:u.jsx("button",{onClick:c,className:"w-full bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 flex items-center justify-between group hover:border-gray-700 transition-all active:scale-[0.98] relative overflow-hidden h-full",children:u.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[u.jsx("div",{className:"w-14 h-14 bg-red-500/10 rounded-2xl flex items-center justify-center text-red-500 border border-red-500/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14c-.6.6-1 1.5-1 2.3v3.7c0 1.1.9 2 2 2h3.7c.9 0 1.7-.4 2.3-1L15.4 15"}),u.jsx("path",{d:"m11 16 2 2"}),u.jsx("path",{d:"m14 13 4 4"}),u.jsx("path",{d:"M22 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0"})]})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"text-lg font-black text-white",children:""}),u.jsx("p",{className:"text-xs text-gray-500",children:" "})]})]})})}),t.permissions.manageRequests&&u.jsx("div",{className:"px-6 md:px-0 pt-3 pb-0 md:py-0",children:u.jsx("button",{onClick:h,className:"w-full bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 flex items-center justify-between group hover:border-gray-700 transition-all active:scale-[0.98] relative overflow-hidden h-full",children:u.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-500/10 rounded-2xl flex items-center justify-center text-blue-500 border border-blue-500/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),u.jsx("path",{d:"M15 2H9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1Z"}),u.jsx("path",{d:"M12 11h4"}),u.jsx("path",{d:"M12 16h4"}),u.jsx("path",{d:"M8 11h.01"}),u.jsx("path",{d:"M8 16h.01"})]})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"text-lg font-black text-white",children:""}),u.jsx("p",{className:"text-xs text-gray-500",children:" "})]})]})})}),t.permissions.manageCheckbook&&u.jsx("div",{className:"px-6 md:px-0 pt-3 pb-0 md:py-0",children:u.jsx("button",{onClick:d,className:"w-full bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 flex items-center justify-between group hover:border-gray-700 transition-all active:scale-[0.98] relative overflow-hidden h-full",children:u.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[u.jsx("div",{className:"w-14 h-14 bg-purple-500/10 rounded-2xl flex items-center justify-center text-purple-500 border border-purple-500/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),u.jsx("line",{x1:"2",y1:"10",x2:"22",y2:"10"})]})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"text-lg font-black text-white",children:""}),u.jsx("p",{className:"text-xs text-gray-500",children:" "})]})]})})}),t.permissions.manageSpecialOrders&&u.jsx("div",{className:"px-6 md:px-0 pt-3 pb-0 md:py-0",children:u.jsx("button",{onClick:m,className:"w-full bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 flex items-center justify-between group hover:border-gray-700 transition-all active:scale-[0.98] relative overflow-hidden h-full",children:u.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[u.jsx("div",{className:"w-14 h-14 bg-rose-500/10 rounded-2xl flex items-center justify-center text-rose-500 border border-rose-500/20",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"text-lg font-black text-white",children:""}),u.jsx("p",{className:"text-xs text-gray-500",children:" "})]})]})})}),u.jsx("div",{className:"px-6 md:px-0 pt-3 pb-0 md:py-0",children:u.jsx("button",{onClick:C,className:"w-full bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 flex items-center justify-between group hover:border-gray-700 transition-all active:scale-[0.98] relative overflow-hidden h-full",children:u.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[u.jsx("div",{className:"w-14 h-14 bg-amber-500/10 rounded-2xl flex items-center justify-center text-amber-500 border border-amber-500/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u.jsx("path",{d:"M14 2v6h6"}),u.jsx("path",{d:"M16 13H8"}),u.jsx("path",{d:"M16 17H8"}),u.jsx("path",{d:"M10 9H8"})]})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"text-lg font-black text-white",children:""}),u.jsx("p",{className:"text-xs text-gray-500",children:" "})]})]})})}),u.jsx("div",{className:"px-6 md:px-0 pt-3 pb-4 md:py-0",children:u.jsx("button",{onClick:b,className:"w-full bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 flex items-center justify-between group hover:border-indigo-500 transition-all active:scale-[0.98] relative overflow-hidden h-full",children:u.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[u.jsx("div",{className:"w-14 h-14 bg-indigo-500/10 rounded-2xl flex items-center justify-center text-indigo-500 border border-indigo-500/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"m5 8 6 6"}),u.jsx("path",{d:"m4 14 6-6 2-3"}),u.jsx("path",{d:"M2 5h12"}),u.jsx("path",{d:"M7 2h1"}),u.jsx("path",{d:"m22 22-5-10-5 10"}),u.jsx("path",{d:"M14 18h6"})]})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"text-lg font-black text-white",children:""}),u.jsx("p",{className:"text-xs text-gray-500",children:" "})]})]})})})]}),u.jsx("div",{className:"px-6 md:px-0 pt-2 pb-2",children:u.jsx("h2",{className:"text-xl font-extrabold text-gray-200 border-r-[6px] border-[#57b385] pr-4 py-1 flex items-center gap-3",children:" "})}),u.jsxs("div",{className:"sticky top-0 bg-[#0c0c0c] z-10 md:static md:bg-transparent",children:[u.jsxs("div",{className:"px-6 md:px-0 flex border-b border-gray-800",children:[u.jsxs("button",{onClick:()=>z("unpaid"),className:`flex-1 py-3 font-bold transition-all relative ${re==="unpaid"?"text-white":"text-gray-500"}`,children:[" ",re==="unpaid"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#57b385]"})]}),u.jsxs("button",{onClick:()=>z("paid"),className:`flex-1 py-3 font-bold transition-all relative ${re==="paid"?"text-white":"text-gray-500"}`,children:["",re==="paid"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#57b385]"})]}),u.jsxs("button",{onClick:()=>z("all"),className:`flex-1 py-3 font-bold transition-all relative ${re==="all"?"text-white":"text-gray-500"}`,children:["",re==="all"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#57b385]"})]})]}),u.jsx("div",{className:"px-6 md:px-0 py-4 flex items-center justify-between min-h-[72px]",children:M?u.jsxs("div",{className:"flex items-center justify-between w-full gap-3 animate-in slide-in-from-right duration-300",children:[u.jsx("button",{onClick:()=>{P(!1),ee("")},className:"w-10 h-10 min-w-[40px] bg-[#57b385] rounded-xl flex items-center justify-center text-white shadow-lg active:scale-90 transition-transform",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("div",{className:"flex-1 max-w-[180px] relative",children:u.jsx("input",{autoFocus:!0,type:"text",placeholder:"   ...",className:"w-full bg-black/40 border border-gray-800 rounded-full py-2.5 px-4 text-xs text-white focus:border-[#57b385] outline-none transition-all text-right placeholder:text-gray-600",value:O,onChange:oe=>ee(oe.target.value)})}),u.jsxs("div",{className:"text-sm font-bold text-gray-100 whitespace-nowrap",children:[u.jsx("span",{className:"text-[#57b385] font-black",children:q.length})," "]})]}):u.jsxs("div",{className:"flex items-center justify-between w-full animate-in fade-in duration-300",children:[u.jsx("button",{onClick:()=>P(!0),className:"w-10 h-10 bg-[#1a1a1a] rounded-xl border border-gray-800 flex items-center justify-center text-gray-400 hover:text-[#57b385] transition-all active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]})}),u.jsxs("div",{className:"text-sm font-bold text-gray-100 flex items-center gap-1.5",children:[u.jsx("span",{className:"text-[#57b385] font-black",children:q.length}),"  "]})]})})]}),u.jsx("div",{className:"px-4 md:px-0 space-y-4 md:space-y-0 md:grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:gap-4",children:q.length>0?q.map(oe=>u.jsxs("div",{onClick:()=>Ie(oe),className:"bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 flex md:flex-col items-center gap-4 group hover:border-gray-700 transition-all active:scale-[0.98] cursor-pointer relative overflow-hidden h-full",children:[u.jsxs("div",{className:"flex items-center gap-4 w-full",children:[u.jsx("div",{className:"w-16 h-16 min-w-[64px] bg-[#1a1a1a] rounded-[1.5rem] border border-gray-800 items-center justify-center text-[#7c8b9a] group-hover:scale-105 transition-all shadow-inner group-hover:border-[#57b385]/30 flex",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("h4",{className:"text-xl md:text-2xl font-black text-white mb-2 tracking-tight",children:oe.name}),u.jsx("span",{className:"text-xs text-gray-500 font-bold whitespace-nowrap",children:new Date(oe.createdAt).toLocaleDateString("ar-MA",{day:"numeric",month:"short"})})]})]}),u.jsx("div",{className:"flex flex-col gap-1.5 items-end w-full md:mt-2",children:u.jsxs("div",{className:"bg-[#1a1a1a]/80 px-4 py-2 rounded-full border border-gray-800/50 flex items-center justify-between w-full shadow-lg",children:[u.jsxs("span",{className:`text-sm font-black ${oe.remainingAmount>0?"text-red-400":"text-[#57b385]"} whitespace-nowrap`,children:[Ge(oe.remainingAmount>0?oe.remainingAmount:oe.amount)," ."]}),u.jsx("div",{className:"bg-[#1a1a1a] px-2 py-0.5 rounded-lg border border-gray-800 text-[#7c8b9a] font-mono text-[9px] font-bold shadow-inner",children:oe.id})]})})]},oe.id)):u.jsx("div",{className:"text-center py-10 text-gray-600 flex flex-col items-center gap-4 col-span-full font-bold",children:"  "})})]}),G&&u.jsx("div",{className:"fixed inset-0 z-[150] bg-[#0c0c0c] md:bg-black/90 md:backdrop-blur-sm flex flex-col md:items-center md:justify-center animate-in slide-in-from-bottom md:slide-in-from-bottom-10 md:fade-in duration-400 overflow-hidden",children:u.jsxs("div",{className:"w-full h-full md:h-auto md:max-h-[90vh] md:max-w-2xl bg-[#0c0c0c] md:bg-[#111111] md:border md:border-gray-800 md:rounded-[3rem] md:shadow-2xl flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"px-6 pt-10 md:pt-6 pb-6 flex justify-between items-center border-b border-gray-800/50 bg-[#0c0c0c] md:bg-[#111111]",children:[u.jsx("button",{onClick:()=>Ie(null),className:"p-3 bg-[#1a1a1a] rounded-2xl border border-gray-800 text-gray-400 hover:text-white active:scale-90 transition-all",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})}),u.jsx("h2",{className:"text-xl font-bold",children:" "}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>de(!0),className:"p-3 bg-red-500/10 rounded-2xl border border-red-500/20 text-red-500 hover:bg-red-500 hover:text-white active:scale-90 transition-all",title:" ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),u.jsx("button",{onClick:()=>V(G.name,G.phone||""),disabled:!t.permissions.createInvoices,className:`p-3 bg-blue-500/10 rounded-2xl border border-blue-500/20 text-blue-500 hover:bg-blue-500 hover:text-white active:scale-90 transition-all ${t.permissions.createInvoices?"":"opacity-20 grayscale"}`,title:"   ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),u.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),u.jsx("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]})}),u.jsx("button",{onClick:()=>k(G),disabled:!t.permissions.createInvoices,className:`p-3 bg-[#57b385]/10 rounded-2xl border border-[#57b385]/20 text-[#57b385] hover:bg-[#57b385] hover:text-white active:scale-90 transition-all ${t.permissions.createInvoices?"":"opacity-20 grayscale"}`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 20h9"}),u.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-8 space-y-6 custom-scrollbar",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("div",{className:"w-20 h-20 bg-[#1a1a1a] rounded-[2rem] border border-gray-800 mx-auto flex items-center justify-center text-4xl font-black text-[#57b385]",children:G.name.charAt(0)}),u.jsx("h3",{className:"text-2xl font-black text-white",children:G.name}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"flex justify-center gap-2",children:[u.jsx("span",{className:"text-[10px] bg-[#1a1a1a] px-3 py-1 rounded-full border border-gray-800 text-gray-400 font-bold",children:G.id}),u.jsx("span",{className:"text-[10px] bg-[#1a1a1a] px-3 py-1 rounded-full border border-gray-800 text-gray-400 font-bold",children:G.date})]}),G.creatorName&&u.jsxs("span",{className:"text-[10px] bg-black/40 px-4 py-1 rounded-full border border-gray-800 text-[#57b385] font-black",children:[": ",G.creatorName]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("h4",{className:"text-xs font-bold text-gray-500 border-b border-gray-800 pb-2",children:["  (",G.items.length,")"]}),u.jsx("div",{className:"md:grid md:grid-cols-2 gap-3",children:G.items.map((oe,ae)=>u.jsxs("div",{className:"bg-[#111111] rounded-2xl border border-gray-800/40 p-4 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-white text-sm mb-1",children:oe.productName}),u.jsxs("div",{className:"text-[10px] text-gray-500 font-mono",children:[u.jsx("span",{className:"text-[#57b385] font-bold",children:oe.count}),"  ",Ge(oe.price)]})]}),u.jsx("div",{className:"font-black text-[#57b385]",children:Ge(oe.total)})]},ae))})]}),u.jsxs("div",{className:"bg-[#1a1a1a] rounded-[2rem] border border-gray-800 p-5 space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-gray-400 font-bold",children:" "}),u.jsxs("span",{className:"text-lg font-black text-white",children:[Ge(G.amount)," ."]})]}),u.jsx("div",{className:"w-full h-px bg-gray-700/50"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-gray-400 font-bold",children:""}),u.jsxs("span",{className:"text-sm font-black text-[#57b385]",children:[Ge(G.paidAmount)," ."]})]}),G.remainingAmount>0&&u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-gray-400 font-bold",children:""}),u.jsxs("span",{className:"text-sm font-black text-red-500",children:[Ge(G.remainingAmount)," ."]})]})]})]}),u.jsxs("div",{className:"p-6 bg-[#0c0c0c] md:bg-[#111111] border-t border-gray-800 pb-10 md:pb-6 flex gap-4",children:[u.jsx("button",{onClick:be,disabled:Y,className:`flex-1 bg-[#25D366] text-white py-4 rounded-2xl font-black text-lg shadow-xl active:scale-[0.98] flex items-center justify-center gap-3 ${Y?"opacity-50 cursor-not-allowed":""}`,children:Y?u.jsx("span",{className:"text-sm",children:" ..."}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),u.jsx("polyline",{points:"16 6 12 2 8 6"}),u.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),""]})}),u.jsx("button",{onClick:De,className:"px-6 bg-[#1a1a1a] border border-gray-800 text-gray-200 py-4 rounded-2xl font-bold active:scale-95 transition-all flex items-center justify-center",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),u.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),u.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]})}),u.jsx("button",{onClick:()=>Ie(null),className:"px-6 bg-[#1a1a1a] border border-gray-800 text-gray-400 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),ge&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"       "})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:ne,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>de(!1),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-[#0c0c0c]/90 backdrop-blur-xl border-t border-gray-800 px-4 py-3 flex justify-between items-center z-30",children:[u.jsx(Ig,{onClick:()=>{},icon:u.jsx(yK,{}),label:"",active:!0}),u.jsx(Ig,{onClick:r,icon:u.jsx(CK,{}),label:""}),u.jsx("div",{className:"relative -top-6",children:u.jsx("button",{onClick:n,disabled:!t.permissions.createInvoices,className:`p-4 rounded-2xl border border-gray-700 shadow-2xl hover:scale-110 active:scale-95 transition-all group ${t.permissions.createInvoices?"bg-[#1a1a1a]":"bg-gray-800 opacity-50 cursor-not-allowed"}`,children:u.jsxs("svg",{className:"group-hover:stroke-[#57b385] transition-colors",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})}),u.jsx(Ig,{onClick:s,icon:u.jsx(EK,{}),label:""}),u.jsx(Ig,{onClick:i,icon:u.jsx(bK,{}),label:""})]})]})},Ig=({icon:t,label:e,active:r=!1,onClick:n})=>u.jsxs("button",{onClick:n,className:`flex flex-col items-center gap-1 transition-all ${r?"text-[#57b385]":"text-gray-500 hover:text-gray-300"}`,children:[u.jsx("div",{className:r?"scale-110":"",children:t}),u.jsx("span",{className:"text-[10px] font-bold",children:e})]}),yK=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),u.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),CK=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),u.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),u.jsx("path",{d:"M12 22V12"})]}),EK=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),bK=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]});/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var bF=1252,_K=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],my={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},xy=function(t){_K.indexOf(t)!=-1&&(bF=my[0]=t)};function TK(){xy(1252)}var so=function(t){xy(t)};function _F(){so(1200),TK()}function LB(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function BK(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function TF(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Sf=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?BK(t.slice(2)):e==254&&r==255?TF(t.slice(2)):e==65279?t.slice(1):t},Ng=function(e){return String.fromCharCode(e)},PB=function(e){return String.fromCharCode(e)},fd,vA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function QB(t){for(var e="",r=0,n=0,i=0,s=0,o=0,c=0,h=0,d=0;d<t.length;)r=t.charCodeAt(d++),s=r>>2,n=t.charCodeAt(d++),o=(r&3)<<4|n>>4,i=t.charCodeAt(d++),c=(n&15)<<2|i>>6,h=i&63,isNaN(n)?c=h=64:isNaN(i)&&(h=64),e+=vA.charAt(s)+vA.charAt(o)+vA.charAt(c)+vA.charAt(h);return e}function Ea(t){var e="",r=0,n=0,i=0,s=0,o=0,c=0,h=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)s=vA.indexOf(t.charAt(d++)),o=vA.indexOf(t.charAt(d++)),r=s<<2|o>>4,e+=String.fromCharCode(r),c=vA.indexOf(t.charAt(d++)),n=(o&15)<<4|c>>2,c!==64&&(e+=String.fromCharCode(n)),h=vA.indexOf(t.charAt(d++)),i=(c&3)<<6|h,h!==64&&(e+=String.fromCharCode(i));return e}var Wr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Oc=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function kA(t){return Wr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function HB(t){return Wr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var io=function(e){return Wr?Oc(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Lc(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function wy(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return wy(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var gA=Wr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Oc(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function SK(t){for(var e=[],r=0,n=t.length+250,i=kA(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)i[r++]=o;else if(o<2048)i[r++]=192|o>>6&31,i[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var c=t.charCodeAt(++s)&1023;i[r++]=240|o>>8&7,i[r++]=128|o>>2&63,i[r++]=128|c>>6&15|(o&3)<<4,i[r++]=128|c&63}else i[r++]=224|o>>12&15,i[r++]=128|o>>6&63,i[r++]=128|o&63;r>n&&(e.push(i.slice(0,r)),r=0,i=kA(65535),n=65530)}return e.push(i.slice(0,r)),gA(e)}var Fs=/\u0000/g,If=/[\u0001-\u0006]/g;function qu(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ao(t,e){var r=""+t;return r.length>=e?r:ri("0",e-r.length)+r}function vy(t,e){var r=""+t;return r.length>=e?r:ri(" ",e-r.length)+r}function Q1(t,e){var r=""+t;return r.length>=e?r:r+ri(" ",e-r.length)}function IK(t,e){var r=""+Math.round(t);return r.length>=e?r:ri("0",e-r.length)+r}function NK(t,e){var r=""+t;return r.length>=e?r:ri("0",e-r.length)+r}var jB=Math.pow(2,32);function Bu(t,e){if(t>jB||t<-jB)return IK(t,e);var r=Math.round(t);return NK(r,e)}function H1(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var VB=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],_2=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function RK(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Ir={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},GB={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},FK={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function j1(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,o=1,c=0,h=1,d=0,m=0,C=Math.floor(i);d<e&&(C=Math.floor(i),c=C*o+s,m=C*d+h,!(i-C<5e-8));)i=1/(i-C),s=o,o=c,h=d,d=m;if(m>e&&(d>e?(m=h,c=s):(m=d,c=o)),!r)return[0,n*c,m];var b=Math.floor(n*c/m);return[b,n*c-b*m,m]}function hc(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,o=[],c={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(c.u)<1e-6&&(c.u=0),e&&e.date1904&&(n+=1462),c.u>.9999&&(c.u=0,++i==86400&&(c.T=i=0,++n,++c.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var h=new Date(1900,0,1);h.setDate(h.getDate()+n-1),o=[h.getFullYear(),h.getMonth()+1,h.getDate()],s=h.getDay(),n<60&&(s=(s+6)%7),r&&(s=LK(h,o))}return c.y=o[0],c.m=o[1],c.d=o[2],c.S=i%60,i=Math.floor(i/60),c.M=i%60,i=Math.floor(i/60),c.H=i,c.q=s,c}var BF=new Date(1899,11,31,0,0,0),kK=BF.getTime(),DK=new Date(1900,2,1,0,0,0);function SF(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=DK&&(r+=1440*60*1e3),(r-(kK+(t.getTimezoneOffset()-BF.getTimezoneOffset())*6e4))/(1440*60*1e3)}function yy(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function UK(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function MK(t){var e=t<0?12:11,r=yy(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function OK(t){var e=yy(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function dd(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=MK(t):e===10?r=t.toFixed(10).substr(0,12):r=OK(t),yy(UK(r.toUpperCase()))}function Sc(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):dd(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Ka(14,SF(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function LK(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function PK(t,e,r,n){var i="",s=0,o=0,c=r.y,h,d=0;switch(t){case 98:c=r.y+543;case 121:switch(e.length){case 1:case 2:h=c%100,d=2;break;default:h=c%1e4,d=4;break}break;case 109:switch(e.length){case 1:case 2:h=r.m,d=e.length;break;case 3:return _2[r.m-1][1];case 5:return _2[r.m-1][0];default:return _2[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:h=r.d,d=e.length;break;case 3:return VB[r.q][0];default:return VB[r.q][1]}break;case 104:switch(e.length){case 1:case 2:h=1+(r.H+11)%12,d=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:h=r.H,d=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:h=r.M,d=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ao(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=ao(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":h=r.D*24+r.H;break;case"[m]":case"[mm]":h=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":h=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}d=e.length===3?1:2;break;case 101:h=c,d=1;break}var m=d>0?ao(h,d):"";return m}function yA(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var IF=/%/g;function QK(t,e,r){var n=e.replace(IF,""),i=e.length-n.length;return vl(t,n,r*Math.pow(10,2*i))+ri("%",i)}function HK(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return vl(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function NF(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+NF(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,h,d,m){return h+d+m.substr(0,(i+s)%i)+"."+m.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var RF=/# (\?+)( ?)\/( ?)(\d+)/;function jK(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),o=i-s*n,c=n;return r+(s===0?"":""+s)+" "+(o===0?ri(" ",t[1].length+1+t[4].length):vy(o,t[1].length)+t[2]+"/"+t[3]+ao(c,t[4].length))}function VK(t,e,r){return r+(e===0?"":""+e)+ri(" ",t[1].length+2+t[4].length)}var FF=/^#*0*\.([0#]+)/,kF=/\).*[0#]/,DF=/\(###\) ###\\?-####/;function Is(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function KB(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function zB(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function GK(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function KK(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function La(t,e,r){if(t.charCodeAt(0)===40&&!e.match(kF)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?La("n",n,r):"("+La("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return HK(t,e,r);if(e.indexOf("%")!==-1)return QK(t,e,r);if(e.indexOf("E")!==-1)return NF(e,r);if(e.charCodeAt(0)===36)return"$"+La(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,o,c,h=Math.abs(r),d=r<0?"-":"";if(e.match(/^00+$/))return d+Bu(h,e.length);if(e.match(/^[#?]+$/))return i=Bu(r,0),i==="0"&&(i=""),i.length>e.length?i:Is(e.substr(0,e.length-i.length))+i;if(s=e.match(RF))return jK(s,h,d);if(e.match(/^#+0+$/))return d+Bu(h,e.length-e.indexOf("0"));if(s=e.match(FF))return i=KB(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Is(s[1])).replace(/\.$/,"."+Is(s[1])).replace(/\.(\d*)$/,function(F,k){return"."+k+ri("0",Is(s[1]).length-k.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return d+KB(h,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return d+yA(Bu(h,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+La(t,e,-r):yA(""+(Math.floor(r)+GK(r,s[1].length)))+"."+ao(zB(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return La(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=qu(La(t,e.replace(/[\\-]/g,""),r)),o=0,qu(qu(e.replace(/\\/g,"")).replace(/[0#]/g,function(F){return o<i.length?i.charAt(o++):F==="0"?"0":""}));if(e.match(DF))return i=La(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var m="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),c=j1(h,Math.pow(10,o)-1,!1),i=""+d,m=vl("n",s[1],c[1]),m.charAt(m.length-1)==" "&&(m=m.substr(0,m.length-1)+"0"),i+=m+s[2]+"/"+s[3],m=Q1(c[2],o),m.length<s[4].length&&(m=Is(s[4].substr(s[4].length-m.length))+m),i+=m,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c=j1(h,Math.pow(10,o)-1,!0),d+(c[0]||(c[1]?"":"0"))+" "+(c[1]?vy(c[1],o)+s[2]+"/"+s[3]+Q1(c[2],o):ri(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Bu(r,0),e.length<=i.length?i:Is(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var C=e.indexOf(".")-o,b=e.length-i.length-C;return Is(e.substr(0,C)+i+e.substr(e.length-b))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=zB(r,s[1].length),r<0?"-"+La(t,e,-r):yA(KK(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(F){return"00,"+(F.length<3?ao(0,3-F.length):"")+F})+"."+ao(o,s[1].length);switch(e){case"###,##0.00":return La(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var I=yA(Bu(h,0));return I!=="0"?d+I:"";case"###,###.00":return La(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return La(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function zK(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return vl(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function WK(t,e,r){var n=e.replace(IF,""),i=e.length-n.length;return vl(t,n,r*Math.pow(10,2*i))+ri("%",i)}function UF(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+UF(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,h,d,m){return h+d+m.substr(0,(i+s)%i)+"."+m.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Bo(t,e,r){if(t.charCodeAt(0)===40&&!e.match(kF)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Bo("n",n,r):"("+Bo("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return zK(t,e,r);if(e.indexOf("%")!==-1)return WK(t,e,r);if(e.indexOf("E")!==-1)return UF(e,r);if(e.charCodeAt(0)===36)return"$"+Bo(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,o,c,h=Math.abs(r),d=r<0?"-":"";if(e.match(/^00+$/))return d+ao(h,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:Is(e.substr(0,e.length-i.length))+i;if(s=e.match(RF))return VK(s,h,d);if(e.match(/^#+0+$/))return d+ao(h,e.length-e.indexOf("0"));if(s=e.match(FF))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Is(s[1])).replace(/\.$/,"."+Is(s[1])),i=i.replace(/\.(\d*)$/,function(F,k){return"."+k+ri("0",Is(s[1]).length-k.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return d+(""+h).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return d+yA(""+h);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Bo(t,e,-r):yA(""+r)+"."+ri("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Bo(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=qu(Bo(t,e.replace(/[\\-]/g,""),r)),o=0,qu(qu(e.replace(/\\/g,"")).replace(/[0#]/g,function(F){return o<i.length?i.charAt(o++):F==="0"?"0":""}));if(e.match(DF))return i=Bo(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var m="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),c=j1(h,Math.pow(10,o)-1,!1),i=""+d,m=vl("n",s[1],c[1]),m.charAt(m.length-1)==" "&&(m=m.substr(0,m.length-1)+"0"),i+=m+s[2]+"/"+s[3],m=Q1(c[2],o),m.length<s[4].length&&(m=Is(s[4].substr(s[4].length-m.length))+m),i+=m,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c=j1(h,Math.pow(10,o)-1,!0),d+(c[0]||(c[1]?"":"0"))+" "+(c[1]?vy(c[1],o)+s[2]+"/"+s[3]+Q1(c[2],o):ri(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:Is(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var C=e.indexOf(".")-o,b=e.length-i.length-C;return Is(e.substr(0,C)+i+e.substr(e.length-b))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Bo(t,e,-r):yA(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(F){return"00,"+(F.length<3?ao(0,3-F.length):"")+F})+"."+ao(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var I=yA(""+h);return I!=="0"?d+I:"";default:if(e.match(/\.[0#?]*$/))return Bo(t,e.slice(0,e.lastIndexOf(".")),r)+Is(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function vl(t,e,r){return(r|0)===r?Bo(t,e,r):La(t,e,r)}function qK(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var MF=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function p0(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":H1(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(MF))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function XK(t,e,r,n){for(var i=[],s="",o=0,c="",h="t",d,m,C,b="H";o<t.length;)switch(c=t.charAt(o)){case"G":if(!H1(t,o))throw new Error("unrecognized character "+c+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(C=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(C);i[i.length]={t:"t",v:s},++o;break;case"\\":var I=t.charAt(++o),F=I==="("||I===")"?I:"t";i[i.length]={t:F,v:I},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(d==null&&(d=hc(e,r,t.charAt(o+1)==="2"),d==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},h=c,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":c=c.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||d==null&&(d=hc(e,r),d==null))return"";for(s=c;++o<t.length&&t.charAt(o).toLowerCase()===c;)s+=c;c==="m"&&h.toLowerCase()==="h"&&(c="M"),c==="h"&&(c=b),i[i.length]={t:c,v:s},h=c;break;case"A":case"a":case"":var k={t:c,v:c};if(d==null&&(d=hc(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(k.v=d.H>=12?"P":"A"),k.t="T",b="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(k.v=d.H>=12?"PM":"AM"),k.t="T",o+=5,b="h"):t.substr(o,5).toUpperCase()==="/"?(d!=null&&(k.v=d.H>=12?"":""),k.t="T",o+=5,b="h"):(k.t="t",++o),d==null&&k.t==="T")return"";i[i.length]=k,h=c;break;case"[":for(s=c;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(MF)){if(d==null&&(d=hc(e,r),d==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},h=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",p0(t)||(i[i.length]={t:"t",v:s}));break;case".":if(d!=null){for(s=c;++o<t.length&&(c=t.charAt(o))==="0";)s+=c;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=c;++o<t.length&&"0#?.,E+-%".indexOf(c=t.charAt(o))>-1;)s+=c;i[i.length]={t:"n",v:s};break;case"?":for(s=c;t.charAt(++o)===c;)s+=c;i[i.length]={t:c,v:s},h=c;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:n===1?"t":c,v:c},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=c;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:c,v:c},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(c)===-1)throw new Error("unrecognized character "+c+" in "+t);i[i.length]={t:"t",v:c},++o;break}var U=0,V=0,K;for(o=i.length-1,h="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=b,h="h",U<1&&(U=1);break;case"s":(K=i[o].v.match(/\.0+$/))&&(V=Math.max(V,K[0].length-1)),U<3&&(U=3);case"d":case"y":case"M":case"e":h=i[o].t;break;case"m":h==="s"&&(i[o].t="M",U<2&&(U=2));break;case"X":break;case"Z":U<1&&i[o].v.match(/[Hh]/)&&(U=1),U<2&&i[o].v.match(/[Mm]/)&&(U=2),U<3&&i[o].v.match(/[Ss]/)&&(U=3)}switch(U){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var Q="",te;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=PK(i[o].t.charCodeAt(0),i[o].v,d,V),i[o].t="t";break;case"n":case"?":for(te=o+1;i[te]!=null&&((c=i[te].t)==="?"||c==="D"||(c===" "||c==="t")&&i[te+1]!=null&&(i[te+1].t==="?"||i[te+1].t==="t"&&i[te+1].v==="/")||i[o].t==="("&&(c===" "||c==="n"||c===")")||c==="t"&&(i[te].v==="/"||i[te].v===" "&&i[te+1]!=null&&i[te+1].t=="?"));)i[o].v+=i[te].v,i[te]={v:"",t:";"},++te;Q+=i[o].v,o=te-1;break;case"G":i[o].t="t",i[o].v=Sc(e,r);break}var re="",z,M;if(Q.length>0){Q.charCodeAt(0)==40?(z=e<0&&Q.charCodeAt(0)===45?-e:e,M=vl("n",Q,z)):(z=e<0&&n>1?-e:e,M=vl("n",Q,z),z<0&&i[0]&&i[0].t=="t"&&(M=M.substr(1),i[0].v="-"+i[0].v)),te=M.length-1;var P=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){P=o;break}var O=i.length;if(P===i.length&&M.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(te>=i[o].v.length-1?(te-=i[o].v.length,i[o].v=M.substr(te+1,i[o].v.length)):te<0?i[o].v="":(i[o].v=M.substr(0,te+1),te=-1),i[o].t="t",O=o);te>=0&&O<i.length&&(i[O].v=M.substr(0,te+1)+i[O].v)}else if(P!==i.length&&M.indexOf("E")===-1){for(te=M.indexOf(".")-1,o=P;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(m=i[o].v.indexOf(".")>-1&&o===P?i[o].v.indexOf(".")-1:i[o].v.length-1,re=i[o].v.substr(m+1);m>=0;--m)te>=0&&(i[o].v.charAt(m)==="0"||i[o].v.charAt(m)==="#")&&(re=M.charAt(te--)+re);i[o].v=re,i[o].t="t",O=o}for(te>=0&&O<i.length&&(i[O].v=M.substr(0,te+1)+i[O].v),te=M.indexOf(".")+1,o=P;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==P)){for(m=i[o].v.indexOf(".")>-1&&o===P?i[o].v.indexOf(".")+1:0,re=i[o].v.substr(0,m);m<i[o].v.length;++m)te<M.length&&(re+=M.charAt(te++));i[o].v=re,i[o].t="t",O=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(z=n>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=vl(i[o].t,i[o].v,z),i[o].t="t");var ee="";for(o=0;o!==i.length;++o)i[o]!=null&&(ee+=i[o].v);return ee}var WB=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function qB(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function YK(t,e){var r=qK(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(WB),c=r[1].match(WB);return qB(e,o)?[n,r[0]]:qB(e,c)?[n,r[1]]:[n,r[o!=null&&c!=null?2:1]]}return[n,s]}function Ka(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ir)[t],n==null&&(n=r.table&&r.table[GB[t]]||Ir[GB[t]]),n==null&&(n=FK[t]||"General");break}if(H1(n,0))return Sc(e,r);e instanceof Date&&(e=SF(e,r.date1904));var i=YK(n,e);if(H1(i[1]))return Sc(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return XK(i[1],e,r,i[0])}function wc(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Ir[r]==null){e<0&&(e=r);continue}if(Ir[r]==t){e=r;break}}e<0&&(e=391)}return Ir[e]=t,e}function OF(){Ir=RK()}var JK={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},LF=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function ZK(t){var e=typeof t=="number"?Ir[t]:t;return e=e.replace(LF,"(\\d+)"),new RegExp("^"+e+"$")}function $K(t,e,r){var n=-1,i=-1,s=-1,o=-1,c=-1,h=-1;(e.match(LF)||[]).forEach(function(C,b){var I=parseInt(r[b+1],10);switch(C.toLowerCase().charAt(0)){case"y":n=I;break;case"d":s=I;break;case"h":o=I;break;case"s":h=I;break;case"m":o>=0?c=I:i=I;break}}),h>=0&&c==-1&&i>=0&&(c=i,i=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var m=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2);return o==-1&&c==-1&&h==-1?d:n==-1&&i==-1&&s==-1?m:d+"T"+m}var ez=(function(){var t={};t.version="1.2.0";function e(){for(var M=0,P=new Array(256),O=0;O!=256;++O)M=O,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,P[O]=M;return typeof Int32Array<"u"?new Int32Array(P):P}var r=e();function n(M){var P=0,O=0,ee=0,Y=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ee=0;ee!=256;++ee)Y[ee]=M[ee];for(ee=0;ee!=256;++ee)for(O=M[ee],P=256+ee;P<4096;P+=256)O=Y[P]=O>>>8^M[O&255];var X=[];for(ee=1;ee!=16;++ee)X[ee-1]=typeof Int32Array<"u"?Y.subarray(ee*256,ee*256+256):Y.slice(ee*256,ee*256+256);return X}var i=n(r),s=i[0],o=i[1],c=i[2],h=i[3],d=i[4],m=i[5],C=i[6],b=i[7],I=i[8],F=i[9],k=i[10],U=i[11],V=i[12],K=i[13],Q=i[14];function te(M,P){for(var O=P^-1,ee=0,Y=M.length;ee<Y;)O=O>>>8^r[(O^M.charCodeAt(ee++))&255];return~O}function re(M,P){for(var O=P^-1,ee=M.length-15,Y=0;Y<ee;)O=Q[M[Y++]^O&255]^K[M[Y++]^O>>8&255]^V[M[Y++]^O>>16&255]^U[M[Y++]^O>>>24]^k[M[Y++]]^F[M[Y++]]^I[M[Y++]]^b[M[Y++]]^C[M[Y++]]^m[M[Y++]]^d[M[Y++]]^h[M[Y++]]^c[M[Y++]]^o[M[Y++]]^s[M[Y++]]^r[M[Y++]];for(ee+=15;Y<ee;)O=O>>>8^r[(O^M[Y++])&255];return~O}function z(M,P){for(var O=P^-1,ee=0,Y=M.length,X=0,G=0;ee<Y;)X=M.charCodeAt(ee++),X<128?O=O>>>8^r[(O^X)&255]:X<2048?(O=O>>>8^r[(O^(192|X>>6&31))&255],O=O>>>8^r[(O^(128|X&63))&255]):X>=55296&&X<57344?(X=(X&1023)+64,G=M.charCodeAt(ee++)&1023,O=O>>>8^r[(O^(240|X>>8&7))&255],O=O>>>8^r[(O^(128|X>>2&63))&255],O=O>>>8^r[(O^(128|G>>6&15|(X&3)<<4))&255],O=O>>>8^r[(O^(128|G&63))&255]):(O=O>>>8^r[(O^(224|X>>12&15))&255],O=O>>>8^r[(O^(128|X>>6&63))&255],O=O>>>8^r[(O^(128|X&63))&255]);return~O}return t.table=r,t.bstr=te,t.buf=re,t.str=z,t})(),Jr=(function(){var e={};e.version="1.2.1";function r(ie,Ae){for(var fe=ie.split("/"),he=Ae.split("/"),pe=0,Ce=0,Ve=Math.min(fe.length,he.length);pe<Ve;++pe){if(Ce=fe[pe].length-he[pe].length)return Ce;if(fe[pe]!=he[pe])return fe[pe]<he[pe]?-1:1}return fe.length-he.length}function n(ie){if(ie.charAt(ie.length-1)=="/")return ie.slice(0,-1).indexOf("/")===-1?ie:n(ie.slice(0,-1));var Ae=ie.lastIndexOf("/");return Ae===-1?ie:ie.slice(0,Ae+1)}function i(ie){if(ie.charAt(ie.length-1)=="/")return i(ie.slice(0,-1));var Ae=ie.lastIndexOf("/");return Ae===-1?ie:ie.slice(Ae+1)}function s(ie,Ae){typeof Ae=="string"&&(Ae=new Date(Ae));var fe=Ae.getHours();fe=fe<<6|Ae.getMinutes(),fe=fe<<5|Ae.getSeconds()>>>1,ie.write_shift(2,fe);var he=Ae.getFullYear()-1980;he=he<<4|Ae.getMonth()+1,he=he<<5|Ae.getDate(),ie.write_shift(2,he)}function o(ie){var Ae=ie.read_shift(2)&65535,fe=ie.read_shift(2)&65535,he=new Date,pe=fe&31;fe>>>=5;var Ce=fe&15;fe>>>=4,he.setMilliseconds(0),he.setFullYear(fe+1980),he.setMonth(Ce-1),he.setDate(pe);var Ve=Ae&31;Ae>>>=5;var nt=Ae&63;return Ae>>>=6,he.setHours(Ae),he.setMinutes(nt),he.setSeconds(Ve<<1),he}function c(ie){Ji(ie,0);for(var Ae={},fe=0;ie.l<=ie.length-4;){var he=ie.read_shift(2),pe=ie.read_shift(2),Ce=ie.l+pe,Ve={};switch(he){case 21589:fe=ie.read_shift(1),fe&1&&(Ve.mtime=ie.read_shift(4)),pe>5&&(fe&2&&(Ve.atime=ie.read_shift(4)),fe&4&&(Ve.ctime=ie.read_shift(4))),Ve.mtime&&(Ve.mt=new Date(Ve.mtime*1e3));break}ie.l=Ce,Ae[he]=Ve}return Ae}var h;function d(){return h||(h={})}function m(ie,Ae){if(ie[0]==80&&ie[1]==75)return Rt(ie,Ae);if((ie[0]|32)==109&&(ie[1]|32)==105)return at(ie,Ae);if(ie.length<512)throw new Error("CFB file size "+ie.length+" < 512");var fe=3,he=512,pe=0,Ce=0,Ve=0,nt=0,Pe=0,qe=[],Xe=ie.slice(0,512);Ji(Xe,0);var ht=C(Xe);switch(fe=ht[0],fe){case 3:he=512;break;case 4:he=4096;break;case 0:if(ht[1]==0)return Rt(ie,Ae);default:throw new Error("Major Version: Expected 3 or 4 saw "+fe)}he!==512&&(Xe=ie.slice(0,he),Ji(Xe,28));var wt=ie.slice(0,he);b(Xe,fe);var vt=Xe.read_shift(4,"i");if(fe===3&&vt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+vt);Xe.l+=4,Ve=Xe.read_shift(4,"i"),Xe.l+=4,Xe.chk("00100000","Mini Stream Cutoff Size: "),nt=Xe.read_shift(4,"i"),pe=Xe.read_shift(4,"i"),Pe=Xe.read_shift(4,"i"),Ce=Xe.read_shift(4,"i");for(var Et=-1,St=0;St<109&&(Et=Xe.read_shift(4,"i"),!(Et<0));++St)qe[St]=Et;var Gt=I(ie,he);U(Pe,Ce,Gt,he,qe);var it=K(Gt,Ve,qe,he);it[Ve].name="!Directory",pe>0&&nt!==G&&(it[nt].name="!MiniFAT"),it[qe[0]].name="!FAT",it.fat_addrs=qe,it.ssz=he;var Xr={},nr=[],Vn=[],qa=[];Q(Ve,it,Gt,nr,pe,Xr,Vn,nt),F(Vn,qa,nr),nr.shift();var Br={FileIndex:Vn,FullPaths:qa};return Ae&&Ae.raw&&(Br.raw={header:wt,sectors:Gt}),Br}function C(ie){if(ie[ie.l]==80&&ie[ie.l+1]==75)return[0,0];ie.chk(Ie,"Header Signature: "),ie.l+=16;var Ae=ie.read_shift(2,"u");return[ie.read_shift(2,"u"),Ae]}function b(ie,Ae){var fe=9;switch(ie.l+=2,fe=ie.read_shift(2)){case 9:if(Ae!=3)throw new Error("Sector Shift: Expected 9 saw "+fe);break;case 12:if(Ae!=4)throw new Error("Sector Shift: Expected 12 saw "+fe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+fe)}ie.chk("0600","Mini Sector Shift: "),ie.chk("000000000000","Reserved: ")}function I(ie,Ae){for(var fe=Math.ceil(ie.length/Ae)-1,he=[],pe=1;pe<fe;++pe)he[pe-1]=ie.slice(pe*Ae,(pe+1)*Ae);return he[fe-1]=ie.slice(fe*Ae),he}function F(ie,Ae,fe){for(var he=0,pe=0,Ce=0,Ve=0,nt=0,Pe=fe.length,qe=[],Xe=[];he<Pe;++he)qe[he]=Xe[he]=he,Ae[he]=fe[he];for(;nt<Xe.length;++nt)he=Xe[nt],pe=ie[he].L,Ce=ie[he].R,Ve=ie[he].C,qe[he]===he&&(pe!==-1&&qe[pe]!==pe&&(qe[he]=qe[pe]),Ce!==-1&&qe[Ce]!==Ce&&(qe[he]=qe[Ce])),Ve!==-1&&(qe[Ve]=he),pe!==-1&&he!=qe[he]&&(qe[pe]=qe[he],Xe.lastIndexOf(pe)<nt&&Xe.push(pe)),Ce!==-1&&he!=qe[he]&&(qe[Ce]=qe[he],Xe.lastIndexOf(Ce)<nt&&Xe.push(Ce));for(he=1;he<Pe;++he)qe[he]===he&&(Ce!==-1&&qe[Ce]!==Ce?qe[he]=qe[Ce]:pe!==-1&&qe[pe]!==pe&&(qe[he]=qe[pe]));for(he=1;he<Pe;++he)if(ie[he].type!==0){if(nt=he,nt!=qe[nt])do nt=qe[nt],Ae[he]=Ae[nt]+"/"+Ae[he];while(nt!==0&&qe[nt]!==-1&&nt!=qe[nt]);qe[he]=-1}for(Ae[0]+="/",he=1;he<Pe;++he)ie[he].type!==2&&(Ae[he]+="/")}function k(ie,Ae,fe){for(var he=ie.start,pe=ie.size,Ce=[],Ve=he;fe&&pe>0&&Ve>=0;)Ce.push(Ae.slice(Ve*X,Ve*X+X)),pe-=X,Ve=cc(fe,Ve*4);return Ce.length===0?Bi(0):gA(Ce).slice(0,ie.size)}function U(ie,Ae,fe,he,pe){var Ce=G;if(ie===G){if(Ae!==0)throw new Error("DIFAT chain shorter than expected")}else if(ie!==-1){var Ve=fe[ie],nt=(he>>>2)-1;if(!Ve)return;for(var Pe=0;Pe<nt&&(Ce=cc(Ve,Pe*4))!==G;++Pe)pe.push(Ce);U(cc(Ve,he-4),Ae-1,fe,he,pe)}}function V(ie,Ae,fe,he,pe){var Ce=[],Ve=[];pe||(pe=[]);var nt=he-1,Pe=0,qe=0;for(Pe=Ae;Pe>=0;){pe[Pe]=!0,Ce[Ce.length]=Pe,Ve.push(ie[Pe]);var Xe=fe[Math.floor(Pe*4/he)];if(qe=Pe*4&nt,he<4+qe)throw new Error("FAT boundary crossed: "+Pe+" 4 "+he);if(!ie[Xe])break;Pe=cc(ie[Xe],qe)}return{nodes:Ce,data:i4([Ve])}}function K(ie,Ae,fe,he){var pe=ie.length,Ce=[],Ve=[],nt=[],Pe=[],qe=he-1,Xe=0,ht=0,wt=0,vt=0;for(Xe=0;Xe<pe;++Xe)if(nt=[],wt=Xe+Ae,wt>=pe&&(wt-=pe),!Ve[wt]){Pe=[];var Et=[];for(ht=wt;ht>=0;){Et[ht]=!0,Ve[ht]=!0,nt[nt.length]=ht,Pe.push(ie[ht]);var St=fe[Math.floor(ht*4/he)];if(vt=ht*4&qe,he<4+vt)throw new Error("FAT boundary crossed: "+ht+" 4 "+he);if(!ie[St]||(ht=cc(ie[St],vt),Et[ht]))break}Ce[wt]={nodes:nt,data:i4([Pe])}}return Ce}function Q(ie,Ae,fe,he,pe,Ce,Ve,nt){for(var Pe=0,qe=he.length?2:0,Xe=Ae[ie].data,ht=0,wt=0,vt;ht<Xe.length;ht+=128){var Et=Xe.slice(ht,ht+128);Ji(Et,64),wt=Et.read_shift(2),vt=Ty(Et,0,wt-qe),he.push(vt);var St={name:vt,type:Et.read_shift(1),color:Et.read_shift(1),L:Et.read_shift(4,"i"),R:Et.read_shift(4,"i"),C:Et.read_shift(4,"i"),clsid:Et.read_shift(16),state:Et.read_shift(4,"i"),start:0,size:0},Gt=Et.read_shift(2)+Et.read_shift(2)+Et.read_shift(2)+Et.read_shift(2);Gt!==0&&(St.ct=te(Et,Et.l-8));var it=Et.read_shift(2)+Et.read_shift(2)+Et.read_shift(2)+Et.read_shift(2);it!==0&&(St.mt=te(Et,Et.l-8)),St.start=Et.read_shift(4,"i"),St.size=Et.read_shift(4,"i"),St.size<0&&St.start<0&&(St.size=St.type=0,St.start=G,St.name=""),St.type===5?(Pe=St.start,pe>0&&Pe!==G&&(Ae[Pe].name="!StreamData")):St.size>=4096?(St.storage="fat",Ae[St.start]===void 0&&(Ae[St.start]=V(fe,St.start,Ae.fat_addrs,Ae.ssz)),Ae[St.start].name=St.name,St.content=Ae[St.start].data.slice(0,St.size)):(St.storage="minifat",St.size<0?St.size=0:Pe!==G&&St.start!==G&&Ae[Pe]&&(St.content=k(St,Ae[Pe].data,(Ae[nt]||{}).data))),St.content&&Ji(St.content,0),Ce[vt]=St,Ve.push(St)}}function te(ie,Ae){return new Date((xa(ie,Ae+4)/1e7*Math.pow(2,32)+xa(ie,Ae)/1e7-11644473600)*1e3)}function re(ie,Ae){return d(),m(h.readFileSync(ie),Ae)}function z(ie,Ae){var fe=Ae&&Ae.type;switch(fe||Wr&&Buffer.isBuffer(ie)&&(fe="buffer"),fe||"base64"){case"file":return re(ie,Ae);case"base64":return m(io(Ea(ie)),Ae);case"binary":return m(io(ie),Ae)}return m(ie,Ae)}function M(ie,Ae){var fe=Ae||{},he=fe.root||"Root Entry";if(ie.FullPaths||(ie.FullPaths=[]),ie.FileIndex||(ie.FileIndex=[]),ie.FullPaths.length!==ie.FileIndex.length)throw new Error("inconsistent CFB structure");ie.FullPaths.length===0&&(ie.FullPaths[0]=he+"/",ie.FileIndex[0]={name:he,type:5}),fe.CLSID&&(ie.FileIndex[0].clsid=fe.CLSID),P(ie)}function P(ie){var Ae="Sh33tJ5";if(!Jr.find(ie,"/"+Ae)){var fe=Bi(4);fe[0]=55,fe[1]=fe[3]=50,fe[2]=54,ie.FileIndex.push({name:Ae,type:2,content:fe,size:4,L:69,R:69,C:69}),ie.FullPaths.push(ie.FullPaths[0]+Ae),O(ie)}}function O(ie,Ae){M(ie);for(var fe=!1,he=!1,pe=ie.FullPaths.length-1;pe>=0;--pe){var Ce=ie.FileIndex[pe];switch(Ce.type){case 0:he?fe=!0:(ie.FileIndex.pop(),ie.FullPaths.pop());break;case 1:case 2:case 5:he=!0,isNaN(Ce.R*Ce.L*Ce.C)&&(fe=!0),Ce.R>-1&&Ce.L>-1&&Ce.R==Ce.L&&(fe=!0);break;default:fe=!0;break}}if(!(!fe&&!Ae)){var Ve=new Date(1987,1,19),nt=0,Pe=Object.create?Object.create(null):{},qe=[];for(pe=0;pe<ie.FullPaths.length;++pe)Pe[ie.FullPaths[pe]]=!0,ie.FileIndex[pe].type!==0&&qe.push([ie.FullPaths[pe],ie.FileIndex[pe]]);for(pe=0;pe<qe.length;++pe){var Xe=n(qe[pe][0]);he=Pe[Xe],he||(qe.push([Xe,{name:i(Xe).replace("/",""),type:1,clsid:de,ct:Ve,mt:Ve,content:null}]),Pe[Xe]=!0)}for(qe.sort(function(vt,Et){return r(vt[0],Et[0])}),ie.FullPaths=[],ie.FileIndex=[],pe=0;pe<qe.length;++pe)ie.FullPaths[pe]=qe[pe][0],ie.FileIndex[pe]=qe[pe][1];for(pe=0;pe<qe.length;++pe){var ht=ie.FileIndex[pe],wt=ie.FullPaths[pe];if(ht.name=i(wt).replace("/",""),ht.L=ht.R=ht.C=-(ht.color=1),ht.size=ht.content?ht.content.length:0,ht.start=0,ht.clsid=ht.clsid||de,pe===0)ht.C=qe.length>1?1:-1,ht.size=0,ht.type=5;else if(wt.slice(-1)=="/"){for(nt=pe+1;nt<qe.length&&n(ie.FullPaths[nt])!=wt;++nt);for(ht.C=nt>=qe.length?-1:nt,nt=pe+1;nt<qe.length&&n(ie.FullPaths[nt])!=n(wt);++nt);ht.R=nt>=qe.length?-1:nt,ht.type=1}else n(ie.FullPaths[pe+1]||"")==n(wt)&&(ht.R=pe+1),ht.type=2}}}function ee(ie,Ae){var fe=Ae||{};if(fe.fileType=="mad")return lt(ie,fe);switch(O(ie),fe.fileType){case"zip":return kr(ie,fe)}var he=(function(vt){for(var Et=0,St=0,Gt=0;Gt<vt.FileIndex.length;++Gt){var it=vt.FileIndex[Gt];if(it.content){var Xr=it.content.length;Xr>0&&(Xr<4096?Et+=Xr+63>>6:St+=Xr+511>>9)}}for(var nr=vt.FullPaths.length+3>>2,Vn=Et+7>>3,qa=Et+127>>7,Br=Vn+St+nr+qa,xr=Br+127>>7,yr=xr<=109?0:Math.ceil((xr-109)/127);Br+xr+yr+127>>7>xr;)yr=++xr<=109?0:Math.ceil((xr-109)/127);var qn=[1,yr,xr,qa,nr,St,Et,0];return vt.FileIndex[0].size=Et<<6,qn[7]=(vt.FileIndex[0].start=qn[0]+qn[1]+qn[2]+qn[3]+qn[4]+qn[5])+(qn[6]+7>>3),qn})(ie),pe=Bi(he[7]<<9),Ce=0,Ve=0;{for(Ce=0;Ce<8;++Ce)pe.write_shift(1,ge[Ce]);for(Ce=0;Ce<8;++Ce)pe.write_shift(2,0);for(pe.write_shift(2,62),pe.write_shift(2,3),pe.write_shift(2,65534),pe.write_shift(2,9),pe.write_shift(2,6),Ce=0;Ce<3;++Ce)pe.write_shift(2,0);for(pe.write_shift(4,0),pe.write_shift(4,he[2]),pe.write_shift(4,he[0]+he[1]+he[2]+he[3]-1),pe.write_shift(4,0),pe.write_shift(4,4096),pe.write_shift(4,he[3]?he[0]+he[1]+he[2]-1:G),pe.write_shift(4,he[3]),pe.write_shift(-4,he[1]?he[0]-1:G),pe.write_shift(4,he[1]),Ce=0;Ce<109;++Ce)pe.write_shift(-4,Ce<he[2]?he[1]+Ce:-1)}if(he[1])for(Ve=0;Ve<he[1];++Ve){for(;Ce<236+Ve*127;++Ce)pe.write_shift(-4,Ce<he[2]?he[1]+Ce:-1);pe.write_shift(-4,Ve===he[1]-1?G:Ve+1)}var nt=function(vt){for(Ve+=vt;Ce<Ve-1;++Ce)pe.write_shift(-4,Ce+1);vt&&(++Ce,pe.write_shift(-4,G))};for(Ve=Ce=0,Ve+=he[1];Ce<Ve;++Ce)pe.write_shift(-4,we.DIFSECT);for(Ve+=he[2];Ce<Ve;++Ce)pe.write_shift(-4,we.FATSECT);nt(he[3]),nt(he[4]);for(var Pe=0,qe=0,Xe=ie.FileIndex[0];Pe<ie.FileIndex.length;++Pe)Xe=ie.FileIndex[Pe],Xe.content&&(qe=Xe.content.length,!(qe<4096)&&(Xe.start=Ve,nt(qe+511>>9)));for(nt(he[6]+7>>3);pe.l&511;)pe.write_shift(-4,we.ENDOFCHAIN);for(Ve=Ce=0,Pe=0;Pe<ie.FileIndex.length;++Pe)Xe=ie.FileIndex[Pe],Xe.content&&(qe=Xe.content.length,!(!qe||qe>=4096)&&(Xe.start=Ve,nt(qe+63>>6)));for(;pe.l&511;)pe.write_shift(-4,we.ENDOFCHAIN);for(Ce=0;Ce<he[4]<<2;++Ce){var ht=ie.FullPaths[Ce];if(!ht||ht.length===0){for(Pe=0;Pe<17;++Pe)pe.write_shift(4,0);for(Pe=0;Pe<3;++Pe)pe.write_shift(4,-1);for(Pe=0;Pe<12;++Pe)pe.write_shift(4,0);continue}Xe=ie.FileIndex[Ce],Ce===0&&(Xe.start=Xe.size?Xe.start-1:G);var wt=Ce===0&&fe.root||Xe.name;if(qe=2*(wt.length+1),pe.write_shift(64,wt,"utf16le"),pe.write_shift(2,qe),pe.write_shift(1,Xe.type),pe.write_shift(1,Xe.color),pe.write_shift(-4,Xe.L),pe.write_shift(-4,Xe.R),pe.write_shift(-4,Xe.C),Xe.clsid)pe.write_shift(16,Xe.clsid,"hex");else for(Pe=0;Pe<4;++Pe)pe.write_shift(4,0);pe.write_shift(4,Xe.state||0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,Xe.start),pe.write_shift(4,Xe.size),pe.write_shift(4,0)}for(Ce=1;Ce<ie.FileIndex.length;++Ce)if(Xe=ie.FileIndex[Ce],Xe.size>=4096)if(pe.l=Xe.start+1<<9,Wr&&Buffer.isBuffer(Xe.content))Xe.content.copy(pe,pe.l,0,Xe.size),pe.l+=Xe.size+511&-512;else{for(Pe=0;Pe<Xe.size;++Pe)pe.write_shift(1,Xe.content[Pe]);for(;Pe&511;++Pe)pe.write_shift(1,0)}for(Ce=1;Ce<ie.FileIndex.length;++Ce)if(Xe=ie.FileIndex[Ce],Xe.size>0&&Xe.size<4096)if(Wr&&Buffer.isBuffer(Xe.content))Xe.content.copy(pe,pe.l,0,Xe.size),pe.l+=Xe.size+63&-64;else{for(Pe=0;Pe<Xe.size;++Pe)pe.write_shift(1,Xe.content[Pe]);for(;Pe&63;++Pe)pe.write_shift(1,0)}if(Wr)pe.l=pe.length;else for(;pe.l<pe.length;)pe.write_shift(1,0);return pe}function Y(ie,Ae){var fe=ie.FullPaths.map(function(Pe){return Pe.toUpperCase()}),he=fe.map(function(Pe){var qe=Pe.split("/");return qe[qe.length-(Pe.slice(-1)=="/"?2:1)]}),pe=!1;Ae.charCodeAt(0)===47?(pe=!0,Ae=fe[0].slice(0,-1)+Ae):pe=Ae.indexOf("/")!==-1;var Ce=Ae.toUpperCase(),Ve=pe===!0?fe.indexOf(Ce):he.indexOf(Ce);if(Ve!==-1)return ie.FileIndex[Ve];var nt=!Ce.match(If);for(Ce=Ce.replace(Fs,""),nt&&(Ce=Ce.replace(If,"!")),Ve=0;Ve<fe.length;++Ve)if((nt?fe[Ve].replace(If,"!"):fe[Ve]).replace(Fs,"")==Ce||(nt?he[Ve].replace(If,"!"):he[Ve]).replace(Fs,"")==Ce)return ie.FileIndex[Ve];return null}var X=64,G=-2,Ie="d0cf11e0a1b11ae1",ge=[208,207,17,224,161,177,26,225],de="00000000000000000000000000000000",we={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:G,FREESECT:-1,HEADER_SIGNATURE:Ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:de,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ge(ie,Ae,fe){d();var he=ee(ie,fe);h.writeFileSync(Ae,he)}function be(ie){for(var Ae=new Array(ie.length),fe=0;fe<ie.length;++fe)Ae[fe]=String.fromCharCode(ie[fe]);return Ae.join("")}function De(ie,Ae){var fe=ee(ie,Ae);switch(Ae&&Ae.type||"buffer"){case"file":return d(),h.writeFileSync(Ae.filename,fe),fe;case"binary":return typeof fe=="string"?fe:be(fe);case"base64":return QB(typeof fe=="string"?fe:be(fe));case"buffer":if(Wr)return Buffer.isBuffer(fe)?fe:Oc(fe);case"array":return typeof fe=="string"?io(fe):fe}return fe}var ne;function q(ie){try{var Ae=ie.InflateRaw,fe=new Ae;if(fe._processChunk(new Uint8Array([3,0]),fe._finishFlushFlag),fe.bytesRead)ne=ie;else throw new Error("zlib does not expose bytesRead")}catch(he){console.error("cannot use native zlib: "+(he.message||he))}}function ce(ie,Ae){if(!ne)return rr(ie,Ae);var fe=ne.InflateRaw,he=new fe,pe=he._processChunk(ie.slice(ie.l),he._finishFlushFlag);return ie.l+=he.bytesRead,pe}function oe(ie){return ne?ne.deflateRawSync(ie):Ht(ie)}var ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ke=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Fe(ie){var Ae=(ie<<1|ie<<11)&139536|(ie<<5|ie<<15)&558144;return(Ae>>16|Ae>>8|Ae)&255}for(var He=typeof Uint8Array<"u",tt=He?new Uint8Array(256):[],Tt=0;Tt<256;++Tt)tt[Tt]=Fe(Tt);function ve(ie,Ae){var fe=tt[ie&255];return Ae<=8?fe>>>8-Ae:(fe=fe<<8|tt[ie>>8&255],Ae<=16?fe>>>16-Ae:(fe=fe<<8|tt[ie>>16&255],fe>>>24-Ae))}function Oe(ie,Ae){var fe=Ae&7,he=Ae>>>3;return(ie[he]|(fe<=6?0:ie[he+1]<<8))>>>fe&3}function st(ie,Ae){var fe=Ae&7,he=Ae>>>3;return(ie[he]|(fe<=5?0:ie[he+1]<<8))>>>fe&7}function Bt(ie,Ae){var fe=Ae&7,he=Ae>>>3;return(ie[he]|(fe<=4?0:ie[he+1]<<8))>>>fe&15}function kt(ie,Ae){var fe=Ae&7,he=Ae>>>3;return(ie[he]|(fe<=3?0:ie[he+1]<<8))>>>fe&31}function ft(ie,Ae){var fe=Ae&7,he=Ae>>>3;return(ie[he]|(fe<=1?0:ie[he+1]<<8))>>>fe&127}function Ot(ie,Ae,fe){var he=Ae&7,pe=Ae>>>3,Ce=(1<<fe)-1,Ve=ie[pe]>>>he;return fe<8-he||(Ve|=ie[pe+1]<<8-he,fe<16-he)||(Ve|=ie[pe+2]<<16-he,fe<24-he)||(Ve|=ie[pe+3]<<24-he),Ve&Ce}function jt(ie,Ae,fe){var he=Ae&7,pe=Ae>>>3;return he<=5?ie[pe]|=(fe&7)<<he:(ie[pe]|=fe<<he&255,ie[pe+1]=(fe&7)>>8-he),Ae+3}function mt(ie,Ae,fe){var he=Ae&7,pe=Ae>>>3;return fe=(fe&1)<<he,ie[pe]|=fe,Ae+1}function At(ie,Ae,fe){var he=Ae&7,pe=Ae>>>3;return fe<<=he,ie[pe]|=fe&255,fe>>>=8,ie[pe+1]=fe,Ae+8}function er(ie,Ae,fe){var he=Ae&7,pe=Ae>>>3;return fe<<=he,ie[pe]|=fe&255,fe>>>=8,ie[pe+1]=fe&255,ie[pe+2]=fe>>>8,Ae+16}function Nr(ie,Ae){var fe=ie.length,he=2*fe>Ae?2*fe:Ae+5,pe=0;if(fe>=Ae)return ie;if(Wr){var Ce=HB(he);if(ie.copy)ie.copy(Ce);else for(;pe<ie.length;++pe)Ce[pe]=ie[pe];return Ce}else if(He){var Ve=new Uint8Array(he);if(Ve.set)Ve.set(ie);else for(;pe<fe;++pe)Ve[pe]=ie[pe];return Ve}return ie.length=he,ie}function Ue(ie){for(var Ae=new Array(ie),fe=0;fe<ie;++fe)Ae[fe]=0;return Ae}function It(ie,Ae,fe){var he=1,pe=0,Ce=0,Ve=0,nt=0,Pe=ie.length,qe=He?new Uint16Array(32):Ue(32);for(Ce=0;Ce<32;++Ce)qe[Ce]=0;for(Ce=Pe;Ce<fe;++Ce)ie[Ce]=0;Pe=ie.length;var Xe=He?new Uint16Array(Pe):Ue(Pe);for(Ce=0;Ce<Pe;++Ce)qe[pe=ie[Ce]]++,he<pe&&(he=pe),Xe[Ce]=0;for(qe[0]=0,Ce=1;Ce<=he;++Ce)qe[Ce+16]=nt=nt+qe[Ce-1]<<1;for(Ce=0;Ce<Pe;++Ce)nt=ie[Ce],nt!=0&&(Xe[Ce]=qe[nt+16]++);var ht=0;for(Ce=0;Ce<Pe;++Ce)if(ht=ie[Ce],ht!=0)for(nt=ve(Xe[Ce],he)>>he-ht,Ve=(1<<he+4-ht)-1;Ve>=0;--Ve)Ae[nt|Ve<<ht]=ht&15|Ce<<4;return he}var Lt=He?new Uint16Array(512):Ue(512),Zt=He?new Uint16Array(32):Ue(32);if(!He){for(var cr=0;cr<512;++cr)Lt[cr]=0;for(cr=0;cr<32;++cr)Zt[cr]=0}(function(){for(var ie=[],Ae=0;Ae<32;Ae++)ie.push(5);It(ie,Zt,32);var fe=[];for(Ae=0;Ae<=143;Ae++)fe.push(8);for(;Ae<=255;Ae++)fe.push(9);for(;Ae<=279;Ae++)fe.push(7);for(;Ae<=287;Ae++)fe.push(8);It(fe,Lt,288)})();var hr=(function(){for(var Ae=He?new Uint8Array(32768):[],fe=0,he=0;fe<Ke.length-1;++fe)for(;he<Ke[fe+1];++he)Ae[he]=fe;for(;he<32768;++he)Ae[he]=29;var pe=He?new Uint8Array(259):[];for(fe=0,he=0;fe<Ee.length-1;++fe)for(;he<Ee[fe+1];++he)pe[he]=fe;function Ce(nt,Pe){for(var qe=0;qe<nt.length;){var Xe=Math.min(65535,nt.length-qe),ht=qe+Xe==nt.length;for(Pe.write_shift(1,+ht),Pe.write_shift(2,Xe),Pe.write_shift(2,~Xe&65535);Xe-- >0;)Pe[Pe.l++]=nt[qe++]}return Pe.l}function Ve(nt,Pe){for(var qe=0,Xe=0,ht=He?new Uint16Array(32768):[];Xe<nt.length;){var wt=Math.min(65535,nt.length-Xe);if(wt<10){for(qe=jt(Pe,qe,+(Xe+wt==nt.length)),qe&7&&(qe+=8-(qe&7)),Pe.l=qe/8|0,Pe.write_shift(2,wt),Pe.write_shift(2,~wt&65535);wt-- >0;)Pe[Pe.l++]=nt[Xe++];qe=Pe.l*8;continue}qe=jt(Pe,qe,+(Xe+wt==nt.length)+2);for(var vt=0;wt-- >0;){var Et=nt[Xe];vt=(vt<<5^Et)&32767;var St=-1,Gt=0;if((St=ht[vt])&&(St|=Xe&-32768,St>Xe&&(St-=32768),St<Xe))for(;nt[St+Gt]==nt[Xe+Gt]&&Gt<250;)++Gt;if(Gt>2){Et=pe[Gt],Et<=22?qe=At(Pe,qe,tt[Et+1]>>1)-1:(At(Pe,qe,3),qe+=5,At(Pe,qe,tt[Et-23]>>5),qe+=3);var it=Et<8?0:Et-4>>2;it>0&&(er(Pe,qe,Gt-Ee[Et]),qe+=it),Et=Ae[Xe-St],qe=At(Pe,qe,tt[Et]>>3),qe-=3;var Xr=Et<4?0:Et-2>>1;Xr>0&&(er(Pe,qe,Xe-St-Ke[Et]),qe+=Xr);for(var nr=0;nr<Gt;++nr)ht[vt]=Xe&32767,vt=(vt<<5^nt[Xe])&32767,++Xe;wt-=Gt-1}else Et<=143?Et=Et+48:qe=mt(Pe,qe,1),qe=At(Pe,qe,tt[Et]),ht[vt]=Xe&32767,++Xe}qe=At(Pe,qe,0)-1}return Pe.l=(qe+7)/8|0,Pe.l}return function(Pe,qe){return Pe.length<8?Ce(Pe,qe):Ve(Pe,qe)}})();function Ht(ie){var Ae=Bi(50+Math.floor(ie.length*1.1)),fe=hr(ie,Ae);return Ae.slice(0,fe)}var mr=He?new Uint16Array(32768):Ue(32768),pt=He?new Uint16Array(32768):Ue(32768),yt=He?new Uint16Array(128):Ue(128),_e=1,Nt=1;function Re(ie,Ae){var fe=kt(ie,Ae)+257;Ae+=5;var he=kt(ie,Ae)+1;Ae+=5;var pe=Bt(ie,Ae)+4;Ae+=4;for(var Ce=0,Ve=He?new Uint8Array(19):Ue(19),nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Pe=1,qe=He?new Uint8Array(8):Ue(8),Xe=He?new Uint8Array(8):Ue(8),ht=Ve.length,wt=0;wt<pe;++wt)Ve[ae[wt]]=Ce=st(ie,Ae),Pe<Ce&&(Pe=Ce),qe[Ce]++,Ae+=3;var vt=0;for(qe[0]=0,wt=1;wt<=Pe;++wt)Xe[wt]=vt=vt+qe[wt-1]<<1;for(wt=0;wt<ht;++wt)(vt=Ve[wt])!=0&&(nt[wt]=Xe[vt]++);var Et=0;for(wt=0;wt<ht;++wt)if(Et=Ve[wt],Et!=0){vt=tt[nt[wt]]>>8-Et;for(var St=(1<<7-Et)-1;St>=0;--St)yt[vt|St<<Et]=Et&7|wt<<3}var Gt=[];for(Pe=1;Gt.length<fe+he;)switch(vt=yt[ft(ie,Ae)],Ae+=vt&7,vt>>>=3){case 16:for(Ce=3+Oe(ie,Ae),Ae+=2,vt=Gt[Gt.length-1];Ce-- >0;)Gt.push(vt);break;case 17:for(Ce=3+st(ie,Ae),Ae+=3;Ce-- >0;)Gt.push(0);break;case 18:for(Ce=11+ft(ie,Ae),Ae+=7;Ce-- >0;)Gt.push(0);break;default:Gt.push(vt),Pe<vt&&(Pe=vt);break}var it=Gt.slice(0,fe),Xr=Gt.slice(fe);for(wt=fe;wt<286;++wt)it[wt]=0;for(wt=he;wt<30;++wt)Xr[wt]=0;return _e=It(it,mr,286),Nt=It(Xr,pt,30),Ae}function Dt(ie,Ae){if(ie[0]==3&&!(ie[1]&3))return[kA(Ae),2];for(var fe=0,he=0,pe=HB(Ae||1<<18),Ce=0,Ve=pe.length>>>0,nt=0,Pe=0;(he&1)==0;){if(he=st(ie,fe),fe+=3,he>>>1)he>>1==1?(nt=9,Pe=5):(fe=Re(ie,fe),nt=_e,Pe=Nt);else{fe&7&&(fe+=8-(fe&7));var qe=ie[fe>>>3]|ie[(fe>>>3)+1]<<8;if(fe+=32,qe>0)for(!Ae&&Ve<Ce+qe&&(pe=Nr(pe,Ce+qe),Ve=pe.length);qe-- >0;)pe[Ce++]=ie[fe>>>3],fe+=8;continue}for(;;){!Ae&&Ve<Ce+32767&&(pe=Nr(pe,Ce+32767),Ve=pe.length);var Xe=Ot(ie,fe,nt),ht=he>>>1==1?Lt[Xe]:mr[Xe];if(fe+=ht&15,ht>>>=4,(ht>>>8&255)===0)pe[Ce++]=ht;else{if(ht==256)break;ht-=257;var wt=ht<8?0:ht-4>>2;wt>5&&(wt=0);var vt=Ce+Ee[ht];wt>0&&(vt+=Ot(ie,fe,wt),fe+=wt),Xe=Ot(ie,fe,Pe),ht=he>>>1==1?Zt[Xe]:pt[Xe],fe+=ht&15,ht>>>=4;var Et=ht<4?0:ht-2>>1,St=Ke[ht];for(Et>0&&(St+=Ot(ie,fe,Et),fe+=Et),!Ae&&Ve<vt&&(pe=Nr(pe,vt+100),Ve=pe.length);Ce<vt;)pe[Ce]=pe[Ce-St],++Ce}}}return Ae?[pe,fe+7>>>3]:[pe.slice(0,Ce),fe+7>>>3]}function rr(ie,Ae){var fe=ie.slice(ie.l||0),he=Dt(fe,Ae);return ie.l+=he[1],he[0]}function et(ie,Ae){if(ie)typeof console<"u"&&console.error(Ae);else throw new Error(Ae)}function Rt(ie,Ae){var fe=ie;Ji(fe,0);var he=[],pe=[],Ce={FileIndex:he,FullPaths:pe};M(Ce,{root:Ae.root});for(var Ve=fe.length-4;(fe[Ve]!=80||fe[Ve+1]!=75||fe[Ve+2]!=5||fe[Ve+3]!=6)&&Ve>=0;)--Ve;fe.l=Ve+4,fe.l+=4;var nt=fe.read_shift(2);fe.l+=6;var Pe=fe.read_shift(4);for(fe.l=Pe,Ve=0;Ve<nt;++Ve){fe.l+=20;var qe=fe.read_shift(4),Xe=fe.read_shift(4),ht=fe.read_shift(2),wt=fe.read_shift(2),vt=fe.read_shift(2);fe.l+=8;var Et=fe.read_shift(4),St=c(fe.slice(fe.l+ht,fe.l+ht+wt));fe.l+=ht+wt+vt;var Gt=fe.l;fe.l=Et+4,Mt(fe,qe,Xe,Ce,St),fe.l=Gt}return Ce}function Mt(ie,Ae,fe,he,pe){ie.l+=2;var Ce=ie.read_shift(2),Ve=ie.read_shift(2),nt=o(ie);if(Ce&8257)throw new Error("Unsupported ZIP encryption");for(var Pe=ie.read_shift(4),qe=ie.read_shift(4),Xe=ie.read_shift(4),ht=ie.read_shift(2),wt=ie.read_shift(2),vt="",Et=0;Et<ht;++Et)vt+=String.fromCharCode(ie[ie.l++]);if(wt){var St=c(ie.slice(ie.l,ie.l+wt));(St[21589]||{}).mt&&(nt=St[21589].mt),((pe||{})[21589]||{}).mt&&(nt=pe[21589].mt)}ie.l+=wt;var Gt=ie.slice(ie.l,ie.l+qe);switch(Ve){case 8:Gt=ce(ie,Xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ve)}var it=!1;Ce&8&&(Pe=ie.read_shift(4),Pe==134695760&&(Pe=ie.read_shift(4),it=!0),qe=ie.read_shift(4),Xe=ie.read_shift(4)),qe!=Ae&&et(it,"Bad compressed size: "+Ae+" != "+qe),Xe!=fe&&et(it,"Bad uncompressed size: "+fe+" != "+Xe),$r(he,vt,Gt,{unsafe:!0,mt:nt})}function kr(ie,Ae){var fe=Ae||{},he=[],pe=[],Ce=Bi(1),Ve=fe.compression?8:0,nt=0,Pe=0,qe=0,Xe=0,ht=0,wt=ie.FullPaths[0],vt=wt,Et=ie.FileIndex[0],St=[],Gt=0;for(Pe=1;Pe<ie.FullPaths.length;++Pe)if(vt=ie.FullPaths[Pe].slice(wt.length),Et=ie.FileIndex[Pe],!(!Et.size||!Et.content||vt=="Sh33tJ5")){var it=Xe,Xr=Bi(vt.length);for(qe=0;qe<vt.length;++qe)Xr.write_shift(1,vt.charCodeAt(qe)&127);Xr=Xr.slice(0,Xr.l),St[ht]=ez.buf(Et.content,0);var nr=Et.content;Ve==8&&(nr=oe(nr)),Ce=Bi(30),Ce.write_shift(4,67324752),Ce.write_shift(2,20),Ce.write_shift(2,nt),Ce.write_shift(2,Ve),Et.mt?s(Ce,Et.mt):Ce.write_shift(4,0),Ce.write_shift(-4,St[ht]),Ce.write_shift(4,nr.length),Ce.write_shift(4,Et.content.length),Ce.write_shift(2,Xr.length),Ce.write_shift(2,0),Xe+=Ce.length,he.push(Ce),Xe+=Xr.length,he.push(Xr),Xe+=nr.length,he.push(nr),Ce=Bi(46),Ce.write_shift(4,33639248),Ce.write_shift(2,0),Ce.write_shift(2,20),Ce.write_shift(2,nt),Ce.write_shift(2,Ve),Ce.write_shift(4,0),Ce.write_shift(-4,St[ht]),Ce.write_shift(4,nr.length),Ce.write_shift(4,Et.content.length),Ce.write_shift(2,Xr.length),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(4,0),Ce.write_shift(4,it),Gt+=Ce.l,pe.push(Ce),Gt+=Xr.length,pe.push(Xr),++ht}return Ce=Bi(22),Ce.write_shift(4,101010256),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(2,ht),Ce.write_shift(2,ht),Ce.write_shift(4,Gt),Ce.write_shift(4,Xe),Ce.write_shift(2,0),gA([gA(he),gA(pe),Ce])}var Tr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function qr(ie,Ae){if(ie.ctype)return ie.ctype;var fe=ie.name||"",he=fe.match(/\.([^\.]+)$/);return he&&Tr[he[1]]||Ae&&(he=(fe=Ae).match(/[\.\\]([^\.\\])+$/),he&&Tr[he[1]])?Tr[he[1]]:"application/octet-stream"}function Vr(ie){for(var Ae=QB(ie),fe=[],he=0;he<Ae.length;he+=76)fe.push(Ae.slice(he,he+76));return fe.join(`\r
`)+`\r
`}function Us(ie){var Ae=ie.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(qe){var Xe=qe.charCodeAt(0).toString(16).toUpperCase();return"="+(Xe.length==1?"0"+Xe:Xe)});Ae=Ae.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ae.charAt(0)==`
`&&(Ae="=0D"+Ae.slice(1)),Ae=Ae.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var fe=[],he=Ae.split(`\r
`),pe=0;pe<he.length;++pe){var Ce=he[pe];if(Ce.length==0){fe.push("");continue}for(var Ve=0;Ve<Ce.length;){var nt=76,Pe=Ce.slice(Ve,Ve+nt);Pe.charAt(nt-1)=="="?nt--:Pe.charAt(nt-2)=="="?nt-=2:Pe.charAt(nt-3)=="="&&(nt-=3),Pe=Ce.slice(Ve,Ve+nt),Ve+=nt,Ve<Ce.length&&(Pe+="="),fe.push(Pe)}}return fe.join(`\r
`)}function Be(ie){for(var Ae=[],fe=0;fe<ie.length;++fe){for(var he=ie[fe];fe<=ie.length&&he.charAt(he.length-1)=="=";)he=he.slice(0,he.length-1)+ie[++fe];Ae.push(he)}for(var pe=0;pe<Ae.length;++pe)Ae[pe]=Ae[pe].replace(/[=][0-9A-Fa-f]{2}/g,function(Ce){return String.fromCharCode(parseInt(Ce.slice(1),16))});return io(Ae.join(`\r
`))}function ut(ie,Ae,fe){for(var he="",pe="",Ce="",Ve,nt=0;nt<10;++nt){var Pe=Ae[nt];if(!Pe||Pe.match(/^\s*$/))break;var qe=Pe.match(/^(.*?):\s*([^\s].*)$/);if(qe)switch(qe[1].toLowerCase()){case"content-location":he=qe[2].trim();break;case"content-type":Ce=qe[2].trim();break;case"content-transfer-encoding":pe=qe[2].trim();break}}switch(++nt,pe.toLowerCase()){case"base64":Ve=io(Ea(Ae.slice(nt).join("")));break;case"quoted-printable":Ve=Be(Ae.slice(nt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+pe)}var Xe=$r(ie,he.slice(fe.length),Ve,{unsafe:!0});Ce&&(Xe.ctype=Ce)}function at(ie,Ae){if(be(ie.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var fe=Ae&&Ae.root||"",he=(Wr&&Buffer.isBuffer(ie)?ie.toString("binary"):be(ie)).split(`\r
`),pe=0,Ce="";for(pe=0;pe<he.length;++pe)if(Ce=he[pe],!!/^Content-Location:/i.test(Ce)&&(Ce=Ce.slice(Ce.indexOf("file")),fe||(fe=Ce.slice(0,Ce.lastIndexOf("/")+1)),Ce.slice(0,fe.length)!=fe))for(;fe.length>0&&(fe=fe.slice(0,fe.length-1),fe=fe.slice(0,fe.lastIndexOf("/")+1),Ce.slice(0,fe.length)!=fe););var Ve=(he[1]||"").match(/boundary="(.*?)"/);if(!Ve)throw new Error("MAD cannot find boundary");var nt="--"+(Ve[1]||""),Pe=[],qe=[],Xe={FileIndex:Pe,FullPaths:qe};M(Xe);var ht,wt=0;for(pe=0;pe<he.length;++pe){var vt=he[pe];vt!==nt&&vt!==nt+"--"||(wt++&&ut(Xe,he.slice(ht,pe),fe),ht=pe)}return Xe}function lt(ie,Ae){var fe=Ae||{},he=fe.boundary||"SheetJS";he="------="+he;for(var pe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+he.slice(2)+'"',"","",""],Ce=ie.FullPaths[0],Ve=Ce,nt=ie.FileIndex[0],Pe=1;Pe<ie.FullPaths.length;++Pe)if(Ve=ie.FullPaths[Pe].slice(Ce.length),nt=ie.FileIndex[Pe],!(!nt.size||!nt.content||Ve=="Sh33tJ5")){Ve=Ve.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Gt){return"_x"+Gt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Gt){return"_u"+Gt.charCodeAt(0).toString(16)+"_"});for(var qe=nt.content,Xe=Wr&&Buffer.isBuffer(qe)?qe.toString("binary"):be(qe),ht=0,wt=Math.min(1024,Xe.length),vt=0,Et=0;Et<=wt;++Et)(vt=Xe.charCodeAt(Et))>=32&&vt<128&&++ht;var St=ht>=wt*4/5;pe.push(he),pe.push("Content-Location: "+(fe.root||"file:///C:/SheetJS/")+Ve),pe.push("Content-Transfer-Encoding: "+(St?"quoted-printable":"base64")),pe.push("Content-Type: "+qr(nt,Ve)),pe.push(""),pe.push(St?Us(Xe):Vr(Xe))}return pe.push(he+`--\r
`),pe.join(`\r
`)}function lr(ie){var Ae={};return M(Ae,ie),Ae}function $r(ie,Ae,fe,he){var pe=he&&he.unsafe;pe||M(ie);var Ce=!pe&&Jr.find(ie,Ae);if(!Ce){var Ve=ie.FullPaths[0];Ae.slice(0,Ve.length)==Ve?Ve=Ae:(Ve.slice(-1)!="/"&&(Ve+="/"),Ve=(Ve+Ae).replace("//","/")),Ce={name:i(Ae),type:2},ie.FileIndex.push(Ce),ie.FullPaths.push(Ve),pe||Jr.utils.cfb_gc(ie)}return Ce.content=fe,Ce.size=fe?fe.length:0,he&&(he.CLSID&&(Ce.clsid=he.CLSID),he.mt&&(Ce.mt=he.mt),he.ct&&(Ce.ct=he.ct)),Ce}function Sn(ie,Ae){M(ie);var fe=Jr.find(ie,Ae);if(fe){for(var he=0;he<ie.FileIndex.length;++he)if(ie.FileIndex[he]==fe)return ie.FileIndex.splice(he,1),ie.FullPaths.splice(he,1),!0}return!1}function kn(ie,Ae,fe){M(ie);var he=Jr.find(ie,Ae);if(he){for(var pe=0;pe<ie.FileIndex.length;++pe)if(ie.FileIndex[pe]==he)return ie.FileIndex[pe].name=i(fe),ie.FullPaths[pe]=fe,!0}return!1}function di(ie){O(ie,!0)}return e.find=Y,e.read=z,e.parse=m,e.write=De,e.writeFile=Ge,e.utils={cfb_new:lr,cfb_add:$r,cfb_del:Sn,cfb_mov:kn,cfb_gc:di,ReadShift:Kf,CheckField:a8,prep_blob:Ji,bconcat:gA,use_zlib:q,_deflateRaw:Ht,_inflateRaw:rr,consts:we},e})();function tz(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Mo(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Cy(t){for(var e=[],r=Mo(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}var V1=new Date(1899,11,30,0,0,0);function ks(t,e){var r=t.getTime(),n=V1.getTime()+(t.getTimezoneOffset()-V1.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var PF=new Date,rz=V1.getTime()+(PF.getTimezoneOffset()-V1.getTimezoneOffset())*6e4,XB=PF.getTimezoneOffset();function Hp(t){var e=new Date;return e.setTime(t*24*60*60*1e3+rz),e.getTimezoneOffset()!==XB&&e.setTime(e.getTime()+(e.getTimezoneOffset()-XB)*6e4),e}function nz(t){var e=0,r=0,n=!1,i=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(r=1,s>3&&(n=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(i[s],10)}return e}var YB=new Date("2017-02-19T19:06:09.000Z"),QF=isNaN(YB.getFullYear())?new Date("2/19/17"):YB,iz=QF.getFullYear()==2017;function Pi(t,e){var r=new Date(t);if(iz)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(QF.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Ic(t,e){if(Wr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Rf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Rf(TF(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Rf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Rf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function ts(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ts(t[r]));return e}function ri(t,e){for(var r="";r.length<e;)r+=t;return r}function oo(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var sz=["january","february","march","april","may","june","july","august","september","october","november","december"];function l0(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&sz.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var az=(function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],c=1;c<s.length;++c)o.push(i),o.push(s[c]);return o}})();function HF(t){return t?t.content&&t.type?Ic(t.content,!0):t.data?Sf(t.data):t.asNodeBuffer&&Wr?Sf(t.asNodeBuffer().toString("binary")):t.asBinary?Sf(t.asBinary()):t._data&&t._data.getContent?Sf(Ic(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function jF(t){if(!t)return null;if(t.data)return LB(t.data);if(t.asNodeBuffer&&Wr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?LB(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function oz(t){return t&&t.name.slice(-4)===".bin"?jF(t):HF(t)}function Qa(t,e){for(var r=t.FullPaths||Mo(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||i==o)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function Ey(t,e){var r=Qa(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function vi(t,e,r){if(!r)return oz(Ey(t,e));if(!e)return null;try{return vi(t,e)}catch{return null}}function wa(t,e,r){if(!r)return HF(Ey(t,e));if(!e)return null;try{return wa(t,e)}catch{return null}}function lz(t,e,r){return jF(Ey(t,e))}function JB(t){for(var e=t.FullPaths||Mo(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Az(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Wr?n=Oc(r):n=SK(r),Jr.utils.cfb_add(t,e,n)}Jr.utils.cfb_add(t,e,r)}else t.file(e,r)}function VF(t,e){switch(e.type){case"base64":return Jr.read(t,{type:"base64"});case"binary":return Jr.read(t,{type:"binary"});case"buffer":case"array":return Jr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Nf(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var GF=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,cz=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,ZB=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,uz=/<[^>]*>/g,ys=GF.match(ZB)?ZB:uz,fz=/<\w*:/,dz=/<(\/?)\w+:/;function fr(t,e,r){for(var n={},i=0,s=0;i!==t.length&&!((s=t.charCodeAt(i))===32||s===10||s===13);++i);if(e||(n[0]=t.slice(0,i)),i===t.length)return n;var o=t.match(cz),c=0,h="",d=0,m="",C="",b=1;if(o)for(d=0;d!=o.length;++d){for(C=o[d],s=0;s!=C.length&&C.charCodeAt(s)!==61;++s);for(m=C.slice(0,s).trim();C.charCodeAt(s+1)==32;)++s;for(b=(i=C.charCodeAt(s+1))==34||i==39?1:0,h=C.slice(s+1+b,C.length-b),c=0;c!=m.length&&m.charCodeAt(c)!==58;++c);if(c===m.length)m.indexOf("_")>0&&(m=m.slice(0,m.indexOf("_"))),n[m]=h,n[m.toLowerCase()]=h;else{var I=(c===5&&m.slice(0,5)==="xmlns"?"xmlns":"")+m.slice(c+1);if(n[I]&&m.slice(c-3,c)=="ext")continue;n[I]=h,n[I.toLowerCase()]=h}}return n}function Po(t){return t.replace(dz,"<$1")}var KF={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},hz=Cy(KF),rn=(function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var i=n+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(t,function(c,h){return KF[c]||String.fromCharCode(parseInt(h,c.indexOf("x")>-1?16:10))||c}).replace(e,function(c,h){return String.fromCharCode(parseInt(h,16))});var o=i.indexOf("]]>");return r(i.slice(0,s))+i.slice(s+9,o)+r(i.slice(o+3))}})(),gz=/[&<>'"]/g,pz=/[\u0000-\u001f]/g;function by(t){var e=t+"";return e.replace(gz,function(r){return hz[r]}).replace(/\n/g,"<br/>").replace(pz,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var $B=(function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}})();function jn(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function T2(t){for(var e="",r=0,n=0,i=0,s=0,o=0,c=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}o=t.charCodeAt(r++),c=((n&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(c>>>10&1023)),e+=String.fromCharCode(56320+(c&1023))}return e}function e4(t){var e=kA(2*t.length),r,n,i=1,s=0,o=0,c;for(n=0;n<t.length;n+=i)i=1,(c=t.charCodeAt(n))<128?r=c:c<224?(r=(c&31)*64+(t.charCodeAt(n+1)&63),i=2):c<240?(r=(c&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(c&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function t4(t){return Oc(t,"binary").toString("utf8")}var Rg="foo bar baz",Fn=Wr&&(t4(Rg)==T2(Rg)&&t4||e4(Rg)==T2(Rg)&&e4)||T2,Rf=Wr?function(t){return Oc(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},hd=(function(){var t={};return function(r,n){var i=r+"|"+(n||"");return t[i]?t[i]:t[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),zF=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}})(),mz=(function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),xz=/<\/?(?:vt:)?variant>/g,wz=/<(?:vt:)([^>]*)>([\s\S]*)</;function r4(t,e){var r=fr(t),n=t.match(mz(r.baseType))||[],i=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(s){var o=s.replace(xz,"").match(wz);o&&i.push({v:Fn(o[2]),t:o[1]})}),i}var vz=/(^\s|\s$|\n)/;function yz(t){return Mo(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Cz(t,e,r){return"<"+t+(r!=null?yz(r):"")+(e!=null?(e.match(vz)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function _y(t){if(Wr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Fn(Lc(wy(t)));throw new Error("Bad input format: expected Buffer or string")}var gd=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ez={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},bz=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function _z(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function Tz(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=n?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var c=0;c<=5;++c,s/=256)t[r+c]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var n4=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},i4=Wr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Oc(e)})):n4(t)}:n4,s4=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(pl(t,i)));return n.join("").replace(Fs,"")},Ty=Wr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Fs,""):s4(t,e,r)}:s4,a4=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},WF=Wr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):a4(t,e,r)}:a4,o4=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(Uu(t,i)));return n.join("")},Pd=Wr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):o4(e,r,n)}:o4,qF=function(t,e){var r=xa(t,e);return r>0?Pd(t,e+4,e+4+r-1):""},XF=qF,YF=function(t,e){var r=xa(t,e);return r>0?Pd(t,e+4,e+4+r-1):""},JF=YF,ZF=function(t,e){var r=2*xa(t,e);return r>0?Pd(t,e+4,e+4+r-1):""},$F=ZF,e8=function(e,r){var n=xa(e,r);return n>0?Ty(e,r+4,r+4+n):""},t8=e8,r8=function(t,e){var r=xa(t,e);return r>0?Pd(t,e+4,e+4+r):""},n8=r8,i8=function(t,e){return _z(t,e)},G1=i8,s8=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Wr&&(XF=function(e,r){if(!Buffer.isBuffer(e))return qF(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},JF=function(e,r){if(!Buffer.isBuffer(e))return YF(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},$F=function(e,r){if(!Buffer.isBuffer(e))return ZF(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},t8=function(e,r){if(!Buffer.isBuffer(e))return e8(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},n8=function(e,r){if(!Buffer.isBuffer(e))return r8(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},G1=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):i8(e,r)},s8=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Uu=function(t,e){return t[e]},pl=function(t,e){return t[e+1]*256+t[e]},Bz=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},xa=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},cc=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Sz=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Kf(t,e){var r="",n,i,s=[],o,c,h,d;switch(e){case"dbcs":if(d=this.l,Wr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(h=0;h<t;++h)r+=String.fromCharCode(pl(this,d)),d+=2;t*=2;break;case"utf8":r=Pd(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Ty(this,this.l,this.l+t);break;case"wstr":return Kf.call(this,t,"dbcs");case"lpstr-ansi":r=XF(this,this.l),t=4+xa(this,this.l);break;case"lpstr-cp":r=JF(this,this.l),t=4+xa(this,this.l);break;case"lpwstr":r=$F(this,this.l),t=4+2*xa(this,this.l);break;case"lpp4":t=4+xa(this,this.l),r=t8(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+xa(this,this.l),r=n8(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=Uu(this,this.l+t++))!==0;)s.push(Ng(o));r=s.join("");break;case"_wstr":for(t=0,r="";(o=pl(this,this.l+t))!==0;)s.push(Ng(o)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",d=this.l,h=0;h<t;++h){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Uu(this,d),this.l=d+1,c=Kf.call(this,t-h,o?"dbcs-cont":"sbcs-cont"),s.join("")+c;s.push(Ng(pl(this,d))),d+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,h=0;h!=t;++h){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Uu(this,d),this.l=d+1,c=Kf.call(this,t-h,o?"dbcs-cont":"sbcs-cont"),s.join("")+c;s.push(Ng(Uu(this,d))),d+=1}r=s.join("");break;default:switch(t){case 1:return n=Uu(this,this.l),this.l++,n;case 2:return n=(e==="i"?Bz:pl)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?cc:Sz)(this,this.l),this.l+=4,n):(i=xa(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=G1(this,this.l):i=G1([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=WF(this,this.l,t);break}}return this.l+=t,r}var Iz=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},Nz=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},Rz=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function Fz(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)Rz(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,Iz(this,e,this.l);break;case 8:if(n=8,r==="f"){Tz(this,e,this.l);break}case 16:break;case-4:n=4,Nz(this,e,this.l);break}return this.l+=n,this}function a8(t,e){var r=WF(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Ji(t,e){t.l=e,t.read_shift=Kf,t.chk=a8,t.write_shift=Fz}function vs(t,e){t.l+=e}function Bi(t){var e=kA(t);return Ji(e,0),e}function Rl(t,e,r){if(t){var n,i,s;Ji(t,t.l||0);for(var o=t.length,c=0,h=0;t.l<o;){c=t.read_shift(1),c&128&&(c=(c&127)+((t.read_shift(1)&127)<<7));var d=Y1[c]||Y1[65535];for(n=t.read_shift(1),s=n&127,i=1;i<4&&n&128;++i)s+=((n=t.read_shift(1))&127)<<7*i;h=t.l+s;var m=d.f&&d.f(t,s,r);if(t.l=h,e(m,d,c))return}}}function Mw(){var t=[],e=Wr?256:2048,r=function(d){var m=Bi(d);return Ji(m,0),m},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(d){return n&&d<n.length-n.l?n:(i(),n=r(Math.max(d+1,e)))},o=function(){return i(),gA(t)},c=function(d){i(),n=d,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:c,end:o,_bufs:t}}function zf(t,e,r){var n=ts(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function l4(t,e,r){var n=ts(t);return n.s=zf(n.s,e.s,r),n.e=zf(n.e,e.s,r),n}function Wf(t,e){if(t.cRel&&t.c<0)for(t=ts(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ts(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=br(t);return!t.cRel&&t.cRel!=null&&(r=Uz(r)),!t.rRel&&t.rRel!=null&&(r=kz(r)),r}function B2(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ii(t.s.c)+":"+(t.e.cRel?"":"$")+Ii(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+rs(t.s.r)+":"+(t.e.rRel?"":"$")+rs(t.e.r):Wf(t.s,e.biff)+":"+Wf(t.e,e.biff)}function By(t){return parseInt(Dz(t),10)-1}function rs(t){return""+(t+1)}function kz(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Dz(t){return t.replace(/\$(\d+)$/,"$1")}function Sy(t){for(var e=Mz(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ii(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Uz(t){return t.replace(/^([A-Z])/,"$$$1")}function Mz(t){return t.replace(/^\$([A-Z])/,"$1")}function Oz(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Rs(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function br(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function m0(t){var e=t.indexOf(":");return e==-1?{s:Rs(t),e:Rs(t)}:{s:Rs(t.slice(0,e)),e:Rs(t.slice(e+1))}}function Zr(t,e){return typeof e>"u"||typeof e=="number"?Zr(t.s,t.e):(typeof t!="string"&&(t=br(t)),typeof e!="string"&&(e=br(e)),t==e?t:t+":"+e)}function ni(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function A4(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Ka(t.z,r?ks(e):e)}catch{}try{return t.w=Ka((t.XF||{}).numFmtId||(r?14:0),r?ks(e):e)}catch{return""+e}}function Sl(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Hc[t.v]||t.v:e==null?A4(t,t.v):A4(t,e))}function OA(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function o8(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,s=t||(i?[]:{}),o=0,c=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var h=typeof n.origin=="string"?Rs(n.origin):n.origin;o=h.r,c=h.c}s["!ref"]||(s["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var m=ni(s["!ref"]);d.s.c=m.s.c,d.s.r=m.s.r,d.e.c=Math.max(d.e.c,m.e.c),d.e.r=Math.max(d.e.r,m.e.r),o==-1&&(d.e.r=o=m.e.r+1)}for(var C=0;C!=e.length;++C)if(e[C]){if(!Array.isArray(e[C]))throw new Error("aoa_to_sheet expects an array of arrays");for(var b=0;b!=e[C].length;++b)if(!(typeof e[C][b]>"u")){var I={v:e[C][b]},F=o+C,k=c+b;if(d.s.r>F&&(d.s.r=F),d.s.c>k&&(d.s.c=k),d.e.r<F&&(d.e.r=F),d.e.c<k&&(d.e.c=k),e[C][b]&&typeof e[C][b]=="object"&&!Array.isArray(e[C][b])&&!(e[C][b]instanceof Date))I=e[C][b];else if(Array.isArray(I.v)&&(I.f=e[C][b][1],I.v=I.v[0]),I.v===null)if(I.f)I.t="n";else if(n.nullError)I.t="e",I.v=0;else if(n.sheetStubs)I.t="z";else continue;else typeof I.v=="number"?I.t="n":typeof I.v=="boolean"?I.t="b":I.v instanceof Date?(I.z=n.dateNF||Ir[14],n.cellDates?(I.t="d",I.w=Ka(I.z,ks(I.v))):(I.t="n",I.v=ks(I.v),I.w=Ka(I.z,I.v))):I.t="s";if(i)s[F]||(s[F]=[]),s[F][k]&&s[F][k].z&&(I.z=s[F][k].z),s[F][k]=I;else{var U=br({c:k,r:F});s[U]&&s[U].z&&(I.z=s[U].z),s[U]=I}}}return d.s.c<1e7&&(s["!ref"]=Zr(d)),s}function x0(t,e){return o8(null,t,e)}function Lz(t){return t.read_shift(4,"i")}function xs(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Pz(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Iy(t,e){var r=t.l,n=t.read_shift(1),i=xs(t),s=[],o={t:i,h:i};if((n&1)!==0){for(var c=t.read_shift(4),h=0;h!=c;++h)s.push(Pz(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}var Qz=Iy;function Wa(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Pc(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var Hz=xs;function Ny(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var jz=xs,Ow=Ny;function Ry(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?G1([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):cc(e,0)>>2;return r?i/100:i}function l8(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var Qc=l8;function gs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Vz(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),c=t.read_shift(1),h=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var d=vc[i];d&&(e.rgb=md(d));break;case 2:e.rgb=md([o,c,h]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function Gz(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function A8(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function Kz(t){return A8(t,1)}function zz(t){return A8(t,2)}var Fy=2,Js=3,Fg=11,c4=12,K1=19,kg=64,Wz=65,qz=71,Xz=4108,Yz=4126,Oi=80,c8=81,Jz=[Oi,c8],Zz={1:{n:"CodePage",t:Fy},2:{n:"Category",t:Oi},3:{n:"PresentationFormat",t:Oi},4:{n:"ByteCount",t:Js},5:{n:"LineCount",t:Js},6:{n:"ParagraphCount",t:Js},7:{n:"SlideCount",t:Js},8:{n:"NoteCount",t:Js},9:{n:"HiddenCount",t:Js},10:{n:"MultimediaClipCount",t:Js},11:{n:"ScaleCrop",t:Fg},12:{n:"HeadingPairs",t:Xz},13:{n:"TitlesOfParts",t:Yz},14:{n:"Manager",t:Oi},15:{n:"Company",t:Oi},16:{n:"LinksUpToDate",t:Fg},17:{n:"CharacterCount",t:Js},19:{n:"SharedDoc",t:Fg},22:{n:"HyperlinksChanged",t:Fg},23:{n:"AppVersion",t:Js,p:"version"},24:{n:"DigSig",t:Wz},26:{n:"ContentType",t:Oi},27:{n:"ContentStatus",t:Oi},28:{n:"Language",t:Oi},29:{n:"Version",t:Oi},255:{},2147483648:{n:"Locale",t:K1},2147483651:{n:"Behavior",t:K1},1919054434:{}},$z={1:{n:"CodePage",t:Fy},2:{n:"Title",t:Oi},3:{n:"Subject",t:Oi},4:{n:"Author",t:Oi},5:{n:"Keywords",t:Oi},6:{n:"Comments",t:Oi},7:{n:"Template",t:Oi},8:{n:"LastAuthor",t:Oi},9:{n:"RevNumber",t:Oi},10:{n:"EditTime",t:kg},11:{n:"LastPrinted",t:kg},12:{n:"CreatedDate",t:kg},13:{n:"ModifiedDate",t:kg},14:{n:"PageCount",t:Js},15:{n:"WordCount",t:Js},16:{n:"CharCount",t:Js},17:{n:"Thumbnail",t:qz},18:{n:"Application",t:Oi},19:{n:"DocSecurity",t:Js},255:{},2147483648:{n:"Locale",t:K1},2147483651:{n:"Behavior",t:K1},1919054434:{}},u4={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},eW=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function tW(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var rW=tW([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),vc=ts(rW),Hc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},u8={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},f4={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function nW(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function iW(t){var e=nW();if(!t||!t.match)return e;var r={};if((t.match(ys)||[]).forEach(function(n){var i=fr(n);switch(i[0].replace(fz,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension]=i.ContentType;break;case"<Override":e[f4[i.ContentType]]!==void 0&&e[f4[i.ContentType]].push(i.PartName);break}}),e.xmlns!==Ez.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var Pu={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Lw(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function qf(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(ys)||[]).forEach(function(i){var s=fr(i);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var c=s.TargetMode==="External"?s.Target:Nf(s.Target,e);r[c]=o,n[s.Id]=o}}),r["!id"]=n,r}var sW="application/vnd.oasis.opendocument.spreadsheet";function aW(t,e){for(var r=_y(t),n,i;n=gd.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=fr(n[0],!1),i.path=="/"&&i.type!==sW)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var Xf=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],oW=(function(){for(var t=new Array(Xf.length),e=0;e<Xf.length;++e){var r=Xf[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t})();function f8(t){var e={};t=Fn(t);for(var r=0;r<Xf.length;++r){var n=Xf[r],i=t.match(oW[r]);i!=null&&i.length>0&&(e[n[1]]=rn(i[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Pi(e[n[1]]))}return e}var lW=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function d8(t,e,r,n){var i=[];if(typeof t=="string")i=r4(t,n);else for(var s=0;s<t.length;++s)i=i.concat(t[s].map(function(m){return{v:m}}));var o=typeof e=="string"?r4(e,n).map(function(m){return m.v}):e,c=0,h=0;if(o.length>0)for(var d=0;d!==i.length;d+=2){switch(h=+i[d+1].v,i[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=h,r.SheetNames=o.slice(c,c+h);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=h,r.DefinedNames=o.slice(c,c+h);break;case"Charts":case"Diagramme":r.Chartsheets=h,r.ChartNames=o.slice(c,c+h);break}c+=h}}function AW(t,e,r){var n={};return e||(e={}),t=Fn(t),lW.forEach(function(i){var s=(t.match(hd(i[0]))||[])[1];switch(i[2]){case"string":s&&(e[i[1]]=rn(s));break;case"bool":e[i[1]]=s==="true";break;case"raw":var o=t.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));o&&o.length>0&&(n[i[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&d8(n.HeadingPairs,n.TitlesOfParts,e,r),e}var cW=/<[^>]+>[^<]*/g;function uW(t,e){var r={},n="",i=t.match(cW);if(i)for(var s=0;s!=i.length;++s){var o=i[s],c=fr(o);switch(c[0]){case"<?xml":break;case"<Properties":break;case"<property":n=rn(c.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var h=o.split(">"),d=h[0].slice(4),m=h[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=rn(m);break;case"bool":r[n]=jn(m);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(m,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(m);break;case"filetime":case"date":r[n]=Pi(m);break;case"cy":case"error":r[n]=rn(m);break;default:if(d.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,h)}}else if(o.slice(0,2)!=="</"){if(e.WTF)throw new Error(o)}}}return r}var fW={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},S2;function dW(t,e,r){S2||(S2=Cy(fW)),e=S2[e]||e,t[e]=r}function ky(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function h8(t,e,r){var n=t.l,i=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return i}function g8(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function p8(t,e,r){return e===31?g8(t):h8(t,e,r)}function Pw(t,e,r){return p8(t,e,r===!1?0:4)}function hW(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return p8(t,e,0)}function gW(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var i=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Fs,""),t.l-i&2&&(t.l+=2)}return r}function pW(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Fs,"");return r}function mW(t){var e=t.l,r=z1(t,c8);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=z1(t,Js);return[r,n]}function xW(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(mW(t));return r}function d4(t,e){for(var r=t.read_shift(4),n={},i=0;i!=r;++i){var s=t.read_shift(4),o=t.read_shift(4);n[s]=t.read_shift(o,e===1200?"utf16le":"utf8").replace(Fs,"").replace(If,"!"),e===1200&&o%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function m8(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function wW(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function z1(t,e,r){var n=t.read_shift(2),i,s=r||{};if(t.l+=2,e!==c4&&n!==e&&Jz.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===c4?n:e){case 2:return i=t.read_shift(2,"i"),s.raw||(t.l+=2),i;case 3:return i=t.read_shift(4,"i"),i;case 11:return t.read_shift(4)!==0;case 19:return i=t.read_shift(4),i;case 30:return h8(t,n,4).replace(Fs,"");case 31:return g8(t);case 64:return ky(t);case 65:return m8(t);case 71:return wW(t);case 80:return Pw(t,n,!s.raw).replace(Fs,"");case 81:return hW(t,n).replace(Fs,"");case 4108:return xW(t);case 4126:case 4127:return n==4127?gW(t):pW(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function h4(t,e){var r=t.l,n=t.read_shift(4),i=t.read_shift(4),s=[],o=0,c=0,h=-1,d={};for(o=0;o!=i;++o){var m=t.read_shift(4),C=t.read_shift(4);s[o]=[m,C+r]}s.sort(function(K,Q){return K[1]-Q[1]});var b={};for(o=0;o!=i;++o){if(t.l!==s[o][1]){var I=!0;if(o>0&&e)switch(e[s[o-1][0]].t){case 2:t.l+2===s[o][1]&&(t.l+=2,I=!1);break;case 80:t.l<=s[o][1]&&(t.l=s[o][1],I=!1);break;case 4108:t.l<=s[o][1]&&(t.l=s[o][1],I=!1);break}if((!e||o==0)&&t.l<=s[o][1]&&(I=!1,t.l=s[o][1]),I)throw new Error("Read Error: Expected address "+s[o][1]+" at "+t.l+" :"+o)}if(e){var F=e[s[o][0]];if(b[F.n]=z1(t,F.t,{raw:!0}),F.p==="version"&&(b[F.n]=String(b[F.n]>>16)+"."+("0000"+String(b[F.n]&65535)).slice(-4)),F.n=="CodePage")switch(b[F.n]){case 0:b[F.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:so(c=b[F.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+b[F.n])}}else if(s[o][0]===1){if(c=b.CodePage=z1(t,Fy),so(c),h!==-1){var k=t.l;t.l=s[h][1],d=d4(t,c),t.l=k}}else if(s[o][0]===0){if(c===0){h=o,t.l=s[o+1][1];continue}d=d4(t,c)}else{var U=d[s[o][0]],V;switch(t[t.l]){case 65:t.l+=4,V=m8(t);break;case 30:t.l+=4,V=Pw(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,V=Pw(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,V=t.read_shift(4,"i");break;case 19:t.l+=4,V=t.read_shift(4);break;case 5:t.l+=4,V=t.read_shift(8,"f");break;case 11:t.l+=4,V=ci(t,4);break;case 64:t.l+=4,V=Pi(ky(t));break;default:throw new Error("unparsed value: "+t[t.l])}b[U]=V}}return t.l=r+n,b}function g4(t,e,r){var n=t.content;if(!n)return{};Ji(n,0);var i,s,o,c,h=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),m=n.read_shift(16);if(m!==Jr.utils.consts.HEADER_CLSID&&m!==r)throw new Error("Bad PropertySet CLSID "+m);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=n.read_shift(16),c=n.read_shift(4),i===1&&c!==n.l)throw new Error("Length mismatch: "+c+" !== "+n.l);i===2&&(o=n.read_shift(16),h=n.read_shift(4));var C=h4(n,e),b={SystemIdentifier:d};for(var I in C)b[I]=C[I];if(b.FMTID=s,i===1)return b;if(h-n.l==2&&(n.l+=2),n.l!==h)throw new Error("Length mismatch 2: "+n.l+" !== "+h);var F;try{F=h4(n,null)}catch{}for(I in F)b[I]=F[I];return b.FMTID=[s,o],b}function oA(t,e){return t.read_shift(e),null}function vW(t,e,r){for(var n=[],i=t.l+e;t.l<i;)n.push(r(t,i-t.l));if(i!==t.l)throw new Error("Slurp error");return n}function ci(t,e){return t.read_shift(e)===1}function yi(t){return t.read_shift(2,"u")}function x8(t,e){return vW(t,e,yi)}function yW(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Qd(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var o=n?t.read_shift(n,i):"";return o}function CW(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,i=r&8,s=1+(r&1),o=0,c,h={};i&&(o=t.read_shift(2)),n&&(c=t.read_shift(4));var d=s==2?"dbcs-cont":"sbcs-cont",m=e===0?"":t.read_shift(e,d);return i&&(t.l+=4*o),n&&(t.l+=c),h.t=m,i||(h.raw="<t>"+h.t+"</t>",h.r=h.t),h}function Nc(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Hd(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Nc(t,n,r)}function jc(t,e,r){if(r.biff>5)return Hd(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function EW(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function bW(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var i=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Fs,"");return n&&(t.l+=24),i}function _W(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=t.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=t.read_shift(s>>1,"utf16le").replace(Fs,"");return r+o}function TW(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return bW(t);case"0303000000000000c000000000000046":return _W(t);default:throw new Error("Unsupported Moniker "+r)}}function Dg(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Fs,""):"";return r}function BW(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=t.read_shift(2);t.l+=2;var s,o,c,h,d="",m,C;i&16&&(s=Dg(t,r-t.l)),i&128&&(o=Dg(t,r-t.l)),(i&257)===257&&(c=Dg(t,r-t.l)),(i&257)===1&&(h=TW(t,r-t.l)),i&8&&(d=Dg(t,r-t.l)),i&32&&(m=t.read_shift(16)),i&64&&(C=ky(t)),t.l=r;var b=o||c||h||"";b&&d&&(b+="#"+d),b||(b="#"+d),i&2&&b.charAt(0)=="/"&&b.charAt(1)!="/"&&(b="file://"+b);var I={Target:b};return m&&(I.guid=m),C&&(I.time=C),s&&(I.Tooltip=s),I}function w8(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),i=t.read_shift(1);return[e,r,n,i]}function v8(t,e){var r=w8(t);return r[3]=0,r}function Qo(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function SW(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function IW(t,e,r){return e===0?"":jc(t,e,r)}function NW(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[i,s,o]}function y8(t){var e=t.read_shift(2),r=Ry(t);return[e,r]}function RW(t,e,r){t.l+=4,e-=4;var n=t.l+e,i=Qd(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,i}function jp(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function C8(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),i=t.read_shift(1);return{s:{c:n,r:e},e:{c:i,r}}}var FW=C8;function E8(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function kW(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function DW(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function As(t){t.l+=2,t.l+=t.read_shift(2)}var UW={0:As,4:As,5:As,6:As,7:DW,8:As,9:As,10:As,11:As,12:As,13:kW,14:As,15:As,16:As,17:As,18:As,19:As,20:As,21:E8};function MW(t,e){for(var r=t.l+e,n=[];t.l<r;){var i=t.read_shift(2);t.l-=2;try{n.push(UW[i](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Ug(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function OW(t,e){return e===0||t.read_shift(2),1200}function LW(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,i=jc(t,0,r);return t.read_shift(e+n-t.l),i}function PW(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function QW(t,e,r){var n=t.read_shift(4),i=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=Qd(t,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:i,dt:s,name:o}}function HW(t,e){for(var r=t.l+e,n=t.read_shift(4),i=t.read_shift(4),s=[],o=0;o!=i&&t.l<r;++o)s.push(CW(t));return s.Count=n,s.Unique=i,s}function jW(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function VW(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function GW(t){var e=SW(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function KW(t){return t.read_shift(2),t.read_shift(4)}function p4(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var i=t.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,i]}function zW(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),h=t.read_shift(2),d=t.read_shift(2);return{Pos:[e,r],Dim:[n,i],Flags:s,CurTab:o,FirstTab:c,Selected:h,TabRatio:d}}function WW(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function qW(){}function XW(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Qd(t,0,r),n}function YW(t){var e=Qo(t);return e.isst=t.read_shift(4),e}function JW(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,i=Qo(t);r.biff==2&&t.l++;var s=Hd(t,n-t.l,r);return i.val=s,i}function ZW(t,e,r){var n=t.read_shift(2),i=jc(t,0,r);return[n,i]}var $W=jc;function m4(t,e,r){var n=t.l+e,i=r.biff==8||!r.biff?4:2,s=t.read_shift(i),o=t.read_shift(i),c=t.read_shift(2),h=t.read_shift(2);return t.l=n,{s:{r:s,c},e:{r:o,c:h}}}function eq(t){var e=t.read_shift(2),r=t.read_shift(2),n=y8(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function tq(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(y8(t));if(t.l!==r)throw new Error("MulRK read error");var o=t.read_shift(2);if(s.length!=o-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:o,rkrec:s}}function rq(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var o=t.read_shift(2);if(s.length!=o-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:o,ixfe:s}}function nq(t,e,r,n){var i={},s=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(4),h=t.read_shift(2);return i.patternType=eW[c>>26],n.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=o&15,i.dgRight=o>>4&15,i.dgTop=o>>8&15,i.dgBottom=o>>12&15,i.icvLeft=o>>16&127,i.icvRight=o>>23&127,i.grbitDiag=o>>30&3,i.icvTop=c&127,i.icvBottom=c>>7&127,i.icvDiag=c>>14&127,i.dgDiag=c>>21&15,i.icvFore=h&127,i.icvBack=h>>7&127,i.fsxButton=h>>14&1),i}function iq(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=nq(t,e,n.fStyle,r),n}function sq(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function x4(t,e,r){var n=Qo(t);(r.biff==2||e==9)&&++t.l;var i=yW(t);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function aq(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Qo(t),i=gs(t);return n.val=i,n}var w4=IW;function oq(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=Nc(t,s),c=[];n>t.l;)c.push(Hd(t));return[s,i,o,c]}function v4(t,e,r){var n=t.read_shift(2),i,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=RW(t,e-2,r)),s.body=i||t.read_shift(e-2),typeof i=="string"&&(s.Name=i),s}var lq=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function y4(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(r&&r.biff==2?1:2),h=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),h=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var d=Nc(t,o,r);i&32&&(d=lq[d.charCodeAt(0)]);var m=n-t.l;r&&r.biff==2&&--m;var C=n==t.l||c===0||!(m>0)?[]:VJ(t,m,r,c);return{chKey:s,Name:d,itab:h,rgce:C}}function b8(t,e,r){if(r.biff<8)return Aq(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(NW(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function Aq(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Qd(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function cq(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),i=t.read_shift(2),s=Nc(t,n,r),o=Nc(t,i,r);return[s,o]}function uq(t,e,r){var n=C8(t);t.l++;var i=t.read_shift(1);return e-=8,[GJ(t,e,r),i,n]}function C4(t,e,r){var n=FW(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,HJ(t,e,r)]}function fq(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function dq(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),c=jc(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:i},c,o,s]}}function hq(t,e,r){return dq(t,e,r)}function gq(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(jp(t));return r}function pq(t,e,r){if(r&&r.biff<8)return xq(t,e,r);var n=E8(t),i=MW(t,e-22,n[1]);return{cmo:n,ft:i}}var mq={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var i=t.read_shift(1);return t.l+=i,t.l=r,{fmt:n}}};function xq(t,e,r){t.l+=4;var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var o=[];return o.push((mq[n]||vs)(t,e,r)),{cmo:[i,n,s],ft:o}}function wq(t,e,r){var n=t.l,i="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:o=EW(t,6,r);var c=t.read_shift(2);t.read_shift(2),yi(t,2);var h=t.read_shift(2);t.l+=h;for(var d=1;d<t.lens.length-1;++d){if(t.l-n!=t.lens[d])throw new Error("TxO: bad continue record");var m=t[t.l],C=Nc(t,t.lens[d+1]-t.lens[d]-1);if(i+=C,i.length>=(m?c:2*c))break}if(i.length!==c&&i.length!==c*2)throw new Error("cchText: "+c+" != "+i.length);return t.l=n+e,{t:i}}catch{return t.l=n+e,{t:i}}}function vq(t,e){var r=jp(t);t.l+=16;var n=BW(t,e-24);return[r,n]}function yq(t,e){t.read_shift(2);var r=jp(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Fs,""),[r,n]}function Cq(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=u4[r]||r,r=t.read_shift(2),e[1]=u4[r]||r,e}function Eq(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(v8(t));return r}function bq(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(v8(t));return r}function _q(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function _8(t,e,r){if(!r.cellStyles)return vs(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),c=t.read_shift(n),h=t.read_shift(2);n==2&&(t.l+=2);var d={s:i,e:s,w:o,ixfe:c,flags:h};return(r.biff>=5||!r.biff)&&(d.level=h>>8&7),d}function Tq(t,e){var r={};return e<32||(t.l+=16,r.header=gs(t),r.footer=gs(t),t.l+=2),r}function Bq(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var i=t.read_shift(1);return t.l+=3,i&16&&(n.area=!0),n}var Sq=Qo,Iq=x8,Nq=Hd;function Rq(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,i}function Fq(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Qo(t);++t.l;var i=jc(t,e-7,r);return n.t="str",n.val=i,n}function kq(t){var e=Qo(t);++t.l;var r=gs(t);return e.t="n",e.val=r,e}function Dq(t){var e=Qo(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function Uq(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Mq(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Oq(t,e,r){var n=t.l+e,i=Qo(t),s=t.read_shift(2),o=Nc(t,s,r);return t.l=n,i.t="str",i.val=o,i}var Lq=[2,3,48,49,131,139,140,245],E4=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Cy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(c,h){var d=[],m=kA(1);switch(h.type){case"base64":m=io(Ea(c));break;case"binary":m=io(c);break;case"buffer":case"array":m=c;break}Ji(m,0);var C=m.read_shift(1),b=!!(C&136),I=!1,F=!1;switch(C){case 2:break;case 3:break;case 48:I=!0,b=!0;break;case 49:I=!0,b=!0;break;case 131:break;case 139:break;case 140:F=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+C.toString(16))}var k=0,U=521;C==2&&(k=m.read_shift(2)),m.l+=3,C!=2&&(k=m.read_shift(4)),k>1048576&&(k=1e6),C!=2&&(U=m.read_shift(2));var V=m.read_shift(2),K=h.codepage||1252;C!=2&&(m.l+=16,m.read_shift(1),m[m.l]!==0&&(K=t[m[m.l]]),m.l+=1,m.l+=2),F&&(m.l+=36);for(var Q=[],te={},re=Math.min(m.length,C==2?521:U-10-(I?264:0)),z=F?32:11;m.l<re&&m[m.l]!=13;)switch(te={},te.name=fd.utils.decode(K,m.slice(m.l,m.l+z)).replace(/[\u0000\r\n].*$/g,""),m.l+=z,te.type=String.fromCharCode(m.read_shift(1)),C!=2&&!F&&(te.offset=m.read_shift(4)),te.len=m.read_shift(1),C==2&&(te.offset=m.read_shift(2)),te.dec=m.read_shift(1),te.name.length&&Q.push(te),C!=2&&(m.l+=F?13:14),te.type){case"B":(!I||te.len!=8)&&h.WTF&&console.log("Skipping "+te.name+":"+te.type);break;case"G":case"P":h.WTF&&console.log("Skipping "+te.name+":"+te.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+te.type)}if(m[m.l]!==13&&(m.l=U-1),m.read_shift(1)!==13)throw new Error("DBF Terminator not found "+m.l+" "+m[m.l]);m.l=U;var M=0,P=0;for(d[0]=[],P=0;P!=Q.length;++P)d[0][P]=Q[P].name;for(;k-- >0;){if(m[m.l]===42){m.l+=V;continue}for(++m.l,d[++M]=[],P=0,P=0;P!=Q.length;++P){var O=m.slice(m.l,m.l+Q[P].len);m.l+=Q[P].len,Ji(O,0);var ee=fd.utils.decode(K,O);switch(Q[P].type){case"C":ee.trim().length&&(d[M][P]=ee.replace(/\s+$/,""));break;case"D":ee.length===8?d[M][P]=new Date(+ee.slice(0,4),+ee.slice(4,6)-1,+ee.slice(6,8)):d[M][P]=ee;break;case"F":d[M][P]=parseFloat(ee.trim());break;case"+":case"I":d[M][P]=F?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(ee.trim().toUpperCase()){case"Y":case"T":d[M][P]=!0;break;case"N":case"F":d[M][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ee+"|")}break;case"M":if(!b)throw new Error("DBF Unexpected MEMO for type "+C.toString(16));d[M][P]="##MEMO##"+(F?parseInt(ee.trim(),10):O.read_shift(4));break;case"N":ee=ee.replace(/\u0000/g,"").trim(),ee&&ee!="."&&(d[M][P]=+ee||0);break;case"@":d[M][P]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":d[M][P]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":d[M][P]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[M][P]=-O.read_shift(-8,"f");break;case"B":if(I&&Q[P].len==8){d[M][P]=O.read_shift(8,"f");break}case"G":case"P":O.l+=Q[P].len;break;case"0":if(Q[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+Q[P].type)}}}if(C!=2&&m.l<m.length&&m[m.l++]!=26)throw new Error("DBF EOF Marker missing "+(m.l-1)+" of "+m.length+" "+m[m.l-1].toString(16));return h&&h.sheetRows&&(d=d.slice(0,h.sheetRows)),h.DBF=Q,d}function n(c,h){var d=h||{};d.dateNF||(d.dateNF="yyyymmdd");var m=x0(r(c,d),d);return m["!cols"]=d.DBF.map(function(C){return{wch:C.len,DBF:C}}),delete d.DBF,m}function i(c,h){try{return OA(n(c,h),h)}catch(d){if(h&&h.WTF)throw d}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(c,h){var d=h||{};if(+d.codepage>=0&&so(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var m=Mw(),C=zw(c,{header:1,raw:!0,cellDates:!0}),b=C[0],I=C.slice(1),F=c["!cols"]||[],k=0,U=0,V=0,K=1;for(k=0;k<b.length;++k){if(((F[k]||{}).DBF||{}).name){b[k]=F[k].DBF.name,++V;continue}if(b[k]!=null){if(++V,typeof b[k]=="number"&&(b[k]=b[k].toString(10)),typeof b[k]!="string")throw new Error("DBF Invalid column name "+b[k]+" |"+typeof b[k]+"|");if(b.indexOf(b[k])!==k){for(U=0;U<1024;++U)if(b.indexOf(b[k]+"_"+U)==-1){b[k]+="_"+U;break}}}}var Q=ni(c["!ref"]),te=[],re=[],z=[];for(k=0;k<=Q.e.c-Q.s.c;++k){var M="",P="",O=0,ee=[];for(U=0;U<I.length;++U)I[U][k]!=null&&ee.push(I[U][k]);if(ee.length==0||b[k]==null){te[k]="?";continue}for(U=0;U<ee.length;++U){switch(typeof ee[U]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=ee[U]instanceof Date?"D":"C";break;default:P="C"}O=Math.max(O,String(ee[U]).length),M=M&&M!=P?"C":P}O>250&&(O=250),P=((F[k]||{}).DBF||{}).type,P=="C"&&F[k].DBF.len>O&&(O=F[k].DBF.len),M=="B"&&P=="N"&&(M="N",z[k]=F[k].DBF.dec,O=F[k].DBF.len),re[k]=M=="C"||P=="N"?O:s[M]||0,K+=re[k],te[k]=M}var Y=m.next(32);for(Y.write_shift(4,318902576),Y.write_shift(4,I.length),Y.write_shift(2,296+32*V),Y.write_shift(2,K),k=0;k<4;++k)Y.write_shift(4,0);for(Y.write_shift(4,0|(+e[bF]||3)<<8),k=0,U=0;k<b.length;++k)if(b[k]!=null){var X=m.next(32),G=(b[k].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);X.write_shift(1,G,"sbcs"),X.write_shift(1,te[k]=="?"?"C":te[k],"sbcs"),X.write_shift(4,U),X.write_shift(1,re[k]||s[te[k]]||0),X.write_shift(1,z[k]||0),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(1,0),X.write_shift(4,0),X.write_shift(4,0),U+=re[k]||s[te[k]]||0}var Ie=m.next(264);for(Ie.write_shift(4,13),k=0;k<65;++k)Ie.write_shift(4,0);for(k=0;k<I.length;++k){var ge=m.next(K);for(ge.write_shift(1,0),U=0;U<b.length;++U)if(b[U]!=null)switch(te[U]){case"L":ge.write_shift(1,I[k][U]==null?63:I[k][U]?84:70);break;case"B":ge.write_shift(8,I[k][U]||0,"f");break;case"N":var de="0";for(typeof I[k][U]=="number"&&(de=I[k][U].toFixed(z[U]||0)),V=0;V<re[U]-de.length;++V)ge.write_shift(1,32);ge.write_shift(1,de,"sbcs");break;case"D":I[k][U]?(ge.write_shift(4,("0000"+I[k][U].getFullYear()).slice(-4),"sbcs"),ge.write_shift(2,("00"+(I[k][U].getMonth()+1)).slice(-2),"sbcs"),ge.write_shift(2,("00"+I[k][U].getDate()).slice(-2),"sbcs")):ge.write_shift(8,"00000000","sbcs");break;case"C":var we=String(I[k][U]!=null?I[k][U]:"").slice(0,re[U]);for(ge.write_shift(1,we,"sbcs"),V=0;V<re[U]-we.length;++V)ge.write_shift(1,32);break}}return m.next(1).write_shift(1,26),m.end()}return{to_workbook:i,to_sheet:n,from_sheet:o}})(),Pq=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Mo(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(b,I){var F=t[I];return typeof F=="number"?PB(F):F},n=function(b,I,F){var k=I.charCodeAt(0)-32<<4|F.charCodeAt(0)-48;return k==59?b:PB(k)};t["|"]=254;function i(b,I){switch(I.type){case"base64":return s(Ea(b),I);case"binary":return s(b,I);case"buffer":return s(Wr&&Buffer.isBuffer(b)?b.toString("binary"):Lc(b),I);case"array":return s(Ic(b),I)}throw new Error("Unrecognized type "+I.type)}function s(b,I){var F=b.split(/[\n\r]+/),k=-1,U=-1,V=0,K=0,Q=[],te=[],re=null,z={},M=[],P=[],O=[],ee=0,Y;for(+I.codepage>=0&&so(+I.codepage);V!==F.length;++V){ee=0;var X=F[V].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),G=X.replace(/;;/g,"\0").split(";").map(function(ae){return ae.replace(/\u0000/g,";")}),Ie=G[0],ge;if(X.length>0)switch(Ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":G[1].charAt(0)=="P"&&te.push(X.slice(3).replace(/;;/g,";"));break;case"C":var de=!1,we=!1,Ge=!1,be=!1,De=-1,ne=-1;for(K=1;K<G.length;++K)switch(G[K].charAt(0)){case"A":break;case"X":U=parseInt(G[K].slice(1))-1,we=!0;break;case"Y":for(k=parseInt(G[K].slice(1))-1,we||(U=0),Y=Q.length;Y<=k;++Y)Q[Y]=[];break;case"K":ge=G[K].slice(1),ge.charAt(0)==='"'?ge=ge.slice(1,ge.length-1):ge==="TRUE"?ge=!0:ge==="FALSE"?ge=!1:isNaN(oo(ge))?isNaN(l0(ge).getDate())||(ge=Pi(ge)):(ge=oo(ge),re!==null&&p0(re)&&(ge=Hp(ge))),de=!0;break;case"E":be=!0;var q=Xu(G[K].slice(1),{r:k,c:U});Q[k][U]=[Q[k][U],q];break;case"S":Ge=!0,Q[k][U]=[Q[k][U],"S5S"];break;case"G":break;case"R":De=parseInt(G[K].slice(1))-1;break;case"C":ne=parseInt(G[K].slice(1))-1;break;default:if(I&&I.WTF)throw new Error("SYLK bad record "+X)}if(de&&(Q[k][U]&&Q[k][U].length==2?Q[k][U][0]=ge:Q[k][U]=ge,re=null),Ge){if(be)throw new Error("SYLK shared formula cannot have own formula");var ce=De>-1&&Q[De][ne];if(!ce||!ce[1])throw new Error("SYLK shared formula cannot find base");Q[k][U][1]=U8(ce[1],{r:k-De,c:U-ne})}break;case"F":var oe=0;for(K=1;K<G.length;++K)switch(G[K].charAt(0)){case"X":U=parseInt(G[K].slice(1))-1,++oe;break;case"Y":for(k=parseInt(G[K].slice(1))-1,Y=Q.length;Y<=k;++Y)Q[Y]=[];break;case"M":ee=parseInt(G[K].slice(1))/20;break;case"F":break;case"G":break;case"P":re=te[parseInt(G[K].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=G[K].slice(1).split(" "),Y=parseInt(O[0],10);Y<=parseInt(O[1],10);++Y)ee=parseInt(O[2],10),P[Y-1]=ee===0?{hidden:!0}:{wch:ee},A0(P[Y-1]);break;case"C":U=parseInt(G[K].slice(1))-1,P[U]||(P[U]={});break;case"R":k=parseInt(G[K].slice(1))-1,M[k]||(M[k]={}),ee>0?(M[k].hpt=ee,M[k].hpx=xd(ee)):ee===0&&(M[k].hidden=!0);break;default:if(I&&I.WTF)throw new Error("SYLK bad record "+X)}oe<1&&(re=null);break;default:if(I&&I.WTF)throw new Error("SYLK bad record "+X)}}return M.length>0&&(z["!rows"]=M),P.length>0&&(z["!cols"]=P),I&&I.sheetRows&&(Q=Q.slice(0,I.sheetRows)),[Q,z]}function o(b,I){var F=i(b,I),k=F[0],U=F[1],V=x0(k,I);return Mo(U).forEach(function(K){V[K]=U[K]}),V}function c(b,I){return OA(o(b,I),I)}function h(b,I,F,k){var U="C;Y"+(F+1)+";X"+(k+1)+";K";switch(b.t){case"n":U+=b.v||0,b.f&&!b.F&&(U+=";E"+_Y(b.f,{r:F,c:k}));break;case"b":U+=b.v?"TRUE":"FALSE";break;case"e":U+=b.w||b.v;break;case"d":U+='"'+(b.w||b.v)+'"';break;case"s":U+='"'+b.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return U}function d(b,I){I.forEach(function(F,k){var U="F;W"+(k+1)+" "+(k+1)+" ";F.hidden?U+="0":(typeof F.width=="number"&&!F.wpx&&(F.wpx=q1(F.width)),typeof F.wpx=="number"&&!F.wch&&(F.wch=X1(F.wpx)),typeof F.wch=="number"&&(U+=Math.round(F.wch))),U.charAt(U.length-1)!=" "&&b.push(U)})}function m(b,I){I.forEach(function(F,k){var U="F;";F.hidden?U+="M0;":F.hpt?U+="M"+20*F.hpt+";":F.hpx&&(U+="M"+20*F8(F.hpx)+";"),U.length>2&&b.push(U+"R"+(k+1))})}function C(b,I){var F=["ID;PWXL;N;E"],k=[],U=ni(b["!ref"]),V,K=Array.isArray(b),Q=`\r
`;F.push("P;PGeneral"),F.push("F;P0;DG0G8;M255"),b["!cols"]&&d(F,b["!cols"]),b["!rows"]&&m(F,b["!rows"]),F.push("B;Y"+(U.e.r-U.s.r+1)+";X"+(U.e.c-U.s.c+1)+";D"+[U.s.c,U.s.r,U.e.c,U.e.r].join(" "));for(var te=U.s.r;te<=U.e.r;++te)for(var re=U.s.c;re<=U.e.c;++re){var z=br({r:te,c:re});V=K?(b[te]||[])[re]:b[z],!(!V||V.v==null&&(!V.f||V.F))&&k.push(h(V,b,te,re))}return F.join(Q)+Q+k.join(Q)+Q+"E"+Q}return{to_workbook:c,to_sheet:o,from_sheet:C}})(),Qq=(function(){function t(s,o){switch(o.type){case"base64":return e(Ea(s),o);case"binary":return e(s,o);case"buffer":return e(Wr&&Buffer.isBuffer(s)?s.toString("binary"):Lc(s),o);case"array":return e(Ic(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var c=s.split(`
`),h=-1,d=-1,m=0,C=[];m!==c.length;++m){if(c[m].trim()==="BOT"){C[++h]=[],d=0;continue}if(!(h<0)){var b=c[m].trim().split(","),I=b[0],F=b[1];++m;for(var k=c[m]||"";(k.match(/["]/g)||[]).length&1&&m<c.length-1;)k+=`
`+c[++m];switch(k=k.trim(),+I){case-1:if(k==="BOT"){C[++h]=[],d=0;continue}else if(k!=="EOD")throw new Error("Unrecognized DIF special command "+k);break;case 0:k==="TRUE"?C[h][d]=!0:k==="FALSE"?C[h][d]=!1:isNaN(oo(F))?isNaN(l0(F).getDate())?C[h][d]=F:C[h][d]=Pi(F):C[h][d]=oo(F),++d;break;case 1:k=k.slice(1,k.length-1),k=k.replace(/""/g,'"'),k&&k.match(/^=".*"$/)&&(k=k.slice(2,-1)),C[h][d++]=k!==""?k:null;break}if(k==="EOD")break}}return o&&o.sheetRows&&(C=C.slice(0,o.sheetRows)),C}function r(s,o){return x0(t(s,o),o)}function n(s,o){return OA(r(s,o),o)}var i=(function(){var s=function(h,d,m,C,b){h.push(d),h.push(m+","+C),h.push('"'+b.replace(/"/g,'""')+'"')},o=function(h,d,m,C){h.push(d+","+m),h.push(d==1?'"'+C.replace(/"/g,'""')+'"':C)};return function(h){var d=[],m=ni(h["!ref"]),C,b=Array.isArray(h);s(d,"TABLE",0,1,"sheetjs"),s(d,"VECTORS",0,m.e.r-m.s.r+1,""),s(d,"TUPLES",0,m.e.c-m.s.c+1,""),s(d,"DATA",0,0,"");for(var I=m.s.r;I<=m.e.r;++I){o(d,-1,0,"BOT");for(var F=m.s.c;F<=m.e.c;++F){var k=br({r:I,c:F});if(C=b?(h[I]||[])[F]:h[k],!C){o(d,1,0,"");continue}switch(C.t){case"n":var U=C.w;!U&&C.v!=null&&(U=C.v),U==null?C.f&&!C.F?o(d,1,0,"="+C.f):o(d,1,0,""):o(d,0,U,"V");break;case"b":o(d,0,C.v?1:0,C.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(C.v)?C.v:'="'+C.v+'"');break;case"d":C.w||(C.w=Ka(C.z||Ir[14],ks(Pi(C.v)))),o(d,0,C.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var V=`\r
`,K=d.join(V);return K}})();return{to_workbook:n,to_sheet:r,from_sheet:i}})(),Hq=(function(){function t(C){return C.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(C){return C.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(C,b){for(var I=C.split(`
`),F=-1,k=-1,U=0,V=[];U!==I.length;++U){var K=I[U].trim().split(":");if(K[0]==="cell"){var Q=Rs(K[1]);if(V.length<=Q.r)for(F=V.length;F<=Q.r;++F)V[F]||(V[F]=[]);switch(F=Q.r,k=Q.c,K[2]){case"t":V[F][k]=t(K[3]);break;case"v":V[F][k]=+K[3];break;case"vtf":var te=K[K.length-1];case"vtc":switch(K[3]){case"nl":V[F][k]=!!+K[4];break;default:V[F][k]=+K[4];break}K[2]=="vtf"&&(V[F][k]=[V[F][k],te])}}}return b&&b.sheetRows&&(V=V.slice(0,b.sheetRows)),V}function n(C,b){return x0(r(C,b),b)}function i(C,b){return OA(n(C,b),b)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,c=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),h="--SocialCalcSpreadsheetControlSave--";function d(C){if(!C||!C["!ref"])return"";for(var b=[],I=[],F,k="",U=m0(C["!ref"]),V=Array.isArray(C),K=U.s.r;K<=U.e.r;++K)for(var Q=U.s.c;Q<=U.e.c;++Q)if(k=br({r:K,c:Q}),F=V?(C[K]||[])[Q]:C[k],!(!F||F.v==null||F.t==="z")){switch(I=["cell",k,"t"],F.t){case"s":case"str":I.push(e(F.v));break;case"n":F.f?(I[2]="vtf",I[3]="n",I[4]=F.v,I[5]=e(F.f)):(I[2]="v",I[3]=F.v);break;case"b":I[2]="vt"+(F.f?"f":"c"),I[3]="nl",I[4]=F.v?"1":"0",I[5]=e(F.f||(F.v?"TRUE":"FALSE"));break;case"d":var te=ks(Pi(F.v));I[2]="vtc",I[3]="nd",I[4]=""+te,I[5]=F.w||Ka(F.z||Ir[14],te);break;case"e":continue}b.push(I.join(":"))}return b.push("sheet:c:"+(U.e.c-U.s.c+1)+":r:"+(U.e.r-U.s.r+1)+":tvf:1"),b.push("valueformat:1:text-wiki"),b.join(`
`)}function m(C){return[s,o,c,o,d(C),h].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:m}})(),pd=(function(){function t(m,C,b,I,F){F.raw?C[b][I]=m:m===""||(m==="TRUE"?C[b][I]=!0:m==="FALSE"?C[b][I]=!1:isNaN(oo(m))?isNaN(l0(m).getDate())?C[b][I]=m:C[b][I]=Pi(m):C[b][I]=oo(m))}function e(m,C){var b=C||{},I=[];if(!m||m.length===0)return I;for(var F=m.split(/[\r\n]/),k=F.length-1;k>=0&&F[k].length===0;)--k;for(var U=10,V=0,K=0;K<=k;++K)V=F[K].indexOf(" "),V==-1?V=F[K].length:V++,U=Math.max(U,V);for(K=0;K<=k;++K){I[K]=[];var Q=0;for(t(F[K].slice(0,U).trim(),I,K,Q,b),Q=1;Q<=(F[K].length-U)/10+1;++Q)t(F[K].slice(U+(Q-1)*10,U+Q*10).trim(),I,K,Q,b)}return b.sheetRows&&(I=I.slice(0,b.sheetRows)),I}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(m){for(var C={},b=!1,I=0,F=0;I<m.length;++I)(F=m.charCodeAt(I))==34?b=!b:!b&&F in r&&(C[F]=(C[F]||0)+1);F=[];for(I in C)Object.prototype.hasOwnProperty.call(C,I)&&F.push([C[I],I]);if(!F.length){C=n;for(I in C)Object.prototype.hasOwnProperty.call(C,I)&&F.push([C[I],I])}return F.sort(function(k,U){return k[0]-U[0]||n[k[1]]-n[U[1]]}),r[F.pop()[1]]||44}function s(m,C){var b=C||{},I="",F=b.dense?[]:{},k={s:{c:0,r:0},e:{c:0,r:0}};m.slice(0,4)=="sep="?m.charCodeAt(5)==13&&m.charCodeAt(6)==10?(I=m.charAt(4),m=m.slice(7)):m.charCodeAt(5)==13||m.charCodeAt(5)==10?(I=m.charAt(4),m=m.slice(6)):I=i(m.slice(0,1024)):b&&b.FS?I=b.FS:I=i(m.slice(0,1024));var U=0,V=0,K=0,Q=0,te=0,re=I.charCodeAt(0),z=!1,M=0,P=m.charCodeAt(0);m=m.replace(/\r\n/mg,`
`);var O=b.dateNF!=null?ZK(b.dateNF):null;function ee(){var Y=m.slice(Q,te),X={};if(Y.charAt(0)=='"'&&Y.charAt(Y.length-1)=='"'&&(Y=Y.slice(1,-1).replace(/""/g,'"')),Y.length===0)X.t="z";else if(b.raw)X.t="s",X.v=Y;else if(Y.trim().length===0)X.t="s",X.v=Y;else if(Y.charCodeAt(0)==61)Y.charCodeAt(1)==34&&Y.charCodeAt(Y.length-1)==34?(X.t="s",X.v=Y.slice(2,-1).replace(/""/g,'"')):BY(Y)?(X.t="n",X.f=Y.slice(1)):(X.t="s",X.v=Y);else if(Y=="TRUE")X.t="b",X.v=!0;else if(Y=="FALSE")X.t="b",X.v=!1;else if(!isNaN(K=oo(Y)))X.t="n",b.cellText!==!1&&(X.w=Y),X.v=K;else if(!isNaN(l0(Y).getDate())||O&&Y.match(O)){X.z=b.dateNF||Ir[14];var G=0;O&&Y.match(O)&&(Y=$K(Y,b.dateNF,Y.match(O)||[]),G=1),b.cellDates?(X.t="d",X.v=Pi(Y,G)):(X.t="n",X.v=ks(Pi(Y,G))),b.cellText!==!1&&(X.w=Ka(X.z,X.v instanceof Date?ks(X.v):X.v)),b.cellNF||delete X.z}else X.t="s",X.v=Y;if(X.t=="z"||(b.dense?(F[U]||(F[U]=[]),F[U][V]=X):F[br({c:V,r:U})]=X),Q=te+1,P=m.charCodeAt(Q),k.e.c<V&&(k.e.c=V),k.e.r<U&&(k.e.r=U),M==re)++V;else if(V=0,++U,b.sheetRows&&b.sheetRows<=U)return!0}e:for(;te<m.length;++te)switch(M=m.charCodeAt(te)){case 34:P===34&&(z=!z);break;case re:case 10:case 13:if(!z&&ee())break e;break}return te-Q>0&&ee(),F["!ref"]=Zr(k),F}function o(m,C){return!(C&&C.PRN)||C.FS||m.slice(0,4)=="sep="||m.indexOf("	")>=0||m.indexOf(",")>=0||m.indexOf(";")>=0?s(m,C):x0(e(m,C),C)}function c(m,C){var b="",I=C.type=="string"?[0,0,0,0]:Hy(m,C);switch(C.type){case"base64":b=Ea(m);break;case"binary":b=m;break;case"buffer":C.codepage==65001?b=m.toString("utf8"):C.codepage&&typeof fd<"u"||(b=Wr&&Buffer.isBuffer(m)?m.toString("binary"):Lc(m));break;case"array":b=Ic(m);break;case"string":b=m;break;default:throw new Error("Unrecognized type "+C.type)}return I[0]==239&&I[1]==187&&I[2]==191?b=Fn(b.slice(3)):C.type!="string"&&C.type!="buffer"&&C.codepage==65001?b=Fn(b):C.type=="binary"&&typeof fd<"u",b.slice(0,19)=="socialcalc:version:"?Hq.to_sheet(C.type=="string"?b:Fn(b),C):o(b,C)}function h(m,C){return OA(c(m,C),C)}function d(m){for(var C=[],b=ni(m["!ref"]),I,F=Array.isArray(m),k=b.s.r;k<=b.e.r;++k){for(var U=[],V=b.s.c;V<=b.e.c;++V){var K=br({r:k,c:V});if(I=F?(m[k]||[])[V]:m[K],!I||I.v==null){U.push("          ");continue}for(var Q=(I.w||(Sl(I),I.w)||"").slice(0,10);Q.length<10;)Q+=" ";U.push(Q+(V===0?" ":""))}C.push(U.join(""))}return C.join(`
`)}return{to_workbook:h,to_sheet:c,from_sheet:d}})();function jq(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var i=Pq.to_workbook(t,r);return r.WTF=n,i}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return pd.to_workbook(t,e)}}var Yf=(function(){function t(q,ce,oe){if(q){Ji(q,q.l||0);for(var ae=oe.Enum||De;q.l<q.length;){var Ee=q.read_shift(2),Ke=ae[Ee]||ae[65535],Fe=q.read_shift(2),He=q.l+Fe,tt=Ke.f&&Ke.f(q,Fe,oe);if(q.l=He,ce(tt,Ke,Ee))return}}}function e(q,ce){switch(ce.type){case"base64":return r(io(Ea(q)),ce);case"binary":return r(io(q),ce);case"buffer":case"array":return r(q,ce)}throw"Unsupported type "+ce.type}function r(q,ce){if(!q)return q;var oe=ce||{},ae=oe.dense?[]:{},Ee="Sheet1",Ke="",Fe=0,He={},tt=[],Tt=[],ve={s:{r:0,c:0},e:{r:0,c:0}},Oe=oe.sheetRows||0;if(q[2]==0&&(q[3]==8||q[3]==9)&&q.length>=16&&q[14]==5&&q[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(q[2]==2)oe.Enum=De,t(q,function(ft,Ot,jt){switch(jt){case 0:oe.vers=ft,ft>=4096&&(oe.qpro=!0);break;case 6:ve=ft;break;case 204:ft&&(Ke=ft);break;case 222:Ke=ft;break;case 15:case 51:oe.qpro||(ft[1].v=ft[1].v.slice(1));case 13:case 14:case 16:jt==14&&(ft[2]&112)==112&&(ft[2]&15)>1&&(ft[2]&15)<15&&(ft[1].z=oe.dateNF||Ir[14],oe.cellDates&&(ft[1].t="d",ft[1].v=Hp(ft[1].v))),oe.qpro&&ft[3]>Fe&&(ae["!ref"]=Zr(ve),He[Ee]=ae,tt.push(Ee),ae=oe.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},Fe=ft[3],Ee=Ke||"Sheet"+(Fe+1),Ke="");var mt=oe.dense?(ae[ft[0].r]||[])[ft[0].c]:ae[br(ft[0])];if(mt){mt.t=ft[1].t,mt.v=ft[1].v,ft[1].z!=null&&(mt.z=ft[1].z),ft[1].f!=null&&(mt.f=ft[1].f);break}oe.dense?(ae[ft[0].r]||(ae[ft[0].r]=[]),ae[ft[0].r][ft[0].c]=ft[1]):ae[br(ft[0])]=ft[1];break}},oe);else if(q[2]==26||q[2]==14)oe.Enum=ne,q[2]==14&&(oe.qpro=!0,q.l=0),t(q,function(ft,Ot,jt){switch(jt){case 204:Ee=ft;break;case 22:ft[1].v=ft[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ft[3]>Fe&&(ae["!ref"]=Zr(ve),He[Ee]=ae,tt.push(Ee),ae=oe.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},Fe=ft[3],Ee="Sheet"+(Fe+1)),Oe>0&&ft[0].r>=Oe)break;oe.dense?(ae[ft[0].r]||(ae[ft[0].r]=[]),ae[ft[0].r][ft[0].c]=ft[1]):ae[br(ft[0])]=ft[1],ve.e.c<ft[0].c&&(ve.e.c=ft[0].c),ve.e.r<ft[0].r&&(ve.e.r=ft[0].r);break;case 27:ft[14e3]&&(Tt[ft[14e3][0]]=ft[14e3][1]);break;case 1537:Tt[ft[0]]=ft[1],ft[0]==Fe&&(Ee=ft[1]);break}},oe);else throw new Error("Unrecognized LOTUS BOF "+q[2]);if(ae["!ref"]=Zr(ve),He[Ke||Ee]=ae,tt.push(Ke||Ee),!Tt.length)return{SheetNames:tt,Sheets:He};for(var st={},Bt=[],kt=0;kt<Tt.length;++kt)He[tt[kt]]?(Bt.push(Tt[kt]||tt[kt]),st[Tt[kt]]=He[Tt[kt]]||He[tt[kt]]):(Bt.push(Tt[kt]),st[Tt[kt]]={"!ref":"A1"});return{SheetNames:Bt,Sheets:st}}function n(q,ce){var oe=ce||{};if(+oe.codepage>=0&&so(+oe.codepage),oe.type=="string")throw new Error("Cannot write WK1 to JS string");var ae=Mw(),Ee=ni(q["!ref"]),Ke=Array.isArray(q),Fe=[];ro(ae,0,s(1030)),ro(ae,6,h(Ee));for(var He=Math.min(Ee.e.r,8191),tt=Ee.s.r;tt<=He;++tt)for(var Tt=rs(tt),ve=Ee.s.c;ve<=Ee.e.c;++ve){tt===Ee.s.r&&(Fe[ve]=Ii(ve));var Oe=Fe[ve]+Tt,st=Ke?(q[tt]||[])[ve]:q[Oe];if(!(!st||st.t=="z"))if(st.t=="n")(st.v|0)==st.v&&st.v>=-32768&&st.v<=32767?ro(ae,13,I(tt,ve,st.v)):ro(ae,14,k(tt,ve,st.v));else{var Bt=Sl(st);ro(ae,15,C(tt,ve,Bt.slice(0,239)))}}return ro(ae,1),ae.end()}function i(q,ce){var oe=ce||{};if(+oe.codepage>=0&&so(+oe.codepage),oe.type=="string")throw new Error("Cannot write WK3 to JS string");var ae=Mw();ro(ae,0,o(q));for(var Ee=0,Ke=0;Ee<q.SheetNames.length;++Ee)(q.Sheets[q.SheetNames[Ee]]||{})["!ref"]&&ro(ae,27,be(q.SheetNames[Ee],Ke++));var Fe=0;for(Ee=0;Ee<q.SheetNames.length;++Ee){var He=q.Sheets[q.SheetNames[Ee]];if(!(!He||!He["!ref"])){for(var tt=ni(He["!ref"]),Tt=Array.isArray(He),ve=[],Oe=Math.min(tt.e.r,8191),st=tt.s.r;st<=Oe;++st)for(var Bt=rs(st),kt=tt.s.c;kt<=tt.e.c;++kt){st===tt.s.r&&(ve[kt]=Ii(kt));var ft=ve[kt]+Bt,Ot=Tt?(He[st]||[])[kt]:He[ft];if(!(!Ot||Ot.t=="z"))if(Ot.t=="n")ro(ae,23,ee(st,kt,Fe,Ot.v));else{var jt=Sl(Ot);ro(ae,22,M(st,kt,Fe,jt.slice(0,239)))}}++Fe}}return ro(ae,1),ae.end()}function s(q){var ce=Bi(2);return ce.write_shift(2,q),ce}function o(q){var ce=Bi(26);ce.write_shift(2,4096),ce.write_shift(2,4),ce.write_shift(4,0);for(var oe=0,ae=0,Ee=0,Ke=0;Ke<q.SheetNames.length;++Ke){var Fe=q.SheetNames[Ke],He=q.Sheets[Fe];if(!(!He||!He["!ref"])){++Ee;var tt=m0(He["!ref"]);oe<tt.e.r&&(oe=tt.e.r),ae<tt.e.c&&(ae=tt.e.c)}}return oe>8191&&(oe=8191),ce.write_shift(2,oe),ce.write_shift(1,Ee),ce.write_shift(1,ae),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(1,1),ce.write_shift(1,2),ce.write_shift(4,0),ce.write_shift(4,0),ce}function c(q,ce,oe){var ae={s:{c:0,r:0},e:{c:0,r:0}};return ce==8&&oe.qpro?(ae.s.c=q.read_shift(1),q.l++,ae.s.r=q.read_shift(2),ae.e.c=q.read_shift(1),q.l++,ae.e.r=q.read_shift(2),ae):(ae.s.c=q.read_shift(2),ae.s.r=q.read_shift(2),ce==12&&oe.qpro&&(q.l+=2),ae.e.c=q.read_shift(2),ae.e.r=q.read_shift(2),ce==12&&oe.qpro&&(q.l+=2),ae.s.c==65535&&(ae.s.c=ae.e.c=ae.s.r=ae.e.r=0),ae)}function h(q){var ce=Bi(8);return ce.write_shift(2,q.s.c),ce.write_shift(2,q.s.r),ce.write_shift(2,q.e.c),ce.write_shift(2,q.e.r),ce}function d(q,ce,oe){var ae=[{c:0,r:0},{t:"n",v:0},0,0];return oe.qpro&&oe.vers!=20768?(ae[0].c=q.read_shift(1),ae[3]=q.read_shift(1),ae[0].r=q.read_shift(2),q.l+=2):(ae[2]=q.read_shift(1),ae[0].c=q.read_shift(2),ae[0].r=q.read_shift(2)),ae}function m(q,ce,oe){var ae=q.l+ce,Ee=d(q,ce,oe);if(Ee[1].t="s",oe.vers==20768){q.l++;var Ke=q.read_shift(1);return Ee[1].v=q.read_shift(Ke,"utf8"),Ee}return oe.qpro&&q.l++,Ee[1].v=q.read_shift(ae-q.l,"cstr"),Ee}function C(q,ce,oe){var ae=Bi(7+oe.length);ae.write_shift(1,255),ae.write_shift(2,ce),ae.write_shift(2,q),ae.write_shift(1,39);for(var Ee=0;Ee<ae.length;++Ee){var Ke=oe.charCodeAt(Ee);ae.write_shift(1,Ke>=128?95:Ke)}return ae.write_shift(1,0),ae}function b(q,ce,oe){var ae=d(q,ce,oe);return ae[1].v=q.read_shift(2,"i"),ae}function I(q,ce,oe){var ae=Bi(7);return ae.write_shift(1,255),ae.write_shift(2,ce),ae.write_shift(2,q),ae.write_shift(2,oe,"i"),ae}function F(q,ce,oe){var ae=d(q,ce,oe);return ae[1].v=q.read_shift(8,"f"),ae}function k(q,ce,oe){var ae=Bi(13);return ae.write_shift(1,255),ae.write_shift(2,ce),ae.write_shift(2,q),ae.write_shift(8,oe,"f"),ae}function U(q,ce,oe){var ae=q.l+ce,Ee=d(q,ce,oe);if(Ee[1].v=q.read_shift(8,"f"),oe.qpro)q.l=ae;else{var Ke=q.read_shift(2);te(q.slice(q.l,q.l+Ke),Ee),q.l+=Ke}return Ee}function V(q,ce,oe){var ae=ce&32768;return ce&=-32769,ce=(ae?q:0)+(ce>=8192?ce-16384:ce),(ae?"":"$")+(oe?Ii(ce):rs(ce))}var K={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},Q=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function te(q,ce){Ji(q,0);for(var oe=[],ae=0,Ee="",Ke="",Fe="",He="";q.l<q.length;){var tt=q[q.l++];switch(tt){case 0:oe.push(q.read_shift(8,"f"));break;case 1:Ke=V(ce[0].c,q.read_shift(2),!0),Ee=V(ce[0].r,q.read_shift(2),!1),oe.push(Ke+Ee);break;case 2:{var Tt=V(ce[0].c,q.read_shift(2),!0),ve=V(ce[0].r,q.read_shift(2),!1);Ke=V(ce[0].c,q.read_shift(2),!0),Ee=V(ce[0].r,q.read_shift(2),!1),oe.push(Tt+ve+":"+Ke+Ee)}break;case 3:if(q.l<q.length){console.error("WK1 premature formula end");return}break;case 4:oe.push("("+oe.pop()+")");break;case 5:oe.push(q.read_shift(2));break;case 6:{for(var Oe="";tt=q[q.l++];)Oe+=String.fromCharCode(tt);oe.push('"'+Oe.replace(/"/g,'""')+'"')}break;case 8:oe.push("-"+oe.pop());break;case 23:oe.push("+"+oe.pop());break;case 22:oe.push("NOT("+oe.pop()+")");break;case 20:case 21:He=oe.pop(),Fe=oe.pop(),oe.push(["AND","OR"][tt-20]+"("+Fe+","+He+")");break;default:if(tt<32&&Q[tt])He=oe.pop(),Fe=oe.pop(),oe.push(Fe+Q[tt]+He);else if(K[tt]){if(ae=K[tt][1],ae==69&&(ae=q[q.l++]),ae>oe.length){console.error("WK1 bad formula parse 0x"+tt.toString(16)+":|"+oe.join("|")+"|");return}var st=oe.slice(-ae);oe.length-=ae,oe.push(K[tt][0]+"("+st.join(",")+")")}else return tt<=7?console.error("WK1 invalid opcode "+tt.toString(16)):tt<=24?console.error("WK1 unsupported op "+tt.toString(16)):tt<=30?console.error("WK1 invalid opcode "+tt.toString(16)):tt<=115?console.error("WK1 unsupported function opcode "+tt.toString(16)):console.error("WK1 unrecognized opcode "+tt.toString(16))}}oe.length==1?ce[1].f=""+oe[0]:console.error("WK1 bad formula parse |"+oe.join("|")+"|")}function re(q){var ce=[{c:0,r:0},{t:"n",v:0},0];return ce[0].r=q.read_shift(2),ce[3]=q[q.l++],ce[0].c=q[q.l++],ce}function z(q,ce){var oe=re(q);return oe[1].t="s",oe[1].v=q.read_shift(ce-4,"cstr"),oe}function M(q,ce,oe,ae){var Ee=Bi(6+ae.length);Ee.write_shift(2,q),Ee.write_shift(1,oe),Ee.write_shift(1,ce),Ee.write_shift(1,39);for(var Ke=0;Ke<ae.length;++Ke){var Fe=ae.charCodeAt(Ke);Ee.write_shift(1,Fe>=128?95:Fe)}return Ee.write_shift(1,0),Ee}function P(q,ce){var oe=re(q);oe[1].v=q.read_shift(2);var ae=oe[1].v>>1;if(oe[1].v&1)switch(ae&7){case 0:ae=(ae>>3)*5e3;break;case 1:ae=(ae>>3)*500;break;case 2:ae=(ae>>3)/20;break;case 3:ae=(ae>>3)/200;break;case 4:ae=(ae>>3)/2e3;break;case 5:ae=(ae>>3)/2e4;break;case 6:ae=(ae>>3)/16;break;case 7:ae=(ae>>3)/64;break}return oe[1].v=ae,oe}function O(q,ce){var oe=re(q),ae=q.read_shift(4),Ee=q.read_shift(4),Ke=q.read_shift(2);if(Ke==65535)return ae===0&&Ee===3221225472?(oe[1].t="e",oe[1].v=15):ae===0&&Ee===3489660928?(oe[1].t="e",oe[1].v=42):oe[1].v=0,oe;var Fe=Ke&32768;return Ke=(Ke&32767)-16446,oe[1].v=(1-Fe*2)*(Ee*Math.pow(2,Ke+32)+ae*Math.pow(2,Ke)),oe}function ee(q,ce,oe,ae){var Ee=Bi(14);if(Ee.write_shift(2,q),Ee.write_shift(1,oe),Ee.write_shift(1,ce),ae==0)return Ee.write_shift(4,0),Ee.write_shift(4,0),Ee.write_shift(2,65535),Ee;var Ke=0,Fe=0,He=0,tt=0;return ae<0&&(Ke=1,ae=-ae),Fe=Math.log2(ae)|0,ae/=Math.pow(2,Fe-31),tt=ae>>>0,(tt&2147483648)==0&&(ae/=2,++Fe,tt=ae>>>0),ae-=tt,tt|=2147483648,tt>>>=0,ae*=Math.pow(2,32),He=ae>>>0,Ee.write_shift(4,He),Ee.write_shift(4,tt),Fe+=16383+(Ke?32768:0),Ee.write_shift(2,Fe),Ee}function Y(q,ce){var oe=O(q);return q.l+=ce-14,oe}function X(q,ce){var oe=re(q),ae=q.read_shift(4);return oe[1].v=ae>>6,oe}function G(q,ce){var oe=re(q),ae=q.read_shift(8,"f");return oe[1].v=ae,oe}function Ie(q,ce){var oe=G(q);return q.l+=ce-10,oe}function ge(q,ce){return q[q.l+ce-1]==0?q.read_shift(ce,"cstr"):""}function de(q,ce){var oe=q[q.l++];oe>ce-1&&(oe=ce-1);for(var ae="";ae.length<oe;)ae+=String.fromCharCode(q[q.l++]);return ae}function we(q,ce,oe){if(!(!oe.qpro||ce<21)){var ae=q.read_shift(1);q.l+=17,q.l+=1,q.l+=2;var Ee=q.read_shift(ce-21,"cstr");return[ae,Ee]}}function Ge(q,ce){for(var oe={},ae=q.l+ce;q.l<ae;){var Ee=q.read_shift(2);if(Ee==14e3){for(oe[Ee]=[0,""],oe[Ee][0]=q.read_shift(2);q[q.l];)oe[Ee][1]+=String.fromCharCode(q[q.l]),q.l++;q.l++}}return oe}function be(q,ce){var oe=Bi(5+q.length);oe.write_shift(2,14e3),oe.write_shift(2,ce);for(var ae=0;ae<q.length;++ae){var Ee=q.charCodeAt(ae);oe[oe.l++]=Ee>127?95:Ee}return oe[oe.l++]=0,oe}var De={0:{n:"BOF",f:yi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:c},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:b},14:{n:"NUMBER",f:F},15:{n:"LABEL",f:m},16:{n:"FORMULA",f:U},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:m},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ge},222:{n:"SHEETNAMELP",f:de},65535:{n:""}},ne={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:z},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:Y},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ge},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:X},38:{n:"??"},39:{n:"NUMBER27",f:G},40:{n:"FORMULA28",f:Ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ge},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:we},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}})();function Vq(t){var e={},r=t.match(ys),n=0,i=!1;if(r)for(;n!=r.length;++n){var s=fr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=my[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return e}var Gq=(function(){var t=hd("t"),e=hd("rPr");function r(s){var o=s.match(t);if(!o)return{t:"s",v:""};var c={t:"s",v:rn(o[1])},h=s.match(e);return h&&(c.s=Vq(h[1])),c}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(i).map(r).filter(function(c){return c.v})}})(),Kq=(function(){var e=/(\r\n|\n)/g;function r(i,s,o){var c=[];i.u&&c.push("text-decoration: underline;"),i.uval&&c.push("text-underline-style:"+i.uval+";"),i.sz&&c.push("font-size:"+i.sz+"pt;"),i.outline&&c.push("text-effect: outline;"),i.shadow&&c.push("text-shadow: auto;"),s.push('<span style="'+c.join("")+'">'),i.b&&(s.push("<b>"),o.push("</b>")),i.i&&(s.push("<i>"),o.push("</i>")),i.strike&&(s.push("<s>"),o.push("</s>"));var h=i.valign||"";return h=="superscript"||h=="super"?h="sup":h=="subscript"&&(h="sub"),h!=""&&(s.push("<"+h+">"),o.push("</"+h+">")),o.push("</span>"),i}function n(i){var s=[[],i.v,[]];return i.v?(i.s&&r(i.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}})(),zq=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Wq=/<(?:\w+:)?r>/,qq=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Dy(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=rn(Fn(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Fn(t),r&&(n.h=by(n.t))):t.match(Wq)&&(n.r=Fn(t),n.t=rn(Fn((t.replace(qq,"").match(zq)||[]).join("").replace(ys,""))),r&&(n.h=Kq(Gq(n.r)))),n):{t:""}}var Xq=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Yq=/<(?:\w+:)?(?:si|sstItem)>/g,Jq=/<\/(?:\w+:)?(?:si|sstItem)>/;function Zq(t,e){var r=[],n="";if(!t)return r;var i=t.match(Xq);if(i){n=i[2].replace(Yq,"").split(Jq);for(var s=0;s!=n.length;++s){var o=Dy(n[s].trim(),e);o!=null&&(r[r.length]=o)}i=fr(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}function $q(t){return[t.read_shift(4),t.read_shift(4)]}function eX(t,e){var r=[],n=!1;return Rl(t,function(s,o,c){switch(c){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}),r}function T8(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function yl(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function tX(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=yl(t,4),e.U=yl(t,4),e.W=yl(t,4),e}function rX(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},i=t.read_shift(4),s=[];i-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function nX(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(rX(t));return e}function iX(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function sX(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=yl(t,4),e.U=yl(t,4),e.W=yl(t,4),e}function aX(t){var e=sX(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function B8(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function S8(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function oX(t){var e=yl(t);switch(e.Minor){case 2:return[e.Minor,lX(t)];case 3:return[e.Minor,AX()];case 4:return[e.Minor,cX(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function lX(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=B8(t,r),i=S8(t,t.length-t.l);return{t:"Std",h:n,v:i}}function AX(){throw new Error("File is password-protected: ECMA-376 Extensible")}function cX(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(ys,function(s){var o=fr(s);switch(Po(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(c){n[c]=o[c]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function uX(t,e){var r={},n=r.EncryptionVersionInfo=yl(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var i=t.read_shift(4);return e-=4,r.EncryptionHeader=B8(t,i),e-=i,r.EncryptionVerifier=S8(t,e),r}function fX(t){var e={},r=e.EncryptionVersionInfo=yl(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function dX(t){var e=0,r,n=T8(t),i=n.length+1,s,o,c,h,d;for(r=kA(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)o=r[s],c=(e&16384)===0?0:1,h=e<<1&32767,d=c|h,e=d^o;return e^52811}var I8=(function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},i=function(o,c){return n(o^c)},s=function(o){for(var c=e[o.length-1],h=104,d=o.length-1;d>=0;--d)for(var m=o[d],C=0;C!=7;++C)m&64&&(c^=r[h]),m*=2,--h;return c};return function(o){for(var c=T8(o),h=s(c),d=c.length,m=kA(16),C=0;C!=16;++C)m[C]=0;var b,I,F;for((d&1)===1&&(b=h>>8,m[d]=i(t[0],b),--d,b=h&255,I=c[c.length-1],m[d]=i(I,b));d>0;)--d,b=h>>8,m[d]=i(c[d],b),--d,b=h&255,m[d]=i(c[d],b);for(d=15,F=15-c.length;F>0;)b=h>>8,m[d]=i(t[F],b),--d,--F,b=h&255,m[d]=i(c[d],b),--d,--F;return m}})(),hX=function(t,e,r,n,i){i||(i=e),n||(n=I8(t));var s,o;for(s=0;s!=e.length;++s)o=e[s],o^=n[r],o=(o>>5|o<<3)&255,i[s]=o,++r;return[i,r,n]},gX=function(t){var e=0,r=I8(t);return function(n){var i=hX("",n,e,r);return e=i[1],i[0]}};function pX(t,e,r,n){var i={key:yi(t),verificationBytes:yi(t)};return r.password&&(i.verifier=dX(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=gX(r.password)),i}function mX(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=fX(t):n.Data=uX(t,e),n}function xX(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?mX(t,e-2,n):pX(t,r.biff>=8?e:e-2,r,n),n}var wX=(function(){function t(i,s){switch(s.type){case"base64":return e(Ea(i),s);case"binary":return e(i,s);case"buffer":return e(Wr&&Buffer.isBuffer(i)?i.toString("binary"):Lc(i),s);case"array":return e(Ic(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var o=s||{},c=o.dense?[]:{},h=i.match(/\\trowd.*?\\row\b/g);if(!h.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:h.length-1}};return h.forEach(function(m,C){Array.isArray(c)&&(c[C]=[]);for(var b=/\\\w+\b/g,I=0,F,k=-1;F=b.exec(m);){switch(F[0]){case"\\cell":var U=m.slice(I,b.lastIndex-F[0].length);if(U[0]==" "&&(U=U.slice(1)),++k,U.length){var V={v:U,t:"s"};Array.isArray(c)?c[C][k]=V:c[br({r:C,c:k})]=V}break}I=b.lastIndex}k>d.e.c&&(d.e.c=k)}),c["!ref"]=Zr(d),c}function r(i,s){return OA(t(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],o=ni(i["!ref"]),c,h=Array.isArray(i),d=o.s.r;d<=o.e.r;++d){s.push("\\trowd\\trautofit1");for(var m=o.s.c;m<=o.e.c;++m)s.push("\\cellx"+(m+1));for(s.push("\\pard\\intbl"),m=o.s.c;m<=o.e.c;++m){var C=br({r:d,c:m});c=h?(i[d]||[])[m]:i[C],!(!c||c.v==null&&(!c.f||c.F))&&(s.push(" "+(c.w||(Sl(c),c.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}})();function vX(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function md(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function yX(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(e,r,n),s=Math.min(e,r,n),o=i-s;if(o===0)return[0,0,e];var c=0,h=0,d=i+s;switch(h=o/(d>1?2-d:d),i){case e:c=((r-n)/o+6)%6;break;case r:c=(n-e)/o+2;break;case n:c=(e-r)/o+4;break}return[c/6,h,d/2]}function CX(t){var e=t[0],r=t[1],n=t[2],i=r*2*(n<.5?n:1-n),s=n-i/2,o=[s,s,s],c=6*e,h;if(r!==0)switch(c|0){case 0:case 6:h=i*c,o[0]+=i,o[1]+=h;break;case 1:h=i*(2-c),o[0]+=h,o[1]+=i;break;case 2:h=i*(c-2),o[1]+=i,o[2]+=h;break;case 3:h=i*(4-c),o[1]+=h,o[2]+=i;break;case 4:h=i*(c-4),o[2]+=i,o[0]+=h;break;case 5:h=i*(6-c),o[2]+=h,o[0]+=i;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function W1(t,e){if(e===0)return t;var r=yX(vX(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),md(CX(r))}var N8=6,EX=15,bX=1,Ns=N8;function q1(t){return Math.floor((t+Math.round(128/Ns)/256)*Ns)}function X1(t){return Math.floor((t-5)/Ns*100+.5)/100}function Qw(t){return Math.round((t*Ns+5)/Ns*256)/256}function I2(t){return Qw(X1(q1(t)))}function Uy(t){var e=Math.abs(t-I2(t)),r=Ns;if(e>.005)for(Ns=bX;Ns<EX;++Ns)Math.abs(t-I2(t))<=e&&(e=Math.abs(t-I2(t)),r=Ns);Ns=r}function A0(t){t.width?(t.wpx=q1(t.width),t.wch=X1(t.wpx),t.MDW=Ns):t.wpx?(t.wch=X1(t.wpx),t.width=Qw(t.wch),t.MDW=Ns):typeof t.wch=="number"&&(t.width=Qw(t.wch),t.wpx=q1(t.width),t.MDW=Ns),t.customWidth&&delete t.customWidth}var _X=96,R8=_X;function F8(t){return t*96/R8}function xd(t){return t*R8/96}var TX={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function BX(t,e,r,n){e.Borders=[];var i={},s=!1;(t[0].match(ys)||[]).forEach(function(o){var c=fr(o);switch(Po(c[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},c.diagonalUp&&(i.diagonalUp=jn(c.diagonalUp)),c.diagonalDown&&(i.diagonalDown=jn(c.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+c[0]+" in borders")}})}function SX(t,e,r,n){e.Fills=[];var i={},s=!1;(t[0].match(ys)||[]).forEach(function(o){var c=fr(o);switch(Po(c[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":c.patternType&&(i.patternType=c.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),c.indexed&&(i.bgColor.indexed=parseInt(c.indexed,10)),c.theme&&(i.bgColor.theme=parseInt(c.theme,10)),c.tint&&(i.bgColor.tint=parseFloat(c.tint)),c.rgb&&(i.bgColor.rgb=c.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),c.theme&&(i.fgColor.theme=parseInt(c.theme,10)),c.tint&&(i.fgColor.tint=parseFloat(c.tint)),c.rgb!=null&&(i.fgColor.rgb=c.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+c[0]+" in fills")}})}function IX(t,e,r,n){e.Fonts=[];var i={},s=!1;(t[0].match(ys)||[]).forEach(function(o){var c=fr(o);switch(Po(c[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":c.val&&(i.name=Fn(c.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=c.val?jn(c.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=c.val?jn(c.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(c.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=c.val?jn(c.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=c.val?jn(c.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=c.val?jn(c.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=c.val?jn(c.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=c.val?jn(c.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":c.val&&(i.sz=+c.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":c.val&&(i.vertAlign=c.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":c.val&&(i.family=parseInt(c.val,10));break;case"<family/>":case"</family>":break;case"<scheme":c.val&&(i.scheme=c.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(c.val=="1")break;c.codepage=my[parseInt(c.val,10)];break;case"<color":if(i.color||(i.color={}),c.auto&&(i.color.auto=jn(c.auto)),c.rgb)i.color.rgb=c.rgb.slice(-6);else if(c.indexed){i.color.index=parseInt(c.indexed,10);var h=vc[i.color.index];i.color.index==81&&(h=vc[1]),h||(h=vc[1]),i.color.rgb=h[0].toString(16)+h[1].toString(16)+h[2].toString(16)}else c.theme&&(i.color.theme=parseInt(c.theme,10),c.tint&&(i.color.tint=parseFloat(c.tint)),c.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=W1(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+c[0]+" in fonts")}})}function NX(t,e,r){e.NumberFmt=[];for(var n=Mo(Ir),i=0;i<n.length;++i)e.NumberFmt[n[i]]=Ir[n[i]];var s=t[0].match(ys);if(s)for(i=0;i<s.length;++i){var o=fr(s[i]);switch(Po(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var c=rn(Fn(o.formatCode)),h=parseInt(o.numFmtId,10);if(e.NumberFmt[h]=c,h>0){if(h>392){for(h=392;h>60&&e.NumberFmt[h]!=null;--h);e.NumberFmt[h]=c}wc(c,h)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var Mg=["numFmtId","fillId","fontId","borderId","xfId"],Og=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function RX(t,e,r){e.CellXf=[];var n,i=!1;(t[0].match(ys)||[]).forEach(function(s){var o=fr(s),c=0;switch(Po(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],c=0;c<Mg.length;++c)n[Mg[c]]&&(n[Mg[c]]=parseInt(n[Mg[c]],10));for(c=0;c<Og.length;++c)n[Og[c]]&&(n[Og[c]]=jn(n[Og[c]]));if(e.NumberFmt&&n.numFmtId>392){for(c=392;c>60;--c)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[c]){n.numFmtId=c;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var h={};o.vertical&&(h.vertical=o.vertical),o.horizontal&&(h.horizontal=o.horizontal),o.textRotation!=null&&(h.textRotation=o.textRotation),o.indent&&(h.indent=o.indent),o.wrapText&&(h.wrapText=jn(o.wrapText)),n.alignment=h;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var FX=(function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(c,h,d){var m={};if(!c)return m;c=c.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var C;return(C=c.match(e))&&NX(C,m,d),(C=c.match(i))&&IX(C,m,h,d),(C=c.match(n))&&SX(C,m,h,d),(C=c.match(s))&&BX(C,m,h,d),(C=c.match(r))&&RX(C,m,d),m}})();function kX(t,e){var r=t.read_shift(2),n=xs(t);return[r,n]}function DX(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=Gz(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var c=t.read_shift(1);c>0&&(n.family=c);var h=t.read_shift(1);switch(h>0&&(n.charset=h),t.l++,n.color=Vz(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=xs(t),n}var UX=vs;function MX(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}var OX=vs;function LX(t,e,r){var n={};n.NumberFmt=[];for(var i in Ir)n.NumberFmt[i]=Ir[i];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return Rl(t,function(h,d,m){switch(m){case 44:n.NumberFmt[h[0]]=h[1],wc(h[1],h[0]);break;case 43:n.Fonts.push(h),h.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(h.color.rgb=W1(e.themeElements.clrScheme[h.color.theme].rgb,h.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(h);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(m),o=!0;break;case 38:s.pop(),o=!1;break;default:if(d.T>0)s.push(m);else if(d.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+m.toString(16))}}),n}var PX=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function QX(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(ys)||[]).forEach(function(i){var s=fr(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[PX.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function HX(){}function jX(){}var VX=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,GX=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,KX=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function zX(t,e,r){e.themeElements={};var n;[["clrScheme",VX,QX],["fontScheme",GX,HX],["fmtScheme",KX,jX]].forEach(function(i){if(!(n=t.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,e,r)})}var WX=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function k8(t,e){(!t||t.length===0)&&(t=qX());var r,n={};if(!(r=t.match(WX)))throw new Error("themeElements not found in theme");return zX(r[0],n,e),n.raw=t,n}function qX(t,e){var r=[GF];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function XX(t,e,r){var n=t.l+e,i=t.read_shift(4);if(i!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var o;try{o=VF(s,{type:"array"})}catch{return}var c=wa(o,"theme/theme/theme1.xml",!0);if(c)return k8(c,r)}}function YX(t){return t.read_shift(4)}function JX(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=ZX(t,4);break;case 2:e.xclrValue=w8(t);break;case 3:e.xclrValue=YX(t);break;case 4:t.l+=4;break}return t.l+=8,e}function ZX(t,e){return vs(t,e)}function $X(t,e){return vs(t,e)}function eY(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=JX(t);break;case 6:n[1]=$X(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function tY(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var i=t.read_shift(2),s=[];i-- >0;)s.push(eY(t,r-t.l));return{ixfe:n,ext:s}}function rY(t,e){e.forEach(function(r){r[0]})}function nY(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:xs(t)}}function iY(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function sY(t){return t.l+=4,t.read_shift(4)!=0}function aY(t,e,r){var n={Types:[],Cell:[],Value:[]},i=r||{},s=[],o=!1,c=2;return Rl(t,function(h,d,m){switch(m){case 335:n.Types.push({name:h.name});break;case 51:h.forEach(function(C){c==1?n.Cell.push({type:n.Types[C[0]-1].name,index:C[1]}):c==0&&n.Value.push({type:n.Types[C[0]-1].name,index:C[1]})});break;case 337:c=h?1:0;break;case 338:c=2;break;case 35:s.push(m),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!d.T){if(!o||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+m.toString(16))}}}),n}function oY(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var i=!1,s=2,o;return t.replace(ys,function(c){var h=fr(c);switch(Po(h[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:h.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==h.name&&(o=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[h.t-1].name,index:+h.v}):s==0&&n.Value.push({type:n.Types[h.t-1].name,index:+h.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+h.i);break;default:if(!i&&r.WTF)throw new Error("unrecognized "+h[0]+" in metadata")}return c}),n}function lY(t){var e=[];if(!t)return e;var r=1;return(t.match(ys)||[]).forEach(function(n){var i=fr(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,e.push(i);break}}),e}function AY(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=br(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function cY(t,e,r){var n=[];return Rl(t,function(s,o,c){switch(c){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+c.toString(16))}}),n}function uY(t,e,r,n){if(!t)return t;var i=n||{},s=!1;Rl(t,function(c,h,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!h.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},i)}function fY(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function b4(t,e,r,n){var i=Array.isArray(t),s;e.forEach(function(o){var c=Rs(o.ref);if(i?(t[c.r]||(t[c.r]=[]),s=t[c.r][c.c]):s=t[o.ref],!s){s={t:"z"},i?t[c.r][c.c]=s:t[o.ref]=s;var h=ni(t["!ref"]||"BDWGO1000001:A1");h.s.r>c.r&&(h.s.r=c.r),h.e.r<c.r&&(h.e.r=c.r),h.s.c>c.c&&(h.s.c=c.c),h.e.c<c.c&&(h.e.c=c.c);var d=Zr(h);d!==t["!ref"]&&(t["!ref"]=d)}s.c||(s.c=[]);var m={a:o.author,t:o.t,r:o.r,T:r};o.h&&(m.h=o.h);for(var C=s.c.length-1;C>=0;--C){if(!r&&s.c[C].T)return;r&&!s.c[C].T&&s.c.splice(C,1)}if(r&&n){for(C=0;C<n.length;++C)if(m.a==n[C].id){m.a=n[C].name||m.a;break}}s.c.push(m)})}function dY(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var c=o.match(/<(?:\w+:)?author[^>]*>(.*)/);c&&r.push(c[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var c=o.match(/<(?:\w+:)?comment[^>]*>/);if(c){var h=fr(c[0]),d={author:h.authorId&&r[h.authorId]||"sheetjsghost",ref:h.ref,guid:h.guid},m=Rs(h.ref);if(!(e.sheetRows&&e.sheetRows<=m.r)){var C=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),b=!!C&&!!C[1]&&Dy(C[1])||{r:"",t:"",h:""};d.r=b.r,b.r=="<t></t>"&&(b.t=b.h=""),d.t=(b.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(d.h=b.h),n.push(d)}}}}),n}function hY(t,e){var r=[],n=!1,i={},s=0;return t.replace(ys,function(c,h){var d=fr(c);switch(Po(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":s=h+c.length;break;case"</text>":i.t=t.slice(s,h).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return c}),r}function gY(t,e){var r=[],n=!1;return t.replace(ys,function(s){var o=fr(s);switch(Po(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function pY(t){var e={};e.iauthor=t.read_shift(4);var r=Qc(t);return e.rfx=r.s,e.ref=br(r.s),t.l+=16,e}var mY=xs;function xY(t,e){var r=[],n=[],i={},s=!1;return Rl(t,function(c,h,d){switch(d){case 632:n.push(c);break;case 635:i=c;break;case 637:i.t=c.t,i.h=c.h,i.r=c.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!h.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}var wY="application/vnd.ms-office.vbaProject";function vY(t){var e=Jr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Jr.utils.cfb_add(e,i,t.FileIndex[n].content)}}),Jr.write(e)}function yY(){return{"!type":"dialog"}}function CY(){return{"!type":"dialog"}}function EY(){return{"!type":"macro"}}function bY(){return{"!type":"macro"}}var Xu=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,o){var c=!1,h=!1;s.length==0?h=!0:s.charAt(0)=="["&&(h=!0,s=s.slice(1,-1)),o.length==0?c=!0:o.charAt(0)=="["&&(c=!0,o=o.slice(1,-1));var d=s.length>0?parseInt(s,10)|0:0,m=o.length>0?parseInt(o,10)|0:0;return c?m+=e.c:--m,h?d+=e.r:--d,i+(c?"":"$")+Ii(m)+(h?"":"$")+rs(d)}return function(i,s){return e=s,i.replace(t,r)}})(),D8=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,_Y=(function(){return function(e,r){return e.replace(D8,function(n,i,s,o,c,h){var d=Sy(o)-(s?0:r.c),m=By(h)-(c?0:r.r),C=m==0?"":c?m+1:"["+m+"]",b=d==0?"":s?d+1:"["+d+"]";return i+"R"+C+"C"+b})}})();function U8(t,e){return t.replace(D8,function(r,n,i,s,o,c){return n+(i=="$"?i+s:Ii(Sy(s)+e.c))+(o=="$"?o+c:rs(By(c)+e.r))})}function TY(t,e,r){var n=m0(e),i=n.s,s=Rs(r),o={r:s.r-i.r,c:s.c-i.c};return U8(t,o)}function BY(t){return t.length!=1}function _4(t){return t.replace(/_xlfn\./g,"")}function xi(t){t.l+=1}function DA(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function M8(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return O8(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),o=DA(t),c=DA(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:c[0],cRel:c[1],rRel:c[2]}}}function O8(t){var e=DA(t),r=DA(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function SY(t,e,r){if(r.biff<8)return O8(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=DA(t),o=DA(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function L8(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return IY(t);var n=t.read_shift(r&&r.biff==12?4:2),i=DA(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function IY(t){var e=DA(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function NY(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function RY(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return FY(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,c=(s&32768)>>15;if(s&=16383,c==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:c}}function FY(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function kY(t,e,r){var n=(t[t.l++]&96)>>5,i=M8(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function DY(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=M8(t,s,r);return[n,i,o]}function UY(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function MY(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function OY(t,e,r){var n=(t[t.l++]&96)>>5,i=SY(t,e-1,r);return[n,i]}function LY(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function T4(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function PY(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function QY(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function HY(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function jY(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function VY(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function P8(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function GY(t){return t.read_shift(2),P8(t)}function KY(t){return t.read_shift(2),P8(t)}function zY(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=L8(t,0,r);return[n,i]}function WY(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=RY(t,0,r);return[n,i]}function qY(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=L8(t,0,r);return[n,i,s]}function XY(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[YJ[i],j8[i],n]}function YY(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:JY(t);return[i,(s[0]===0?j8:XJ)[s[1]]]}function JY(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function ZY(t,e,r){t.l+=r&&r.biff==2?3:4}function $Y(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function eJ(t){return t.l++,Hc[t.read_shift(1)]}function tJ(t){return t.l++,t.read_shift(2)}function rJ(t){return t.l++,t.read_shift(1)!==0}function nJ(t){return t.l++,gs(t)}function iJ(t,e,r){return t.l++,Qd(t,e-1,r)}function sJ(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ci(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Hc[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=gs(t);break;case 2:r[1]=jc(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function aJ(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?Qc:jp)(t));return i}function oJ(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var c=0;c!=i;++c)o[s][c]=sJ(t,r.biff);return o}function lJ(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function AJ(t,e,r){if(r.biff==5)return cJ(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function cJ(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function uJ(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function fJ(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function dJ(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function hJ(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var gJ=vs,pJ=vs,mJ=vs;function jd(t,e,r){return t.l+=2,[NY(t)]}function My(t){return t.l+=6,[]}var xJ=jd,wJ=My,vJ=My,yJ=jd;function Q8(t){return t.l+=2,[yi(t),t.read_shift(2)&1]}var CJ=jd,EJ=Q8,bJ=My,_J=jd,TJ=jd,BJ=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function SJ(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),o=BJ[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:i,C:s}}function IJ(t){return t.l+=2,[t.read_shift(4)]}function NJ(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function RJ(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function FJ(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function kJ(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function DJ(t){return t.l+=4,[0,0]}var B4={1:{n:"PtgExp",f:$Y},2:{n:"PtgTbl",f:mJ},3:{n:"PtgAdd",f:xi},4:{n:"PtgSub",f:xi},5:{n:"PtgMul",f:xi},6:{n:"PtgDiv",f:xi},7:{n:"PtgPower",f:xi},8:{n:"PtgConcat",f:xi},9:{n:"PtgLt",f:xi},10:{n:"PtgLe",f:xi},11:{n:"PtgEq",f:xi},12:{n:"PtgGe",f:xi},13:{n:"PtgGt",f:xi},14:{n:"PtgNe",f:xi},15:{n:"PtgIsect",f:xi},16:{n:"PtgUnion",f:xi},17:{n:"PtgRange",f:xi},18:{n:"PtgUplus",f:xi},19:{n:"PtgUminus",f:xi},20:{n:"PtgPercent",f:xi},21:{n:"PtgParen",f:xi},22:{n:"PtgMissArg",f:xi},23:{n:"PtgStr",f:iJ},26:{n:"PtgSheet",f:NJ},27:{n:"PtgEndSheet",f:RJ},28:{n:"PtgErr",f:eJ},29:{n:"PtgBool",f:rJ},30:{n:"PtgInt",f:tJ},31:{n:"PtgNum",f:nJ},32:{n:"PtgArray",f:LY},33:{n:"PtgFunc",f:XY},34:{n:"PtgFuncVar",f:YY},35:{n:"PtgName",f:lJ},36:{n:"PtgRef",f:zY},37:{n:"PtgArea",f:kY},38:{n:"PtgMemArea",f:uJ},39:{n:"PtgMemErr",f:gJ},40:{n:"PtgMemNoMem",f:pJ},41:{n:"PtgMemFunc",f:fJ},42:{n:"PtgRefErr",f:dJ},43:{n:"PtgAreaErr",f:UY},44:{n:"PtgRefN",f:WY},45:{n:"PtgAreaN",f:OY},46:{n:"PtgMemAreaN",f:FJ},47:{n:"PtgMemNoMemN",f:kJ},57:{n:"PtgNameX",f:AJ},58:{n:"PtgRef3d",f:qY},59:{n:"PtgArea3d",f:DY},60:{n:"PtgRefErr3d",f:hJ},61:{n:"PtgAreaErr3d",f:MY},255:{}},UJ={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},MJ={1:{n:"PtgElfLel",f:Q8},2:{n:"PtgElfRw",f:_J},3:{n:"PtgElfCol",f:xJ},6:{n:"PtgElfRwV",f:TJ},7:{n:"PtgElfColV",f:yJ},10:{n:"PtgElfRadical",f:CJ},11:{n:"PtgElfRadicalS",f:bJ},13:{n:"PtgElfColS",f:wJ},15:{n:"PtgElfColSV",f:vJ},16:{n:"PtgElfRadicalLel",f:EJ},25:{n:"PtgList",f:SJ},29:{n:"PtgSxName",f:IJ},255:{}},OJ={0:{n:"PtgAttrNoop",f:DJ},1:{n:"PtgAttrSemi",f:VY},2:{n:"PtgAttrIf",f:HY},4:{n:"PtgAttrChoose",f:PY},8:{n:"PtgAttrGoto",f:QY},16:{n:"PtgAttrSum",f:ZY},32:{n:"PtgAttrBaxcel",f:T4},33:{n:"PtgAttrBaxcel",f:T4},64:{n:"PtgAttrSpace",f:GY},65:{n:"PtgAttrSpaceSemi",f:KY},128:{n:"PtgAttrIfError",f:jY},255:{}};function Vd(t,e,r,n){if(n.biff<8)return vs(t,e);for(var i=t.l+e,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=oJ(t,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=aJ(t,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=i-t.l,e!==0&&s.push(vs(t,e)),s}function Gd(t,e,r){for(var n=t.l+e,i,s,o=[];n!=t.l;)e=n-t.l,s=t[t.l],i=B4[s]||B4[UJ[s]],(s===24||s===25)&&(i=(s===24?MJ:OJ)[t[t.l+1]]),!i||!i.f?vs(t,e):o.push([i.n,i.f(t,e,r)]);return o}function LJ(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var PJ={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function QJ(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function H8(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function S4(t,e,r){var n=H8(t,e,r);return n=="#REF"?n:QJ(n,r)}function ds(t,e,r,n,i){var s=i&&i.biff||8,o={s:{c:0,r:0}},c=[],h,d,m,C=0,b=0,I,F="";if(!t[0]||!t[0][0])return"";for(var k=-1,U="",V=0,K=t[0].length;V<K;++V){var Q=t[0][V];switch(Q[0]){case"PtgUminus":c.push("-"+c.pop());break;case"PtgUplus":c.push("+"+c.pop());break;case"PtgPercent":c.push(c.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(h=c.pop(),d=c.pop(),k>=0){switch(t[0][k][1][0]){case 0:U=ri(" ",t[0][k][1][1]);break;case 1:U=ri("\r",t[0][k][1][1]);break;default:if(U="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][k][1][0])}d=d+U,k=-1}c.push(d+PJ[Q[0]]+h);break;case"PtgIsect":h=c.pop(),d=c.pop(),c.push(d+" "+h);break;case"PtgUnion":h=c.pop(),d=c.pop(),c.push(d+","+h);break;case"PtgRange":h=c.pop(),d=c.pop(),c.push(d+":"+h);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":m=zf(Q[1][1],o,i),c.push(Wf(m,s));break;case"PtgRefN":m=r?zf(Q[1][1],r,i):Q[1][1],c.push(Wf(m,s));break;case"PtgRef3d":C=Q[1][1],m=zf(Q[1][2],o,i),F=S4(n,C,i),c.push(F+"!"+Wf(m,s));break;case"PtgFunc":case"PtgFuncVar":var te=Q[1][0],re=Q[1][1];te||(te=0),te&=127;var z=te==0?[]:c.slice(-te);c.length-=te,re==="User"&&(re=z.shift()),c.push(re+"("+z.join(",")+")");break;case"PtgBool":c.push(Q[1]?"TRUE":"FALSE");break;case"PtgInt":c.push(Q[1]);break;case"PtgNum":c.push(String(Q[1]));break;case"PtgStr":c.push('"'+Q[1].replace(/"/g,'""')+'"');break;case"PtgErr":c.push(Q[1]);break;case"PtgAreaN":I=l4(Q[1][1],r?{s:r}:o,i),c.push(B2(I,i));break;case"PtgArea":I=l4(Q[1][1],o,i),c.push(B2(I,i));break;case"PtgArea3d":C=Q[1][1],I=Q[1][2],F=S4(n,C,i),c.push(F+"!"+B2(I,i));break;case"PtgAttrSum":c.push("SUM("+c.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":b=Q[1][2];var M=(n.names||[])[b-1]||(n[0]||[])[b],P=M?M.Name:"SH33TJSNAME"+String(b);P&&P.slice(0,6)=="_xlfn."&&!i.xlfn&&(P=P.slice(6)),c.push(P);break;case"PtgNameX":var O=Q[1][1];b=Q[1][2];var ee;if(i.biff<=5)O<0&&(O=-O),n[O]&&(ee=n[O][b]);else{var Y="";if(((n[O]||[])[0]||[])[0]==14849||(((n[O]||[])[0]||[])[0]==1025?n[O][b]&&n[O][b].itab>0&&(Y=n.SheetNames[n[O][b].itab-1]+"!"):Y=n.SheetNames[b-1]+"!"),n[O]&&n[O][b])Y+=n[O][b].Name;else if(n[0]&&n[0][b])Y+=n[0][b].Name;else{var X=(H8(n,O,i)||"").split(";;");X[b-1]?Y=X[b-1]:Y+="SH33TJSERRX"}c.push(Y);break}ee||(ee={Name:"SH33TJSERRY"}),c.push(ee.Name);break;case"PtgParen":var G="(",Ie=")";if(k>=0){switch(U="",t[0][k][1][0]){case 2:G=ri(" ",t[0][k][1][1])+G;break;case 3:G=ri("\r",t[0][k][1][1])+G;break;case 4:Ie=ri(" ",t[0][k][1][1])+Ie;break;case 5:Ie=ri("\r",t[0][k][1][1])+Ie;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][k][1][0])}k=-1}c.push(G+c.pop()+Ie);break;case"PtgRefErr":c.push("#REF!");break;case"PtgRefErr3d":c.push("#REF!");break;case"PtgExp":m={c:Q[1][1],r:Q[1][0]};var ge={c:r.c,r:r.r};if(n.sharedf[br(m)]){var de=n.sharedf[br(m)];c.push(ds(de,o,ge,n,i))}else{var we=!1;for(h=0;h!=n.arrayf.length;++h)if(d=n.arrayf[h],!(m.c<d[0].s.c||m.c>d[0].e.c)&&!(m.r<d[0].s.r||m.r>d[0].e.r)){c.push(ds(d[1],o,ge,n,i)),we=!0;break}we||c.push(Q[1])}break;case"PtgArray":c.push("{"+LJ(Q[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":k=V;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":c.push("");break;case"PtgAreaErr":c.push("#REF!");break;case"PtgAreaErr3d":c.push("#REF!");break;case"PtgList":c.push("Table"+Q[1].idx+"[#"+Q[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(Q));default:throw new Error("Unrecognized Formula Token: "+String(Q))}var Ge=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&k>=0&&Ge.indexOf(t[0][V][0])==-1){Q=t[0][k];var be=!0;switch(Q[1][0]){case 4:be=!1;case 0:U=ri(" ",Q[1][1]);break;case 5:be=!1;case 1:U=ri("\r",Q[1][1]);break;default:if(U="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+Q[1][0])}c.push((be?U:"")+c.pop()+(be?"":U)),k=-1}}if(c.length>1&&i.WTF)throw new Error("bad formula stack");return c[0]}function HJ(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,o=t.read_shift(i);if(o==65535)return[[],vs(t,e-2)];var c=Gd(t,o,r);return e!==o+i&&(s=Vd(t,e-o-i,c,r)),t.l=n,[c,s]}function jJ(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,o=t.read_shift(i);if(o==65535)return[[],vs(t,e-2)];var c=Gd(t,o,r);return e!==o+i&&(s=Vd(t,e-o-i,c,r)),t.l=n,[c,s]}function VJ(t,e,r,n){var i=t.l+e,s=Gd(t,n,r),o;return i!==t.l&&(o=Vd(t,i-t.l,s,r)),[s,o]}function GJ(t,e,r){var n=t.l+e,i,s=t.read_shift(2),o=Gd(t,s,r);return s==65535?[[],vs(t,e-2)]:(e!==s+2&&(i=Vd(t,n-s-2,o,r)),[o,i])}function KJ(t){var e;if(pl(t,t.l+6)!==65535)return[gs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function N2(t,e,r){var n=t.l+e,i=Qo(t);r.biff==2&&++t.l;var s=KJ(t),o=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var c=jJ(t,n-t.l,r);return{cell:i,val:s[0],formula:c,shared:o>>3&1,tt:s[1]}}function Vp(t,e,r){var n=t.read_shift(4),i=Gd(t,n,r),s=t.read_shift(4),o=s>0?Vd(t,s,i,r):null;return[i,o]}var zJ=Vp,Gp=Vp,WJ=Vp,qJ=Vp,XJ={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},j8={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},YJ={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function I4(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function R2(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var Jf={},Yu={};function Zf(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function V8(t,e,r,n,i,s){try{n.cellNF&&(t.z=Ir[e])}catch(c){if(n.WTF)throw c}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Pi(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Ir[e]==null&&wc(JK[e]||"General",e),t.t==="e")t.w=t.w||Hc[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=dd(t.v);else if(t.t==="d"){var o=ks(t.v);(o|0)===o?t.w=o.toString(10):t.w=dd(o)}else{if(t.v===void 0)return"";t.w=Sc(t.v,Yu)}else t.t==="d"?t.w=Ka(e,ks(t.v),Yu):t.w=Ka(e,t.v,Yu)}catch(c){if(n.WTF)throw c}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=W1(i.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=i.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=W1(i.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=i.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(c){if(n.WTF&&s.Fills)throw c}}}function JJ(t,e){var r=ni(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Zr(r))}var ZJ=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,$J=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,eZ=/<(?:\w:)?hyperlink [^>]*>/mg,tZ=/"(\w*:\w*)"/,rZ=/<(?:\w:)?col\b[^>]*[\/]?>/g,nZ=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,iZ=/<(?:\w:)?pageMargins[^>]*\/>/g,G8=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,sZ=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,aZ=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function oZ(t,e,r,n,i,s,o){if(!t)return t;n||(n={"!id":{}});var c=e.dense?[]:{},h={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",m="",C=t.match($J);C?(d=t.slice(0,C.index),m=t.slice(C.index+C[0].length)):d=m=t;var b=d.match(G8);b?Oy(b[0],c,i,r):(b=d.match(sZ))&&lZ(b[0],b[1]||"",c,i,r);var I=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(I>0){var F=d.slice(I,I+50).match(tZ);F&&JJ(c,F[1])}var k=d.match(aZ);k&&k[1]&&hZ(k[1],i);var U=[];if(e.cellStyles){var V=d.match(rZ);V&&uZ(U,V)}C&&gZ(C[1],c,e,h,s,o);var K=m.match(nZ);K&&(c["!autofilter"]=fZ(K[0]));var Q=[],te=m.match(ZJ);if(te)for(I=0;I!=te.length;++I)Q[I]=ni(te[I].slice(te[I].indexOf('"')+1));var re=m.match(eZ);re&&AZ(c,re,n);var z=m.match(iZ);if(z&&(c["!margins"]=cZ(fr(z[0]))),!c["!ref"]&&h.e.c>=h.s.c&&h.e.r>=h.s.r&&(c["!ref"]=Zr(h)),e.sheetRows>0&&c["!ref"]){var M=ni(c["!ref"]);e.sheetRows<=+M.e.r&&(M.e.r=e.sheetRows-1,M.e.r>h.e.r&&(M.e.r=h.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>h.e.c&&(M.e.c=h.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Zr(M))}return U.length>0&&(c["!cols"]=U),Q.length>0&&(c["!merges"]=Q),c}function Oy(t,e,r,n){var i=fr(t);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=rn(Fn(i.codeName)))}function lZ(t,e,r,n,i){Oy(t.slice(0,t.indexOf(">")),r,n,i)}function AZ(t,e,r){for(var n=Array.isArray(t),i=0;i!=e.length;++i){var s=fr(Fn(e[i]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+rn(s.location))):(s.Target="#"+rn(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var c=ni(s.ref),h=c.s.r;h<=c.e.r;++h)for(var d=c.s.c;d<=c.e.c;++d){var m=br({c:d,r:h});n?(t[h]||(t[h]=[]),t[h][d]||(t[h][d]={t:"z",v:void 0}),t[h][d].l=s):(t[m]||(t[m]={t:"z",v:void 0}),t[m].l=s)}}}function cZ(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function uZ(t,e){for(var r=!1,n=0;n!=e.length;++n){var i=fr(e[n],!0);i.hidden&&(i.hidden=jn(i.hidden));var s=parseInt(i.min,10)-1,o=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,Uy(i.width)),A0(i);s<=o;)t[s++]=ts(i)}}function fZ(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var dZ=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function hZ(t,e){e.Views||(e.Views=[{}]),(t.match(dZ)||[]).forEach(function(r,n){var i=fr(r);e.Views[n]||(e.Views[n]={}),+i.zoomScale&&(e.Views[n].zoom=+i.zoomScale),jn(i.rightToLeft)&&(e.Views[n].RTL=!0)})}var gZ=(function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=hd("v"),o=hd("f");return function(h,d,m,C,b,I){for(var F=0,k="",U=[],V=[],K=0,Q=0,te=0,re="",z,M,P=0,O=0,ee,Y,X=0,G=0,Ie=Array.isArray(I.CellXf),ge,de=[],we=[],Ge=Array.isArray(d),be=[],De={},ne=!1,q=!!m.sheetStubs,ce=h.split(e),oe=0,ae=ce.length;oe!=ae;++oe){k=ce[oe].trim();var Ee=k.length;if(Ee!==0){var Ke=0;e:for(F=0;F<Ee;++F)switch(k[F]){case">":if(k[F-1]!="/"){++F;break e}if(m&&m.cellStyles){if(M=fr(k.slice(Ke,F),!0),P=M.r!=null?parseInt(M.r,10):P+1,O=-1,m.sheetRows&&m.sheetRows<P)continue;De={},ne=!1,M.ht&&(ne=!0,De.hpt=parseFloat(M.ht),De.hpx=xd(De.hpt)),M.hidden=="1"&&(ne=!0,De.hidden=!0),M.outlineLevel!=null&&(ne=!0,De.level=+M.outlineLevel),ne&&(be[P-1]=De)}break;case"<":Ke=F;break}if(Ke>=F)break;if(M=fr(k.slice(Ke,F),!0),P=M.r!=null?parseInt(M.r,10):P+1,O=-1,!(m.sheetRows&&m.sheetRows<P)){C.s.r>P-1&&(C.s.r=P-1),C.e.r<P-1&&(C.e.r=P-1),m&&m.cellStyles&&(De={},ne=!1,M.ht&&(ne=!0,De.hpt=parseFloat(M.ht),De.hpx=xd(De.hpt)),M.hidden=="1"&&(ne=!0,De.hidden=!0),M.outlineLevel!=null&&(ne=!0,De.level=+M.outlineLevel),ne&&(be[P-1]=De)),U=k.slice(F).split(t);for(var Fe=0;Fe!=U.length&&U[Fe].trim().charAt(0)=="<";++Fe);for(U=U.slice(Fe),F=0;F!=U.length;++F)if(k=U[F].trim(),k.length!==0){if(V=k.match(r),K=F,Q=0,te=0,k="<c "+(k.slice(0,1)=="<"?">":"")+k,V!=null&&V.length===2){for(K=0,re=V[1],Q=0;Q!=re.length&&!((te=re.charCodeAt(Q)-64)<1||te>26);++Q)K=26*K+te;--K,O=K}else++O;for(Q=0;Q!=k.length&&k.charCodeAt(Q)!==62;++Q);if(++Q,M=fr(k.slice(0,Q),!0),M.r||(M.r=br({r:P-1,c:O})),re=k.slice(Q),z={t:""},(V=re.match(s))!=null&&V[1]!==""&&(z.v=rn(V[1])),m.cellFormula){if((V=re.match(o))!=null&&V[1]!==""){if(z.f=rn(Fn(V[1])).replace(/\r\n/g,`
`),m.xlfn||(z.f=_4(z.f)),V[0].indexOf('t="array"')>-1)z.F=(re.match(i)||[])[1],z.F.indexOf(":")>-1&&de.push([ni(z.F),z.F]);else if(V[0].indexOf('t="shared"')>-1){Y=fr(V[0]);var He=rn(Fn(V[1]));m.xlfn||(He=_4(He)),we[parseInt(Y.si,10)]=[Y,He,M.r]}}else(V=re.match(/<f[^>]*\/>/))&&(Y=fr(V[0]),we[Y.si]&&(z.f=TY(we[Y.si][1],we[Y.si][2],M.r)));var tt=Rs(M.r);for(Q=0;Q<de.length;++Q)tt.r>=de[Q][0].s.r&&tt.r<=de[Q][0].e.r&&tt.c>=de[Q][0].s.c&&tt.c<=de[Q][0].e.c&&(z.F=de[Q][1])}if(M.t==null&&z.v===void 0)if(z.f||z.F)z.v=0,z.t="n";else if(q)z.t="z";else continue;else z.t=M.t||"n";switch(C.s.c>O&&(C.s.c=O),C.e.c<O&&(C.e.c=O),z.t){case"n":if(z.v==""||z.v==null){if(!q)continue;z.t="z"}else z.v=parseFloat(z.v);break;case"s":if(typeof z.v>"u"){if(!q)continue;z.t="z"}else ee=Jf[parseInt(z.v,10)],z.v=ee.t,z.r=ee.r,m.cellHTML&&(z.h=ee.h);break;case"str":z.t="s",z.v=z.v!=null?Fn(z.v):"",m.cellHTML&&(z.h=by(z.v));break;case"inlineStr":V=re.match(n),z.t="s",V!=null&&(ee=Dy(V[1]))?(z.v=ee.t,m.cellHTML&&(z.h=ee.h)):z.v="";break;case"b":z.v=jn(z.v);break;case"d":m.cellDates?z.v=Pi(z.v,1):(z.v=ks(Pi(z.v,1)),z.t="n");break;case"e":(!m||m.cellText!==!1)&&(z.w=z.v),z.v=u8[z.v];break}if(X=G=0,ge=null,Ie&&M.s!==void 0&&(ge=I.CellXf[M.s],ge!=null&&(ge.numFmtId!=null&&(X=ge.numFmtId),m.cellStyles&&ge.fillId!=null&&(G=ge.fillId))),V8(z,X,G,m,b,I),m.cellDates&&Ie&&z.t=="n"&&p0(Ir[X])&&(z.t="d",z.v=Hp(z.v)),M.cm&&m.xlmeta){var Tt=(m.xlmeta.Cell||[])[+M.cm-1];Tt&&Tt.type=="XLDAPR"&&(z.D=!0)}if(Ge){var ve=Rs(M.r);d[ve.r]||(d[ve.r]=[]),d[ve.r][ve.c]=z}else d[M.r]=z}}}}be.length>0&&(d["!rows"]=be)}})();function pZ(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}var mZ=Qc;function xZ(){}function wZ(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=Hz(t),r}function vZ(t){var e=Wa(t);return[e]}function yZ(t){var e=Pc(t);return[e]}function CZ(t){var e=Wa(t),r=t.read_shift(1);return[e,r,"b"]}function EZ(t){var e=Pc(t),r=t.read_shift(1);return[e,r,"b"]}function bZ(t){var e=Wa(t),r=t.read_shift(1);return[e,r,"e"]}function _Z(t){var e=Pc(t),r=t.read_shift(1);return[e,r,"e"]}function TZ(t){var e=Wa(t),r=t.read_shift(4);return[e,r,"s"]}function BZ(t){var e=Pc(t),r=t.read_shift(4);return[e,r,"s"]}function SZ(t){var e=Wa(t),r=gs(t);return[e,r,"n"]}function K8(t){var e=Pc(t),r=gs(t);return[e,r,"n"]}function IZ(t){var e=Wa(t),r=Ry(t);return[e,r,"n"]}function NZ(t){var e=Pc(t),r=Ry(t);return[e,r,"n"]}function RZ(t){var e=Wa(t),r=Iy(t);return[e,r,"is"]}function FZ(t){var e=Wa(t),r=xs(t);return[e,r,"str"]}function kZ(t){var e=Pc(t),r=xs(t);return[e,r,"str"]}function DZ(t,e,r){var n=t.l+e,i=Wa(t);i.r=r["!row"];var s=t.read_shift(1),o=[i,s,"b"];if(r.cellFormula){t.l+=2;var c=Gp(t,n-t.l,r);o[3]=ds(c,null,i,r.supbooks,r)}else t.l=n;return o}function UZ(t,e,r){var n=t.l+e,i=Wa(t);i.r=r["!row"];var s=t.read_shift(1),o=[i,s,"e"];if(r.cellFormula){t.l+=2;var c=Gp(t,n-t.l,r);o[3]=ds(c,null,i,r.supbooks,r)}else t.l=n;return o}function MZ(t,e,r){var n=t.l+e,i=Wa(t);i.r=r["!row"];var s=gs(t),o=[i,s,"n"];if(r.cellFormula){t.l+=2;var c=Gp(t,n-t.l,r);o[3]=ds(c,null,i,r.supbooks,r)}else t.l=n;return o}function OZ(t,e,r){var n=t.l+e,i=Wa(t);i.r=r["!row"];var s=xs(t),o=[i,s,"str"];if(r.cellFormula){t.l+=2;var c=Gp(t,n-t.l,r);o[3]=ds(c,null,i,r.supbooks,r)}else t.l=n;return o}var LZ=Qc;function PZ(t,e){var r=t.l+e,n=Qc(t),i=Ny(t),s=xs(t),o=xs(t),c=xs(t);t.l=r;var h={rfx:n,relId:i,loc:s,display:c};return o&&(h.Tooltip=o),h}function QZ(){}function HZ(t,e,r){var n=t.l+e,i=l8(t),s=t.read_shift(1),o=[i];if(o[2]=s,r.cellFormula){var c=zJ(t,n-t.l,r);o[1]=c}else t.l=n;return o}function jZ(t,e,r){var n=t.l+e,i=Qc(t),s=[i];if(r.cellFormula){var o=qJ(t,n-t.l,r);s[1]=o,t.l=n}else t.l=n;return s}var VZ=["left","right","top","bottom","header","footer"];function GZ(t){var e={};return VZ.forEach(function(r){e[r]=gs(t)}),e}function KZ(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function zZ(){}function WZ(){}function qZ(t,e,r,n,i,s,o){if(!t)return t;var c=e||{};n||(n={"!id":{}});var h=c.dense?[]:{},d,m={s:{r:2e6,c:2e6},e:{r:0,c:0}},C=!1,b=!1,I,F,k,U,V,K,Q,te,re,z=[];c.biff=12,c["!row"]=0;var M=0,P=!1,O=[],ee={},Y=c.supbooks||i.supbooks||[[]];if(Y.sharedf=ee,Y.arrayf=O,Y.SheetNames=i.SheetNames||i.Sheets.map(function(Ge){return Ge.name}),!c.supbooks&&(c.supbooks=Y,i.Names))for(var X=0;X<i.Names.length;++X)Y[0][X+1]=i.Names[X];var G=[],Ie=[],ge=!1;Y1[16]={n:"BrtShortReal",f:K8};var de;if(Rl(t,function(be,De,ne){if(!b)switch(ne){case 148:d=be;break;case 0:I=be,c.sheetRows&&c.sheetRows<=I.r&&(b=!0),te=rs(U=I.r),c["!row"]=I.r,(be.hidden||be.hpt||be.level!=null)&&(be.hpt&&(be.hpx=xd(be.hpt)),Ie[be.r]=be);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(F={t:be[2]},be[2]){case"n":F.v=be[1];break;case"s":Q=Jf[be[1]],F.v=Q.t,F.r=Q.r;break;case"b":F.v=!!be[1];break;case"e":F.v=be[1],c.cellText!==!1&&(F.w=Hc[F.v]);break;case"str":F.t="s",F.v=be[1];break;case"is":F.t="s",F.v=be[1].t;break}if((k=o.CellXf[be[0].iStyleRef])&&V8(F,k.numFmtId,null,c,s,o),V=be[0].c==-1?V+1:be[0].c,c.dense?(h[U]||(h[U]=[]),h[U][V]=F):h[Ii(V)+te]=F,c.cellFormula){for(P=!1,M=0;M<O.length;++M){var q=O[M];I.r>=q[0].s.r&&I.r<=q[0].e.r&&V>=q[0].s.c&&V<=q[0].e.c&&(F.F=Zr(q[0]),P=!0)}!P&&be.length>3&&(F.f=be[3])}if(m.s.r>I.r&&(m.s.r=I.r),m.s.c>V&&(m.s.c=V),m.e.r<I.r&&(m.e.r=I.r),m.e.c<V&&(m.e.c=V),c.cellDates&&k&&F.t=="n"&&p0(Ir[k.numFmtId])){var ce=hc(F.v);ce&&(F.t="d",F.v=new Date(ce.y,ce.m-1,ce.d,ce.H,ce.M,ce.S,ce.u))}de&&(de.type=="XLDAPR"&&(F.D=!0),de=void 0);break;case 1:case 12:if(!c.sheetStubs||C)break;F={t:"z",v:void 0},V=be[0].c==-1?V+1:be[0].c,c.dense?(h[U]||(h[U]=[]),h[U][V]=F):h[Ii(V)+te]=F,m.s.r>I.r&&(m.s.r=I.r),m.s.c>V&&(m.s.c=V),m.e.r<I.r&&(m.e.r=I.r),m.e.c<V&&(m.e.c=V),de&&(de.type=="XLDAPR"&&(F.D=!0),de=void 0);break;case 176:z.push(be);break;case 49:de=((c.xlmeta||{}).Cell||[])[be-1];break;case 494:var oe=n["!id"][be.relId];for(oe?(be.Target=oe.Target,be.loc&&(be.Target+="#"+be.loc),be.Rel=oe):be.relId==""&&(be.Target="#"+be.loc),U=be.rfx.s.r;U<=be.rfx.e.r;++U)for(V=be.rfx.s.c;V<=be.rfx.e.c;++V)c.dense?(h[U]||(h[U]=[]),h[U][V]||(h[U][V]={t:"z",v:void 0}),h[U][V].l=be):(K=br({c:V,r:U}),h[K]||(h[K]={t:"z",v:void 0}),h[K].l=be);break;case 426:if(!c.cellFormula)break;O.push(be),re=c.dense?h[U][V]:h[Ii(V)+te],re.f=ds(be[1],m,{r:I.r,c:V},Y,c),re.F=Zr(be[0]);break;case 427:if(!c.cellFormula)break;ee[br(be[0].s)]=be[1],re=c.dense?h[U][V]:h[Ii(V)+te],re.f=ds(be[1],m,{r:I.r,c:V},Y,c);break;case 60:if(!c.cellStyles)break;for(;be.e>=be.s;)G[be.e--]={width:be.w/256,hidden:!!(be.flags&1),level:be.level},ge||(ge=!0,Uy(be.w/256)),A0(G[be.e+1]);break;case 161:h["!autofilter"]={ref:Zr(be)};break;case 476:h["!margins"]=be;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),be.name&&(i.Sheets[r].CodeName=be.name),(be.above||be.left)&&(h["!outline"]={above:be.above,left:be.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),be.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:C=!0;break;case 36:C=!1;break;case 37:C=!0;break;case 38:C=!1;break;default:if(!De.T){if(!C||c.WTF)throw new Error("Unexpected record 0x"+ne.toString(16))}}},c),delete c.supbooks,delete c["!row"],!h["!ref"]&&(m.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(h["!ref"]=Zr(d||m)),c.sheetRows&&h["!ref"]){var we=ni(h["!ref"]);c.sheetRows<=+we.e.r&&(we.e.r=c.sheetRows-1,we.e.r>m.e.r&&(we.e.r=m.e.r),we.e.r<we.s.r&&(we.s.r=we.e.r),we.e.c>m.e.c&&(we.e.c=m.e.c),we.e.c<we.s.c&&(we.s.c=we.e.c),h["!fullref"]=h["!ref"],h["!ref"]=Zr(we))}return z.length>0&&(h["!merges"]=z),G.length>0&&(h["!cols"]=G),Ie.length>0&&(h["!rows"]=Ie),h}function XZ(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(e[+o[1]]=r?+o[2]:o[2])});var i=rn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,i,n]}function YZ(t,e,r,n,i,s){var o=s||{"!type":"chart"};if(!t)return s;var c=0,h=0,d="A",m={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(C){var b=XZ(C);m.s.r=m.s.c=0,m.e.c=c,d=Ii(c),b[0].forEach(function(I,F){o[d+rs(F)]={t:"n",v:I,z:b[1]},h=F}),m.e.r<h&&(m.e.r=h),++c}),c>0&&(o["!ref"]=Zr(m)),o}function JZ(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,c=t.match(G8);return c&&Oy(c[0],s,i,r),(o=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function ZZ(t,e){t.l+=10;var r=xs(t);return{name:r}}function $Z(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Rl(t,function(h,d,m){switch(m){case 550:s["!rel"]=h;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),h.name&&(i.Sheets[r].CodeName=h.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||e.WTF)throw new Error("Unexpected record 0x"+m.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var z8=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],e$=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],t$=[],r$=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function N4(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],i=0;i!=e.length;++i){var s=e[i];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=jn(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function R4(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=jn(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function W8(t){R4(t.WBProps,z8),R4(t.CalcPr,r$),N4(t.WBView,e$),N4(t.Sheets,t$),Yu.date1904=jn(t.WBProps.date1904)}var n$="][*?/\\".split("");function i$(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return n$.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var s$=/<\w+:workbook/;function a$(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",s={},o=0;if(t.replace(ys,function(h,d){var m=fr(h);switch(Po(m[0])){case"<?xml":break;case"<workbook":h.match(s$)&&(i="xmlns"+h.match(/<(\w+):/)[1]),r.xmlns=m[i];break;case"</workbook>":break;case"<fileVersion":delete m[0],r.AppVersion=m;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":z8.forEach(function(C){if(m[C[0]]!=null)switch(C[2]){case"bool":r.WBProps[C[0]]=jn(m[C[0]]);break;case"int":r.WBProps[C[0]]=parseInt(m[C[0]],10);break;default:r.WBProps[C[0]]=m[C[0]]}}),m.codeName&&(r.WBProps.CodeName=Fn(m.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete m[0],r.WBView.push(m);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(m.state){case"hidden":m.Hidden=1;break;case"veryHidden":m.Hidden=2;break;default:m.Hidden=0}delete m.state,m.name=rn(Fn(m.name)),delete m[0],r.Sheets.push(m);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Fn(m.name),m.comment&&(s.Comment=m.comment),m.localSheetId&&(s.Sheet=+m.localSheetId),jn(m.hidden||"0")&&(s.Hidden=!0),o=d+h.length;break;case"</definedName>":s.Ref=rn(Fn(t.slice(o,d))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete m[0],r.CalcPr=m;break;case"<calcPr/>":delete m[0],r.CalcPr=m;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+m[0]+" in workbook")}return h}),bz.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return W8(r),r}function o$(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Ow(t),r.name=xs(t),r}function l$(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?xs(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function A$(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function c$(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=jz(t),o=WJ(t,0,r),c=Ny(t);t.l=n;var h={Name:s,Ptg:o};return i<268435455&&(h.Sheet=i),c&&(h.Comment=c),h}function u$(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;e||(e={}),e.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],Y1[16]={n:"BrtFRTArchID$",f:A$},Rl(t,function(h,d,m){switch(m){case 156:o.SheetNames.push(h.name),r.Sheets.push(h);break;case 153:r.WBProps=h;break;case 39:h.Sheet!=null&&(e.SID=h.Sheet),h.Ref=ds(h.Ptg,null,null,o,e),delete e.SID,delete h.Ptg,s.push(h);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([m,h]):o[0]=[m,h],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(h),o.XTI=o.XTI.concat(h);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(m),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(m),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!d.T){if(!i||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+m.toString(16))}}},e),W8(r),r.Names=s,r.supbooks=o,r}function f$(t,e,r){return e.slice(-4)===".bin"?u$(t,r):a$(t,r)}function d$(t,e,r,n,i,s,o,c){return e.slice(-4)===".bin"?qZ(t,n,r,i,s,o,c):oZ(t,n,r,i,s,o,c)}function h$(t,e,r,n,i,s,o,c){return e.slice(-4)===".bin"?$Z(t,n,r,i,s):JZ(t,n,r,i,s)}function g$(t,e,r,n,i,s,o,c){return e.slice(-4)===".bin"?EY():bY()}function p$(t,e,r,n,i,s,o,c){return e.slice(-4)===".bin"?yY():CY()}function m$(t,e,r,n){return e.slice(-4)===".bin"?LX(t,r,n):FX(t,r,n)}function x$(t,e,r){return k8(t,r)}function w$(t,e,r){return e.slice(-4)===".bin"?eX(t,r):Zq(t,r)}function v$(t,e,r){return e.slice(-4)===".bin"?xY(t,r):dY(t,r)}function y$(t,e,r){return e.slice(-4)===".bin"?cY(t):lY(t)}function C$(t,e,r,n){return r.slice(-4)===".bin"?uY(t,e,r,n):void 0}function E$(t,e,r){return e.slice(-4)===".bin"?aY(t,e,r):oY(t,e,r)}var q8=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,X8=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function to(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=t.match(q8),s,o,c,h;if(i)for(h=0;h!=i.length;++h)s=i[h].match(X8),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?c="xmlns"+s[1].slice(6):c=s[1].slice(o+1),n[c]=s[2].slice(1,s[2].length-1));return n}function b$(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(q8),i,s,o,c;if(n)for(c=0;c!=n.length;++c)i=n[c].match(X8),(s=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(s+1),r[o]=i[2].slice(1,i[2].length-1));return r}var $f;function _$(t,e){var r=$f[t]||rn(t);return r==="General"?Sc(e):Ka(r,e)}function T$(t,e,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=jn(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=Pi(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[rn(e)]=i}function B$(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Hc[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=dd(t.v):t.w=Sc(t.v):t.w=_$(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=$f[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&p0(n)){var i=hc(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(r.WTF)throw s}}}function S$(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=TX[n.Pattern]||n.Pattern)}t[e.ID]=e}function I$(t,e,r,n,i,s,o,c,h,d){var m="General",C=n.StyleID,b={};d=d||{};var I=[],F=0;for(C===void 0&&c&&(C=c.StyleID),C===void 0&&o&&(C=o.StyleID);s[C]!==void 0&&(s[C].nf&&(m=s[C].nf),s[C].Interior&&I.push(s[C].Interior),!!s[C].Parent);)C=s[C].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=jn(t);break;case"String":n.t="s",n.r=$B(rn(t)),n.v=t.indexOf("<")>-1?rn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Pi(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=rn(t):n.v<60&&(n.v=n.v-1),(!m||m=="General")&&(m="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=u8[t],d.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=$B(e||t));break}if(B$(n,m,d),d.cellFormula!==!1)if(n.Formula){var k=rn(n.Formula);k.charCodeAt(0)==61&&(k=k.slice(1)),n.f=Xu(k,i),delete n.Formula,n.ArrayRange=="RC"?n.F=Xu("RC:RC",i):n.ArrayRange&&(n.F=Xu(n.ArrayRange,i),h.push([ni(n.F),n.F]))}else for(F=0;F<h.length;++F)i.r>=h[F][0].s.r&&i.r<=h[F][0].e.r&&i.c>=h[F][0].s.c&&i.c<=h[F][0].e.c&&(n.F=h[F][1]);d.cellStyles&&(I.forEach(function(U){!b.patternType&&U.patternType&&(b.patternType=U.patternType)}),n.s=b),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function N$(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function F2(t,e){var r=e||{};OF();var n=Sf(_y(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Fn(n));var i=n.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var o=ts(r);return o.type="string",pd.to_workbook(n,o)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ot){i.indexOf("<"+Ot)>=0&&(s=!0)}),s)return P$(n,r);$f={"General Number":"General","General Date":Ir[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ir[15],"Short Date":Ir[14],"Long Time":Ir[19],"Medium Time":Ir[18],"Short Time":Ir[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ir[2],Standard:Ir[4],Percent:Ir[10],Scientific:Ir[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var c,h=[],d,m={},C=[],b=r.dense?[]:{},I="",F={},k={},U=to('<Data ss:Type="String">'),V=0,K=0,Q=0,te={s:{r:2e6,c:2e6},e:{r:0,c:0}},re={},z={},M="",P=0,O=[],ee={},Y={},X=0,G=[],Ie=[],ge={},de=[],we,Ge=!1,be=[],De=[],ne={},q=0,ce=0,oe={Sheets:[],WBProps:{date1904:!1}},ae={};gd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var Ee="";c=gd.exec(n);)switch(c[3]=(Ee=c[3]).toLowerCase()){case"data":if(Ee=="data"){if(c[1]==="/"){if((d=h.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else c[0].charAt(c[0].length-2)!=="/"&&h.push([c[3],!0]);break}if(h[h.length-1][1])break;c[1]==="/"?I$(n.slice(V,c.index),M,U,h[h.length-1][0]=="comment"?ge:F,{c:K,r:Q},re,de[K],k,be,r):(M="",U=to(c[0]),V=c.index+c[0].length);break;case"cell":if(c[1]==="/")if(Ie.length>0&&(F.c=Ie),(!r.sheetRows||r.sheetRows>Q)&&F.v!==void 0&&(r.dense?(b[Q]||(b[Q]=[]),b[Q][K]=F):b[Ii(K)+rs(Q)]=F),F.HRef&&(F.l={Target:rn(F.HRef)},F.HRefScreenTip&&(F.l.Tooltip=F.HRefScreenTip),delete F.HRef,delete F.HRefScreenTip),(F.MergeAcross||F.MergeDown)&&(q=K+(parseInt(F.MergeAcross,10)|0),ce=Q+(parseInt(F.MergeDown,10)|0),O.push({s:{c:K,r:Q},e:{c:q,r:ce}})),!r.sheetStubs)F.MergeAcross?K=q+1:++K;else if(F.MergeAcross||F.MergeDown){for(var Ke=K;Ke<=q;++Ke)for(var Fe=Q;Fe<=ce;++Fe)(Ke>K||Fe>Q)&&(r.dense?(b[Fe]||(b[Fe]=[]),b[Fe][Ke]={t:"z"}):b[Ii(Ke)+rs(Fe)]={t:"z"});K=q+1}else++K;else F=b$(c[0]),F.Index&&(K=+F.Index-1),K<te.s.c&&(te.s.c=K),K>te.e.c&&(te.e.c=K),c[0].slice(-2)==="/>"&&++K,Ie=[];break;case"row":c[1]==="/"||c[0].slice(-2)==="/>"?(Q<te.s.r&&(te.s.r=Q),Q>te.e.r&&(te.e.r=Q),c[0].slice(-2)==="/>"&&(k=to(c[0]),k.Index&&(Q=+k.Index-1)),K=0,++Q):(k=to(c[0]),k.Index&&(Q=+k.Index-1),ne={},(k.AutoFitHeight=="0"||k.Height)&&(ne.hpx=parseInt(k.Height,10),ne.hpt=F8(ne.hpx),De[Q]=ne),k.Hidden=="1"&&(ne.hidden=!0,De[Q]=ne));break;case"worksheet":if(c[1]==="/"){if((d=h.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"));C.push(I),te.s.r<=te.e.r&&te.s.c<=te.e.c&&(b["!ref"]=Zr(te),r.sheetRows&&r.sheetRows<=te.e.r&&(b["!fullref"]=b["!ref"],te.e.r=r.sheetRows-1,b["!ref"]=Zr(te))),O.length&&(b["!merges"]=O),de.length>0&&(b["!cols"]=de),De.length>0&&(b["!rows"]=De),m[I]=b}else te={s:{r:2e6,c:2e6},e:{r:0,c:0}},Q=K=0,h.push([c[3],!1]),d=to(c[0]),I=rn(d.Name),b=r.dense?[]:{},O=[],be=[],De=[],ae={name:I,Hidden:0},oe.Sheets.push(ae);break;case"table":if(c[1]==="/"){if((d=h.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else{if(c[0].slice(-2)=="/>")break;h.push([c[3],!1]),de=[],Ge=!1}break;case"style":c[1]==="/"?S$(re,z,r):z=to(c[0]);break;case"numberformat":z.nf=rn(to(c[0]).Format||"General"),$f[z.nf]&&(z.nf=$f[z.nf]);for(var He=0;He!=392&&Ir[He]!=z.nf;++He);if(He==392){for(He=57;He!=392;++He)if(Ir[He]==null){wc(z.nf,He);break}}break;case"column":if(h[h.length-1][0]!=="table")break;if(we=to(c[0]),we.Hidden&&(we.hidden=!0,delete we.Hidden),we.Width&&(we.wpx=parseInt(we.Width,10)),!Ge&&we.wpx>10){Ge=!0,Ns=N8;for(var tt=0;tt<de.length;++tt)de[tt]&&A0(de[tt])}Ge&&A0(we),de[we.Index-1||de.length]=we;for(var Tt=0;Tt<+we.Span;++Tt)de[de.length]=ts(we);break;case"namedrange":if(c[1]==="/")break;oe.Names||(oe.Names=[]);var ve=fr(c[0]),Oe={Name:ve.Name,Ref:Xu(ve.RefersTo.slice(1),{r:0,c:0})};oe.Sheets.length>0&&(Oe.Sheet=oe.Sheets.length-1),oe.Names.push(Oe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(c[0].slice(-2)==="/>")break;c[1]==="/"?M+=n.slice(P,c.index):P=c.index+c[0].length;break;case"interior":if(!r.cellStyles)break;z.Interior=to(c[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(c[0].slice(-2)==="/>")break;c[1]==="/"?dW(ee,Ee,n.slice(X,c.index)):X=c.index+c[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(c[1]==="/"){if((d=h.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else h.push([c[3],!1]);break;case"comment":if(c[1]==="/"){if((d=h.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"));N$(ge),Ie.push(ge)}else h.push([c[3],!1]),d=to(c[0]),ge={a:d.Author};break;case"autofilter":if(c[1]==="/"){if((d=h.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else if(c[0].charAt(c[0].length-2)!=="/"){var st=to(c[0]);b["!autofilter"]={ref:Xu(st.Range).replace(/\$/g,"")},h.push([c[3],!0])}break;case"name":break;case"datavalidation":if(c[1]==="/"){if((d=h.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else c[0].charAt(c[0].length-2)!=="/"&&h.push([c[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(c[1]==="/"){if((d=h.pop())[0]!==c[3])throw new Error("Bad state: "+d.join("|"))}else c[0].charAt(c[0].length-2)!=="/"&&h.push([c[3],!0]);break;case"null":break;default:if(h.length==0&&c[3]=="document"||h.length==0&&c[3]=="uof")return O4(n,r);var Bt=!0;switch(h[h.length-1][0]){case"officedocumentsettings":switch(c[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Bt=!1}break;case"componentoptions":switch(c[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Bt=!1}break;case"excelworkbook":switch(c[3]){case"date1904":oe.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Bt=!1}break;case"workbookoptions":switch(c[3]){case"owcversion":break;case"height":break;case"width":break;default:Bt=!1}break;case"worksheetoptions":switch(c[3]){case"visible":if(c[0].slice(-2)!=="/>")if(c[1]==="/")switch(n.slice(X,c.index)){case"SheetHidden":ae.Hidden=1;break;case"SheetVeryHidden":ae.Hidden=2;break}else X=c.index+c[0].length;break;case"header":b["!margins"]||Zf(b["!margins"]={},"xlml"),isNaN(+fr(c[0]).Margin)||(b["!margins"].header=+fr(c[0]).Margin);break;case"footer":b["!margins"]||Zf(b["!margins"]={},"xlml"),isNaN(+fr(c[0]).Margin)||(b["!margins"].footer=+fr(c[0]).Margin);break;case"pagemargins":var kt=fr(c[0]);b["!margins"]||Zf(b["!margins"]={},"xlml"),isNaN(+kt.Top)||(b["!margins"].top=+kt.Top),isNaN(+kt.Left)||(b["!margins"].left=+kt.Left),isNaN(+kt.Right)||(b["!margins"].right=+kt.Right),isNaN(+kt.Bottom)||(b["!margins"].bottom=+kt.Bottom);break;case"displayrighttoleft":oe.Views||(oe.Views=[]),oe.Views[0]||(oe.Views[0]={}),oe.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":b["!outline"]||(b["!outline"]={}),b["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":b["!outline"]||(b["!outline"]={}),b["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Bt=!1}break;case"pivottable":case"pivotcache":switch(c[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Bt=!1}break;case"pagebreaks":switch(c[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Bt=!1}break;case"autofilter":switch(c[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Bt=!1}break;case"querytable":switch(c[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Bt=!1}break;case"datavalidation":switch(c[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Bt=!1}break;case"sorting":case"conditionalformatting":switch(c[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Bt=!1}break;case"mapinfo":case"schema":case"data":switch(c[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Bt=!1}break;case"smarttags":break;default:Bt=!1;break}if(Bt||c[3].match(/!\[CDATA/))break;if(!h[h.length-1][1])throw"Unrecognized tag: "+c[3]+"|"+h.join("|");if(h[h.length-1][0]==="customdocumentproperties"){if(c[0].slice(-2)==="/>")break;c[1]==="/"?T$(Y,Ee,G,n.slice(X,c.index)):(G=c,X=c.index+c[0].length);break}if(r.WTF)throw"Unrecognized tag: "+c[3]+"|"+h.join("|")}var ft={};return!r.bookSheets&&!r.bookProps&&(ft.Sheets=m),ft.SheetNames=C,ft.Workbook=oe,ft.SSF=ts(Ir),ft.Props=ee,ft.Custprops=Y,ft}function Hw(t,e){switch(Qy(e=e||{}),e.type||"base64"){case"base64":return F2(Ea(t),e);case"binary":case"buffer":case"file":return F2(t,e);case"array":return F2(Lc(t),e)}}function R$(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Kz(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=zz(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var F$=[60,1084,2066,2165,2175];function k$(t,e,r,n,i){var s=n,o=[],c=r.slice(r.l,r.l+s);if(i&&i.enc&&i.enc.insitu&&c.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(c)}o.push(c),r.l+=s;for(var h=pl(r,r.l),d=jw[h],m=0;d!=null&&F$.indexOf(h)>-1;)s=pl(r,r.l+2),m=r.l+4,h==2066?m+=4:(h==2165||h==2175)&&(m+=12),c=r.slice(m,r.l+4+s),o.push(c),r.l+=4+s,d=jw[h=pl(r,r.l)];var C=gA(o);Ji(C,0);var b=0;C.lens=[];for(var I=0;I<o.length;++I)C.lens.push(b),b+=o[I].length;if(C.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+C.length+" < "+n;return e.f(C,C.length,i)}function To(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Ir[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||Hc[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=dd(t.v):t.w=Sc(t.v):t.w=Ka(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&p0(Ir[n]||String(n))){var i=hc(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function Lg(t,e,r){return{v:t,ixfe:e,t:r}}function D$(t,e){var r={opts:{}},n={},i=e.dense?[]:{},s={},o={},c=null,h=[],d="",m={},C,b="",I,F,k,U,V={},K=[],Q,te,re=[],z=[],M={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},O=function(Ht){return Ht<8?vc[Ht]:Ht<64&&z[Ht-8]||vc[Ht]},ee=function(Ht,mr,pt){var yt=mr.XF.data;if(!(!yt||!yt.patternType||!pt||!pt.cellStyles)){mr.s={},mr.s.patternType=yt.patternType;var _e;(_e=md(O(yt.icvFore)))&&(mr.s.fgColor={rgb:_e}),(_e=md(O(yt.icvBack)))&&(mr.s.bgColor={rgb:_e})}},Y=function(Ht,mr,pt){if(!(ne>1)&&!(pt.sheetRows&&Ht.r>=pt.sheetRows)){if(pt.cellStyles&&mr.XF&&mr.XF.data&&ee(Ht,mr,pt),delete mr.ixfe,delete mr.XF,C=Ht,b=br(Ht),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Ht.r<o.s.r&&(o.s.r=Ht.r),Ht.c<o.s.c&&(o.s.c=Ht.c),Ht.r+1>o.e.r&&(o.e.r=Ht.r+1),Ht.c+1>o.e.c&&(o.e.c=Ht.c+1),pt.cellFormula&&mr.f){for(var yt=0;yt<K.length;++yt)if(!(K[yt][0].s.c>Ht.c||K[yt][0].s.r>Ht.r)&&!(K[yt][0].e.c<Ht.c||K[yt][0].e.r<Ht.r)){mr.F=Zr(K[yt][0]),(K[yt][0].s.c!=Ht.c||K[yt][0].s.r!=Ht.r)&&delete mr.f,mr.f&&(mr.f=""+ds(K[yt][1],o,Ht,be,X));break}}pt.dense?(i[Ht.r]||(i[Ht.r]=[]),i[Ht.r][Ht.c]=mr):i[b]=mr}},X={enc:!1,sbcch:0,snames:[],sharedf:V,arrayf:K,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(X.password=e.password);var G,Ie=[],ge=[],de=[],we=[],Ge=!1,be=[];be.SheetNames=X.snames,be.sharedf=X.sharedf,be.arrayf=X.arrayf,be.names=[],be.XTI=[];var De=0,ne=0,q=0,ce=[],oe=[],ae;X.codepage=1200,so(1200);for(var Ee=!1;t.l<t.length-1;){var Ke=t.l,Fe=t.read_shift(2);if(Fe===0&&De===10)break;var He=t.l===t.length?0:t.read_shift(2),tt=jw[Fe];if(tt&&tt.f){if(e.bookSheets&&De===133&&Fe!==133)break;if(De=Fe,tt.r===2||tt.r==12){var Tt=t.read_shift(2);if(He-=2,!X.enc&&Tt!==Fe&&((Tt&255)<<8|Tt>>8)!==Fe)throw new Error("rt mismatch: "+Tt+"!="+Fe);tt.r==12&&(t.l+=10,He-=10)}var ve={};if(Fe===10?ve=tt.f(t,He,X):ve=k$(Fe,tt,t,He,X),ne==0&&[9,521,1033,2057].indexOf(De)===-1)continue;switch(Fe){case 34:r.opts.Date1904=M.WBProps.date1904=ve;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(X.enc||(t.l=0),X.enc=ve,!e.password)throw new Error("File is password-protected");if(ve.valid==null)throw new Error("Encryption scheme unsupported");if(!ve.valid)throw new Error("Password is incorrect");break;case 92:X.lastuser=ve;break;case 66:var Oe=Number(ve);switch(Oe){case 21010:Oe=1200;break;case 32768:Oe=1e4;break;case 32769:Oe=1252;break}so(X.codepage=Oe),Ee=!0;break;case 317:X.rrtabid=ve;break;case 25:X.winlocked=ve;break;case 439:r.opts.RefreshAll=ve;break;case 12:r.opts.CalcCount=ve;break;case 16:r.opts.CalcDelta=ve;break;case 17:r.opts.CalcIter=ve;break;case 13:r.opts.CalcMode=ve;break;case 14:r.opts.CalcPrecision=ve;break;case 95:r.opts.CalcSaveRecalc=ve;break;case 15:X.CalcRefMode=ve;break;case 2211:r.opts.FullCalc=ve;break;case 129:ve.fDialog&&(i["!type"]="dialog"),ve.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),ve.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:re.push(ve);break;case 430:be.push([ve]),be[be.length-1].XTI=[];break;case 35:case 547:be[be.length-1].push(ve);break;case 24:case 536:ae={Name:ve.Name,Ref:ds(ve.rgce,o,null,be,X)},ve.itab>0&&(ae.Sheet=ve.itab-1),be.names.push(ae),be[0]||(be[0]=[],be[0].XTI=[]),be[be.length-1].push(ve),ve.Name=="_xlnm._FilterDatabase"&&ve.itab>0&&ve.rgce&&ve.rgce[0]&&ve.rgce[0][0]&&ve.rgce[0][0][0]=="PtgArea3d"&&(oe[ve.itab-1]={ref:Zr(ve.rgce[0][0][1][2])});break;case 22:X.ExternCount=ve;break;case 23:be.length==0&&(be[0]=[],be[0].XTI=[]),be[be.length-1].XTI=be[be.length-1].XTI.concat(ve),be.XTI=be.XTI.concat(ve);break;case 2196:if(X.biff<8)break;ae!=null&&(ae.Comment=ve[1]);break;case 18:i["!protect"]=ve;break;case 19:ve!==0&&X.WTF&&console.error("Password verifier: "+ve);break;case 133:s[ve.pos]=ve,X.snames.push(ve.name);break;case 10:{if(--ne)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,i["!ref"]=Zr(o),e.sheetRows&&e.sheetRows<=o.e.r){var st=o.e.r;o.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Zr(o),o.e.r=st}o.e.r++,o.e.c++}Ie.length>0&&(i["!merges"]=Ie),ge.length>0&&(i["!objects"]=ge),de.length>0&&(i["!cols"]=de),we.length>0&&(i["!rows"]=we),M.Sheets.push(P)}d===""?m=i:n[d]=i,i=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(X.biff===8&&(X.biff={9:2,521:3,1033:4}[Fe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ve.BIFFVer]||8),X.biffguess=ve.BIFFVer==0,ve.BIFFVer==0&&ve.dt==4096&&(X.biff=5,Ee=!0,so(X.codepage=28591)),X.biff==8&&ve.BIFFVer==0&&ve.dt==16&&(X.biff=2),ne++)break;if(i=e.dense?[]:{},X.biff<8&&!Ee&&(Ee=!0,so(X.codepage=e.codepage||1252)),X.biff<5||ve.BIFFVer==0&&ve.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Bt={pos:t.l-He,name:d};s[Bt.pos]=Bt,X.snames.push(d)}else d=(s[Ke]||{name:""}).name;ve.dt==32&&(i["!type"]="chart"),ve.dt==64&&(i["!type"]="macro"),Ie=[],ge=[],X.arrayf=K=[],de=[],we=[],Ge=!1,P={Hidden:(s[Ke]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i[ve.r]||[])[ve.c]:i[br({c:ve.c,r:ve.r})])&&++ve.c,Q={ixfe:ve.ixfe,XF:re[ve.ixfe]||{},v:ve.val,t:"n"},q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y({c:ve.c,r:ve.r},Q,e);break;case 5:case 517:Q={ixfe:ve.ixfe,XF:re[ve.ixfe],v:ve.val,t:ve.t},q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y({c:ve.c,r:ve.r},Q,e);break;case 638:Q={ixfe:ve.ixfe,XF:re[ve.ixfe],v:ve.rknum,t:"n"},q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y({c:ve.c,r:ve.r},Q,e);break;case 189:for(var kt=ve.c;kt<=ve.C;++kt){var ft=ve.rkrec[kt-ve.c][0];Q={ixfe:ft,XF:re[ft],v:ve.rkrec[kt-ve.c][1],t:"n"},q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y({c:kt,r:ve.r},Q,e)}break;case 6:case 518:case 1030:{if(ve.val=="String"){c=ve;break}if(Q=Lg(ve.val,ve.cell.ixfe,ve.tt),Q.XF=re[Q.ixfe],e.cellFormula){var Ot=ve.formula;if(Ot&&Ot[0]&&Ot[0][0]&&Ot[0][0][0]=="PtgExp"){var jt=Ot[0][0][1][0],mt=Ot[0][0][1][1],At=br({r:jt,c:mt});V[At]?Q.f=""+ds(ve.formula,o,ve.cell,be,X):Q.F=((e.dense?(i[jt]||[])[mt]:i[At])||{}).F}else Q.f=""+ds(ve.formula,o,ve.cell,be,X)}q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y(ve.cell,Q,e),c=ve}break;case 7:case 519:if(c)c.val=ve,Q=Lg(ve,c.cell.ixfe,"s"),Q.XF=re[Q.ixfe],e.cellFormula&&(Q.f=""+ds(c.formula,o,c.cell,be,X)),q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y(c.cell,Q,e),c=null;else throw new Error("String record expects Formula");break;case 33:case 545:{K.push(ve);var er=br(ve[0].s);if(I=e.dense?(i[ve[0].s.r]||[])[ve[0].s.c]:i[er],e.cellFormula&&I){if(!c||!er||!I)break;I.f=""+ds(ve[1],o,ve[0],be,X),I.F=Zr(ve[0])}}break;case 1212:{if(!e.cellFormula)break;if(b){if(!c)break;V[br(c.cell)]=ve[0],I=e.dense?(i[c.cell.r]||[])[c.cell.c]:i[br(c.cell)],(I||{}).f=""+ds(ve[0],o,C,be,X)}}break;case 253:Q=Lg(h[ve.isst].t,ve.ixfe,"s"),h[ve.isst].h&&(Q.h=h[ve.isst].h),Q.XF=re[Q.ixfe],q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y({c:ve.c,r:ve.r},Q,e);break;case 513:e.sheetStubs&&(Q={ixfe:ve.ixfe,XF:re[ve.ixfe],t:"z"},q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y({c:ve.c,r:ve.r},Q,e));break;case 190:if(e.sheetStubs)for(var Nr=ve.c;Nr<=ve.C;++Nr){var Ue=ve.ixfe[Nr-ve.c];Q={ixfe:Ue,XF:re[Ue],t:"z"},q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y({c:Nr,r:ve.r},Q,e)}break;case 214:case 516:case 4:Q=Lg(ve.val,ve.ixfe,"s"),Q.XF=re[Q.ixfe],q>0&&(Q.z=ce[Q.ixfe>>8&63]),To(Q,e,r.opts.Date1904),Y({c:ve.c,r:ve.r},Q,e);break;case 0:case 512:ne===1&&(o=ve);break;case 252:h=ve;break;case 1054:if(X.biff==4){ce[q++]=ve[1];for(var It=0;It<q+163&&Ir[It]!=ve[1];++It);It>=163&&wc(ve[1],q+163)}else wc(ve[1],ve[0]);break;case 30:{ce[q++]=ve;for(var Lt=0;Lt<q+163&&Ir[Lt]!=ve;++Lt);Lt>=163&&wc(ve,q+163)}break;case 229:Ie=Ie.concat(ve);break;case 93:ge[ve.cmo[0]]=X.lastobj=ve;break;case 438:X.lastobj.TxO=ve;break;case 127:X.lastobj.ImData=ve;break;case 440:for(U=ve[0].s.r;U<=ve[0].e.r;++U)for(k=ve[0].s.c;k<=ve[0].e.c;++k)I=e.dense?(i[U]||[])[k]:i[br({c:k,r:U})],I&&(I.l=ve[1]);break;case 2048:for(U=ve[0].s.r;U<=ve[0].e.r;++U)for(k=ve[0].s.c;k<=ve[0].e.c;++k)I=e.dense?(i[U]||[])[k]:i[br({c:k,r:U})],I&&I.l&&(I.l.Tooltip=ve[1]);break;case 28:{if(X.biff<=5&&X.biff>=2)break;I=e.dense?(i[ve[0].r]||[])[ve[0].c]:i[br(ve[0])];var Zt=ge[ve[2]];I||(e.dense?(i[ve[0].r]||(i[ve[0].r]=[]),I=i[ve[0].r][ve[0].c]={t:"z"}):I=i[br(ve[0])]={t:"z"},o.e.r=Math.max(o.e.r,ve[0].r),o.s.r=Math.min(o.s.r,ve[0].r),o.e.c=Math.max(o.e.c,ve[0].c),o.s.c=Math.min(o.s.c,ve[0].c)),I.c||(I.c=[]),F={a:ve[1],t:Zt.TxO.t},I.c.push(F)}break;case 2173:rY(re[ve.ixfe],ve.ext);break;case 125:{if(!X.cellStyles)break;for(;ve.e>=ve.s;)de[ve.e--]={width:ve.w/256,level:ve.level||0,hidden:!!(ve.flags&1)},Ge||(Ge=!0,Uy(ve.w/256)),A0(de[ve.e+1])}break;case 520:{var cr={};ve.level!=null&&(we[ve.r]=cr,cr.level=ve.level),ve.hidden&&(we[ve.r]=cr,cr.hidden=!0),ve.hpt&&(we[ve.r]=cr,cr.hpt=ve.hpt,cr.hpx=xd(ve.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||Zf(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Fe]]=ve;break;case 161:i["!margins"]||Zf(i["!margins"]={}),i["!margins"].header=ve.header,i["!margins"].footer=ve.footer;break;case 574:ve.RTL&&(M.Views[0].RTL=!0);break;case 146:z=ve;break;case 2198:G=ve;break;case 140:te=ve;break;case 442:d?P.CodeName=ve||P.name:M.WBProps.CodeName=ve||"ThisWorkbook";break}}else tt||console.error("Missing Info for XLS Record 0x"+Fe.toString(16)),t.l+=He}return r.SheetNames=Mo(s).sort(function(hr,Ht){return Number(hr)-Number(Ht)}).map(function(hr){return s[hr].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&m["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=m)):r.Preamble=m,r.Sheets&&oe.forEach(function(hr,Ht){r.Sheets[r.SheetNames[Ht]]["!autofilter"]=hr}),r.Strings=h,r.SSF=ts(Ir),X.enc&&(r.Encryption=X.enc),G&&(r.Themes=G),r.Metadata={},te!==void 0&&(r.Metadata.Country=te),be.names.length>0&&(M.Names=be.names),r.Workbook=M,r}var F4={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function U$(t,e,r){var n=Jr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=g4(n,Zz,F4.DSI);for(var s in i)e[s]=i[s]}catch(d){if(r.WTF)throw d}var o=Jr.find(t,"/!SummaryInformation");if(o&&o.size>0)try{var c=g4(o,$z,F4.SI);for(var h in c)e[h]==null&&(e[h]=c[h])}catch(d){if(r.WTF)throw d}e.HeadingPairs&&e.TitlesOfParts&&(d8(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function Y8(t,e){e||(e={}),Qy(e),_F(),e.codepage&&xy(e.codepage);var r,n;if(t.FullPaths){if(Jr.find(t,"/encryption"))throw new Error("File is password-protected");r=Jr.find(t,"!CompObj"),n=Jr.find(t,"/Workbook")||Jr.find(t,"/Book")}else{switch(e.type){case"base64":t=io(Ea(t));break;case"binary":t=io(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Ji(t,0),n={content:t}}var i,s;if(r&&R$(r),e.bookProps&&!e.bookSheets)i={};else{var o=Wr?"buffer":"array";if(n&&n.content)i=D$(n.content,e);else if((s=Jr.find(t,"PerfectOffice_MAIN"))&&s.content)i=Yf.to_workbook(s.content,(e.type=o,e));else if((s=Jr.find(t,"NativeContent_MAIN"))&&s.content)i=Yf.to_workbook(s.content,(e.type=o,e));else throw(s=Jr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Jr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=vY(t))}var c={};return t.FullPaths&&U$(t,c,e),i.Props=i.Custprops=c,e.bookFiles&&(i.cfb=t),i}var Y1={0:{f:pZ},1:{f:vZ},2:{f:IZ},3:{f:bZ},4:{f:CZ},5:{f:SZ},6:{f:FZ},7:{f:TZ},8:{f:OZ},9:{f:MZ},10:{f:DZ},11:{f:UZ},12:{f:yZ},13:{f:NZ},14:{f:_Z},15:{f:EZ},16:{f:K8},17:{f:kZ},18:{f:BZ},19:{f:Iy},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:c$},40:{},42:{},43:{f:DX},44:{f:kX},45:{f:UX},46:{f:OX},47:{f:MX},48:{},49:{f:Lz},50:{},51:{f:iY},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:_8},62:{f:RZ},63:{f:AY},64:{f:zZ},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:vs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:KZ},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:wZ},148:{f:mZ,p:16},151:{f:QZ},152:{},153:{f:l$},154:{},155:{},156:{f:o$},157:{},158:{},159:{T:1,f:$q},160:{T:-1},161:{T:1,f:Qc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:LZ},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:nY},336:{T:-1},337:{f:sY,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Ow},357:{},358:{},359:{},360:{T:1},361:{},362:{f:b8},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:HZ},427:{f:jZ},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:GZ},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:xZ},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:PZ},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Ow},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:mY},633:{T:1},634:{T:-1},635:{T:1,f:pY},636:{T:-1},637:{f:Qz},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ZZ},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:WZ},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},jw={6:{f:N2},10:{f:oA},12:{f:yi},13:{f:yi},14:{f:ci},15:{f:ci},16:{f:gs},17:{f:ci},18:{f:ci},19:{f:yi},20:{f:w4},21:{f:w4},23:{f:b8},24:{f:y4},25:{f:ci},26:{},27:{},28:{f:hq},29:{},34:{f:ci},35:{f:v4},38:{f:gs},39:{f:gs},40:{f:gs},41:{f:gs},42:{f:ci},43:{f:ci},47:{f:xX},49:{f:XW},51:{f:yi},60:{},61:{f:zW},64:{f:ci},65:{f:qW},66:{f:yi},77:{},80:{},81:{},82:{},85:{f:yi},89:{},90:{},91:{},92:{f:LW},93:{f:pq},94:{},95:{f:ci},96:{},97:{},99:{f:ci},125:{f:_8},128:{f:sq},129:{f:PW},130:{f:yi},131:{f:ci},132:{f:ci},133:{f:QW},134:{},140:{f:Cq},141:{f:yi},144:{},146:{f:bq},151:{},152:{},153:{},154:{},155:{},156:{f:yi},157:{},158:{},160:{f:Iq},161:{f:Tq},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:tq},190:{f:rq},193:{f:oA},197:{},198:{},199:{},200:{},201:{},202:{f:ci},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:yi},220:{},221:{f:ci},222:{},224:{f:iq},225:{f:OW},226:{f:oA},227:{},229:{f:gq},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:HW},253:{f:YW},255:{f:jW},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:x8},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ci},353:{f:oA},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:oq},431:{f:ci},432:{},433:{},434:{},437:{},438:{f:wq},439:{f:ci},440:{f:vq},441:{},442:{f:Hd},443:{},444:{f:yi},445:{},446:{},448:{f:oA},449:{f:KW,r:2},450:{f:oA},512:{f:m4},513:{f:Sq},515:{f:aq},516:{f:JW},517:{f:x4},519:{f:Nq},520:{f:VW},523:{},545:{f:C4},549:{f:p4},566:{},574:{f:WW},638:{f:eq},659:{},1048:{},1054:{f:ZW},1084:{},1212:{f:uq},2048:{f:yq},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ug},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:oA},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:_q,r:12},2173:{f:tY,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ci,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:cq,r:12},2197:{},2198:{f:XX,r:12},2199:{},2200:{},2201:{},2202:{f:fq,r:12},2203:{f:oA},2204:{},2205:{},2206:{},2207:{},2211:{f:GW},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:yi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Bq},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Eq},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:m4},1:{},2:{f:Dq},3:{f:kq},4:{f:Fq},5:{f:x4},7:{f:Uq},8:{},9:{f:Ug},11:{},22:{f:yi},30:{f:$W},31:{},32:{},33:{f:C4},36:{},37:{f:p4},50:{f:Mq},62:{},52:{},67:{},68:{f:yi},69:{},86:{},126:{},127:{f:Rq},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Oq},223:{},234:{},354:{},421:{},518:{f:N2},521:{f:Ug},536:{f:y4},547:{f:v4},561:{},579:{},1030:{f:N2},1033:{f:Ug},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function ro(t,e,r,n){var i=e;if(!isNaN(i)){var s=(r||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&s8(r)&&t.push(r)}}function k4(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var i=t.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),o=i.index,c=s&&s.index||t.length,h=az(t.slice(o,c),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,m=0,C=0,b=0,I={s:{r:1e7,c:1e7},e:{r:0,c:0}},F=[];for(o=0;o<h.length;++o){var k=h[o].trim(),U=k.slice(0,3).toLowerCase();if(U=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}m=0;continue}if(!(U!="<td"&&U!="<th")){var V=k.split(/<\/t[dh]>/i);for(c=0;c<V.length;++c){var K=V[c].trim();if(K.match(/<t[dh]/i)){for(var Q=K,te=0;Q.charAt(0)=="<"&&(te=Q.indexOf(">"))>-1;)Q=Q.slice(te+1);for(var re=0;re<F.length;++re){var z=F[re];z.s.c==m&&z.s.r<d&&d<=z.e.r&&(m=z.e.c+1,re=-1)}var M=fr(K.slice(0,K.indexOf(">")));b=M.colspan?+M.colspan:1,((C=+M.rowspan)>1||b>1)&&F.push({s:{r:d,c:m},e:{r:d+(C||1)-1,c:m+b-1}});var P=M.t||M["data-t"]||"";if(!Q.length){m+=b;continue}if(Q=zF(Q),I.s.r>d&&(I.s.r=d),I.e.r<d&&(I.e.r=d),I.s.c>m&&(I.s.c=m),I.e.c<m&&(I.e.c=m),!Q.length){m+=b;continue}var O={t:"s",v:Q};r.raw||!Q.trim().length||P=="s"||(Q==="TRUE"?O={t:"b",v:!0}:Q==="FALSE"?O={t:"b",v:!1}:isNaN(oo(Q))?isNaN(l0(Q).getDate())||(O={t:"d",v:Pi(Q)},r.cellDates||(O={t:"n",v:ks(O.v)}),O.z=r.dateNF||Ir[14]):O={t:"n",v:oo(Q)}),r.dense?(n[d]||(n[d]=[]),n[d][m]=O):n[br({r:d,c:m})]=O,m+=b}}}}return n["!ref"]=Zr(I),F.length&&(n["!merges"]=F),n}function M$(t,e,r,n){for(var i=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var c=0,h=0,d=0;d<i.length;++d)if(!(i[d].s.r>r||i[d].s.c>o)&&!(i[d].e.r<r||i[d].e.c<o)){if(i[d].s.r<r||i[d].s.c<o){c=-1;break}c=i[d].e.r-i[d].s.r+1,h=i[d].e.c-i[d].s.c+1;break}if(!(c<0)){var m=br({r,c:o}),C=n.dense?(t[r]||[])[o]:t[m],b=C&&C.v!=null&&(C.h||by(C.w||(Sl(C),C.w)||""))||"",I={};c>1&&(I.rowspan=c),h>1&&(I.colspan=h),n.editable?b='<span contenteditable="true">'+b+"</span>":C&&(I["data-t"]=C&&C.t||"z",C.v!=null&&(I["data-v"]=C.v),C.z!=null&&(I["data-z"]=C.z),C.l&&(C.l.Target||"#").charAt(0)!="#"&&(b='<a href="'+C.l.Target+'">'+b+"</a>")),I.id=(n.id||"sjs")+"-"+m,s.push(Cz("td",b,I))}}var F="<tr>";return F+s.join("")+"</tr>"}var O$='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',L$="</body></html>";function P$(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return OA(k4(r[0],e),e);var n=jy();return r.forEach(function(i,s){Vy(n,k4(i,e),"Sheet"+(s+1))}),n}function Q$(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function H$(t,e){var r=e||{},n=r.header!=null?r.header:O$,i=r.footer!=null?r.footer:L$,s=[n],o=m0(t["!ref"]);r.dense=Array.isArray(t),s.push(Q$(t,o,r));for(var c=o.s.r;c<=o.e.r;++c)s.push(M$(t,o,c,r));return s.push("</table>"+i),s.join("")}function J8(t,e,r){var n=r||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var o=typeof n.origin=="string"?Rs(n.origin):n.origin;i=o.r,s=o.c}var c=e.getElementsByTagName("tr"),h=Math.min(n.sheetRows||1e7,c.length),d={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var m=m0(t["!ref"]);d.s.r=Math.min(d.s.r,m.s.r),d.s.c=Math.min(d.s.c,m.s.c),d.e.r=Math.max(d.e.r,m.e.r),d.e.c=Math.max(d.e.c,m.e.c),i==-1&&(d.e.r=i=m.e.r+1)}var C=[],b=0,I=t["!rows"]||(t["!rows"]=[]),F=0,k=0,U=0,V=0,K=0,Q=0;for(t["!cols"]||(t["!cols"]=[]);F<c.length&&k<h;++F){var te=c[F];if(D4(te)){if(n.display)continue;I[k]={hidden:!0}}var re=te.children;for(U=V=0;U<re.length;++U){var z=re[U];if(!(n.display&&D4(z))){var M=z.hasAttribute("data-v")?z.getAttribute("data-v"):z.hasAttribute("v")?z.getAttribute("v"):zF(z.innerHTML),P=z.getAttribute("data-z")||z.getAttribute("z");for(b=0;b<C.length;++b){var O=C[b];O.s.c==V+s&&O.s.r<k+i&&k+i<=O.e.r&&(V=O.e.c+1-s,b=-1)}Q=+z.getAttribute("colspan")||1,((K=+z.getAttribute("rowspan")||1)>1||Q>1)&&C.push({s:{r:k+i,c:V+s},e:{r:k+i+(K||1)-1,c:V+s+(Q||1)-1}});var ee={t:"s",v:M},Y=z.getAttribute("data-t")||z.getAttribute("t")||"";M!=null&&(M.length==0?ee.t=Y||"z":n.raw||M.trim().length==0||Y=="s"||(M==="TRUE"?ee={t:"b",v:!0}:M==="FALSE"?ee={t:"b",v:!1}:isNaN(oo(M))?isNaN(l0(M).getDate())||(ee={t:"d",v:Pi(M)},n.cellDates||(ee={t:"n",v:ks(ee.v)}),ee.z=n.dateNF||Ir[14]):ee={t:"n",v:oo(M)})),ee.z===void 0&&P!=null&&(ee.z=P);var X="",G=z.getElementsByTagName("A");if(G&&G.length)for(var Ie=0;Ie<G.length&&!(G[Ie].hasAttribute("href")&&(X=G[Ie].getAttribute("href"),X.charAt(0)!="#"));++Ie);X&&X.charAt(0)!="#"&&(ee.l={Target:X}),n.dense?(t[k+i]||(t[k+i]=[]),t[k+i][V+s]=ee):t[br({c:V+s,r:k+i})]=ee,d.e.c<V+s&&(d.e.c=V+s),V+=Q}}++k}return C.length&&(t["!merges"]=(t["!merges"]||[]).concat(C)),d.e.r=Math.max(d.e.r,k-1+i),t["!ref"]=Zr(d),k>=h&&(t["!fullref"]=Zr((d.e.r=c.length-F+k-1+i,d))),t}function Z8(t,e){var r=e||{},n=r.dense?[]:{};return J8(n,t,e)}function j$(t,e){return OA(Z8(t,e),e)}function D4(t){var e="",r=V$(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function V$(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function G$(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=rn(e.replace(/<[^>]*>/g,""));return[r]}var U4={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function $8(t,e){var r=e||{},n=_y(t),i=[],s,o,c={name:""},h="",d=0,m,C,b={},I=[],F=r.dense?[]:{},k,U,V={value:""},K="",Q=0,te=[],re=-1,z=-1,M={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,O={},ee=[],Y={},X=0,G=0,Ie=[],ge=1,de=1,we=[],Ge={Names:[]},be={},De=["",""],ne=[],q={},ce="",oe=0,ae=!1,Ee=!1,Ke=0;for(gd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");k=gd.exec(n);)switch(k[3]=k[3].replace(/_.*$/,"")){case"table":case"":k[1]==="/"?(M.e.c>=M.s.c&&M.e.r>=M.s.r?F["!ref"]=Zr(M):F["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=M.e.r&&(F["!fullref"]=F["!ref"],M.e.r=r.sheetRows-1,F["!ref"]=Zr(M)),ee.length&&(F["!merges"]=ee),Ie.length&&(F["!rows"]=Ie),m.name=m.||m.name,typeof JSON<"u"&&JSON.stringify(m),I.push(m.name),b[m.name]=F,Ee=!1):k[0].charAt(k[0].length-2)!=="/"&&(m=fr(k[0],!1),re=z=-1,M.s.r=M.s.c=1e7,M.e.r=M.e.c=0,F=r.dense?[]:{},ee=[],Ie=[],Ee=!0);break;case"table-row-group":k[1]==="/"?--P:++P;break;case"table-row":case"":if(k[1]==="/"){re+=ge,ge=1;break}if(C=fr(k[0],!1),C.?re=C.-1:re==-1&&(re=0),ge=+C["number-rows-repeated"]||1,ge<10)for(Ke=0;Ke<ge;++Ke)P>0&&(Ie[re+Ke]={level:P});z=-1;break;case"covered-table-cell":k[1]!=="/"&&++z,r.sheetStubs&&(r.dense?(F[re]||(F[re]=[]),F[re][z]={t:"z"}):F[br({r:re,c:z})]={t:"z"}),K="",te=[];break;case"table-cell":case"":if(k[0].charAt(k[0].length-2)==="/")++z,V=fr(k[0],!1),de=parseInt(V["number-columns-repeated"]||"1",10),U={t:"z",v:null},V.formula&&r.cellFormula!=!1&&(U.f=I4(rn(V.formula))),(V.||V["value-type"])=="string"&&(U.t="s",U.v=rn(V["string-value"]||""),r.dense?(F[re]||(F[re]=[]),F[re][z]=U):F[br({r:re,c:z})]=U),z+=de-1;else if(k[1]!=="/"){++z,K="",Q=0,te=[],de=1;var Fe=ge?re+ge-1:re;if(z>M.e.c&&(M.e.c=z),z<M.s.c&&(M.s.c=z),re<M.s.r&&(M.s.r=re),Fe>M.e.r&&(M.e.r=Fe),V=fr(k[0],!1),ne=[],q={},U={t:V.||V["value-type"],v:null},r.cellFormula)if(V.formula&&(V.formula=rn(V.formula)),V["number-matrix-columns-spanned"]&&V["number-matrix-rows-spanned"]&&(X=parseInt(V["number-matrix-rows-spanned"],10)||0,G=parseInt(V["number-matrix-columns-spanned"],10)||0,Y={s:{r:re,c:z},e:{r:re+X-1,c:z+G-1}},U.F=Zr(Y),we.push([Y,U.F])),V.formula)U.f=I4(V.formula);else for(Ke=0;Ke<we.length;++Ke)re>=we[Ke][0].s.r&&re<=we[Ke][0].e.r&&z>=we[Ke][0].s.c&&z<=we[Ke][0].e.c&&(U.F=we[Ke][1]);switch((V["number-columns-spanned"]||V["number-rows-spanned"])&&(X=parseInt(V["number-rows-spanned"],10)||0,G=parseInt(V["number-columns-spanned"],10)||0,Y={s:{r:re,c:z},e:{r:re+X-1,c:z+G-1}},ee.push(Y)),V["number-columns-repeated"]&&(de=parseInt(V["number-columns-repeated"],10)),U.t){case"boolean":U.t="b",U.v=jn(V["boolean-value"]);break;case"float":U.t="n",U.v=parseFloat(V.value);break;case"percentage":U.t="n",U.v=parseFloat(V.value);break;case"currency":U.t="n",U.v=parseFloat(V.value);break;case"date":U.t="d",U.v=Pi(V["date-value"]),r.cellDates||(U.t="n",U.v=ks(U.v)),U.z="m/d/yy";break;case"time":U.t="n",U.v=nz(V["time-value"])/86400,r.cellDates&&(U.t="d",U.v=Hp(U.v)),U.z="HH:MM:SS";break;case"number":U.t="n",U.v=parseFloat(V.);break;default:if(U.t==="string"||U.t==="text"||!U.t)U.t="s",V["string-value"]!=null&&(K=rn(V["string-value"]),te=[]);else throw new Error("Unsupported value type "+U.t)}}else{if(ae=!1,U.t==="s"&&(U.v=K||"",te.length&&(U.R=te),ae=Q==0),be.Target&&(U.l=be),ne.length>0&&(U.c=ne,ne=[]),K&&r.cellText!==!1&&(U.w=K),ae&&(U.t="z",delete U.v),(!ae||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=re))for(var He=0;He<ge;++He){if(de=parseInt(V["number-columns-repeated"]||"1",10),r.dense)for(F[re+He]||(F[re+He]=[]),F[re+He][z]=He==0?U:ts(U);--de>0;)F[re+He][z+de]=ts(U);else for(F[br({r:re+He,c:z})]=U;--de>0;)F[br({r:re+He,c:z+de})]=ts(U);M.e.c<=z&&(M.e.c=z)}de=parseInt(V["number-columns-repeated"]||"1",10),z+=de-1,de=0,U={},K="",te=[]}be={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(k[1]==="/"){if((s=i.pop())[0]!==k[3])throw"Bad state: "+s}else k[0].charAt(k[0].length-2)!=="/"&&i.push([k[3],!0]);break;case"annotation":if(k[1]==="/"){if((s=i.pop())[0]!==k[3])throw"Bad state: "+s;q.t=K,te.length&&(q.R=te),q.a=ce,ne.push(q)}else k[0].charAt(k[0].length-2)!=="/"&&i.push([k[3],!1]);ce="",oe=0,K="",Q=0,te=[];break;case"creator":k[1]==="/"?ce=n.slice(oe,k.index):oe=k.index+k[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(k[1]==="/"){if((s=i.pop())[0]!==k[3])throw"Bad state: "+s}else k[0].charAt(k[0].length-2)!=="/"&&i.push([k[3],!1]);K="",Q=0,te=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(k[1]==="/"){if(O[c.name]=h,(s=i.pop())[0]!==k[3])throw"Bad state: "+s}else k[0].charAt(k[0].length-2)!=="/"&&(h="",c=fr(k[0],!1),i.push([k[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":o=fr(k[0],!1),h+=U4[k[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":o=fr(k[0],!1),h+=U4[k[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(k[0].slice(-2)==="/>")break;if(k[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":h+=n.slice(d,k.index);break}else d=k.index+k[0].length;break;case"named-range":o=fr(k[0],!1),De=R2(o["cell-range-address"]);var tt={Name:o.name,Ref:De[0]+"!"+De[1]};Ee&&(tt.Sheet=I.length),Ge.Names.push(tt);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(k[1]==="/"&&(!V||!V["string-value"])){var Tt=G$(n.slice(Q,k.index));K=(K.length>0?K+`
`:"")+Tt[0]}else fr(k[0],!1),Q=k.index+k[0].length;break;case"s":break;case"database-range":if(k[1]==="/")break;try{De=R2(fr(k[0])["target-range-address"]),b[De[0]]["!autofilter"]={ref:De[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(k[1]!=="/"){if(be=fr(k[0],!1),!be.href)break;be.Target=rn(be.href),delete be.href,be.Target.charAt(0)=="#"&&be.Target.indexOf(".")>-1?(De=R2(be.Target.slice(1)),be.Target="#"+De[0]+"!"+De[1]):be.Target.match(/^\.\.[\\\/]/)&&(be.Target=be.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(k[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(k)}}var ve={Sheets:b,SheetNames:I,Workbook:Ge};return r.bookSheets&&delete ve.Sheets,ve}function M4(t,e){e=e||{},Qa(t,"META-INF/manifest.xml")&&aW(vi(t,"META-INF/manifest.xml"),e);var r=wa(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=$8(Fn(r),e);return Qa(t,"meta.xml")&&(n.Props=f8(vi(t,"meta.xml"))),n}function O4(t,e){return $8(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ly(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Vw(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Fn(Lc(t))}function Gw(t){var e=t.reduce(function(i,s){return i+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function L4(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function K$(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,i=e+13;i>=e;--i)n=n*256+t[i];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function wd(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Ri(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function ps(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=wd(t,r),s=i&7;i=Math.floor(i/8);var o=0,c;if(i==0)break;switch(s){case 0:{for(var h=r[0];t[r[0]++]>=128;);c=t.slice(h,r[0])}break;case 5:o=4,c=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,c=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=wd(t,r),c=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var d={data:c,type:s};e[i]==null?e[i]=[d]:e[i].push(d)}return e}function Py(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function z$(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=wd(t,n),s=ps(t.slice(n[0],n[0]+i));n[0]+=i;var o={id:Ri(s[1][0].data),messages:[]};s[2].forEach(function(c){var h=ps(c.data),d=Ri(h[3][0].data);o.messages.push({meta:h,data:t.slice(n[0],n[0]+d)}),n[0]+=d}),(e=s[3])!=null&&e[0]&&(o.merge=Ri(s[3][0].data)>>>0>0),r.push(o)}return r}function W$(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=wd(e,r),i=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var c=o-59;o=e[r[0]],c>1&&(o|=e[r[0]+1]<<8),c>2&&(o|=e[r[0]+2]<<16),c>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=c}i.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var h=0,d=0;if(s==1?(d=(e[r[0]]>>2&7)+4,h=(e[r[0]++]&224)<<3,h|=e[r[0]++]):(d=(e[r[0]++]>>2)+1,s==2?(h=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(h=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[Gw(i)],h==0)throw new Error("Invalid offset 0");if(h>i[0].length)throw new Error("Invalid offset beyond length");if(d>=h)for(i.push(i[0].slice(-h)),d-=h;d>=i[i.length-1].length;)i.push(i[i.length-1]),d-=i[i.length-1].length;i.push(i[0].slice(-h,-h+d))}}var m=Gw(i);if(m.length!=n)throw new Error("Unexpected length: ".concat(m.length," != ").concat(n));return m}function q$(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(W$(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Gw(e)}function X$(t,e,r,n){var i=Ly(t),s=i.getUint32(4,!0),o=(n>1?12:8)+L4(s&(n>1?3470:398))*4,c=-1,h=-1,d=NaN,m=new Date(2001,0,1);s&512&&(c=i.getUint32(o,!0),o+=4),o+=L4(s&(n>1?12288:4096))*4,s&16&&(h=i.getUint32(o,!0),o+=4),s&32&&(d=i.getFloat64(o,!0),o+=8),s&64&&(m.setTime(m.getTime()+i.getFloat64(o,!0)*1e3),o+=8);var C;switch(t[2]){case 0:break;case 2:C={t:"n",v:d};break;case 3:C={t:"s",v:e[h]};break;case 5:C={t:"d",v:m};break;case 6:C={t:"b",v:d>0};break;case 7:C={t:"n",v:d/86400};break;case 8:C={t:"e",v:0};break;case 9:if(c>-1)C={t:"s",v:r[c]};else if(h>-1)C={t:"s",v:e[h]};else if(!isNaN(d))C={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return C}function Y$(t,e,r){var n=Ly(t),i=n.getUint32(8,!0),s=12,o=-1,c=-1,h=NaN,d=NaN,m=new Date(2001,0,1);i&1&&(h=K$(t,s),s+=16),i&2&&(d=n.getFloat64(s,!0),s+=8),i&4&&(m.setTime(m.getTime()+n.getFloat64(s,!0)*1e3),s+=8),i&8&&(c=n.getUint32(s,!0),s+=4),i&16&&(o=n.getUint32(s,!0),s+=4);var C;switch(t[1]){case 0:break;case 2:C={t:"n",v:h};break;case 3:C={t:"s",v:e[c]};break;case 5:C={t:"d",v:m};break;case 6:C={t:"b",v:d>0};break;case 7:C={t:"n",v:d/86400};break;case 8:C={t:"e",v:0};break;case 9:if(o>-1)C={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)));break;case 10:C={t:"n",v:h};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)))}return C}function J$(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return X$(t,e,r,t[0]);case 5:return Y$(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function SA(t){var e=ps(t);return wd(e[1][0].data)}function P4(t,e){var r=ps(e.data),n=Ri(r[1][0].data),i=r[3],s=[];return(i||[]).forEach(function(o){var c=ps(o.data),h=Ri(c[1][0].data)>>>0;switch(n){case 1:s[h]=Vw(c[3][0].data);break;case 8:{var d=t[SA(c[9][0].data)][0],m=ps(d.data),C=t[SA(m[1][0].data)][0],b=Ri(C.meta[1][0].data);if(b!=2001)throw new Error("2000 unexpected reference to ".concat(b));var I=ps(C.data);s[h]=I[3].map(function(F){return Vw(F.data)}).join("")}break}}),s}function Z$(t,e){var r,n,i,s,o,c,h,d,m,C,b,I,F,k,U=ps(t),V=Ri(U[1][0].data)>>>0,K=Ri(U[2][0].data)>>>0,Q=((n=(r=U[8])==null?void 0:r[0])==null?void 0:n.data)&&Ri(U[8][0].data)>0||!1,te,re;if((s=(i=U[7])==null?void 0:i[0])!=null&&s.data&&e!=0)te=(c=(o=U[7])==null?void 0:o[0])==null?void 0:c.data,re=(d=(h=U[6])==null?void 0:h[0])==null?void 0:d.data;else if((C=(m=U[4])==null?void 0:m[0])!=null&&C.data&&e!=1)te=(I=(b=U[4])==null?void 0:b[0])==null?void 0:I.data,re=(k=(F=U[3])==null?void 0:F[0])==null?void 0:k.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var z=Q?4:1,M=Ly(te),P=[],O=0;O<te.length/2;++O){var ee=M.getUint16(O*2,!0);ee<65535&&P.push([O,ee])}if(P.length!=K)throw"Expected ".concat(K," cells, found ").concat(P.length);var Y=[];for(O=0;O<P.length-1;++O)Y[P[O][0]]=re.subarray(P[O][1]*z,P[O+1][1]*z);return P.length>=1&&(Y[P[P.length-1][0]]=re.subarray(P[P.length-1][1]*z)),{R:V,cells:Y}}function $$(t,e){var r,n=ps(e.data),i=(r=n==null?void 0:n[7])!=null&&r[0]?Ri(n[7][0].data)>>>0>0?1:0:-1,s=Py(n[5],function(o){return Z$(o,i)});return{nrows:Ri(n[4][0].data)>>>0,data:s.reduce(function(o,c){return o[c.R]||(o[c.R]=[]),c.cells.forEach(function(h,d){if(o[c.R][d])throw new Error("Duplicate cell r=".concat(c.R," c=").concat(d));o[c.R][d]=h}),o},[])}}function eee(t,e,r){var n,i=ps(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ri(i[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(s.e.c=(Ri(i[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=Zr(s);var o=ps(i[4][0].data),c=P4(t,t[SA(o[4][0].data)][0]),h=(n=o[17])!=null&&n[0]?P4(t,t[SA(o[17][0].data)][0]):[],d=ps(o[3][0].data),m=0;d[1].forEach(function(C){var b=ps(C.data),I=t[SA(b[2][0].data)][0],F=Ri(I.meta[1][0].data);if(F!=6002)throw new Error("6001 unexpected reference to ".concat(F));var k=$$(t,I);k.data.forEach(function(U,V){U.forEach(function(K,Q){var te=br({r:m+V,c:Q}),re=J$(K,c,h);re&&(r[te]=re)})}),m+=k.nrows})}function tee(t,e){var r=ps(e.data),n={"!ref":"A1"},i=t[SA(r[2][0].data)],s=Ri(i[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return eee(t,i[0],n),n}function ree(t,e){var r,n=ps(e.data),i={name:(r=n[1])!=null&&r[0]?Vw(n[1][0].data):"",sheets:[]},s=Py(n[2],SA);return s.forEach(function(o){t[o].forEach(function(c){var h=Ri(c.meta[1][0].data);h==6e3&&i.sheets.push(tee(t,c))})}),i}function nee(t,e){var r=jy(),n=ps(e.data),i=Py(n[1],SA);if(i.forEach(function(s){t[s].forEach(function(o){var c=Ri(o.meta[1][0].data);if(c==2){var h=ree(t,o);h.sheets.forEach(function(d,m){Vy(r,d,m==0?h.name:h.name+"_"+m,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function k2(t){var e,r,n,i,s={},o=[];if(t.FullPaths.forEach(function(h){if(h.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(h){if(h.name.match(/\.iwa$/)){var d;try{d=q$(h.content)}catch(C){return console.log("?? "+h.content.length+" "+(C.message||C))}var m;try{m=z$(d)}catch(C){return console.log("## "+(C.message||C))}m.forEach(function(C){s[C.id]=C.messages,o.push(C.id)})}}),!o.length)throw new Error("File has no messages");var c=((i=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&Ri(s[1][0].meta[1][0].data)==1&&s[1][0];if(c||o.forEach(function(h){s[h].forEach(function(d){var m=Ri(d.meta[1][0].data)>>>0;if(m==1)if(!c)c=d;else throw new Error("Document has multiple roots")})}),!c)throw new Error("Cannot find Document root");return nee(s,c)}function iee(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function Qy(t){iee([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function see(t){return Pu.WS.indexOf(t)>-1?"sheet":t==Pu.CS?"chart":t==Pu.DS?"dialog":t==Pu.MS?"macro":t&&t.length?t:"sheet"}function aee(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,see(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function oee(t,e,r,n,i,s,o,c,h,d,m,C){try{s[n]=qf(wa(t,r,!0),e);var b=vi(t,e),I;switch(c){case"sheet":I=d$(b,e,i,h,s[n],d,m,C);break;case"chart":if(I=h$(b,e,i,h,s[n],d,m,C),!I||!I["!drawel"])break;var F=Nf(I["!drawel"].Target,e),k=Lw(F),U=fY(wa(t,F,!0),qf(wa(t,k,!0),F)),V=Nf(U,F),K=Lw(V);I=YZ(wa(t,V,!0),V,h,qf(wa(t,K,!0),V),d,I);break;case"macro":I=g$(b,e,i,h,s[n],d,m,C);break;case"dialog":I=p$(b,e,i,h,s[n],d,m,C);break;default:throw new Error("Unrecognized sheet type "+c)}o[n]=I;var Q=[];s&&s[n]&&Mo(s[n]).forEach(function(te){var re="";if(s[n][te].Type==Pu.CMNT){re=Nf(s[n][te].Target,e);var z=v$(vi(t,re,!0),re,h);if(!z||!z.length)return;b4(I,z,!1)}s[n][te].Type==Pu.TCMNT&&(re=Nf(s[n][te].Target,e),Q=Q.concat(hY(vi(t,re,!0),h)))}),Q&&Q.length&&b4(I,Q,!0,h.people||[])}catch(te){if(h.WTF)throw te}}function Ma(t){return t.charAt(0)=="/"?t.slice(1):t}function lee(t,e){if(OF(),e=e||{},Qy(e),Qa(t,"META-INF/manifest.xml")||Qa(t,"objectdata.xml"))return M4(t,e);if(Qa(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof k2<"u"){if(t.FileIndex)return k2(t);var r=Jr.utils.cfb_new();return JB(t).forEach(function(Ie){Az(r,Ie,lz(t,Ie))}),k2(r)}throw new Error("Unsupported NUMBERS file")}if(!Qa(t,"[Content_Types].xml"))throw Qa(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Qa(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=JB(t),i=iW(wa(t,"[Content_Types].xml")),s=!1,o,c;if(i.workbooks.length===0&&(c="xl/workbook.xml",vi(t,c,!0)&&i.workbooks.push(c)),i.workbooks.length===0){if(c="xl/workbook.bin",!vi(t,c,!0))throw new Error("Could not find workbook");i.workbooks.push(c),s=!0}i.workbooks[0].slice(-3)=="bin"&&(s=!0);var h={},d={};if(!e.bookSheets&&!e.bookProps){if(Jf=[],i.sst)try{Jf=w$(vi(t,Ma(i.sst)),i.sst,e)}catch(Ie){if(e.WTF)throw Ie}e.cellStyles&&i.themes.length&&(h=x$(wa(t,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],e)),i.style&&(d=m$(vi(t,Ma(i.style)),i.style,h,e))}i.links.map(function(Ie){try{var ge=qf(wa(t,Lw(Ma(Ie))),Ie);return C$(vi(t,Ma(Ie)),ge,Ie,e)}catch{}});var m=f$(vi(t,Ma(i.workbooks[0])),i.workbooks[0],e),C={},b="";i.coreprops.length&&(b=vi(t,Ma(i.coreprops[0]),!0),b&&(C=f8(b)),i.extprops.length!==0&&(b=vi(t,Ma(i.extprops[0]),!0),b&&AW(b,C,e)));var I={};(!e.bookSheets||e.bookProps)&&i.custprops.length!==0&&(b=wa(t,Ma(i.custprops[0]),!0),b&&(I=uW(b,e)));var F={};if((e.bookSheets||e.bookProps)&&(m.Sheets?o=m.Sheets.map(function(ge){return ge.name}):C.Worksheets&&C.SheetNames.length>0&&(o=C.SheetNames),e.bookProps&&(F.Props=C,F.Custprops=I),e.bookSheets&&typeof o<"u"&&(F.SheetNames=o),e.bookSheets?F.SheetNames:e.bookProps))return F;o={};var k={};e.bookDeps&&i.calcchain&&(k=y$(vi(t,Ma(i.calcchain)),i.calcchain));var U=0,V={},K,Q;{var te=m.Sheets;C.Worksheets=te.length,C.SheetNames=[];for(var re=0;re!=te.length;++re)C.SheetNames[re]=te[re].name}var z=s?"bin":"xml",M=i.workbooks[0].lastIndexOf("/"),P=(i.workbooks[0].slice(0,M+1)+"_rels/"+i.workbooks[0].slice(M+1)+".rels").replace(/^\//,"");Qa(t,P)||(P="xl/_rels/workbook."+z+".rels");var O=qf(wa(t,P,!0),P.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(e.xlmeta=E$(vi(t,Ma(i.metadata[0])),i.metadata[0],e)),(i.people||[]).length>=1&&(e.people=gY(vi(t,Ma(i.people[0])),e)),O&&(O=aee(O,m.Sheets));var ee=vi(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(U=0;U!=C.Worksheets;++U){var Y="sheet";if(O&&O[U]?(K="xl/"+O[U][1].replace(/[\/]?xl\//,""),Qa(t,K)||(K=O[U][1]),Qa(t,K)||(K=P.replace(/_rels\/.*$/,"")+O[U][1]),Y=O[U][2]):(K="xl/worksheets/sheet"+(U+1-ee)+"."+z,K=K.replace(/sheet0\./,"sheet.")),Q=K.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(U!=e.sheets)continue e;break;case"string":if(C.SheetNames[U].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var X=!1,G=0;G!=e.sheets.length;++G)typeof e.sheets[G]=="number"&&e.sheets[G]==U&&(X=1),typeof e.sheets[G]=="string"&&e.sheets[G].toLowerCase()==C.SheetNames[U].toLowerCase()&&(X=1);if(!X)continue e}}oee(t,K,Q,C.SheetNames[U],U,V,o,Y,e,m,h,d)}return F={Directory:i,Workbook:m,Props:C,Custprops:I,Deps:k,Sheets:o,SheetNames:C.SheetNames,Strings:Jf,Styles:d,Themes:h,SSF:ts(Ir)},e&&e.bookFiles&&(t.files?(F.keys=n,F.files=t.files):(F.keys=[],F.files={},t.FullPaths.forEach(function(Ie,ge){Ie=Ie.replace(/^Root Entry[\/]/,""),F.keys.push(Ie),F.files[Ie]=t.FileIndex[ge]}))),e&&e.bookVBA&&(i.vba.length>0?F.vbaraw=vi(t,Ma(i.vba[0]),!0):i.defaults&&i.defaults.bin===wY&&(F.vbaraw=vi(t,"xl/vbaProject.bin",!0))),F}function Aee(t,e){var r=e||{},n="Workbook",i=Jr.find(t,n);try{if(n="/!DataSpaces/Version",i=Jr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(tX(i.content),n="/!DataSpaces/DataSpaceMap",i=Jr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=nX(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=Jr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=iX(i.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=Jr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);aX(i.content)}catch{}if(n="/EncryptionInfo",i=Jr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var c=oX(i.content);if(n="/EncryptedPackage",i=Jr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(c[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(c[1],i.content,r.password||"",r);if(c[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(c[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function Hy(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Ea(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function cee(t,e){return Jr.find(t,"EncryptedPackage")?Aee(t,e):Y8(t,e)}function uee(t,e){var r,n=t,i=e||{};return i.type||(i.type=Wr&&Buffer.isBuffer(t)?"buffer":"base64"),r=VF(n,i),lee(r,i)}function ek(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Hw(t.slice(r),e);default:break e}return pd.to_workbook(t,e)}function fee(t,e){var r="",n=Hy(t,e);switch(e.type){case"base64":r=Ea(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Ic(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Fn(r)),e.type="binary",ek(r,e)}function dee(t,e){var r=t;return e.type=="base64"&&(r=Ea(r)),r=fd.utils.decode(1200,r.slice(2),"str"),e.type="binary",ek(r,e)}function hee(t){return t.match(/[^\x00-\x7F]/)?Rf(t):t}function D2(t,e,r,n){return n?(r.type="string",pd.to_workbook(t,r)):pd.to_workbook(e,r)}function Kw(t,e){_F();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Kw(new Uint8Array(t),(r=ts(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,i=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Yu={},r.dateNF&&(Yu.dateNF=r.dateNF),r.type||(r.type=Wr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Wr?"buffer":"binary",n=tz(t),typeof Uint8Array<"u"&&!Wr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=hee(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),c=new Uint8Array(o);if(c.foo="bar",!c.foo)return r=ts(r),r.type="array",Kw(wy(n),r)}switch((i=Hy(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return cee(Jr.read(n,r),r);break;case 9:if(i[1]<=8)return Y8(n,r);break;case 60:return Hw(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return jq(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return Qq.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?uee(n,r):D2(t,n,r,s);case 239:return i[3]===60?Hw(n,r):D2(t,n,r,s);case 255:if(i[1]===254)return dee(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return Yf.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Yf.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return E4.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return wX.to_workbook(n,r);break;case 10:case 13:case 32:return fee(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Lq.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?E4.to_workbook(n,r):D2(t,n,r,s)}function gee(t,e,r,n,i,s,o,c){var h=rs(r),d=c.defval,m=c.raw||!Object.prototype.hasOwnProperty.call(c,"raw"),C=!0,b=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(b,"__rowNum__",{value:r,enumerable:!1})}catch{b.__rowNum__=r}else b.__rowNum__=r;if(!o||t[r])for(var I=e.s.c;I<=e.e.c;++I){var F=o?t[r][I]:t[n[I]+h];if(F===void 0||F.t===void 0){if(d===void 0)continue;s[I]!=null&&(b[s[I]]=d);continue}var k=F.v;switch(F.t){case"z":if(k==null)break;continue;case"e":k=k==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+F.t)}if(s[I]!=null){if(k==null)if(F.t=="e"&&k===null)b[s[I]]=null;else if(d!==void 0)b[s[I]]=d;else if(m&&k===null)b[s[I]]=null;else continue;else b[s[I]]=m&&(F.t!=="n"||F.t==="n"&&c.rawNumbers!==!1)?k:Sl(F,k,c);k!=null&&(C=!1)}}return{row:b,isempty:C}}function zw(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],o=0,c="",h={s:{r:0,c:0},e:{r:0,c:0}},d=e||{},m=d.range!=null?d.range:t["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof m){case"string":h=ni(m);break;case"number":h=ni(t["!ref"]),h.s.r=m;break;default:h=m}n>0&&(i=0);var C=rs(h.s.r),b=[],I=[],F=0,k=0,U=Array.isArray(t),V=h.s.r,K=0,Q={};U&&!t[V]&&(t[V]=[]);var te=d.skipHidden&&t["!cols"]||[],re=d.skipHidden&&t["!rows"]||[];for(K=h.s.c;K<=h.e.c;++K)if(!(te[K]||{}).hidden)switch(b[K]=Ii(K),r=U?t[V][K]:t[b[K]+C],n){case 1:s[K]=K-h.s.c;break;case 2:s[K]=b[K];break;case 3:s[K]=d.header[K-h.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),c=o=Sl(r,null,d),k=Q[o]||0,!k)Q[o]=1;else{do c=o+"_"+k++;while(Q[c]);Q[o]=k,Q[c]=1}s[K]=c}for(V=h.s.r+i;V<=h.e.r;++V)if(!(re[V]||{}).hidden){var z=gee(t,h,V,b,n,s,U,d);(z.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(I[F++]=z.row)}return I.length=F,I}var Q4=/"/g;function pee(t,e,r,n,i,s,o,c){for(var h=!0,d=[],m="",C=rs(r),b=e.s.c;b<=e.e.c;++b)if(n[b]){var I=c.dense?(t[r]||[])[b]:t[n[b]+C];if(I==null)m="";else if(I.v!=null){h=!1,m=""+(c.rawNumbers&&I.t=="n"?I.v:Sl(I,null,c));for(var F=0,k=0;F!==m.length;++F)if((k=m.charCodeAt(F))===i||k===s||k===34||c.forceQuotes){m='"'+m.replace(Q4,'""')+'"';break}m=="ID"&&(m='"ID"')}else I.f!=null&&!I.F?(h=!1,m="="+I.f,m.indexOf(",")>=0&&(m='"'+m.replace(Q4,'""')+'"')):m="";d.push(m)}return c.blankrows===!1&&h?null:d.join(o)}function tk(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=ni(t["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),c=n.RS!==void 0?n.RS:`
`,h=c.charCodeAt(0),d=new RegExp((s=="|"?"\\|":s)+"+$"),m="",C=[];n.dense=Array.isArray(t);for(var b=n.skipHidden&&t["!cols"]||[],I=n.skipHidden&&t["!rows"]||[],F=i.s.c;F<=i.e.c;++F)(b[F]||{}).hidden||(C[F]=Ii(F));for(var k=0,U=i.s.r;U<=i.e.r;++U)(I[U]||{}).hidden||(m=pee(t,i,U,C,o,h,s,n),m!=null&&(n.strip&&(m=m.replace(d,"")),(m||n.blankrows!==!1)&&r.push((k++?c:"")+m)));return delete n.dense,r.join("")}function mee(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=tk(t,e);return r}function xee(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=ni(t["!ref"]),s="",o=[],c,h=[],d=Array.isArray(t);for(c=i.s.c;c<=i.e.c;++c)o[c]=Ii(c);for(var m=i.s.r;m<=i.e.r;++m)for(s=rs(m),c=i.s.c;c<=i.e.c;++c)if(e=o[c]+s,r=d?(t[m]||[])[c]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}h[h.length]=e+"="+n}return h}function rk(t,e,r){var n=r||{},i=+!n.skipHeader,s=t||{},o=0,c=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var h=typeof n.origin=="string"?Rs(n.origin):n.origin;o=h.r,c=h.c}var d,m={s:{c:0,r:0},e:{c,r:o+e.length-1+i}};if(s["!ref"]){var C=ni(s["!ref"]);m.e.c=Math.max(m.e.c,C.e.c),m.e.r=Math.max(m.e.r,C.e.r),o==-1&&(o=C.e.r+1,m.e.r=o+e.length-1+i)}else o==-1&&(o=0,m.e.r=e.length-1+i);var b=n.header||[],I=0;e.forEach(function(k,U){Mo(k).forEach(function(V){(I=b.indexOf(V))==-1&&(b[I=b.length]=V);var K=k[V],Q="z",te="",re=br({c:c+I,r:o+U+i});d=vd(s,re),K&&typeof K=="object"&&!(K instanceof Date)?s[re]=K:(typeof K=="number"?Q="n":typeof K=="boolean"?Q="b":typeof K=="string"?Q="s":K instanceof Date?(Q="d",n.cellDates||(Q="n",K=ks(K)),te=n.dateNF||Ir[14]):K===null&&n.nullError&&(Q="e",K=0),d?(d.t=Q,d.v=K,delete d.w,delete d.R,te&&(d.z=te)):s[re]=d={t:Q,v:K},te&&(d.z=te))})}),m.e.c=Math.max(m.e.c,c+b.length-1);var F=rs(o);if(i)for(I=0;I<b.length;++I)s[Ii(I+c)+F]={t:"s",v:b[I]};return s["!ref"]=Zr(m),s}function wee(t,e){return rk(null,t,e)}function vd(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Rs(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?vd(t,br(e)):vd(t,br({r:e,c:r||0}))}function vee(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function jy(){return{SheetNames:[],Sheets:{}}}function Vy(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=o+i)!=-1;++i);}if(i$(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function yee(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=vee(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Cee(t,e){return t.z=e,t}function nk(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Eee(t,e,r){return nk(t,"#"+e,r)}function bee(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function _ee(t,e,r,n){for(var i=typeof e!="string"?e:ni(e),s=typeof e=="string"?e:Zr(e),o=i.s.r;o<=i.e.r;++o)for(var c=i.s.c;c<=i.e.c;++c){var h=vd(t,o,c);h.t="n",h.F=s,delete h.v,o==i.s.r&&c==i.s.c&&(h.f=r,n&&(h.D=!0))}return t}var Tee={encode_col:Ii,encode_row:rs,encode_cell:br,encode_range:Zr,decode_col:Sy,decode_row:By,split_cell:Oz,decode_cell:Rs,decode_range:m0,format_cell:Sl,sheet_add_aoa:o8,sheet_add_json:rk,sheet_add_dom:J8,aoa_to_sheet:x0,json_to_sheet:wee,table_to_sheet:Z8,table_to_book:j$,sheet_to_csv:tk,sheet_to_txt:mee,sheet_to_json:zw,sheet_to_html:H$,sheet_to_formulae:xee,sheet_to_row_object_array:zw,sheet_get_cell:vd,book_new:jy,book_append_sheet:Vy,book_set_sheet_visibility:yee,cell_set_number_format:Cee,cell_set_hyperlink:nk,cell_set_internal_link:Eee,cell_add_comment:bee,sheet_set_array_formula:_ee,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},Wt;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Wt||(Wt={}));var H4=new Map([[Wt.QR_CODE,"QR_CODE"],[Wt.AZTEC,"AZTEC"],[Wt.CODABAR,"CODABAR"],[Wt.CODE_39,"CODE_39"],[Wt.CODE_93,"CODE_93"],[Wt.CODE_128,"CODE_128"],[Wt.DATA_MATRIX,"DATA_MATRIX"],[Wt.MAXICODE,"MAXICODE"],[Wt.ITF,"ITF"],[Wt.EAN_13,"EAN_13"],[Wt.EAN_8,"EAN_8"],[Wt.PDF_417,"PDF_417"],[Wt.RSS_14,"RSS_14"],[Wt.RSS_EXPANDED,"RSS_EXPANDED"],[Wt.UPC_A,"UPC_A"],[Wt.UPC_E,"UPC_E"],[Wt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),j4;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(j4||(j4={}));function Bee(t){return Object.values(Wt).includes(t)}var J1;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(J1||(J1={}));var See=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[J1.SCAN_TYPE_CAMERA,J1.SCAN_TYPE_FILE],t})(),ik=(function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!H4.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,H4.get(e))},t})(),V4=(function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),Ww;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ww||(Ww={}));var Iee=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Ww.UNKWOWN_ERROR}},t})(),Nee=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function fl(t){return typeof t>"u"||t===null}var Qu=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),sk=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(i),o=Object.keys(e),c=0,h=o;c<h.length;c++){var d=h[c];if(s.has(d))return r.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},t})(),Ff={exports:{}},Ree=Ff.exports,G4;function Fee(){return G4||(G4=1,(function(t,e){(function(r,n){n(e)})(Ree,(function(r){function n(J){return J==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,l){J.__proto__=l}||function(J,l){for(var f in l)l.hasOwnProperty(f)&&(J[f]=l[f])};function s(J,l){i(J,l);function f(){this.constructor=J}J.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}function o(J,l){var f=Object.setPrototypeOf;f?f(J,l):J.__proto__=l}function c(J,l){l===void 0&&(l=J.constructor);var f=Error.captureStackTrace;f&&f(J,l)}var h=(function(J){s(l,J);function l(f){var g=this.constructor,x=J.call(this,f)||this;return Object.defineProperty(x,"name",{value:g.name,enumerable:!1}),o(x,g.prototype),c(x),x}return l})(Error);class d extends h{constructor(l=void 0){super(l),this.message=l}getKind(){return this.constructor.kind}}d.kind="Exception";class m extends d{}m.kind="ArgumentException";class C extends d{}C.kind="IllegalArgumentException";class b{constructor(l){if(this.binarizer=l,l===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(l,f){return this.binarizer.getBlackRow(l,f)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(l,f,g,x){const w=this.binarizer.getLuminanceSource().crop(l,f,g,x);return new b(this.binarizer.createBinarizer(w))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new b(this.binarizer.createBinarizer(l))}rotateCounterClockwise45(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new b(this.binarizer.createBinarizer(l))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends d{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class F{constructor(l){this.source=l}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class k{static arraycopy(l,f,g,x,w){for(;w--;)g[x++]=l[f++]}static currentTimeMillis(){return Date.now()}}class U extends d{}U.kind="IndexOutOfBoundsException";class V extends U{constructor(l=void 0,f=void 0){super(f),this.index=l,this.message=f}}V.kind="ArrayIndexOutOfBoundsException";class K{static fill(l,f){for(let g=0,x=l.length;g<x;g++)l[g]=f}static fillWithin(l,f,g,x){K.rangeCheck(l.length,f,g);for(let w=f;w<g;w++)l[w]=x}static rangeCheck(l,f,g){if(f>g)throw new C("fromIndex("+f+") > toIndex("+g+")");if(f<0)throw new V(f);if(g>l)throw new V(g)}static asList(...l){return l}static create(l,f,g){return Array.from({length:l}).map(w=>Array.from({length:f}).fill(g))}static createInt32Array(l,f,g){return Array.from({length:l}).map(w=>Int32Array.from({length:f}).fill(g))}static equals(l,f){if(!l||!f||!l.length||!f.length||l.length!==f.length)return!1;for(let g=0,x=l.length;g<x;g++)if(l[g]!==f[g])return!1;return!0}static hashCode(l){if(l===null)return 0;let f=1;for(const g of l)f=31*f+g;return f}static fillUint8Array(l,f){for(let g=0;g!==l.length;g++)l[g]=f}static copyOf(l,f){return l.slice(0,f)}static copyOfUint8Array(l,f){if(l.length<=f){const g=new Uint8Array(f);return g.set(l),g}return l.slice(0,f)}static copyOfRange(l,f,g){const x=g-f,w=new Int32Array(x);return k.arraycopy(l,f,w,0,x),w}static binarySearch(l,f,g){g===void 0&&(g=K.numberComparator);let x=0,w=l.length-1;for(;x<=w;){const y=w+x>>1,T=g(f,l[y]);if(T>0)x=y+1;else if(T<0)w=y-1;else return y}return-x-1}static numberComparator(l,f){return l-f}}class Q{static numberOfTrailingZeros(l){let f;if(l===0)return 32;let g=31;return f=l<<16,f!==0&&(g-=16,l=f),f=l<<8,f!==0&&(g-=8,l=f),f=l<<4,f!==0&&(g-=4,l=f),f=l<<2,f!==0&&(g-=2,l=f),g-(l<<1>>>31)}static numberOfLeadingZeros(l){if(l===0)return 32;let f=1;return l>>>16||(f+=16,l<<=16),l>>>24||(f+=8,l<<=8),l>>>28||(f+=4,l<<=4),l>>>30||(f+=2,l<<=2),f-=l>>>31,f}static toHexString(l){return l.toString(16)}static toBinaryString(l){return String(parseInt(String(l),2))}static bitCount(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),l=l+(l>>>4)&252645135,l=l+(l>>>8),l=l+(l>>>16),l&63}static truncDivision(l,f){return Math.trunc(l/f)}static parseInt(l,f=void 0){return parseInt(l,f)}}Q.MIN_VALUE_32_BITS=-2147483648,Q.MAX_VALUE=Number.MAX_SAFE_INTEGER;class te{constructor(l,f){l===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=l,f==null?this.bits=te.makeArray(l):this.bits=f)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(l){if(l>this.bits.length*32){const f=te.makeArray(l);k.arraycopy(this.bits,0,f,0,this.bits.length),this.bits=f}}get(l){return(this.bits[Math.floor(l/32)]&1<<(l&31))!==0}set(l){this.bits[Math.floor(l/32)]|=1<<(l&31)}flip(l){this.bits[Math.floor(l/32)]^=1<<(l&31)}getNextSet(l){const f=this.size;if(l>=f)return f;const g=this.bits;let x=Math.floor(l/32),w=g[x];w&=~((1<<(l&31))-1);const y=g.length;for(;w===0;){if(++x===y)return f;w=g[x]}const T=x*32+Q.numberOfTrailingZeros(w);return T>f?f:T}getNextUnset(l){const f=this.size;if(l>=f)return f;const g=this.bits;let x=Math.floor(l/32),w=~g[x];w&=~((1<<(l&31))-1);const y=g.length;for(;w===0;){if(++x===y)return f;w=~g[x]}const T=x*32+Q.numberOfTrailingZeros(w);return T>f?f:T}setBulk(l,f){this.bits[Math.floor(l/32)]=f}setRange(l,f){if(f<l||l<0||f>this.size)throw new C;if(f===l)return;f--;const g=Math.floor(l/32),x=Math.floor(f/32),w=this.bits;for(let y=g;y<=x;y++){const T=y>g?0:l&31,D=(2<<(y<x?31:f&31))-(1<<T);w[y]|=D}}clear(){const l=this.bits.length,f=this.bits;for(let g=0;g<l;g++)f[g]=0}isRange(l,f,g){if(f<l||l<0||f>this.size)throw new C;if(f===l)return!0;f--;const x=Math.floor(l/32),w=Math.floor(f/32),y=this.bits;for(let T=x;T<=w;T++){const N=T>x?0:l&31,H=(2<<(T<w?31:f&31))-(1<<N)&4294967295;if((y[T]&H)!==(g?H:0))return!1}return!0}appendBit(l){this.ensureCapacity(this.size+1),l&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(l,f){if(f<0||f>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+f);for(let g=f;g>0;g--)this.appendBit((l>>g-1&1)===1)}appendBitArray(l){const f=l.size;this.ensureCapacity(this.size+f);for(let g=0;g<f;g++)this.appendBit(l.get(g))}xor(l){if(this.size!==l.size)throw new C("Sizes don't match");const f=this.bits;for(let g=0,x=f.length;g<x;g++)f[g]^=l.bits[g]}toBytes(l,f,g,x){for(let w=0;w<x;w++){let y=0;for(let T=0;T<8;T++)this.get(l)&&(y|=1<<7-T),l++;f[g+w]=y}}getBitArray(){return this.bits}reverse(){const l=new Int32Array(this.bits.length),f=Math.floor((this.size-1)/32),g=f+1,x=this.bits;for(let w=0;w<g;w++){let y=x[w];y=y>>1&1431655765|(y&1431655765)<<1,y=y>>2&858993459|(y&858993459)<<2,y=y>>4&252645135|(y&252645135)<<4,y=y>>8&16711935|(y&16711935)<<8,y=y>>16&65535|(y&65535)<<16,l[f-w]=y}if(this.size!==g*32){const w=g*32-this.size;let y=l[0]>>>w;for(let T=1;T<g;T++){const N=l[T];y|=N<<32-w,l[T-1]=y,y=N>>>w}l[g-1]=y}this.bits=l}static makeArray(l){return new Int32Array(Math.floor((l+31)/32))}equals(l){if(!(l instanceof te))return!1;const f=l;return this.size===f.size&&K.equals(this.bits,f.bits)}hashCode(){return 31*this.size+K.hashCode(this.bits)}toString(){let l="";for(let f=0,g=this.size;f<g;f++)(f&7)===0&&(l+=" "),l+=this.get(f)?"X":".";return l}clone(){return new te(this.size,this.bits.slice())}}var re;(function(J){J[J.OTHER=0]="OTHER",J[J.PURE_BARCODE=1]="PURE_BARCODE",J[J.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",J[J.TRY_HARDER=3]="TRY_HARDER",J[J.CHARACTER_SET=4]="CHARACTER_SET",J[J.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",J[J.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",J[J.ASSUME_GS1=7]="ASSUME_GS1",J[J.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",J[J.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",J[J.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(re||(re={}));var z=re;class M extends d{static getFormatInstance(){return new M}}M.kind="FormatException";var P;(function(J){J[J.Cp437=0]="Cp437",J[J.ISO8859_1=1]="ISO8859_1",J[J.ISO8859_2=2]="ISO8859_2",J[J.ISO8859_3=3]="ISO8859_3",J[J.ISO8859_4=4]="ISO8859_4",J[J.ISO8859_5=5]="ISO8859_5",J[J.ISO8859_6=6]="ISO8859_6",J[J.ISO8859_7=7]="ISO8859_7",J[J.ISO8859_8=8]="ISO8859_8",J[J.ISO8859_9=9]="ISO8859_9",J[J.ISO8859_10=10]="ISO8859_10",J[J.ISO8859_11=11]="ISO8859_11",J[J.ISO8859_13=12]="ISO8859_13",J[J.ISO8859_14=13]="ISO8859_14",J[J.ISO8859_15=14]="ISO8859_15",J[J.ISO8859_16=15]="ISO8859_16",J[J.SJIS=16]="SJIS",J[J.Cp1250=17]="Cp1250",J[J.Cp1251=18]="Cp1251",J[J.Cp1252=19]="Cp1252",J[J.Cp1256=20]="Cp1256",J[J.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",J[J.UTF8=22]="UTF8",J[J.ASCII=23]="ASCII",J[J.Big5=24]="Big5",J[J.GB18030=25]="GB18030",J[J.EUC_KR=26]="EUC_KR"})(P||(P={}));class O{constructor(l,f,g,...x){this.valueIdentifier=l,this.name=g,typeof f=="number"?this.values=Int32Array.from([f]):this.values=f,this.otherEncodingNames=x,O.VALUE_IDENTIFIER_TO_ECI.set(l,this),O.NAME_TO_ECI.set(g,this);const w=this.values;for(let y=0,T=w.length;y!==T;y++){const N=w[y];O.VALUES_TO_ECI.set(N,this)}for(const y of x)O.NAME_TO_ECI.set(y,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(l){if(l<0||l>=900)throw new M("incorect value");const f=O.VALUES_TO_ECI.get(l);if(f===void 0)throw new M("incorect value");return f}static getCharacterSetECIByName(l){const f=O.NAME_TO_ECI.get(l);if(f===void 0)throw new M("incorect value");return f}equals(l){if(!(l instanceof O))return!1;const f=l;return this.getName()===f.getName()}}O.VALUE_IDENTIFIER_TO_ECI=new Map,O.VALUES_TO_ECI=new Map,O.NAME_TO_ECI=new Map,O.Cp437=new O(P.Cp437,Int32Array.from([0,2]),"Cp437"),O.ISO8859_1=new O(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),O.ISO8859_2=new O(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),O.ISO8859_3=new O(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),O.ISO8859_4=new O(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),O.ISO8859_5=new O(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),O.ISO8859_6=new O(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),O.ISO8859_7=new O(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),O.ISO8859_8=new O(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),O.ISO8859_9=new O(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),O.ISO8859_10=new O(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),O.ISO8859_11=new O(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),O.ISO8859_13=new O(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),O.ISO8859_14=new O(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),O.ISO8859_15=new O(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),O.ISO8859_16=new O(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),O.SJIS=new O(P.SJIS,20,"SJIS","Shift_JIS"),O.Cp1250=new O(P.Cp1250,21,"Cp1250","windows-1250"),O.Cp1251=new O(P.Cp1251,22,"Cp1251","windows-1251"),O.Cp1252=new O(P.Cp1252,23,"Cp1252","windows-1252"),O.Cp1256=new O(P.Cp1256,24,"Cp1256","windows-1256"),O.UnicodeBigUnmarked=new O(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),O.UTF8=new O(P.UTF8,26,"UTF8","UTF-8"),O.ASCII=new O(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),O.Big5=new O(P.Big5,28,"Big5"),O.GB18030=new O(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),O.EUC_KR=new O(P.EUC_KR,30,"EUC_KR","EUC-KR");class ee extends d{}ee.kind="UnsupportedOperationException";class Y{static decode(l,f){const g=this.encodingName(f);return this.customDecoder?this.customDecoder(l,g):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(g)?this.decodeFallback(l,g):new TextDecoder(g).decode(l)}static shouldDecodeOnFallback(l){return!Y.isBrowser()&&l==="ISO-8859-1"}static encode(l,f){const g=this.encodingName(f);return this.customEncoder?this.customEncoder(l,g):typeof TextEncoder>"u"?this.encodeFallback(l):new TextEncoder().encode(l)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(l){return typeof l=="string"?l:l.getName()}static encodingCharacterSet(l){return l instanceof O?l:O.getCharacterSetECIByName(l)}static decodeFallback(l,f){const g=this.encodingCharacterSet(f);if(Y.isDecodeFallbackSupported(g)){let x="";for(let w=0,y=l.length;w<y;w++){let T=l[w].toString(16);T.length<2&&(T="0"+T),x+="%"+T}return decodeURIComponent(x)}if(g.equals(O.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(l.buffer));throw new ee(`Encoding ${this.encodingName(f)} not supported by fallback.`)}static isDecodeFallbackSupported(l){return l.equals(O.UTF8)||l.equals(O.ISO8859_1)||l.equals(O.ASCII)}static encodeFallback(l){const g=btoa(unescape(encodeURIComponent(l))).split(""),x=[];for(let w=0;w<g.length;w++)x.push(g[w].charCodeAt(0));return new Uint8Array(x)}}class X{static castAsNonUtf8Char(l,f=null){const g=f?f.getName():this.ISO88591;return Y.decode(new Uint8Array([l]),g)}static guessEncoding(l,f){if(f!=null&&f.get(z.CHARACTER_SET)!==void 0)return f.get(z.CHARACTER_SET).toString();const g=l.length;let x=!0,w=!0,y=!0,T=0,N=0,D=0,H=0,Z=0,se=0,ye=0,Se=0,Ne=0,Le=0,Ze=0;const _t=l.length>3&&l[0]===239&&l[1]===187&&l[2]===191;for(let bt=0;bt<g&&(x||w||y);bt++){const xt=l[bt]&255;y&&(T>0?(xt&128)===0?y=!1:T--:(xt&128)!==0&&((xt&64)===0?y=!1:(T++,(xt&32)===0?N++:(T++,(xt&16)===0?D++:(T++,(xt&8)===0?H++:y=!1))))),x&&(xt>127&&xt<160?x=!1:xt>159&&(xt<192||xt===215||xt===247)&&Ze++),w&&(Z>0?xt<64||xt===127||xt>252?w=!1:Z--:xt===128||xt===160||xt>239?w=!1:xt>160&&xt<224?(se++,Se=0,ye++,ye>Ne&&(Ne=ye)):xt>127?(Z++,ye=0,Se++,Se>Le&&(Le=Se)):(ye=0,Se=0))}return y&&T>0&&(y=!1),w&&Z>0&&(w=!1),y&&(_t||N+D+H>0)?X.UTF8:w&&(X.ASSUME_SHIFT_JIS||Ne>=3||Le>=3)?X.SHIFT_JIS:x&&w?Ne===2&&se===2||Ze*10>=g?X.SHIFT_JIS:X.ISO88591:x?X.ISO88591:w?X.SHIFT_JIS:y?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(l,...f){let g=-1;function x(y,T,N,D,H,Z){if(y==="%%")return"%";if(f[++g]===void 0)return;y=D?parseInt(D.substr(1)):void 0;let se=H?parseInt(H.substr(1)):void 0,ye;switch(Z){case"s":ye=f[g];break;case"c":ye=f[g][0];break;case"f":ye=parseFloat(f[g]).toFixed(y);break;case"p":ye=parseFloat(f[g]).toPrecision(y);break;case"e":ye=parseFloat(f[g]).toExponential(y);break;case"x":ye=parseInt(f[g]).toString(se||16);break;case"d":ye=parseFloat(parseInt(f[g],se||10).toPrecision(y)).toFixed(0);break}ye=typeof ye=="object"?JSON.stringify(ye):(+ye).toString(se);let Se=parseInt(N),Ne=N&&N[0]+""=="0"?"0":" ";for(;ye.length<Se;)ye=T!==void 0?ye+Ne:Ne+ye;return ye}let w=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(w,x)}static getBytes(l,f){return Y.encode(l,f)}static getCharCode(l,f=0){return l.charCodeAt(f)}static getCharAt(l){return String.fromCharCode(l)}}X.SHIFT_JIS=O.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=O.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=O.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class G{constructor(l=""){this.value=l}enableDecoding(l){return this.encoding=l,this}append(l){return typeof l=="string"?this.value+=l.toString():this.encoding?this.value+=X.castAsNonUtf8Char(l,this.encoding):this.value+=String.fromCharCode(l),this}appendChars(l,f,g){for(let x=f;f<f+g;x++)this.append(l[x]);return this}length(){return this.value.length}charAt(l){return this.value.charAt(l)}deleteCharAt(l){this.value=this.value.substr(0,l)+this.value.substring(l+1)}setCharAt(l,f){this.value=this.value.substr(0,l)+f+this.value.substr(l+1)}substring(l,f){return this.value.substring(l,f)}setLengthToZero(){this.value=""}toString(){return this.value}insert(l,f){this.value=this.value.substr(0,l)+f+this.value.substr(l+f.length)}}class Ie{constructor(l,f,g,x){if(this.width=l,this.height=f,this.rowSize=g,this.bits=x,f==null&&(f=l),this.height=f,l<1||f<1)throw new C("Both dimensions must be greater than 0");g==null&&(g=Math.floor((l+31)/32)),this.rowSize=g,x==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(l){const f=l.length,g=l[0].length,x=new Ie(g,f);for(let w=0;w<f;w++){const y=l[w];for(let T=0;T<g;T++)y[T]&&x.set(T,w)}return x}static parseFromString(l,f,g){if(l===null)throw new C("stringRepresentation cannot be null");const x=new Array(l.length);let w=0,y=0,T=-1,N=0,D=0;for(;D<l.length;)if(l.charAt(D)===`
`||l.charAt(D)==="\r"){if(w>y){if(T===-1)T=w-y;else if(w-y!==T)throw new C("row lengths do not match");y=w,N++}D++}else if(l.substring(D,D+f.length)===f)D+=f.length,x[w]=!0,w++;else if(l.substring(D,D+g.length)===g)D+=g.length,x[w]=!1,w++;else throw new C("illegal character encountered: "+l.substring(D));if(w>y){if(T===-1)T=w-y;else if(w-y!==T)throw new C("row lengths do not match");N++}const H=new Ie(T,N);for(let Z=0;Z<w;Z++)x[Z]&&H.set(Math.floor(Z%T),Math.floor(Z/T));return H}get(l,f){const g=f*this.rowSize+Math.floor(l/32);return(this.bits[g]>>>(l&31)&1)!==0}set(l,f){const g=f*this.rowSize+Math.floor(l/32);this.bits[g]|=1<<(l&31)&4294967295}unset(l,f){const g=f*this.rowSize+Math.floor(l/32);this.bits[g]&=~(1<<(l&31)&4294967295)}flip(l,f){const g=f*this.rowSize+Math.floor(l/32);this.bits[g]^=1<<(l&31)&4294967295}xor(l){if(this.width!==l.getWidth()||this.height!==l.getHeight()||this.rowSize!==l.getRowSize())throw new C("input matrix dimensions do not match");const f=new te(Math.floor(this.width/32)+1),g=this.rowSize,x=this.bits;for(let w=0,y=this.height;w<y;w++){const T=w*g,N=l.getRow(w,f).getBitArray();for(let D=0;D<g;D++)x[T+D]^=N[D]}}clear(){const l=this.bits,f=l.length;for(let g=0;g<f;g++)l[g]=0}setRegion(l,f,g,x){if(f<0||l<0)throw new C("Left and top must be nonnegative");if(x<1||g<1)throw new C("Height and width must be at least 1");const w=l+g,y=f+x;if(y>this.height||w>this.width)throw new C("The region must fit inside the matrix");const T=this.rowSize,N=this.bits;for(let D=f;D<y;D++){const H=D*T;for(let Z=l;Z<w;Z++)N[H+Math.floor(Z/32)]|=1<<(Z&31)&4294967295}}getRow(l,f){f==null||f.getSize()<this.width?f=new te(this.width):f.clear();const g=this.rowSize,x=this.bits,w=l*g;for(let y=0;y<g;y++)f.setBulk(y*32,x[w+y]);return f}setRow(l,f){k.arraycopy(f.getBitArray(),0,this.bits,l*this.rowSize,this.rowSize)}rotate180(){const l=this.getWidth(),f=this.getHeight();let g=new te(l),x=new te(l);for(let w=0,y=Math.floor((f+1)/2);w<y;w++)g=this.getRow(w,g),x=this.getRow(f-1-w,x),g.reverse(),x.reverse(),this.setRow(w,x),this.setRow(f-1-w,g)}getEnclosingRectangle(){const l=this.width,f=this.height,g=this.rowSize,x=this.bits;let w=l,y=f,T=-1,N=-1;for(let D=0;D<f;D++)for(let H=0;H<g;H++){const Z=x[D*g+H];if(Z!==0){if(D<y&&(y=D),D>N&&(N=D),H*32<w){let se=0;for(;(Z<<31-se&4294967295)===0;)se++;H*32+se<w&&(w=H*32+se)}if(H*32+31>T){let se=31;for(;!(Z>>>se);)se--;H*32+se>T&&(T=H*32+se)}}}return T<w||N<y?null:Int32Array.from([w,y,T-w+1,N-y+1])}getTopLeftOnBit(){const l=this.rowSize,f=this.bits;let g=0;for(;g<f.length&&f[g]===0;)g++;if(g===f.length)return null;const x=g/l;let w=g%l*32;const y=f[g];let T=0;for(;(y<<31-T&4294967295)===0;)T++;return w+=T,Int32Array.from([w,x])}getBottomRightOnBit(){const l=this.rowSize,f=this.bits;let g=f.length-1;for(;g>=0&&f[g]===0;)g--;if(g<0)return null;const x=Math.floor(g/l);let w=Math.floor(g%l)*32;const y=f[g];let T=31;for(;!(y>>>T);)T--;return w+=T,Int32Array.from([w,x])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(l){if(!(l instanceof Ie))return!1;const f=l;return this.width===f.width&&this.height===f.height&&this.rowSize===f.rowSize&&K.equals(this.bits,f.bits)}hashCode(){let l=this.width;return l=31*l+this.width,l=31*l+this.height,l=31*l+this.rowSize,l=31*l+K.hashCode(this.bits),l}toString(l="X ",f="  ",g=`
`){return this.buildToString(l,f,g)}buildToString(l,f,g){let x=new G;for(let w=0,y=this.height;w<y;w++){for(let T=0,N=this.width;T<N;T++)x.append(this.get(T,w)?l:f);x.append(g)}return x.toString()}clone(){return new Ie(this.width,this.height,this.rowSize,this.bits.slice())}}class ge extends d{static getNotFoundInstance(){return new ge}}ge.kind="NotFoundException";class de extends F{constructor(l){super(l),this.luminances=de.EMPTY,this.buckets=new Int32Array(de.LUMINANCE_BUCKETS)}getBlackRow(l,f){const g=this.getLuminanceSource(),x=g.getWidth();f==null||f.getSize()<x?f=new te(x):f.clear(),this.initArrays(x);const w=g.getRow(l,this.luminances),y=this.buckets;for(let N=0;N<x;N++)y[(w[N]&255)>>de.LUMINANCE_SHIFT]++;const T=de.estimateBlackPoint(y);if(x<3)for(let N=0;N<x;N++)(w[N]&255)<T&&f.set(N);else{let N=w[0]&255,D=w[1]&255;for(let H=1;H<x-1;H++){const Z=w[H+1]&255;(D*4-N-Z)/2<T&&f.set(H),N=D,D=Z}}return f}getBlackMatrix(){const l=this.getLuminanceSource(),f=l.getWidth(),g=l.getHeight(),x=new Ie(f,g);this.initArrays(f);const w=this.buckets;for(let N=1;N<5;N++){const D=Math.floor(g*N/5),H=l.getRow(D,this.luminances),Z=Math.floor(f*4/5);for(let se=Math.floor(f/5);se<Z;se++){const ye=H[se]&255;w[ye>>de.LUMINANCE_SHIFT]++}}const y=de.estimateBlackPoint(w),T=l.getMatrix();for(let N=0;N<g;N++){const D=N*f;for(let H=0;H<f;H++)(T[D+H]&255)<y&&x.set(H,N)}return x}createBinarizer(l){return new de(l)}initArrays(l){this.luminances.length<l&&(this.luminances=new Uint8ClampedArray(l));const f=this.buckets;for(let g=0;g<de.LUMINANCE_BUCKETS;g++)f[g]=0}static estimateBlackPoint(l){const f=l.length;let g=0,x=0,w=0;for(let H=0;H<f;H++)l[H]>w&&(x=H,w=l[H]),l[H]>g&&(g=l[H]);let y=0,T=0;for(let H=0;H<f;H++){const Z=H-x,se=l[H]*Z*Z;se>T&&(y=H,T=se)}if(x>y){const H=x;x=y,y=H}if(y-x<=f/16)throw new ge;let N=y-1,D=-1;for(let H=y-1;H>x;H--){const Z=H-x,se=Z*Z*(y-H)*(g-l[H]);se>D&&(N=H,D=se)}return N<<de.LUMINANCE_SHIFT}}de.LUMINANCE_BITS=5,de.LUMINANCE_SHIFT=8-de.LUMINANCE_BITS,de.LUMINANCE_BUCKETS=1<<de.LUMINANCE_BITS,de.EMPTY=Uint8ClampedArray.from([0]);class we extends de{constructor(l){super(l),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const l=this.getLuminanceSource(),f=l.getWidth(),g=l.getHeight();if(f>=we.MINIMUM_DIMENSION&&g>=we.MINIMUM_DIMENSION){const x=l.getMatrix();let w=f>>we.BLOCK_SIZE_POWER;(f&we.BLOCK_SIZE_MASK)!==0&&w++;let y=g>>we.BLOCK_SIZE_POWER;(g&we.BLOCK_SIZE_MASK)!==0&&y++;const T=we.calculateBlackPoints(x,w,y,f,g),N=new Ie(f,g);we.calculateThresholdForBlock(x,w,y,f,g,T,N),this.matrix=N}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(l){return new we(l)}static calculateThresholdForBlock(l,f,g,x,w,y,T){const N=w-we.BLOCK_SIZE,D=x-we.BLOCK_SIZE;for(let H=0;H<g;H++){let Z=H<<we.BLOCK_SIZE_POWER;Z>N&&(Z=N);const se=we.cap(H,2,g-3);for(let ye=0;ye<f;ye++){let Se=ye<<we.BLOCK_SIZE_POWER;Se>D&&(Se=D);const Ne=we.cap(ye,2,f-3);let Le=0;for(let _t=-2;_t<=2;_t++){const bt=y[se+_t];Le+=bt[Ne-2]+bt[Ne-1]+bt[Ne]+bt[Ne+1]+bt[Ne+2]}const Ze=Le/25;we.thresholdBlock(l,Se,Z,Ze,x,T)}}}static cap(l,f,g){return l<f?f:l>g?g:l}static thresholdBlock(l,f,g,x,w,y){for(let T=0,N=g*w+f;T<we.BLOCK_SIZE;T++,N+=w)for(let D=0;D<we.BLOCK_SIZE;D++)(l[N+D]&255)<=x&&y.set(f+D,g+T)}static calculateBlackPoints(l,f,g,x,w){const y=w-we.BLOCK_SIZE,T=x-we.BLOCK_SIZE,N=new Array(g);for(let D=0;D<g;D++){N[D]=new Int32Array(f);let H=D<<we.BLOCK_SIZE_POWER;H>y&&(H=y);for(let Z=0;Z<f;Z++){let se=Z<<we.BLOCK_SIZE_POWER;se>T&&(se=T);let ye=0,Se=255,Ne=0;for(let Ze=0,_t=H*x+se;Ze<we.BLOCK_SIZE;Ze++,_t+=x){for(let bt=0;bt<we.BLOCK_SIZE;bt++){const xt=l[_t+bt]&255;ye+=xt,xt<Se&&(Se=xt),xt>Ne&&(Ne=xt)}if(Ne-Se>we.MIN_DYNAMIC_RANGE)for(Ze++,_t+=x;Ze<we.BLOCK_SIZE;Ze++,_t+=x)for(let bt=0;bt<we.BLOCK_SIZE;bt++)ye+=l[_t+bt]&255}let Le=ye>>we.BLOCK_SIZE_POWER*2;if(Ne-Se<=we.MIN_DYNAMIC_RANGE&&(Le=Se/2,D>0&&Z>0)){const Ze=(N[D-1][Z]+2*N[D][Z-1]+N[D-1][Z-1])/4;Se<Ze&&(Le=Ze)}N[D][Z]=Le}}return N}}we.BLOCK_SIZE_POWER=3,we.BLOCK_SIZE=1<<we.BLOCK_SIZE_POWER,we.BLOCK_SIZE_MASK=we.BLOCK_SIZE-1,we.MINIMUM_DIMENSION=we.BLOCK_SIZE*5,we.MIN_DYNAMIC_RANGE=24;class Ge{constructor(l,f){this.width=l,this.height=f}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(l,f,g,x){throw new ee("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ee("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ee("This luminance source does not support rotation by 45 degrees.")}toString(){const l=new Uint8ClampedArray(this.width);let f=new G;for(let g=0;g<this.height;g++){const x=this.getRow(g,l);for(let w=0;w<this.width;w++){const y=x[w]&255;let T;y<64?T="#":y<128?T="+":y<192?T=".":T=" ",f.append(T)}f.append(`
`)}return f.toString()}}class be extends Ge{constructor(l){super(l.getWidth(),l.getHeight()),this.delegate=l}getRow(l,f){const g=this.delegate.getRow(l,f),x=this.getWidth();for(let w=0;w<x;w++)g[w]=255-(g[w]&255);return g}getMatrix(){const l=this.delegate.getMatrix(),f=this.getWidth()*this.getHeight(),g=new Uint8ClampedArray(f);for(let x=0;x<f;x++)g[x]=255-(l[x]&255);return g}isCropSupported(){return this.delegate.isCropSupported()}crop(l,f,g,x){return new be(this.delegate.crop(l,f,g,x))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new be(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new be(this.delegate.rotateCounterClockwise45())}}class De extends Ge{constructor(l){super(l.width,l.height),this.canvas=l,this.tempCanvasElement=null,this.buffer=De.makeBufferFromCanvasImageData(l)}static makeBufferFromCanvasImageData(l){const f=l.getContext("2d").getImageData(0,0,l.width,l.height);return De.toGrayscaleBuffer(f.data,l.width,l.height)}static toGrayscaleBuffer(l,f,g){const x=new Uint8ClampedArray(f*g);for(let w=0,y=0,T=l.length;w<T;w+=4,y++){let N;if(l[w+3]===0)N=255;else{const H=l[w],Z=l[w+1],se=l[w+2];N=306*H+601*Z+117*se+512>>10}x[y]=N}return x}getRow(l,f){if(l<0||l>=this.getHeight())throw new C("Requested row is outside the image: "+l);const g=this.getWidth(),x=l*g;return f===null?f=this.buffer.slice(x,x+g):(f.length<g&&(f=new Uint8ClampedArray(g)),f.set(this.buffer.slice(x,x+g))),f}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(l,f,g,x){return super.crop(l,f,g,x),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const l=this.canvas.ownerDocument.createElement("canvas");l.width=this.canvas.width,l.height=this.canvas.height,this.tempCanvasElement=l}return this.tempCanvasElement}rotate(l){const f=this.getTempCanvasElement(),g=f.getContext("2d"),x=l*De.DEGREE_TO_RADIANS,w=this.canvas.width,y=this.canvas.height,T=Math.ceil(Math.abs(Math.cos(x))*w+Math.abs(Math.sin(x))*y),N=Math.ceil(Math.abs(Math.sin(x))*w+Math.abs(Math.cos(x))*y);return f.width=T,f.height=N,g.translate(T/2,N/2),g.rotate(x),g.drawImage(this.canvas,w/-2,y/-2),this.buffer=De.makeBufferFromCanvasImageData(f),this}invert(){return new be(this)}}De.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(l,f,g){this.deviceId=l,this.label=f,this.kind="videoinput",this.groupId=g||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var q=(globalThis||Yh||self||window||void 0)&&(globalThis||Yh||self||window||void 0).__awaiter||function(J,l,f,g){function x(w){return w instanceof f?w:new f(function(y){y(w)})}return new(f||(f=Promise))(function(w,y){function T(H){try{D(g.next(H))}catch(Z){y(Z)}}function N(H){try{D(g.throw(H))}catch(Z){y(Z)}}function D(H){H.done?w(H.value):x(H.value).then(T,N)}D((g=g.apply(J,l||[])).next())})};class ce{constructor(l,f=500,g){this.reader=l,this.timeBetweenScansMillis=f,this._hints=g,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(l){this._timeBetweenDecodingAttempts=l<0?0:l}set hints(l){this._hints=l||null}get hints(){return this._hints}listVideoInputDevices(){return q(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const l=yield navigator.mediaDevices.enumerateDevices(),f=[];for(const g of l){const x=g.kind==="video"?"videoinput":g.kind;if(x!=="videoinput")continue;const w=g.deviceId||g.id,y=g.label||`Video device ${f.length+1}`,T=g.groupId,N={deviceId:w,label:y,kind:x,groupId:T};f.push(N)}return f})}getVideoInputDevices(){return q(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(f=>new ne(f.deviceId,f.label))})}findDeviceById(l){return q(this,void 0,void 0,function*(){const f=yield this.listVideoInputDevices();return f?f.find(g=>g.deviceId===l):null})}decodeFromInputVideoDevice(l,f){return q(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(l,f)})}decodeOnceFromVideoDevice(l,f){return q(this,void 0,void 0,function*(){this.reset();let g;l?g={deviceId:{exact:l}}:g={facingMode:"environment"};const x={video:g};return yield this.decodeOnceFromConstraints(x,f)})}decodeOnceFromConstraints(l,f){return q(this,void 0,void 0,function*(){const g=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeOnceFromStream(g,f)})}decodeOnceFromStream(l,f){return q(this,void 0,void 0,function*(){this.reset();const g=yield this.attachStreamToVideo(l,f);return yield this.decodeOnce(g)})}decodeFromInputVideoDeviceContinuously(l,f,g){return q(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(l,f,g)})}decodeFromVideoDevice(l,f,g){return q(this,void 0,void 0,function*(){let x;l?x={deviceId:{exact:l}}:x={facingMode:"environment"};const w={video:x};return yield this.decodeFromConstraints(w,f,g)})}decodeFromConstraints(l,f,g){return q(this,void 0,void 0,function*(){const x=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeFromStream(x,f,g)})}decodeFromStream(l,f,g){return q(this,void 0,void 0,function*(){this.reset();const x=yield this.attachStreamToVideo(l,f);return yield this.decodeContinuously(x,g)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(l,f){return q(this,void 0,void 0,function*(){const g=this.prepareVideoElement(f);return this.addVideoSource(g,l),this.videoElement=g,this.stream=l,yield this.playVideoOnLoadAsync(g),g})}playVideoOnLoadAsync(l){return new Promise((f,g)=>this.playVideoOnLoad(l,()=>f()))}playVideoOnLoad(l,f){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(l),l.addEventListener("ended",this.videoEndedListener),l.addEventListener("canplay",this.videoCanPlayListener),l.addEventListener("playing",f),this.tryPlayVideo(l)}isVideoPlaying(l){return l.currentTime>0&&!l.paused&&!l.ended&&l.readyState>2}tryPlayVideo(l){return q(this,void 0,void 0,function*(){if(this.isVideoPlaying(l)){console.warn("Trying to play video that is already playing.");return}try{yield l.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(l,f){const g=document.getElementById(l);if(!g)throw new m(`element with id '${l}' not found`);if(g.nodeName.toLowerCase()!==f.toLowerCase())throw new m(`element with id '${l}' must be an ${f} element`);return g}decodeFromImage(l,f){if(!l&&!f)throw new m("either imageElement with a src set or an url must be provided");return f&&!l?this.decodeFromImageUrl(f):this.decodeFromImageElement(l)}decodeFromVideo(l,f){if(!l&&!f)throw new m("Either an element with a src set or an URL must be provided");return f&&!l?this.decodeFromVideoUrl(f):this.decodeFromVideoElement(l)}decodeFromVideoContinuously(l,f,g){if(l===void 0&&f===void 0)throw new m("Either an element with a src set or an URL must be provided");return f&&!l?this.decodeFromVideoUrlContinuously(f,g):this.decodeFromVideoElementContinuously(l,g)}decodeFromImageElement(l){if(!l)throw new m("An image element must be provided.");this.reset();const f=this.prepareImageElement(l);this.imageElement=f;let g;return this.isImageLoaded(f)?g=this.decodeOnce(f,!1,!0):g=this._decodeOnLoadImage(f),g}decodeFromVideoElement(l){const f=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideo(f)}decodeFromVideoElementContinuously(l,f){const g=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideoContinuously(g,f)}_decodeFromVideoElementSetup(l){if(!l)throw new m("A video element must be provided.");this.reset();const f=this.prepareVideoElement(l);return this.videoElement=f,f}decodeFromImageUrl(l){if(!l)throw new m("An URL must be provided.");this.reset();const f=this.prepareImageElement();this.imageElement=f;const g=this._decodeOnLoadImage(f);return f.src=l,g}decodeFromVideoUrl(l){if(!l)throw new m("An URL must be provided.");this.reset();const f=this.prepareVideoElement(),g=this.decodeFromVideoElement(f);return f.src=l,g}decodeFromVideoUrlContinuously(l,f){if(!l)throw new m("An URL must be provided.");this.reset();const g=this.prepareVideoElement(),x=this.decodeFromVideoElementContinuously(g,f);return g.src=l,x}_decodeOnLoadImage(l){return new Promise((f,g)=>{this.imageLoadedListener=()=>this.decodeOnce(l,!1,!0).then(f,g),l.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(l){return q(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(l),yield this.decodeOnce(l)})}_decodeOnLoadVideoContinuously(l,f){return q(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(l),this.decodeContinuously(l,f)})}isImageLoaded(l){return!(!l.complete||l.naturalWidth===0)}prepareImageElement(l){let f;return typeof l>"u"&&(f=document.createElement("img"),f.width=200,f.height=200),typeof l=="string"&&(f=this.getMediaElement(l,"img")),l instanceof HTMLImageElement&&(f=l),f}prepareVideoElement(l){let f;return!l&&typeof document<"u"&&(f=document.createElement("video"),f.width=200,f.height=200),typeof l=="string"&&(f=this.getMediaElement(l,"video")),l instanceof HTMLVideoElement&&(f=l),f.setAttribute("autoplay","true"),f.setAttribute("muted","true"),f.setAttribute("playsinline","true"),f}decodeOnce(l,f=!0,g=!0){this._stopAsyncDecode=!1;const x=(w,y)=>{if(this._stopAsyncDecode){y(new ge("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const T=this.decode(l);w(T)}catch(T){const N=f&&T instanceof ge,H=(T instanceof I||T instanceof M)&&g;if(N||H)return setTimeout(x,this._timeBetweenDecodingAttempts,w,y);y(T)}};return new Promise((w,y)=>x(w,y))}decodeContinuously(l,f){this._stopContinuousDecode=!1;const g=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const x=this.decode(l);f(x,null),setTimeout(g,this.timeBetweenScansMillis)}catch(x){f(null,x);const w=x instanceof I||x instanceof M,y=x instanceof ge;(w||y)&&setTimeout(g,this._timeBetweenDecodingAttempts)}};g()}decode(l){const f=this.createBinaryBitmap(l);return this.decodeBitmap(f)}_isHTMLVideoElement(l){return l.videoWidth!==0}drawFrameOnCanvas(l,f,g){f||(f={sx:0,sy:0,sWidth:l.videoWidth,sHeight:l.videoHeight,dx:0,dy:0,dWidth:l.videoWidth,dHeight:l.videoHeight}),g||(g=this.captureCanvasContext),g.drawImage(l,f.sx,f.sy,f.sWidth,f.sHeight,f.dx,f.dy,f.dWidth,f.dHeight)}drawImageOnCanvas(l,f,g=this.captureCanvasContext){f||(f={sx:0,sy:0,sWidth:l.naturalWidth,sHeight:l.naturalHeight,dx:0,dy:0,dWidth:l.naturalWidth,dHeight:l.naturalHeight}),g||(g=this.captureCanvasContext),g.drawImage(l,f.sx,f.sy,f.sWidth,f.sHeight,f.dx,f.dy,f.dWidth,f.dHeight)}createBinaryBitmap(l){this.getCaptureCanvasContext(l),this._isHTMLVideoElement(l)?this.drawFrameOnCanvas(l):this.drawImageOnCanvas(l);const f=this.getCaptureCanvas(l),g=new De(f),x=new we(g);return new b(x)}getCaptureCanvasContext(l){if(!this.captureCanvasContext){const g=this.getCaptureCanvas(l).getContext("2d");this.captureCanvasContext=g}return this.captureCanvasContext}getCaptureCanvas(l){if(!this.captureCanvas){const f=this.createCaptureCanvas(l);this.captureCanvas=f}return this.captureCanvas}decodeBitmap(l){return this.reader.decode(l,this._hints)}createCaptureCanvas(l){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const f=document.createElement("canvas");let g,x;return typeof l<"u"&&(l instanceof HTMLVideoElement?(g=l.videoWidth,x=l.videoHeight):l instanceof HTMLImageElement&&(g=l.naturalWidth||l.width,x=l.naturalHeight||l.height)),f.style.width=g+"px",f.style.height=x+"px",f.width=g,f.height=x,f}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(l=>l.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(l,f){try{l.srcObject=f}catch{l.src=URL.createObjectURL(f)}}cleanVideoSource(l){try{l.srcObject=null}catch{l.src=""}this.videoElement.removeAttribute("src")}}class oe{constructor(l,f,g=f==null?0:8*f.length,x,w,y=k.currentTimeMillis()){this.text=l,this.rawBytes=f,this.numBits=g,this.resultPoints=x,this.format=w,this.timestamp=y,this.text=l,this.rawBytes=f,g==null?this.numBits=f==null?0:8*f.length:this.numBits=g,this.resultPoints=x,this.format=w,this.resultMetadata=null,y==null?this.timestamp=k.currentTimeMillis():this.timestamp=y}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(l,f){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(l,f)}putAllMetadata(l){l!==null&&(this.resultMetadata===null?this.resultMetadata=l:this.resultMetadata=new Map(l))}addResultPoints(l){const f=this.resultPoints;if(f===null)this.resultPoints=l;else if(l!==null&&l.length>0){const g=new Array(f.length+l.length);k.arraycopy(f,0,g,0,f.length),k.arraycopy(l,0,g,f.length,l.length),this.resultPoints=g}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ae;(function(J){J[J.AZTEC=0]="AZTEC",J[J.CODABAR=1]="CODABAR",J[J.CODE_39=2]="CODE_39",J[J.CODE_93=3]="CODE_93",J[J.CODE_128=4]="CODE_128",J[J.DATA_MATRIX=5]="DATA_MATRIX",J[J.EAN_8=6]="EAN_8",J[J.EAN_13=7]="EAN_13",J[J.ITF=8]="ITF",J[J.MAXICODE=9]="MAXICODE",J[J.PDF_417=10]="PDF_417",J[J.QR_CODE=11]="QR_CODE",J[J.RSS_14=12]="RSS_14",J[J.RSS_EXPANDED=13]="RSS_EXPANDED",J[J.UPC_A=14]="UPC_A",J[J.UPC_E=15]="UPC_E",J[J.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ae||(ae={}));var Ee=ae,Ke;(function(J){J[J.OTHER=0]="OTHER",J[J.ORIENTATION=1]="ORIENTATION",J[J.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",J[J.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",J[J.ISSUE_NUMBER=4]="ISSUE_NUMBER",J[J.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",J[J.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",J[J.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",J[J.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",J[J.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",J[J.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ke||(Ke={}));var Fe=Ke;class He{constructor(l,f,g,x,w=-1,y=-1){this.rawBytes=l,this.text=f,this.byteSegments=g,this.ecLevel=x,this.structuredAppendSequenceNumber=w,this.structuredAppendParity=y,this.numBits=l==null?0:8*l.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(l){this.numBits=l}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(l){this.errorsCorrected=l}getErasures(){return this.erasures}setErasures(l){this.erasures=l}getOther(){return this.other}setOther(l){this.other=l}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class tt{exp(l){return this.expTable[l]}log(l){if(l===0)throw new C;return this.logTable[l]}static addOrSubtract(l,f){return l^f}}class Tt{constructor(l,f){if(f.length===0)throw new C;this.field=l;const g=f.length;if(g>1&&f[0]===0){let x=1;for(;x<g&&f[x]===0;)x++;x===g?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(g-x),k.arraycopy(f,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=f}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);const f=this.coefficients;let g;if(l===1){g=0;for(let y=0,T=f.length;y!==T;y++){const N=f[y];g=tt.addOrSubtract(g,N)}return g}g=f[0];const x=f.length,w=this.field;for(let y=1;y<x;y++)g=tt.addOrSubtract(w.multiply(l,g),f[y]);return g}addOrSubtract(l){if(!this.field.equals(l.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return l;if(l.isZero())return this;let f=this.coefficients,g=l.coefficients;if(f.length>g.length){const y=f;f=g,g=y}let x=new Int32Array(g.length);const w=g.length-f.length;k.arraycopy(g,0,x,0,w);for(let y=w;y<g.length;y++)x[y]=tt.addOrSubtract(f[y-w],g[y]);return new Tt(this.field,x)}multiply(l){if(!this.field.equals(l.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||l.isZero())return this.field.getZero();const f=this.coefficients,g=f.length,x=l.coefficients,w=x.length,y=new Int32Array(g+w-1),T=this.field;for(let N=0;N<g;N++){const D=f[N];for(let H=0;H<w;H++)y[N+H]=tt.addOrSubtract(y[N+H],T.multiply(D,x[H]))}return new Tt(T,y)}multiplyScalar(l){if(l===0)return this.field.getZero();if(l===1)return this;const f=this.coefficients.length,g=this.field,x=new Int32Array(f),w=this.coefficients;for(let y=0;y<f;y++)x[y]=g.multiply(w[y],l);return new Tt(g,x)}multiplyByMonomial(l,f){if(l<0)throw new C;if(f===0)return this.field.getZero();const g=this.coefficients,x=g.length,w=new Int32Array(x+l),y=this.field;for(let T=0;T<x;T++)w[T]=y.multiply(g[T],f);return new Tt(y,w)}divide(l){if(!this.field.equals(l.field))throw new C("GenericGFPolys do not have same GenericGF field");if(l.isZero())throw new C("Divide by 0");const f=this.field;let g=f.getZero(),x=this;const w=l.getCoefficient(l.getDegree()),y=f.inverse(w);for(;x.getDegree()>=l.getDegree()&&!x.isZero();){const T=x.getDegree()-l.getDegree(),N=f.multiply(x.getCoefficient(x.getDegree()),y),D=l.multiplyByMonomial(T,N),H=f.buildMonomial(T,N);g=g.addOrSubtract(H),x=x.addOrSubtract(D)}return[g,x]}toString(){let l="";for(let f=this.getDegree();f>=0;f--){let g=this.getCoefficient(f);if(g!==0){if(g<0?(l+=" - ",g=-g):l.length>0&&(l+=" + "),f===0||g!==1){const x=this.field.log(g);x===0?l+="1":x===1?l+="a":(l+="a^",l+=x)}f!==0&&(f===1?l+="x":(l+="x^",l+=f))}}return l}}class ve extends d{}ve.kind="ArithmeticException";class Oe extends tt{constructor(l,f,g){super(),this.primitive=l,this.size=f,this.generatorBase=g;const x=new Int32Array(f);let w=1;for(let T=0;T<f;T++)x[T]=w,w*=2,w>=f&&(w^=l,w&=f-1);this.expTable=x;const y=new Int32Array(f);for(let T=0;T<f-1;T++)y[x[T]]=T;this.logTable=y,this.zero=new Tt(this,Int32Array.from([0])),this.one=new Tt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,f){if(l<0)throw new C;if(f===0)return this.zero;const g=new Int32Array(l+1);return g[0]=f,new Tt(this,g)}inverse(l){if(l===0)throw new ve;return this.expTable[this.size-this.logTable[l]-1]}multiply(l,f){return l===0||f===0?0:this.expTable[(this.logTable[l]+this.logTable[f])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Q.toHexString(this.primitive)+","+this.size+")"}equals(l){return l===this}}Oe.AZTEC_DATA_12=new Oe(4201,4096,1),Oe.AZTEC_DATA_10=new Oe(1033,1024,1),Oe.AZTEC_DATA_6=new Oe(67,64,1),Oe.AZTEC_PARAM=new Oe(19,16,1),Oe.QR_CODE_FIELD_256=new Oe(285,256,0),Oe.DATA_MATRIX_FIELD_256=new Oe(301,256,1),Oe.AZTEC_DATA_8=Oe.DATA_MATRIX_FIELD_256,Oe.MAXICODE_FIELD_64=Oe.AZTEC_DATA_6;class st extends d{}st.kind="ReedSolomonException";class Bt extends d{}Bt.kind="IllegalStateException";class kt{constructor(l){this.field=l}decode(l,f){const g=this.field,x=new Tt(g,l),w=new Int32Array(f);let y=!0;for(let ye=0;ye<f;ye++){const Se=x.evaluateAt(g.exp(ye+g.getGeneratorBase()));w[w.length-1-ye]=Se,Se!==0&&(y=!1)}if(y)return;const T=new Tt(g,w),N=this.runEuclideanAlgorithm(g.buildMonomial(f,1),T,f),D=N[0],H=N[1],Z=this.findErrorLocations(D),se=this.findErrorMagnitudes(H,Z);for(let ye=0;ye<Z.length;ye++){const Se=l.length-1-g.log(Z[ye]);if(Se<0)throw new st("Bad error location");l[Se]=Oe.addOrSubtract(l[Se],se[ye])}}runEuclideanAlgorithm(l,f,g){if(l.getDegree()<f.getDegree()){const ye=l;l=f,f=ye}const x=this.field;let w=l,y=f,T=x.getZero(),N=x.getOne();for(;y.getDegree()>=(g/2|0);){let ye=w,Se=T;if(w=y,T=N,w.isZero())throw new st("r_{i-1} was zero");y=ye;let Ne=x.getZero();const Le=w.getCoefficient(w.getDegree()),Ze=x.inverse(Le);for(;y.getDegree()>=w.getDegree()&&!y.isZero();){const _t=y.getDegree()-w.getDegree(),bt=x.multiply(y.getCoefficient(y.getDegree()),Ze);Ne=Ne.addOrSubtract(x.buildMonomial(_t,bt)),y=y.addOrSubtract(w.multiplyByMonomial(_t,bt))}if(N=Ne.multiply(T).addOrSubtract(Se),y.getDegree()>=w.getDegree())throw new Bt("Division algorithm failed to reduce polynomial?")}const D=N.getCoefficient(0);if(D===0)throw new st("sigmaTilde(0) was zero");const H=x.inverse(D),Z=N.multiplyScalar(H),se=y.multiplyScalar(H);return[Z,se]}findErrorLocations(l){const f=l.getDegree();if(f===1)return Int32Array.from([l.getCoefficient(1)]);const g=new Int32Array(f);let x=0;const w=this.field;for(let y=1;y<w.getSize()&&x<f;y++)l.evaluateAt(y)===0&&(g[x]=w.inverse(y),x++);if(x!==f)throw new st("Error locator degree does not match number of roots");return g}findErrorMagnitudes(l,f){const g=f.length,x=new Int32Array(g),w=this.field;for(let y=0;y<g;y++){const T=w.inverse(f[y]);let N=1;for(let D=0;D<g;D++)if(y!==D){const H=w.multiply(f[D],T),Z=(H&1)===0?H|1:H&-2;N=w.multiply(N,Z)}x[y]=w.multiply(l.evaluateAt(T),w.inverse(N)),w.getGeneratorBase()!==0&&(x[y]=w.multiply(x[y],T))}return x}}var ft;(function(J){J[J.UPPER=0]="UPPER",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.DIGIT=3]="DIGIT",J[J.PUNCT=4]="PUNCT",J[J.BINARY=5]="BINARY"})(ft||(ft={}));class Ot{decode(l){this.ddata=l;let f=l.getBits(),g=this.extractBits(f),x=this.correctBits(g),w=Ot.convertBoolArrayToByteArray(x),y=Ot.getEncodedData(x),T=new He(w,y,null,null);return T.setNumBits(x.length),T}static highLevelDecode(l){return this.getEncodedData(l)}static getEncodedData(l){let f=l.length,g=ft.UPPER,x=ft.UPPER,w="",y=0;for(;y<f;)if(x===ft.BINARY){if(f-y<5)break;let T=Ot.readCode(l,y,5);if(y+=5,T===0){if(f-y<11)break;T=Ot.readCode(l,y,11)+31,y+=11}for(let N=0;N<T;N++){if(f-y<8){y=f;break}const D=Ot.readCode(l,y,8);w+=X.castAsNonUtf8Char(D),y+=8}x=g}else{let T=x===ft.DIGIT?4:5;if(f-y<T)break;let N=Ot.readCode(l,y,T);y+=T;let D=Ot.getCharacter(x,N);D.startsWith("CTRL_")?(g=x,x=Ot.getTable(D.charAt(5)),D.charAt(6)==="L"&&(g=x)):(w+=D,x=g)}return w}static getTable(l){switch(l){case"L":return ft.LOWER;case"P":return ft.PUNCT;case"M":return ft.MIXED;case"D":return ft.DIGIT;case"B":return ft.BINARY;case"U":default:return ft.UPPER}}static getCharacter(l,f){switch(l){case ft.UPPER:return Ot.UPPER_TABLE[f];case ft.LOWER:return Ot.LOWER_TABLE[f];case ft.MIXED:return Ot.MIXED_TABLE[f];case ft.PUNCT:return Ot.PUNCT_TABLE[f];case ft.DIGIT:return Ot.DIGIT_TABLE[f];default:throw new Bt("Bad table")}}correctBits(l){let f,g;this.ddata.getNbLayers()<=2?(g=6,f=Oe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(g=8,f=Oe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(g=10,f=Oe.AZTEC_DATA_10):(g=12,f=Oe.AZTEC_DATA_12);let x=this.ddata.getNbDatablocks(),w=l.length/g;if(w<x)throw new M;let y=l.length%g,T=new Int32Array(w);for(let se=0;se<w;se++,y+=g)T[se]=Ot.readCode(l,y,g);try{new kt(f).decode(T,w-x)}catch(se){throw new M(se)}let N=(1<<g)-1,D=0;for(let se=0;se<x;se++){let ye=T[se];if(ye===0||ye===N)throw new M;(ye===1||ye===N-1)&&D++}let H=new Array(x*g-D),Z=0;for(let se=0;se<x;se++){let ye=T[se];if(ye===1||ye===N-1)H.fill(ye>1,Z,Z+g-1),Z+=g-1;else for(let Se=g-1;Se>=0;--Se)H[Z++]=(ye&1<<Se)!==0}return H}extractBits(l){let f=this.ddata.isCompact(),g=this.ddata.getNbLayers(),x=(f?11:14)+g*4,w=new Int32Array(x),y=new Array(this.totalBitsInLayer(g,f));if(f)for(let T=0;T<w.length;T++)w[T]=T;else{let T=x+1+2*Q.truncDivision(Q.truncDivision(x,2)-1,15),N=x/2,D=Q.truncDivision(T,2);for(let H=0;H<N;H++){let Z=H+Q.truncDivision(H,15);w[N-H-1]=D-Z-1,w[N+H]=D+Z+1}}for(let T=0,N=0;T<g;T++){let D=(g-T)*4+(f?9:12),H=T*2,Z=x-1-H;for(let se=0;se<D;se++){let ye=se*2;for(let Se=0;Se<2;Se++)y[N+ye+Se]=l.get(w[H+Se],w[H+se]),y[N+2*D+ye+Se]=l.get(w[H+se],w[Z-Se]),y[N+4*D+ye+Se]=l.get(w[Z-Se],w[Z-se]),y[N+6*D+ye+Se]=l.get(w[Z-se],w[H+Se])}N+=D*8}return y}static readCode(l,f,g){let x=0;for(let w=f;w<f+g;w++)x<<=1,l[w]&&(x|=1);return x}static readByte(l,f){let g=l.length-f;return g>=8?Ot.readCode(l,f,8):Ot.readCode(l,f,g)<<8-g}static convertBoolArrayToByteArray(l){let f=new Uint8Array((l.length+7)/8);for(let g=0;g<f.length;g++)f[g]=Ot.readByte(l,8*g);return f}totalBitsInLayer(l,f){return((f?88:112)+16*l)*l}}Ot.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ot.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ot.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ot.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ot.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class jt{constructor(){}static round(l){return l===NaN?0:l<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:l>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:l+(l<0?-.5:.5)|0}static distance(l,f,g,x){const w=l-g,y=f-x;return Math.sqrt(w*w+y*y)}static sum(l){let f=0;for(let g=0,x=l.length;g!==x;g++){const w=l[g];f+=w}return f}}class mt{static floatToIntBits(l){return l}}mt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class At{constructor(l,f){this.x=l,this.y=f}getX(){return this.x}getY(){return this.y}equals(l){if(l instanceof At){const f=l;return this.x===f.x&&this.y===f.y}return!1}hashCode(){return 31*mt.floatToIntBits(this.x)+mt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(l){const f=this.distance(l[0],l[1]),g=this.distance(l[1],l[2]),x=this.distance(l[0],l[2]);let w,y,T;if(g>=f&&g>=x?(y=l[0],w=l[1],T=l[2]):x>=g&&x>=f?(y=l[1],w=l[0],T=l[2]):(y=l[2],w=l[0],T=l[1]),this.crossProductZ(w,y,T)<0){const N=w;w=T,T=N}l[0]=w,l[1]=y,l[2]=T}static distance(l,f){return jt.distance(l.x,l.y,f.x,f.y)}static crossProductZ(l,f,g){const x=f.x,w=f.y;return(g.x-x)*(l.y-w)-(g.y-w)*(l.x-x)}}class er{constructor(l,f){this.bits=l,this.points=f}getBits(){return this.bits}getPoints(){return this.points}}class Nr extends er{constructor(l,f,g,x,w){super(l,f),this.compact=g,this.nbDatablocks=x,this.nbLayers=w}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ue{constructor(l,f,g,x){this.image=l,this.height=l.getHeight(),this.width=l.getWidth(),f==null&&(f=Ue.INIT_SIZE),g==null&&(g=l.getWidth()/2|0),x==null&&(x=l.getHeight()/2|0);const w=f/2|0;if(this.leftInit=g-w,this.rightInit=g+w,this.upInit=x-w,this.downInit=x+w,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ge}detect(){let l=this.leftInit,f=this.rightInit,g=this.upInit,x=this.downInit,w=!1,y=!0,T=!1,N=!1,D=!1,H=!1,Z=!1;const se=this.width,ye=this.height;for(;y;){y=!1;let Se=!0;for(;(Se||!N)&&f<se;)Se=this.containsBlackPoint(g,x,f,!1),Se?(f++,y=!0,N=!0):N||f++;if(f>=se){w=!0;break}let Ne=!0;for(;(Ne||!D)&&x<ye;)Ne=this.containsBlackPoint(l,f,x,!0),Ne?(x++,y=!0,D=!0):D||x++;if(x>=ye){w=!0;break}let Le=!0;for(;(Le||!H)&&l>=0;)Le=this.containsBlackPoint(g,x,l,!1),Le?(l--,y=!0,H=!0):H||l--;if(l<0){w=!0;break}let Ze=!0;for(;(Ze||!Z)&&g>=0;)Ze=this.containsBlackPoint(l,f,g,!0),Ze?(g--,y=!0,Z=!0):Z||g--;if(g<0){w=!0;break}y&&(T=!0)}if(!w&&T){const Se=f-l;let Ne=null;for(let bt=1;Ne===null&&bt<Se;bt++)Ne=this.getBlackPointOnSegment(l,x-bt,l+bt,x);if(Ne==null)throw new ge;let Le=null;for(let bt=1;Le===null&&bt<Se;bt++)Le=this.getBlackPointOnSegment(l,g+bt,l+bt,g);if(Le==null)throw new ge;let Ze=null;for(let bt=1;Ze===null&&bt<Se;bt++)Ze=this.getBlackPointOnSegment(f,g+bt,f-bt,g);if(Ze==null)throw new ge;let _t=null;for(let bt=1;_t===null&&bt<Se;bt++)_t=this.getBlackPointOnSegment(f,x-bt,f-bt,x);if(_t==null)throw new ge;return this.centerEdges(_t,Ne,Ze,Le)}else throw new ge}getBlackPointOnSegment(l,f,g,x){const w=jt.round(jt.distance(l,f,g,x)),y=(g-l)/w,T=(x-f)/w,N=this.image;for(let D=0;D<w;D++){const H=jt.round(l+D*y),Z=jt.round(f+D*T);if(N.get(H,Z))return new At(H,Z)}return null}centerEdges(l,f,g,x){const w=l.getX(),y=l.getY(),T=f.getX(),N=f.getY(),D=g.getX(),H=g.getY(),Z=x.getX(),se=x.getY(),ye=Ue.CORR;return w<this.width/2?[new At(Z-ye,se+ye),new At(T+ye,N+ye),new At(D-ye,H-ye),new At(w+ye,y-ye)]:[new At(Z+ye,se+ye),new At(T+ye,N-ye),new At(D-ye,H+ye),new At(w-ye,y-ye)]}containsBlackPoint(l,f,g,x){const w=this.image;if(x){for(let y=l;y<=f;y++)if(w.get(y,g))return!0}else for(let y=l;y<=f;y++)if(w.get(g,y))return!0;return!1}}Ue.INIT_SIZE=10,Ue.CORR=1;class It{static checkAndNudgePoints(l,f){const g=l.getWidth(),x=l.getHeight();let w=!0;for(let y=0;y<f.length&&w;y+=2){const T=Math.floor(f[y]),N=Math.floor(f[y+1]);if(T<-1||T>g||N<-1||N>x)throw new ge;w=!1,T===-1?(f[y]=0,w=!0):T===g&&(f[y]=g-1,w=!0),N===-1?(f[y+1]=0,w=!0):N===x&&(f[y+1]=x-1,w=!0)}w=!0;for(let y=f.length-2;y>=0&&w;y-=2){const T=Math.floor(f[y]),N=Math.floor(f[y+1]);if(T<-1||T>g||N<-1||N>x)throw new ge;w=!1,T===-1?(f[y]=0,w=!0):T===g&&(f[y]=g-1,w=!0),N===-1?(f[y+1]=0,w=!0):N===x&&(f[y+1]=x-1,w=!0)}}}class Lt{constructor(l,f,g,x,w,y,T,N,D){this.a11=l,this.a21=f,this.a31=g,this.a12=x,this.a22=w,this.a32=y,this.a13=T,this.a23=N,this.a33=D}static quadrilateralToQuadrilateral(l,f,g,x,w,y,T,N,D,H,Z,se,ye,Se,Ne,Le){const Ze=Lt.quadrilateralToSquare(l,f,g,x,w,y,T,N);return Lt.squareToQuadrilateral(D,H,Z,se,ye,Se,Ne,Le).times(Ze)}transformPoints(l){const f=l.length,g=this.a11,x=this.a12,w=this.a13,y=this.a21,T=this.a22,N=this.a23,D=this.a31,H=this.a32,Z=this.a33;for(let se=0;se<f;se+=2){const ye=l[se],Se=l[se+1],Ne=w*ye+N*Se+Z;l[se]=(g*ye+y*Se+D)/Ne,l[se+1]=(x*ye+T*Se+H)/Ne}}transformPointsWithValues(l,f){const g=this.a11,x=this.a12,w=this.a13,y=this.a21,T=this.a22,N=this.a23,D=this.a31,H=this.a32,Z=this.a33,se=l.length;for(let ye=0;ye<se;ye++){const Se=l[ye],Ne=f[ye],Le=w*Se+N*Ne+Z;l[ye]=(g*Se+y*Ne+D)/Le,f[ye]=(x*Se+T*Ne+H)/Le}}static squareToQuadrilateral(l,f,g,x,w,y,T,N){const D=l-g+w-T,H=f-x+y-N;if(D===0&&H===0)return new Lt(g-l,w-g,l,x-f,y-x,f,0,0,1);{const Z=g-w,se=T-w,ye=x-y,Se=N-y,Ne=Z*Se-se*ye,Le=(D*Se-se*H)/Ne,Ze=(Z*H-D*ye)/Ne;return new Lt(g-l+Le*g,T-l+Ze*T,l,x-f+Le*x,N-f+Ze*N,f,Le,Ze,1)}}static quadrilateralToSquare(l,f,g,x,w,y,T,N){return Lt.squareToQuadrilateral(l,f,g,x,w,y,T,N).buildAdjoint()}buildAdjoint(){return new Lt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(l){return new Lt(this.a11*l.a11+this.a21*l.a12+this.a31*l.a13,this.a11*l.a21+this.a21*l.a22+this.a31*l.a23,this.a11*l.a31+this.a21*l.a32+this.a31*l.a33,this.a12*l.a11+this.a22*l.a12+this.a32*l.a13,this.a12*l.a21+this.a22*l.a22+this.a32*l.a23,this.a12*l.a31+this.a22*l.a32+this.a32*l.a33,this.a13*l.a11+this.a23*l.a12+this.a33*l.a13,this.a13*l.a21+this.a23*l.a22+this.a33*l.a23,this.a13*l.a31+this.a23*l.a32+this.a33*l.a33)}}class Zt extends It{sampleGrid(l,f,g,x,w,y,T,N,D,H,Z,se,ye,Se,Ne,Le,Ze,_t,bt){const xt=Lt.quadrilateralToQuadrilateral(x,w,y,T,N,D,H,Z,se,ye,Se,Ne,Le,Ze,_t,bt);return this.sampleGridWithTransform(l,f,g,xt)}sampleGridWithTransform(l,f,g,x){if(f<=0||g<=0)throw new ge;const w=new Ie(f,g),y=new Float32Array(2*f);for(let T=0;T<g;T++){const N=y.length,D=T+.5;for(let H=0;H<N;H+=2)y[H]=H/2+.5,y[H+1]=D;x.transformPoints(y),It.checkAndNudgePoints(l,y);try{for(let H=0;H<N;H+=2)l.get(Math.floor(y[H]),Math.floor(y[H+1]))&&w.set(H/2,T)}catch{throw new ge}}return w}}class cr{static setGridSampler(l){cr.gridSampler=l}static getInstance(){return cr.gridSampler}}cr.gridSampler=new Zt;class hr{constructor(l,f){this.x=l,this.y=f}toResultPoint(){return new At(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ht{constructor(l){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=l}detect(){return this.detectMirror(!1)}detectMirror(l){let f=this.getMatrixCenter(),g=this.getBullsEyeCorners(f);if(l){let y=g[0];g[0]=g[2],g[2]=y}this.extractParameters(g);let x=this.sampleGrid(this.image,g[this.shift%4],g[(this.shift+1)%4],g[(this.shift+2)%4],g[(this.shift+3)%4]),w=this.getMatrixCornerPoints(g);return new Nr(x,w,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(l){if(!this.isValidPoint(l[0])||!this.isValidPoint(l[1])||!this.isValidPoint(l[2])||!this.isValidPoint(l[3]))throw new ge;let f=2*this.nbCenterLayers,g=new Int32Array([this.sampleLine(l[0],l[1],f),this.sampleLine(l[1],l[2],f),this.sampleLine(l[2],l[3],f),this.sampleLine(l[3],l[0],f)]);this.shift=this.getRotation(g,f);let x=0;for(let y=0;y<4;y++){let T=g[(this.shift+y)%4];this.compact?(x<<=7,x+=T>>1&127):(x<<=10,x+=(T>>2&992)+(T>>1&31))}let w=this.getCorrectedParameterData(x,this.compact);this.compact?(this.nbLayers=(w>>6)+1,this.nbDataBlocks=(w&63)+1):(this.nbLayers=(w>>11)+1,this.nbDataBlocks=(w&2047)+1)}getRotation(l,f){let g=0;l.forEach((x,w,y)=>{let T=(x>>f-2<<1)+(x&1);g=(g<<3)+T}),g=((g&1)<<11)+(g>>1);for(let x=0;x<4;x++)if(Q.bitCount(g^this.EXPECTED_CORNER_BITS[x])<=2)return x;throw new ge}getCorrectedParameterData(l,f){let g,x;f?(g=7,x=2):(g=10,x=4);let w=g-x,y=new Int32Array(g);for(let N=g-1;N>=0;--N)y[N]=l&15,l>>=4;try{new kt(Oe.AZTEC_PARAM).decode(y,w)}catch{throw new ge}let T=0;for(let N=0;N<x;N++)T=(T<<4)+y[N];return T}getBullsEyeCorners(l){let f=l,g=l,x=l,w=l,y=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let Z=this.getFirstDifferent(f,y,1,-1),se=this.getFirstDifferent(g,y,1,1),ye=this.getFirstDifferent(x,y,-1,1),Se=this.getFirstDifferent(w,y,-1,-1);if(this.nbCenterLayers>2){let Ne=this.distancePoint(Se,Z)*this.nbCenterLayers/(this.distancePoint(w,f)*(this.nbCenterLayers+2));if(Ne<.75||Ne>1.25||!this.isWhiteOrBlackRectangle(Z,se,ye,Se))break}f=Z,g=se,x=ye,w=Se,y=!y}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ge;this.compact=this.nbCenterLayers===5;let T=new At(f.getX()+.5,f.getY()-.5),N=new At(g.getX()+.5,g.getY()+.5),D=new At(x.getX()-.5,x.getY()+.5),H=new At(w.getX()-.5,w.getY()-.5);return this.expandSquare([T,N,D,H],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let l,f,g,x;try{let T=new Ue(this.image).detect();l=T[0],f=T[1],g=T[2],x=T[3]}catch{let N=this.image.getWidth()/2,D=this.image.getHeight()/2;l=this.getFirstDifferent(new hr(N+7,D-7),!1,1,-1).toResultPoint(),f=this.getFirstDifferent(new hr(N+7,D+7),!1,1,1).toResultPoint(),g=this.getFirstDifferent(new hr(N-7,D+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new hr(N-7,D-7),!1,-1,-1).toResultPoint()}let w=jt.round((l.getX()+x.getX()+f.getX()+g.getX())/4),y=jt.round((l.getY()+x.getY()+f.getY()+g.getY())/4);try{let T=new Ue(this.image,15,w,y).detect();l=T[0],f=T[1],g=T[2],x=T[3]}catch{l=this.getFirstDifferent(new hr(w+7,y-7),!1,1,-1).toResultPoint(),f=this.getFirstDifferent(new hr(w+7,y+7),!1,1,1).toResultPoint(),g=this.getFirstDifferent(new hr(w-7,y+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new hr(w-7,y-7),!1,-1,-1).toResultPoint()}return w=jt.round((l.getX()+x.getX()+f.getX()+g.getX())/4),y=jt.round((l.getY()+x.getY()+f.getY()+g.getY())/4),new hr(w,y)}getMatrixCornerPoints(l){return this.expandSquare(l,2*this.nbCenterLayers,this.getDimension())}sampleGrid(l,f,g,x,w){let y=cr.getInstance(),T=this.getDimension(),N=T/2-this.nbCenterLayers,D=T/2+this.nbCenterLayers;return y.sampleGrid(l,T,T,N,N,D,N,D,D,N,D,f.getX(),f.getY(),g.getX(),g.getY(),x.getX(),x.getY(),w.getX(),w.getY())}sampleLine(l,f,g){let x=0,w=this.distanceResultPoint(l,f),y=w/g,T=l.getX(),N=l.getY(),D=y*(f.getX()-l.getX())/w,H=y*(f.getY()-l.getY())/w;for(let Z=0;Z<g;Z++)this.image.get(jt.round(T+Z*D),jt.round(N+Z*H))&&(x|=1<<g-Z-1);return x}isWhiteOrBlackRectangle(l,f,g,x){let w=3;l=new hr(l.getX()-w,l.getY()+w),f=new hr(f.getX()-w,f.getY()-w),g=new hr(g.getX()+w,g.getY()-w),x=new hr(x.getX()+w,x.getY()+w);let y=this.getColor(x,l);if(y===0)return!1;let T=this.getColor(l,f);return T!==y||(T=this.getColor(f,g),T!==y)?!1:(T=this.getColor(g,x),T===y)}getColor(l,f){let g=this.distancePoint(l,f),x=(f.getX()-l.getX())/g,w=(f.getY()-l.getY())/g,y=0,T=l.getX(),N=l.getY(),D=this.image.get(l.getX(),l.getY()),H=Math.ceil(g);for(let se=0;se<H;se++)T+=x,N+=w,this.image.get(jt.round(T),jt.round(N))!==D&&y++;let Z=y/g;return Z>.1&&Z<.9?0:Z<=.1===D?1:-1}getFirstDifferent(l,f,g,x){let w=l.getX()+g,y=l.getY()+x;for(;this.isValid(w,y)&&this.image.get(w,y)===f;)w+=g,y+=x;for(w-=g,y-=x;this.isValid(w,y)&&this.image.get(w,y)===f;)w+=g;for(w-=g;this.isValid(w,y)&&this.image.get(w,y)===f;)y+=x;return y-=x,new hr(w,y)}expandSquare(l,f,g){let x=g/(2*f),w=l[0].getX()-l[2].getX(),y=l[0].getY()-l[2].getY(),T=(l[0].getX()+l[2].getX())/2,N=(l[0].getY()+l[2].getY())/2,D=new At(T+x*w,N+x*y),H=new At(T-x*w,N-x*y);w=l[1].getX()-l[3].getX(),y=l[1].getY()-l[3].getY(),T=(l[1].getX()+l[3].getX())/2,N=(l[1].getY()+l[3].getY())/2;let Z=new At(T+x*w,N+x*y),se=new At(T-x*w,N-x*y);return[D,Z,H,se]}isValid(l,f){return l>=0&&l<this.image.getWidth()&&f>0&&f<this.image.getHeight()}isValidPoint(l){let f=jt.round(l.getX()),g=jt.round(l.getY());return this.isValid(f,g)}distancePoint(l,f){return jt.distance(l.getX(),l.getY(),f.getX(),f.getY())}distanceResultPoint(l,f){return jt.distance(l.getX(),l.getY(),f.getX(),f.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Q.truncDivision(this.nbLayers-4,8)+1)+15}}class mr{decode(l,f=null){let g=null,x=new Ht(l.getBlackMatrix()),w=null,y=null;try{let H=x.detectMirror(!1);w=H.getPoints(),this.reportFoundResultPoints(f,w),y=new Ot().decode(H)}catch(H){g=H}if(y==null)try{let H=x.detectMirror(!0);w=H.getPoints(),this.reportFoundResultPoints(f,w),y=new Ot().decode(H)}catch(H){throw g??H}let T=new oe(y.getText(),y.getRawBytes(),y.getNumBits(),w,Ee.AZTEC,k.currentTimeMillis()),N=y.getByteSegments();N!=null&&T.putMetadata(Fe.BYTE_SEGMENTS,N);let D=y.getECLevel();return D!=null&&T.putMetadata(Fe.ERROR_CORRECTION_LEVEL,D),T}reportFoundResultPoints(l,f){if(l!=null){let g=l.get(z.NEED_RESULT_POINT_CALLBACK);g!=null&&f.forEach((x,w,y)=>{g.foundPossibleResultPoint(x)})}}reset(){}}class pt extends ce{constructor(l=500){super(new mr,l)}}class yt{decode(l,f){try{return this.doDecode(l,f)}catch{if(f&&f.get(z.TRY_HARDER)===!0&&l.isRotateSupported()){const w=l.rotateCounterClockwise(),y=this.doDecode(w,f),T=y.getResultMetadata();let N=270;T!==null&&T.get(Fe.ORIENTATION)===!0&&(N=N+T.get(Fe.ORIENTATION)%360),y.putMetadata(Fe.ORIENTATION,N);const D=y.getResultPoints();if(D!==null){const H=w.getHeight();for(let Z=0;Z<D.length;Z++)D[Z]=new At(H-D[Z].getY()-1,D[Z].getX())}return y}else throw new ge}}reset(){}doDecode(l,f){const g=l.getWidth(),x=l.getHeight();let w=new te(g);const y=f&&f.get(z.TRY_HARDER)===!0,T=Math.max(1,x>>(y?8:5));let N;y?N=x:N=15;const D=Math.trunc(x/2);for(let H=0;H<N;H++){const Z=Math.trunc((H+1)/2),se=(H&1)===0,ye=D+T*(se?Z:-Z);if(ye<0||ye>=x)break;try{w=l.getBlackRow(ye,w)}catch{continue}for(let Se=0;Se<2;Se++){if(Se===1&&(w.reverse(),f&&f.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const Ne=new Map;f.forEach((Le,Ze)=>Ne.set(Ze,Le)),Ne.delete(z.NEED_RESULT_POINT_CALLBACK),f=Ne}try{const Ne=this.decodeRow(ye,w,f);if(Se===1){Ne.putMetadata(Fe.ORIENTATION,180);const Le=Ne.getResultPoints();Le!==null&&(Le[0]=new At(g-Le[0].getX()-1,Le[0].getY()),Le[1]=new At(g-Le[1].getX()-1,Le[1].getY()))}return Ne}catch{}}}throw new ge}static recordPattern(l,f,g){const x=g.length;for(let D=0;D<x;D++)g[D]=0;const w=l.getSize();if(f>=w)throw new ge;let y=!l.get(f),T=0,N=f;for(;N<w;){if(l.get(N)!==y)g[T]++;else{if(++T===x)break;g[T]=1,y=!y}N++}if(!(T===x||T===x-1&&N===w))throw new ge}static recordPatternInReverse(l,f,g){let x=g.length,w=l.get(f);for(;f>0&&x>=0;)l.get(--f)!==w&&(x--,w=!w);if(x>=0)throw new ge;yt.recordPattern(l,f+1,g)}static patternMatchVariance(l,f,g){const x=l.length;let w=0,y=0;for(let D=0;D<x;D++)w+=l[D],y+=f[D];if(w<y)return Number.POSITIVE_INFINITY;const T=w/y;g*=T;let N=0;for(let D=0;D<x;D++){const H=l[D],Z=f[D]*T,se=H>Z?H-Z:Z-H;if(se>g)return Number.POSITIVE_INFINITY;N+=se}return N/w}}class _e extends yt{static findStartPattern(l){const f=l.getSize(),g=l.getNextSet(0);let x=0,w=Int32Array.from([0,0,0,0,0,0]),y=g,T=!1;const N=6;for(let D=g;D<f;D++)if(l.get(D)!==T)w[x]++;else{if(x===N-1){let H=_e.MAX_AVG_VARIANCE,Z=-1;for(let se=_e.CODE_START_A;se<=_e.CODE_START_C;se++){const ye=yt.patternMatchVariance(w,_e.CODE_PATTERNS[se],_e.MAX_INDIVIDUAL_VARIANCE);ye<H&&(H=ye,Z=se)}if(Z>=0&&l.isRange(Math.max(0,y-(D-y)/2),y,!1))return Int32Array.from([y,D,Z]);y+=w[0]+w[1],w=w.slice(2,w.length-1),w[x-1]=0,w[x]=0,x--}else x++;w[x]=1,T=!T}throw new ge}static decodeCode(l,f,g){yt.recordPattern(l,g,f);let x=_e.MAX_AVG_VARIANCE,w=-1;for(let y=0;y<_e.CODE_PATTERNS.length;y++){const T=_e.CODE_PATTERNS[y],N=this.patternMatchVariance(f,T,_e.MAX_INDIVIDUAL_VARIANCE);N<x&&(x=N,w=y)}if(w>=0)return w;throw new ge}decodeRow(l,f,g){const x=g&&g.get(z.ASSUME_GS1)===!0,w=_e.findStartPattern(f),y=w[2];let T=0;const N=new Uint8Array(20);N[T++]=y;let D;switch(y){case _e.CODE_START_A:D=_e.CODE_CODE_A;break;case _e.CODE_START_B:D=_e.CODE_CODE_B;break;case _e.CODE_START_C:D=_e.CODE_CODE_C;break;default:throw new M}let H=!1,Z=!1,se="",ye=w[0],Se=w[1];const Ne=Int32Array.from([0,0,0,0,0,0]);let Le=0,Ze=0,_t=y,bt=0,xt=!0,Dr=!1,wr=!1;for(;!H;){const qo=Z;switch(Z=!1,Le=Ze,Ze=_e.decodeCode(f,Ne,Se),N[T++]=Ze,Ze!==_e.CODE_STOP&&(xt=!0),Ze!==_e.CODE_STOP&&(bt++,_t+=bt*Ze),ye=Se,Se+=Ne.reduce((Wd,b0)=>Wd+b0,0),Ze){case _e.CODE_START_A:case _e.CODE_START_B:case _e.CODE_START_C:throw new M}switch(D){case _e.CODE_CODE_A:if(Ze<64)wr===Dr?se+=String.fromCharCode(32+Ze):se+=String.fromCharCode(32+Ze+128),wr=!1;else if(Ze<96)wr===Dr?se+=String.fromCharCode(Ze-64):se+=String.fromCharCode(Ze+64),wr=!1;else switch(Ze!==_e.CODE_STOP&&(xt=!1),Ze){case _e.CODE_FNC_1:x&&(se.length===0?se+="]C1":se+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_A:!Dr&&wr?(Dr=!0,wr=!1):Dr&&wr?(Dr=!1,wr=!1):wr=!0;break;case _e.CODE_SHIFT:Z=!0,D=_e.CODE_CODE_B;break;case _e.CODE_CODE_B:D=_e.CODE_CODE_B;break;case _e.CODE_CODE_C:D=_e.CODE_CODE_C;break;case _e.CODE_STOP:H=!0;break}break;case _e.CODE_CODE_B:if(Ze<96)wr===Dr?se+=String.fromCharCode(32+Ze):se+=String.fromCharCode(32+Ze+128),wr=!1;else switch(Ze!==_e.CODE_STOP&&(xt=!1),Ze){case _e.CODE_FNC_1:x&&(se.length===0?se+="]C1":se+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_B:!Dr&&wr?(Dr=!0,wr=!1):Dr&&wr?(Dr=!1,wr=!1):wr=!0;break;case _e.CODE_SHIFT:Z=!0,D=_e.CODE_CODE_A;break;case _e.CODE_CODE_A:D=_e.CODE_CODE_A;break;case _e.CODE_CODE_C:D=_e.CODE_CODE_C;break;case _e.CODE_STOP:H=!0;break}break;case _e.CODE_CODE_C:if(Ze<100)Ze<10&&(se+="0"),se+=Ze;else switch(Ze!==_e.CODE_STOP&&(xt=!1),Ze){case _e.CODE_FNC_1:x&&(se.length===0?se+="]C1":se+="");break;case _e.CODE_CODE_A:D=_e.CODE_CODE_A;break;case _e.CODE_CODE_B:D=_e.CODE_CODE_B;break;case _e.CODE_STOP:H=!0;break}break}qo&&(D=D===_e.CODE_CODE_A?_e.CODE_CODE_B:_e.CODE_CODE_A)}const Zn=Se-ye;if(Se=f.getNextUnset(Se),!f.isRange(Se,Math.min(f.getSize(),Se+(Se-ye)/2),!1))throw new ge;if(_t-=bt*Le,_t%103!==Le)throw new I;const Ks=se.length;if(Ks===0)throw new ge;Ks>0&&xt&&(D===_e.CODE_CODE_C?se=se.substring(0,Ks-2):se=se.substring(0,Ks-1));const Gi=(w[1]+w[0])/2,un=ye+Zn/2,_i=N.length,bs=new Uint8Array(_i);for(let qo=0;qo<_i;qo++)bs[qo]=N[qo];const Ol=[new At(Gi,l),new At(un,l)];return new oe(se,bs,0,Ol,Ee.CODE_128,new Date().getTime())}}_e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],_e.MAX_AVG_VARIANCE=.25,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.CODE_SHIFT=98,_e.CODE_CODE_C=99,_e.CODE_CODE_B=100,_e.CODE_CODE_A=101,_e.CODE_FNC_1=102,_e.CODE_FNC_2=97,_e.CODE_FNC_3=96,_e.CODE_FNC_4_A=101,_e.CODE_FNC_4_B=100,_e.CODE_START_A=103,_e.CODE_START_B=104,_e.CODE_START_C=105,_e.CODE_STOP=106;class Nt extends yt{constructor(l=!1,f=!1){super(),this.usingCheckDigit=l,this.extendedMode=f,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(l,f,g){let x=this.counters;x.fill(0),this.decodeRowResult="";let w=Nt.findAsteriskPattern(f,x),y=f.getNextSet(w[1]),T=f.getSize(),N,D;do{Nt.recordPattern(f,y,x);let Ne=Nt.toNarrowWidePattern(x);if(Ne<0)throw new ge;N=Nt.patternToChar(Ne),this.decodeRowResult+=N,D=y;for(let Le of x)y+=Le;y=f.getNextSet(y)}while(N!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let H=0;for(let Ne of x)H+=Ne;let Z=y-D-H;if(y!==T&&Z*2<H)throw new ge;if(this.usingCheckDigit){let Ne=this.decodeRowResult.length-1,Le=0;for(let Ze=0;Ze<Ne;Ze++)Le+=Nt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ze));if(this.decodeRowResult.charAt(Ne)!==Nt.ALPHABET_STRING.charAt(Le%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,Ne)}if(this.decodeRowResult.length===0)throw new ge;let se;this.extendedMode?se=Nt.decodeExtended(this.decodeRowResult):se=this.decodeRowResult;let ye=(w[1]+w[0])/2,Se=D+H/2;return new oe(se,null,0,[new At(ye,l),new At(Se,l)],Ee.CODE_39,new Date().getTime())}static findAsteriskPattern(l,f){let g=l.getSize(),x=l.getNextSet(0),w=0,y=x,T=!1,N=f.length;for(let D=x;D<g;D++)if(l.get(D)!==T)f[w]++;else{if(w===N-1){if(this.toNarrowWidePattern(f)===Nt.ASTERISK_ENCODING&&l.isRange(Math.max(0,y-Math.floor((D-y)/2)),y,!1))return[y,D];y+=f[0]+f[1],f.copyWithin(0,2,2+w-1),f[w-1]=0,f[w]=0,w--}else w++;f[w]=1,T=!T}throw new ge}static toNarrowWidePattern(l){let f=l.length,g=0,x;do{let w=2147483647;for(let N of l)N<w&&N>g&&(w=N);g=w,x=0;let y=0,T=0;for(let N=0;N<f;N++){let D=l[N];D>g&&(T|=1<<f-1-N,x++,y+=D)}if(x===3){for(let N=0;N<f&&x>0;N++){let D=l[N];if(D>g&&(x--,D*2>=y))return-1}return T}}while(x>3);return-1}static patternToChar(l){for(let f=0;f<Nt.CHARACTER_ENCODINGS.length;f++)if(Nt.CHARACTER_ENCODINGS[f]===l)return Nt.ALPHABET_STRING.charAt(f);if(l===Nt.ASTERISK_ENCODING)return"*";throw new ge}static decodeExtended(l){let f=l.length,g="";for(let x=0;x<f;x++){let w=l.charAt(x);if(w==="+"||w==="$"||w==="%"||w==="/"){let y=l.charAt(x+1),T="\0";switch(w){case"+":if(y>="A"&&y<="Z")T=String.fromCharCode(y.charCodeAt(0)+32);else throw new M;break;case"$":if(y>="A"&&y<="Z")T=String.fromCharCode(y.charCodeAt(0)-64);else throw new M;break;case"%":if(y>="A"&&y<="E")T=String.fromCharCode(y.charCodeAt(0)-38);else if(y>="F"&&y<="J")T=String.fromCharCode(y.charCodeAt(0)-11);else if(y>="K"&&y<="O")T=String.fromCharCode(y.charCodeAt(0)+16);else if(y>="P"&&y<="T")T=String.fromCharCode(y.charCodeAt(0)+43);else if(y==="U")T="\0";else if(y==="V")T="@";else if(y==="W")T="`";else if(y==="X"||y==="Y"||y==="Z")T="";else throw new M;break;case"/":if(y>="A"&&y<="O")T=String.fromCharCode(y.charCodeAt(0)-32);else if(y==="Z")T=":";else throw new M;break}g+=T,x++}else g+=w}return g}}Nt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Nt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Nt.ASTERISK_ENCODING=148;class Re extends yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(l,f,g){let x=this.decodeStart(f),w=this.decodeEnd(f),y=new G;Re.decodeMiddle(f,x[1],w[0],y);let T=y.toString(),N=null;g!=null&&(N=g.get(z.ALLOWED_LENGTHS)),N==null&&(N=Re.DEFAULT_ALLOWED_LENGTHS);let D=T.length,H=!1,Z=0;for(let Se of N){if(D===Se){H=!0;break}Se>Z&&(Z=Se)}if(!H&&D>Z&&(H=!0),!H)throw new M;const se=[new At(x[1],l),new At(w[0],l)];return new oe(T,null,0,se,Ee.ITF,new Date().getTime())}static decodeMiddle(l,f,g,x){let w=new Int32Array(10),y=new Int32Array(5),T=new Int32Array(5);for(w.fill(0),y.fill(0),T.fill(0);f<g;){yt.recordPattern(l,f,w);for(let D=0;D<5;D++){let H=2*D;y[D]=w[H],T[D]=w[H+1]}let N=Re.decodeDigit(y);x.append(N.toString()),N=this.decodeDigit(T),x.append(N.toString()),w.forEach(function(D){f+=D})}}decodeStart(l){let f=Re.skipWhiteSpace(l),g=Re.findGuardPattern(l,f,Re.START_PATTERN);return this.narrowLineWidth=(g[1]-g[0])/4,this.validateQuietZone(l,g[0]),g}validateQuietZone(l,f){let g=this.narrowLineWidth*10;g=g<f?g:f;for(let x=f-1;g>0&&x>=0&&!l.get(x);x--)g--;if(g!==0)throw new ge}static skipWhiteSpace(l){const f=l.getSize(),g=l.getNextSet(0);if(g===f)throw new ge;return g}decodeEnd(l){l.reverse();try{let f=Re.skipWhiteSpace(l),g;try{g=Re.findGuardPattern(l,f,Re.END_PATTERN_REVERSED[0])}catch(w){w instanceof ge&&(g=Re.findGuardPattern(l,f,Re.END_PATTERN_REVERSED[1]))}this.validateQuietZone(l,g[0]);let x=g[0];return g[0]=l.getSize()-g[1],g[1]=l.getSize()-x,g}finally{l.reverse()}}static findGuardPattern(l,f,g){let x=g.length,w=new Int32Array(x),y=l.getSize(),T=!1,N=0,D=f;w.fill(0);for(let H=f;H<y;H++)if(l.get(H)!==T)w[N]++;else{if(N===x-1){if(yt.patternMatchVariance(w,g,Re.MAX_INDIVIDUAL_VARIANCE)<Re.MAX_AVG_VARIANCE)return[D,H];D+=w[0]+w[1],k.arraycopy(w,2,w,0,N-1),w[N-1]=0,w[N]=0,N--}else N++;w[N]=1,T=!T}throw new ge}static decodeDigit(l){let f=Re.MAX_AVG_VARIANCE,g=-1,x=Re.PATTERNS.length;for(let w=0;w<x;w++){let y=Re.PATTERNS[w],T=yt.patternMatchVariance(l,y,Re.MAX_INDIVIDUAL_VARIANCE);T<f?(f=T,g=w):T===f&&(g=-1)}if(g>=0)return g%10;throw new ge}}Re.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Re.MAX_AVG_VARIANCE=.38,Re.MAX_INDIVIDUAL_VARIANCE=.5,Re.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Re.START_PATTERN=Int32Array.from([1,1,1,1]),Re.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Dt extends yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(l){let f=!1,g,x=0,w=Int32Array.from([0,0,0]);for(;!f;){w=Int32Array.from([0,0,0]),g=Dt.findGuardPattern(l,x,!1,this.START_END_PATTERN,w);let y=g[0];x=g[1];let T=y-(x-y);T>=0&&(f=l.isRange(T,y,!1))}return g}static checkChecksum(l){return Dt.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let f=l.length;if(f===0)return!1;let g=parseInt(l.charAt(f-1),10);return Dt.getStandardUPCEANChecksum(l.substring(0,f-1))===g}static getStandardUPCEANChecksum(l){let f=l.length,g=0;for(let x=f-1;x>=0;x-=2){let w=l.charAt(x).charCodeAt(0)-48;if(w<0||w>9)throw new M;g+=w}g*=3;for(let x=f-2;x>=0;x-=2){let w=l.charAt(x).charCodeAt(0)-48;if(w<0||w>9)throw new M;g+=w}return(1e3-g)%10}static decodeEnd(l,f){return Dt.findGuardPattern(l,f,!1,Dt.START_END_PATTERN,new Int32Array(Dt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(l,f,g,x){return this.findGuardPattern(l,f,g,x,new Int32Array(x.length))}static findGuardPattern(l,f,g,x,w){let y=l.getSize();f=g?l.getNextUnset(f):l.getNextSet(f);let T=0,N=f,D=x.length,H=g;for(let Z=f;Z<y;Z++)if(l.get(Z)!==H)w[T]++;else{if(T===D-1){if(yt.patternMatchVariance(w,x,Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return Int32Array.from([N,Z]);N+=w[0]+w[1];let se=w.slice(2,w.length-1);for(let ye=0;ye<T-1;ye++)w[ye]=se[ye];w[T-1]=0,w[T]=0,T--}else T++;w[T]=1,H=!H}throw new ge}static decodeDigit(l,f,g,x){this.recordPattern(l,g,f);let w=this.MAX_AVG_VARIANCE,y=-1,T=x.length;for(let N=0;N<T;N++){let D=x[N],H=yt.patternMatchVariance(f,D,Dt.MAX_INDIVIDUAL_VARIANCE);H<w&&(w=H,y=N)}if(y>=0)return y;throw new ge}}Dt.MAX_AVG_VARIANCE=.48,Dt.MAX_INDIVIDUAL_VARIANCE=.7,Dt.START_END_PATTERN=Int32Array.from([1,1,1]),Dt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Dt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class rr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,f,g){let x=this.decodeRowStringBuffer,w=this.decodeMiddle(f,g,x),y=x.toString(),T=rr.parseExtensionString(y),N=[new At((g[0]+g[1])/2,l),new At(w,l)],D=new oe(y,null,0,N,Ee.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&D.putAllMetadata(T),D}decodeMiddle(l,f,g){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),y=f[1],T=0;for(let D=0;D<5&&y<w;D++){let H=Dt.decodeDigit(l,x,y,Dt.L_AND_G_PATTERNS);g+=String.fromCharCode(48+H%10);for(let Z of x)y+=Z;H>=10&&(T|=1<<4-D),D!==4&&(y=l.getNextSet(y),y=l.getNextUnset(y))}if(g.length!==5)throw new ge;let N=this.determineCheckDigit(T);if(rr.extensionChecksum(g.toString())!==N)throw new ge;return y}static extensionChecksum(l){let f=l.length,g=0;for(let x=f-2;x>=0;x-=2)g+=l.charAt(x).charCodeAt(0)-48;g*=3;for(let x=f-1;x>=0;x-=2)g+=l.charAt(x).charCodeAt(0)-48;return g*=3,g%10}determineCheckDigit(l){for(let f=0;f<10;f++)if(l===this.CHECK_DIGIT_ENCODINGS[f])return f;throw new ge}static parseExtensionString(l){if(l.length!==5)return null;let f=rr.parseExtension5String(l);return f==null?null:new Map([[Fe.SUGGESTED_PRICE,f]])}static parseExtension5String(l){let f;switch(l.charAt(0)){case"0":f="";break;case"5":f="$";break;case"9":switch(l){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}f="";break;default:f="";break}let g=parseInt(l.substring(1)),x=(g/100).toString(),w=g%100,y=w<10?"0"+w:w.toString();return f+x+"."+y}}class et{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,f,g){let x=this.decodeRowStringBuffer,w=this.decodeMiddle(f,g,x),y=x.toString(),T=et.parseExtensionString(y),N=[new At((g[0]+g[1])/2,l),new At(w,l)],D=new oe(y,null,0,N,Ee.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&D.putAllMetadata(T),D}decodeMiddle(l,f,g){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),y=f[1],T=0;for(let N=0;N<2&&y<w;N++){let D=Dt.decodeDigit(l,x,y,Dt.L_AND_G_PATTERNS);g+=String.fromCharCode(48+D%10);for(let H of x)y+=H;D>=10&&(T|=1<<1-N),N!==1&&(y=l.getNextSet(y),y=l.getNextUnset(y))}if(g.length!==2)throw new ge;if(parseInt(g.toString())%4!==T)throw new ge;return y}static parseExtensionString(l){return l.length!==2?null:new Map([[Fe.ISSUE_NUMBER,parseInt(l)]])}}class Rt{static decodeRow(l,f,g){let x=Dt.findGuardPattern(f,g,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new rr().decodeRow(l,f,x)}catch{return new et().decodeRow(l,f,x)}}}Rt.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Mt extends Dt{constructor(){super(),this.decodeRowStringBuffer="",Mt.L_AND_G_PATTERNS=Mt.L_PATTERNS.map(l=>Int32Array.from(l));for(let l=10;l<20;l++){let f=Mt.L_PATTERNS[l-10],g=new Int32Array(f.length);for(let x=0;x<f.length;x++)g[x]=f[f.length-x-1];Mt.L_AND_G_PATTERNS[l]=g}}decodeRow(l,f,g){let x=Mt.findStartGuardPattern(f),w=g==null?null:g.get(z.NEED_RESULT_POINT_CALLBACK);if(w!=null){const xt=new At((x[0]+x[1])/2,l);w.foundPossibleResultPoint(xt)}let y=this.decodeMiddle(f,x,this.decodeRowStringBuffer),T=y.rowOffset,N=y.resultString;if(w!=null){const xt=new At(T,l);w.foundPossibleResultPoint(xt)}let D=this.decodeEnd(f,T);if(w!=null){const xt=new At((D[0]+D[1])/2,l);w.foundPossibleResultPoint(xt)}let H=D[1],Z=H+(H-D[0]);if(Z>=f.getSize()||!f.isRange(H,Z,!1))throw new ge;let se=N.toString();if(se.length<8)throw new M;if(!Mt.checkChecksum(se))throw new I;let ye=(x[1]+x[0])/2,Se=(D[1]+D[0])/2,Ne=this.getBarcodeFormat(),Le=[new At(ye,l),new At(Se,l)],Ze=new oe(se,null,0,Le,Ne,new Date().getTime()),_t=0;try{let xt=Rt.decodeRow(l,f,D[1]);Ze.putMetadata(Fe.UPC_EAN_EXTENSION,xt.getText()),Ze.putAllMetadata(xt.getResultMetadata()),Ze.addResultPoints(xt.getResultPoints()),_t=xt.getText().length}catch{}let bt=g==null?null:g.get(z.ALLOWED_EAN_EXTENSIONS);if(bt!=null){let xt=!1;for(let Dr in bt)if(_t.toString()===Dr){xt=!0;break}if(!xt)throw new ge}return Ze}decodeEnd(l,f){return Mt.findGuardPattern(l,f,!1,Mt.START_END_PATTERN,new Int32Array(Mt.START_END_PATTERN.length).fill(0))}static checkChecksum(l){return Mt.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let f=l.length;if(f===0)return!1;let g=parseInt(l.charAt(f-1),10);return Mt.getStandardUPCEANChecksum(l.substring(0,f-1))===g}static getStandardUPCEANChecksum(l){let f=l.length,g=0;for(let x=f-1;x>=0;x-=2){let w=l.charAt(x).charCodeAt(0)-48;if(w<0||w>9)throw new M;g+=w}g*=3;for(let x=f-2;x>=0;x-=2){let w=l.charAt(x).charCodeAt(0)-48;if(w<0||w>9)throw new M;g+=w}return(1e3-g)%10}}class kr extends Mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,f,g){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),y=f[1],T=0;for(let D=0;D<6&&y<w;D++){let H=Mt.decodeDigit(l,x,y,Mt.L_AND_G_PATTERNS);g+=String.fromCharCode(48+H%10);for(let Z of x)y+=Z;H>=10&&(T|=1<<5-D)}g=kr.determineFirstDigit(g,T),y=Mt.findGuardPattern(l,y,!0,Mt.MIDDLE_PATTERN,new Int32Array(Mt.MIDDLE_PATTERN.length).fill(0))[1];for(let D=0;D<6&&y<w;D++){let H=Mt.decodeDigit(l,x,y,Mt.L_PATTERNS);g+=String.fromCharCode(48+H);for(let Z of x)y+=Z}return{rowOffset:y,resultString:g}}getBarcodeFormat(){return Ee.EAN_13}static determineFirstDigit(l,f){for(let g=0;g<10;g++)if(f===this.FIRST_DIGIT_ENCODINGS[g])return l=String.fromCharCode(48+g)+l,l;throw new ge}}kr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Tr extends Mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,f,g){const x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),y=f[1];for(let N=0;N<4&&y<w;N++){let D=Mt.decodeDigit(l,x,y,Mt.L_PATTERNS);g+=String.fromCharCode(48+D);for(let H of x)y+=H}y=Mt.findGuardPattern(l,y,!0,Mt.MIDDLE_PATTERN,new Int32Array(Mt.MIDDLE_PATTERN.length).fill(0))[1];for(let N=0;N<4&&y<w;N++){let D=Mt.decodeDigit(l,x,y,Mt.L_PATTERNS);g+=String.fromCharCode(48+D);for(let H of x)y+=H}return{rowOffset:y,resultString:g}}getBarcodeFormat(){return Ee.EAN_8}}class qr extends Mt{constructor(){super(...arguments),this.ean13Reader=new kr}getBarcodeFormat(){return Ee.UPC_A}decode(l,f){return this.maybeReturnResult(this.ean13Reader.decode(l))}decodeRow(l,f,g){return this.maybeReturnResult(this.ean13Reader.decodeRow(l,f,g))}decodeMiddle(l,f,g){return this.ean13Reader.decodeMiddle(l,f,g)}maybeReturnResult(l){let f=l.getText();if(f.charAt(0)==="0"){let g=new oe(f.substring(1),null,null,l.getResultPoints(),Ee.UPC_A);return l.getResultMetadata()!=null&&g.putAllMetadata(l.getResultMetadata()),g}else throw new ge}reset(){this.ean13Reader.reset()}}class Vr extends Mt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(l,f,g){const x=this.decodeMiddleCounters.map(D=>D);x[0]=0,x[1]=0,x[2]=0,x[3]=0;const w=l.getSize();let y=f[1],T=0;for(let D=0;D<6&&y<w;D++){const H=Vr.decodeDigit(l,x,y,Vr.L_AND_G_PATTERNS);g+=String.fromCharCode(48+H%10);for(let Z of x)y+=Z;H>=10&&(T|=1<<5-D)}let N=Vr.determineNumSysAndCheckDigit(g,T);return{rowOffset:y,resultString:N}}decodeEnd(l,f){return Vr.findGuardPatternWithoutCounters(l,f,!0,Vr.MIDDLE_END_PATTERN)}checkChecksum(l){return Mt.checkChecksum(Vr.convertUPCEtoUPCA(l))}static determineNumSysAndCheckDigit(l,f){for(let g=0;g<=1;g++)for(let x=0;x<10;x++)if(f===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[g][x]){let w=String.fromCharCode(48+g),y=String.fromCharCode(48+x);return w+l+y}throw ge.getNotFoundInstance()}getBarcodeFormat(){return Ee.UPC_E}static convertUPCEtoUPCA(l){const f=l.slice(1,7).split("").map(w=>w.charCodeAt(0)),g=new G;g.append(l.charAt(0));let x=f[5];switch(x){case 0:case 1:case 2:g.appendChars(f,0,2),g.append(x),g.append("0000"),g.appendChars(f,2,3);break;case 3:g.appendChars(f,0,3),g.append("00000"),g.appendChars(f,3,2);break;case 4:g.appendChars(f,0,4),g.append("00000"),g.append(f[4]);break;default:g.appendChars(f,0,5),g.append("0000"),g.append(x);break}return l.length>=8&&g.append(l.charAt(7)),g.toString()}}Vr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Vr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Us extends yt{constructor(l){super();let f=l==null?null:l.get(z.POSSIBLE_FORMATS),g=[];n(f)?(g.push(new kr),g.push(new qr),g.push(new Tr),g.push(new Vr)):(f.indexOf(Ee.EAN_13)>-1&&g.push(new kr),f.indexOf(Ee.UPC_A)>-1&&g.push(new qr),f.indexOf(Ee.EAN_8)>-1&&g.push(new Tr),f.indexOf(Ee.UPC_E)>-1&&g.push(new Vr)),this.readers=g}decodeRow(l,f,g){for(let x of this.readers)try{const w=x.decodeRow(l,f,g),y=w.getBarcodeFormat()===Ee.EAN_13&&w.getText().charAt(0)==="0",T=g==null?null:g.get(z.POSSIBLE_FORMATS),N=T==null||T.includes(Ee.UPC_A);if(y&&N){const D=w.getRawBytes(),H=new oe(w.getText().substring(1),D,D?D.length:null,w.getResultPoints(),Ee.UPC_A);return H.putAllMetadata(w.getResultMetadata()),H}return w}catch{}throw new ge}reset(){for(let l of this.readers)l.reset()}}class Be extends yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(l,f){for(let g=0;g<f.length;g++)if(yt.patternMatchVariance(l,f[g],Be.MAX_INDIVIDUAL_VARIANCE)<Be.MAX_AVG_VARIANCE)return g;throw new ge}static count(l){return jt.sum(new Int32Array(l))}static increment(l,f){let g=0,x=f[0];for(let w=1;w<l.length;w++)f[w]>x&&(x=f[w],g=w);l[g]++}static decrement(l,f){let g=0,x=f[0];for(let w=1;w<l.length;w++)f[w]<x&&(x=f[w],g=w);l[g]--}static isFinderPattern(l){let f=l[0]+l[1],g=f+l[2]+l[3],x=f/g;if(x>=Be.MIN_FINDER_PATTERN_RATIO&&x<=Be.MAX_FINDER_PATTERN_RATIO){let w=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;for(let T of l)T>y&&(y=T),T<w&&(w=T);return y<10*w}return!1}}Be.MAX_AVG_VARIANCE=.2,Be.MAX_INDIVIDUAL_VARIANCE=.45,Be.MIN_FINDER_PATTERN_RATIO=9.5/12,Be.MAX_FINDER_PATTERN_RATIO=12.5/14;class ut{constructor(l,f){this.value=l,this.checksumPortion=f}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(l){if(!(l instanceof ut))return!1;const f=l;return this.value===f.value&&this.checksumPortion===f.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class at{constructor(l,f,g,x,w){this.value=l,this.startEnd=f,this.value=l,this.startEnd=f,this.resultPoints=new Array,this.resultPoints.push(new At(g,w)),this.resultPoints.push(new At(x,w))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(l){if(!(l instanceof at))return!1;const f=l;return this.value===f.value}hashCode(){return this.value}}class lt{constructor(){}static getRSSvalue(l,f,g){let x=0;for(let N of l)x+=N;let w=0,y=0,T=l.length;for(let N=0;N<T-1;N++){let D;for(D=1,y|=1<<N;D<l[N];D++,y&=~(1<<N)){let H=lt.combins(x-D-1,T-N-2);if(g&&y===0&&x-D-(T-N-1)>=T-N-1&&(H-=lt.combins(x-D-(T-N),T-N-2)),T-N-1>1){let Z=0;for(let se=x-D-(T-N-2);se>f;se--)Z+=lt.combins(x-D-se-1,T-N-3);H-=Z*(T-1-N)}else x-D>f&&H--;w+=H}x-=D}return w}static combins(l,f){let g,x;l-f>f?(x=f,g=l-f):(x=l-f,g=f);let w=1,y=1;for(let T=l;T>g;T--)w*=T,y<=x&&(w/=y,y++);for(;y<=x;)w/=y,y++;return w}}class lr{static buildBitArray(l){let f=l.length*2-1;l[l.length-1].getRightChar()==null&&(f-=1);let g=12*f,x=new te(g),w=0,T=l[0].getRightChar().getValue();for(let N=11;N>=0;--N)(T&1<<N)!=0&&x.set(w),w++;for(let N=1;N<l.length;++N){let D=l[N],H=D.getLeftChar().getValue();for(let Z=11;Z>=0;--Z)(H&1<<Z)!=0&&x.set(w),w++;if(D.getRightChar()!=null){let Z=D.getRightChar().getValue();for(let se=11;se>=0;--se)(Z&1<<se)!=0&&x.set(w),w++}}return x}}class $r{constructor(l,f){f?this.decodedInformation=null:(this.finished=l,this.decodedInformation=f)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Sn{constructor(l){this.newPosition=l}getNewPosition(){return this.newPosition}}class kn extends Sn{constructor(l,f){super(l),this.value=f}getValue(){return this.value}isFNC1(){return this.value===kn.FNC1}}kn.FNC1="$";class di extends Sn{constructor(l,f,g){super(l),g?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=f}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ie extends Sn{constructor(l,f,g){if(super(l),f<0||f>10||g<0||g>10)throw new M;this.firstDigit=f,this.secondDigit=g}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ie.FNC1}isSecondDigitFNC1(){return this.secondDigit===ie.FNC1}isAnyFNC1(){return this.firstDigit===ie.FNC1||this.secondDigit===ie.FNC1}}ie.FNC1=10;class Ae{constructor(){}static parseFieldsInGeneralPurpose(l){if(!l)return null;if(l.length<2)throw new ge;let f=l.substring(0,2);for(let w of Ae.TWO_DIGIT_DATA_LENGTH)if(w[0]===f)return w[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(2,w[2],l):Ae.processFixedAI(2,w[1],l);if(l.length<3)throw new ge;let g=l.substring(0,3);for(let w of Ae.THREE_DIGIT_DATA_LENGTH)if(w[0]===g)return w[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(3,w[2],l):Ae.processFixedAI(3,w[1],l);for(let w of Ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(w[0]===g)return w[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(4,w[2],l):Ae.processFixedAI(4,w[1],l);if(l.length<4)throw new ge;let x=l.substring(0,4);for(let w of Ae.FOUR_DIGIT_DATA_LENGTH)if(w[0]===x)return w[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(4,w[2],l):Ae.processFixedAI(4,w[1],l);throw new ge}static processFixedAI(l,f,g){if(g.length<l)throw new ge;let x=g.substring(0,l);if(g.length<l+f)throw new ge;let w=g.substring(l,l+f),y=g.substring(l+f),T="("+x+")"+w,N=Ae.parseFieldsInGeneralPurpose(y);return N==null?T:T+N}static processVariableAI(l,f,g){let x=g.substring(0,l),w;g.length<l+f?w=g.length:w=l+f;let y=g.substring(l,w),T=g.substring(w),N="("+x+")"+y,D=Ae.parseFieldsInGeneralPurpose(T);return D==null?N:N+D}}Ae.VARIABLE_LENGTH=[],Ae.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ae.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ae.VARIABLE_LENGTH,20],["22",Ae.VARIABLE_LENGTH,29],["30",Ae.VARIABLE_LENGTH,8],["37",Ae.VARIABLE_LENGTH,8],["90",Ae.VARIABLE_LENGTH,30],["91",Ae.VARIABLE_LENGTH,30],["92",Ae.VARIABLE_LENGTH,30],["93",Ae.VARIABLE_LENGTH,30],["94",Ae.VARIABLE_LENGTH,30],["95",Ae.VARIABLE_LENGTH,30],["96",Ae.VARIABLE_LENGTH,30],["97",Ae.VARIABLE_LENGTH,3],["98",Ae.VARIABLE_LENGTH,30],["99",Ae.VARIABLE_LENGTH,30]],Ae.THREE_DIGIT_DATA_LENGTH=[["240",Ae.VARIABLE_LENGTH,30],["241",Ae.VARIABLE_LENGTH,30],["242",Ae.VARIABLE_LENGTH,6],["250",Ae.VARIABLE_LENGTH,30],["251",Ae.VARIABLE_LENGTH,30],["253",Ae.VARIABLE_LENGTH,17],["254",Ae.VARIABLE_LENGTH,20],["400",Ae.VARIABLE_LENGTH,30],["401",Ae.VARIABLE_LENGTH,30],["402",17],["403",Ae.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ae.VARIABLE_LENGTH,20],["421",Ae.VARIABLE_LENGTH,15],["422",3],["423",Ae.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ae.VARIABLE_LENGTH,15],["391",Ae.VARIABLE_LENGTH,18],["392",Ae.VARIABLE_LENGTH,15],["393",Ae.VARIABLE_LENGTH,18],["703",Ae.VARIABLE_LENGTH,30]],Ae.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ae.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ae.VARIABLE_LENGTH,20],["8003",Ae.VARIABLE_LENGTH,30],["8004",Ae.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ae.VARIABLE_LENGTH,30],["8008",Ae.VARIABLE_LENGTH,12],["8018",18],["8020",Ae.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ae.VARIABLE_LENGTH,70],["8200",Ae.VARIABLE_LENGTH,70]];class fe{constructor(l){this.buffer=new G,this.information=l}decodeAllCodes(l,f){let g=f,x=null;do{let w=this.decodeGeneralPurposeField(g,x),y=Ae.parseFieldsInGeneralPurpose(w.getNewString());if(y!=null&&l.append(y),w.isRemaining()?x=""+w.getRemainingValue():x=null,g===w.getNewPosition())break;g=w.getNewPosition()}while(!0);return l.toString()}isStillNumeric(l){if(l+7>this.information.getSize())return l+4<=this.information.getSize();for(let f=l;f<l+3;++f)if(this.information.get(f))return!0;return this.information.get(l+3)}decodeNumeric(l){if(l+7>this.information.getSize()){let w=this.extractNumericValueFromBitArray(l,4);return w===0?new ie(this.information.getSize(),ie.FNC1,ie.FNC1):new ie(this.information.getSize(),w-1,ie.FNC1)}let f=this.extractNumericValueFromBitArray(l,7),g=(f-8)/11,x=(f-8)%11;return new ie(l+7,g,x)}extractNumericValueFromBitArray(l,f){return fe.extractNumericValueFromBitArray(this.information,l,f)}static extractNumericValueFromBitArray(l,f,g){let x=0;for(let w=0;w<g;++w)l.get(f+w)&&(x|=1<<g-w-1);return x}decodeGeneralPurposeField(l,f){this.buffer.setLengthToZero(),f!=null&&this.buffer.append(f),this.current.setPosition(l);let g=this.parseBlocks();return g!=null&&g.isRemaining()?new di(this.current.getPosition(),this.buffer.toString(),g.getRemainingValue()):new di(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let l,f;do{let g=this.current.getPosition();if(this.current.isAlpha()?(f=this.parseAlphaBlock(),l=f.isFinished()):this.current.isIsoIec646()?(f=this.parseIsoIec646Block(),l=f.isFinished()):(f=this.parseNumericBlock(),l=f.isFinished()),!(g!==this.current.getPosition())&&!l)break}while(!l);return f.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let l=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFirstDigitFNC1()){let f;return l.isSecondDigitFNC1()?f=new di(this.current.getPosition(),this.buffer.toString()):f=new di(this.current.getPosition(),this.buffer.toString(),l.getSecondDigit()),new $r(!0,f)}if(this.buffer.append(l.getFirstDigit()),l.isSecondDigitFNC1()){let f=new di(this.current.getPosition(),this.buffer.toString());return new $r(!0,f)}this.buffer.append(l.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $r(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let l=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let f=new di(this.current.getPosition(),this.buffer.toString());return new $r(!0,f)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $r(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let l=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let f=new di(this.current.getPosition(),this.buffer.toString());return new $r(!0,f)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $r(!1)}isStillIsoIec646(l){if(l+5>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(l,5);if(f>=5&&f<16)return!0;if(l+7>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(l,7);if(g>=64&&g<116)return!0;if(l+8>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(l,8);return x>=232&&x<253}decodeIsoIec646(l){let f=this.extractNumericValueFromBitArray(l,5);if(f===15)return new kn(l+5,kn.FNC1);if(f>=5&&f<15)return new kn(l+5,"0"+(f-5));let g=this.extractNumericValueFromBitArray(l,7);if(g>=64&&g<90)return new kn(l+7,""+(g+1));if(g>=90&&g<116)return new kn(l+7,""+(g+7));let x=this.extractNumericValueFromBitArray(l,8),w;switch(x){case 232:w="!";break;case 233:w='"';break;case 234:w="%";break;case 235:w="&";break;case 236:w="'";break;case 237:w="(";break;case 238:w=")";break;case 239:w="*";break;case 240:w="+";break;case 241:w=",";break;case 242:w="-";break;case 243:w=".";break;case 244:w="/";break;case 245:w=":";break;case 246:w=";";break;case 247:w="<";break;case 248:w="=";break;case 249:w=">";break;case 250:w="?";break;case 251:w="_";break;case 252:w=" ";break;default:throw new M}return new kn(l+8,w)}isStillAlpha(l){if(l+5>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(l,5);if(f>=5&&f<16)return!0;if(l+6>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(l,6);return g>=16&&g<63}decodeAlphanumeric(l){let f=this.extractNumericValueFromBitArray(l,5);if(f===15)return new kn(l+5,kn.FNC1);if(f>=5&&f<15)return new kn(l+5,"0"+(f-5));let g=this.extractNumericValueFromBitArray(l,6);if(g>=32&&g<58)return new kn(l+6,""+(g+33));let x;switch(g){case 58:x="*";break;case 59:x=",";break;case 60:x="-";break;case 61:x=".";break;case 62:x="/";break;default:throw new Bt("Decoding invalid alphanumeric value: "+g)}return new kn(l+6,x)}isAlphaTo646ToAlphaLatch(l){if(l+1>this.information.getSize())return!1;for(let f=0;f<5&&f+l<this.information.getSize();++f)if(f===2){if(!this.information.get(l+2))return!1}else if(this.information.get(l+f))return!1;return!0}isAlphaOr646ToNumericLatch(l){if(l+3>this.information.getSize())return!1;for(let f=l;f<l+3;++f)if(this.information.get(f))return!1;return!0}isNumericToAlphaNumericLatch(l){if(l+1>this.information.getSize())return!1;for(let f=0;f<4&&f+l<this.information.getSize();++f)if(this.information.get(l+f))return!1;return!0}}class he{constructor(l){this.information=l,this.generalDecoder=new fe(l)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class pe extends he{constructor(l){super(l)}encodeCompressedGtin(l,f){l.append("(01)");let g=l.length();l.append("9"),this.encodeCompressedGtinWithoutAI(l,f,g)}encodeCompressedGtinWithoutAI(l,f,g){for(let x=0;x<4;++x){let w=this.getGeneralDecoder().extractNumericValueFromBitArray(f+10*x,10);w/100===0&&l.append("0"),w/10===0&&l.append("0"),l.append(w)}pe.appendCheckDigit(l,g)}static appendCheckDigit(l,f){let g=0;for(let x=0;x<13;x++){let w=l.charAt(x+f).charCodeAt(0)-48;g+=(x&1)===0?3*w:w}g=10-g%10,g===10&&(g=0),l.append(g)}}pe.GTIN_SIZE=40;class Ce extends pe{constructor(l){super(l)}parseInformation(){let l=new G;l.append("(01)");let f=l.length(),g=this.getGeneralDecoder().extractNumericValueFromBitArray(Ce.HEADER_SIZE,4);return l.append(g),this.encodeCompressedGtinWithoutAI(l,Ce.HEADER_SIZE+4,f),this.getGeneralDecoder().decodeAllCodes(l,Ce.HEADER_SIZE+44)}}Ce.HEADER_SIZE=4;class Ve extends he{constructor(l){super(l)}parseInformation(){let l=new G;return this.getGeneralDecoder().decodeAllCodes(l,Ve.HEADER_SIZE)}}Ve.HEADER_SIZE=5;class nt extends pe{constructor(l){super(l)}encodeCompressedWeight(l,f,g){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(f,g);this.addWeightCode(l,x);let w=this.checkWeight(x),y=1e5;for(let T=0;T<5;++T)w/y===0&&l.append("0"),y/=10;l.append(w)}}class Pe extends nt{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()!=Pe.HEADER_SIZE+nt.GTIN_SIZE+Pe.WEIGHT_SIZE)throw new ge;let l=new G;return this.encodeCompressedGtin(l,Pe.HEADER_SIZE),this.encodeCompressedWeight(l,Pe.HEADER_SIZE+nt.GTIN_SIZE,Pe.WEIGHT_SIZE),l.toString()}}Pe.HEADER_SIZE=5,Pe.WEIGHT_SIZE=15;class qe extends Pe{constructor(l){super(l)}addWeightCode(l,f){l.append("(3103)")}checkWeight(l){return l}}class Xe extends Pe{constructor(l){super(l)}addWeightCode(l,f){f<1e4?l.append("(3202)"):l.append("(3203)")}checkWeight(l){return l<1e4?l:l-1e4}}class ht extends pe{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<ht.HEADER_SIZE+pe.GTIN_SIZE)throw new ge;let l=new G;this.encodeCompressedGtin(l,ht.HEADER_SIZE);let f=this.getGeneralDecoder().extractNumericValueFromBitArray(ht.HEADER_SIZE+pe.GTIN_SIZE,ht.LAST_DIGIT_SIZE);l.append("(392"),l.append(f),l.append(")");let g=this.getGeneralDecoder().decodeGeneralPurposeField(ht.HEADER_SIZE+pe.GTIN_SIZE+ht.LAST_DIGIT_SIZE,null);return l.append(g.getNewString()),l.toString()}}ht.HEADER_SIZE=8,ht.LAST_DIGIT_SIZE=2;class wt extends pe{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<wt.HEADER_SIZE+pe.GTIN_SIZE)throw new ge;let l=new G;this.encodeCompressedGtin(l,wt.HEADER_SIZE);let f=this.getGeneralDecoder().extractNumericValueFromBitArray(wt.HEADER_SIZE+pe.GTIN_SIZE,wt.LAST_DIGIT_SIZE);l.append("(393"),l.append(f),l.append(")");let g=this.getGeneralDecoder().extractNumericValueFromBitArray(wt.HEADER_SIZE+pe.GTIN_SIZE+wt.LAST_DIGIT_SIZE,wt.FIRST_THREE_DIGITS_SIZE);g/100==0&&l.append("0"),g/10==0&&l.append("0"),l.append(g);let x=this.getGeneralDecoder().decodeGeneralPurposeField(wt.HEADER_SIZE+pe.GTIN_SIZE+wt.LAST_DIGIT_SIZE+wt.FIRST_THREE_DIGITS_SIZE,null);return l.append(x.getNewString()),l.toString()}}wt.HEADER_SIZE=8,wt.LAST_DIGIT_SIZE=2,wt.FIRST_THREE_DIGITS_SIZE=10;class vt extends nt{constructor(l,f,g){super(l),this.dateCode=g,this.firstAIdigits=f}parseInformation(){if(this.getInformation().getSize()!=vt.HEADER_SIZE+vt.GTIN_SIZE+vt.WEIGHT_SIZE+vt.DATE_SIZE)throw new ge;let l=new G;return this.encodeCompressedGtin(l,vt.HEADER_SIZE),this.encodeCompressedWeight(l,vt.HEADER_SIZE+vt.GTIN_SIZE,vt.WEIGHT_SIZE),this.encodeCompressedDate(l,vt.HEADER_SIZE+vt.GTIN_SIZE+vt.WEIGHT_SIZE),l.toString()}encodeCompressedDate(l,f){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(f,vt.DATE_SIZE);if(g==38400)return;l.append("("),l.append(this.dateCode),l.append(")");let x=g%32;g/=32;let w=g%12+1;g/=12;let y=g;y/10==0&&l.append("0"),l.append(y),w/10==0&&l.append("0"),l.append(w),x/10==0&&l.append("0"),l.append(x)}addWeightCode(l,f){l.append("("),l.append(this.firstAIdigits),l.append(f/1e5),l.append(")")}checkWeight(l){return l%1e5}}vt.HEADER_SIZE=8,vt.WEIGHT_SIZE=20,vt.DATE_SIZE=16;function Et(J){try{if(J.get(1))return new Ce(J);if(!J.get(2))return new Ve(J);switch(fe.extractNumericValueFromBitArray(J,1,4)){case 4:return new qe(J);case 5:return new Xe(J)}switch(fe.extractNumericValueFromBitArray(J,1,5)){case 12:return new ht(J);case 13:return new wt(J)}switch(fe.extractNumericValueFromBitArray(J,1,7)){case 56:return new vt(J,"310","11");case 57:return new vt(J,"320","11");case 58:return new vt(J,"310","13");case 59:return new vt(J,"320","13");case 60:return new vt(J,"310","15");case 61:return new vt(J,"320","15");case 62:return new vt(J,"310","17");case 63:return new vt(J,"320","17")}}catch(l){throw console.log(l),new Bt("unknown decoder: "+J)}}class St{constructor(l,f,g,x){this.leftchar=l,this.rightchar=f,this.finderpattern=g,this.maybeLast=x}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(l,f){return l instanceof St?St.equalsOrNull(l.leftchar,f.leftchar)&&St.equalsOrNull(l.rightchar,f.rightchar)&&St.equalsOrNull(l.finderpattern,f.finderpattern):!1}static equalsOrNull(l,f){return l===null?f===null:St.equals(l,f)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Gt{constructor(l,f,g){this.pairs=l,this.rowNumber=f,this.wasReversed=g}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(l){return this.checkEqualitity(this,l)}toString(){return"{ "+this.pairs+" }"}equals(l,f){return l instanceof Gt?this.checkEqualitity(l,f)&&l.wasReversed===f.wasReversed:!1}checkEqualitity(l,f){if(!l||!f)return;let g;return l.forEach((x,w)=>{f.forEach(y=>{x.getLeftChar().getValue()===y.getLeftChar().getValue()&&x.getRightChar().getValue()===y.getRightChar().getValue()&&x.getFinderPatter().getValue()===y.getFinderPatter().getValue()&&(g=!0)})}),g}}class it extends Be{constructor(l){super(...arguments),this.pairs=new Array(it.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=l===!0}decodeRow(l,f,g){this.pairs.length=0,this.startFromEven=!1;try{return it.constructResult(this.decodeRow2pairs(l,f))}catch(x){this.verbose&&console.log(x)}return this.pairs.length=0,this.startFromEven=!0,it.constructResult(this.decodeRow2pairs(l,f))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(l,f){let g=!1;for(;!g;)try{this.pairs.push(this.retrieveNextPair(f,this.pairs,l))}catch(w){if(w instanceof ge){if(!this.pairs.length)throw new ge;g=!0}}if(this.checkChecksum())return this.pairs;let x;if(this.rows.length?x=!0:x=!1,this.storeRow(l,!1),x){let w=this.checkRowsBoolean(!1);if(w!=null||(w=this.checkRowsBoolean(!0),w!=null))return w}throw new ge}checkRowsBoolean(l){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,l&&(this.rows=this.rows.reverse());let f=null;try{f=this.checkRows(new Array,0)}catch(g){this.verbose&&console.log(g)}return l&&(this.rows=this.rows.reverse()),f}checkRows(l,f){for(let g=f;g<this.rows.length;g++){let x=this.rows[g];this.pairs.length=0;for(let y of l)this.pairs.push(y.getPairs());if(this.pairs.push(x.getPairs()),!it.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let w=new Array(l);w.push(x);try{return this.checkRows(w,g+1)}catch(y){this.verbose&&console.log(y)}}throw new ge}static isValidSequence(l){for(let f of it.FINDER_PATTERN_SEQUENCES){if(l.length>f.length)continue;let g=!0;for(let x=0;x<l.length;x++)if(l[x].getFinderPattern().getValue()!=f[x]){g=!1;break}if(g)return!0}return!1}storeRow(l,f){let g=0,x=!1,w=!1;for(;g<this.rows.length;){let y=this.rows[g];if(y.getRowNumber()>l){w=y.isEquivalent(this.pairs);break}x=y.isEquivalent(this.pairs),g++}w||x||it.isPartialRow(this.pairs,this.rows)||(this.rows.push(g,new Gt(this.pairs,l,f)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(l,f){for(let g of f)if(g.getPairs().length!==l.length){for(let x of g.getPairs())for(let w of l)if(St.equals(x,w))break}}static isPartialRow(l,f){for(let g of f){let x=!0;for(let w of l){let y=!1;for(let T of g.getPairs())if(w.equals(T)){y=!0;break}if(!y){x=!1;break}}if(x)return!0}return!1}getRows(){return this.rows}static constructResult(l){let f=lr.buildBitArray(l),x=Et(f).parseInformation(),w=l[0].getFinderPattern().getResultPoints(),y=l[l.length-1].getFinderPattern().getResultPoints(),T=[w[0],w[1],y[0],y[1]];return new oe(x,null,null,T,Ee.RSS_EXPANDED,null)}checkChecksum(){let l=this.pairs.get(0),f=l.getLeftChar(),g=l.getRightChar();if(g==null)return!1;let x=g.getChecksumPortion(),w=2;for(let T=1;T<this.pairs.size();++T){let N=this.pairs.get(T);x+=N.getLeftChar().getChecksumPortion(),w++;let D=N.getRightChar();D!=null&&(x+=D.getChecksumPortion(),w++)}return x%=211,211*(w-4)+x==f.getValue()}static getNextSecondBar(l,f){let g;return l.get(f)?(g=l.getNextUnset(f),g=l.getNextSet(g)):(g=l.getNextSet(f),g=l.getNextUnset(g)),g}retrieveNextPair(l,f,g){let x=f.length%2==0;this.startFromEven&&(x=!x);let w,y=!0,T=-1;do this.findNextPair(l,f,T),w=this.parseFoundFinderPattern(l,g,x),w==null?T=it.getNextSecondBar(l,this.startEnd[0]):y=!1;while(y);let N=this.decodeDataCharacter(l,w,x,!0);if(!this.isEmptyPair(f)&&f[f.length-1].mustBeLast())throw new ge;let D;try{D=this.decodeDataCharacter(l,w,x,!1)}catch(H){D=null,this.verbose&&console.log(H)}return new St(N,D,w,!0)}isEmptyPair(l){return l.length===0}findNextPair(l,f,g){let x=this.getDecodeFinderCounters();x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),y;g>=0?y=g:this.isEmptyPair(f)?y=0:y=f[f.length-1].getFinderPattern().getStartEnd()[1];let T=f.length%2!=0;this.startFromEven&&(T=!T);let N=!1;for(;y<w&&(N=!l.get(y),!!N);)y++;let D=0,H=y;for(let Z=y;Z<w;Z++)if(l.get(Z)!=N)x[D]++;else{if(D==3){if(T&&it.reverseCounters(x),it.isFinderPattern(x)){this.startEnd[0]=H,this.startEnd[1]=Z;return}T&&it.reverseCounters(x),H+=x[0]+x[1],x[0]=x[2],x[1]=x[3],x[2]=0,x[3]=0,D--}else D++;x[D]=1,N=!N}throw new ge}static reverseCounters(l){let f=l.length;for(let g=0;g<f/2;++g){let x=l[g];l[g]=l[f-g-1],l[f-g-1]=x}}parseFoundFinderPattern(l,f,g){let x,w,y;if(g){let D=this.startEnd[0]-1;for(;D>=0&&!l.get(D);)D--;D++,x=this.startEnd[0]-D,w=D,y=this.startEnd[1]}else w=this.startEnd[0],y=l.getNextUnset(this.startEnd[1]+1),x=y-this.startEnd[1];let T=this.getDecodeFinderCounters();k.arraycopy(T,0,T,1,T.length-1),T[0]=x;let N;try{N=this.parseFinderValue(T,it.FINDER_PATTERNS)}catch{return null}return new at(N,[w,y],w,y,f)}decodeDataCharacter(l,f,g,x){let w=this.getDataCharacterCounters();for(let un=0;un<w.length;un++)w[un]=0;if(x)it.recordPatternInReverse(l,f.getStartEnd()[0],w);else{it.recordPattern(l,f.getStartEnd()[1],w);for(let un=0,_i=w.length-1;un<_i;un++,_i--){let bs=w[un];w[un]=w[_i],w[_i]=bs}}let y=17,T=jt.sum(new Int32Array(w))/y,N=(f.getStartEnd()[1]-f.getStartEnd()[0])/15;if(Math.abs(T-N)/N>.3)throw new ge;let D=this.getOddCounts(),H=this.getEvenCounts(),Z=this.getOddRoundingErrors(),se=this.getEvenRoundingErrors();for(let un=0;un<w.length;un++){let _i=1*w[un]/T,bs=_i+.5;if(bs<1){if(_i<.3)throw new ge;bs=1}else if(bs>8){if(_i>8.7)throw new ge;bs=8}let Ol=un/2;(un&1)==0?(D[Ol]=bs,Z[Ol]=_i-bs):(H[Ol]=bs,se[Ol]=_i-bs)}this.adjustOddEvenCounts(y);let ye=4*f.getValue()+(g?0:2)+(x?0:1)-1,Se=0,Ne=0;for(let un=D.length-1;un>=0;un--){if(it.isNotA1left(f,g,x)){let _i=it.WEIGHTS[ye][2*un];Ne+=D[un]*_i}Se+=D[un]}let Le=0;for(let un=H.length-1;un>=0;un--)if(it.isNotA1left(f,g,x)){let _i=it.WEIGHTS[ye][2*un+1];Le+=H[un]*_i}let Ze=Ne+Le;if((Se&1)!=0||Se>13||Se<4)throw new ge;let _t=(13-Se)/2,bt=it.SYMBOL_WIDEST[_t],xt=9-bt,Dr=lt.getRSSvalue(D,bt,!0),wr=lt.getRSSvalue(H,xt,!1),Zn=it.EVEN_TOTAL_SUBSET[_t],Ks=it.GSUM[_t],Gi=Dr*Zn+wr+Ks;return new ut(Gi,Ze)}static isNotA1left(l,f,g){return!(l.getValue()==0&&f&&g)}adjustOddEvenCounts(l){let f=jt.sum(new Int32Array(this.getOddCounts())),g=jt.sum(new Int32Array(this.getEvenCounts())),x=!1,w=!1;f>13?w=!0:f<4&&(x=!0);let y=!1,T=!1;g>13?T=!0:g<4&&(y=!0);let N=f+g-l,D=(f&1)==1,H=(g&1)==0;if(N==1)if(D){if(H)throw new ge;w=!0}else{if(!H)throw new ge;T=!0}else if(N==-1)if(D){if(H)throw new ge;x=!0}else{if(!H)throw new ge;y=!0}else if(N==0){if(D){if(!H)throw new ge;f<g?(x=!0,T=!0):(w=!0,y=!0)}else if(H)throw new ge}else throw new ge;if(x){if(w)throw new ge;it.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(w&&it.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(T)throw new ge;it.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&it.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}it.SYMBOL_WIDEST=[7,5,4,3,1],it.EVEN_TOTAL_SUBSET=[4,20,52,104,204],it.GSUM=[0,348,1388,2948,3988],it.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],it.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],it.FINDER_PAT_A=0,it.FINDER_PAT_B=1,it.FINDER_PAT_C=2,it.FINDER_PAT_D=3,it.FINDER_PAT_E=4,it.FINDER_PAT_F=5,it.FINDER_PATTERN_SEQUENCES=[[it.FINDER_PAT_A,it.FINDER_PAT_A],[it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B],[it.FINDER_PAT_A,it.FINDER_PAT_C,it.FINDER_PAT_B,it.FINDER_PAT_D],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_C],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_D,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_D],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_E],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F]],it.MAX_PAIRS=11;class Xr extends ut{constructor(l,f,g){super(l,f),this.count=0,this.finderPattern=g}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nr extends Be{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(l,f,g){const x=this.decodePair(f,!1,l,g);nr.addOrTally(this.possibleLeftPairs,x),f.reverse();let w=this.decodePair(f,!0,l,g);nr.addOrTally(this.possibleRightPairs,w),f.reverse();for(let y of this.possibleLeftPairs)if(y.getCount()>1){for(let T of this.possibleRightPairs)if(T.getCount()>1&&nr.checkChecksum(y,T))return nr.constructResult(y,T)}throw new ge}static addOrTally(l,f){if(f==null)return;let g=!1;for(let x of l)if(x.getValue()===f.getValue()){x.incrementCount(),g=!0;break}g||l.push(f)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(l,f){let g=4537077*l.getValue()+f.getValue(),x=new String(g).toString(),w=new G;for(let D=13-x.length;D>0;D--)w.append("0");w.append(x);let y=0;for(let D=0;D<13;D++){let H=w.charAt(D).charCodeAt(0)-48;y+=(D&1)===0?3*H:H}y=10-y%10,y===10&&(y=0),w.append(y.toString());let T=l.getFinderPattern().getResultPoints(),N=f.getFinderPattern().getResultPoints();return new oe(w.toString(),null,0,[T[0],T[1],N[0],N[1]],Ee.RSS_14,new Date().getTime())}static checkChecksum(l,f){let g=(l.getChecksumPortion()+16*f.getChecksumPortion())%79,x=9*l.getFinderPattern().getValue()+f.getFinderPattern().getValue();return x>72&&x--,x>8&&x--,g===x}decodePair(l,f,g,x){try{let w=this.findFinderPattern(l,f),y=this.parseFoundFinderPattern(l,g,f,w),T=x==null?null:x.get(z.NEED_RESULT_POINT_CALLBACK);if(T!=null){let H=(w[0]+w[1])/2;f&&(H=l.getSize()-1-H),T.foundPossibleResultPoint(new At(H,g))}let N=this.decodeDataCharacter(l,y,!0),D=this.decodeDataCharacter(l,y,!1);return new Xr(1597*N.getValue()+D.getValue(),N.getChecksumPortion()+4*D.getChecksumPortion(),y)}catch{return null}}decodeDataCharacter(l,f,g){let x=this.getDataCharacterCounters();for(let Le=0;Le<x.length;Le++)x[Le]=0;if(g)yt.recordPatternInReverse(l,f.getStartEnd()[0],x);else{yt.recordPattern(l,f.getStartEnd()[1]+1,x);for(let Le=0,Ze=x.length-1;Le<Ze;Le++,Ze--){let _t=x[Le];x[Le]=x[Ze],x[Ze]=_t}}let w=g?16:15,y=jt.sum(new Int32Array(x))/w,T=this.getOddCounts(),N=this.getEvenCounts(),D=this.getOddRoundingErrors(),H=this.getEvenRoundingErrors();for(let Le=0;Le<x.length;Le++){let Ze=x[Le]/y,_t=Math.floor(Ze+.5);_t<1?_t=1:_t>8&&(_t=8);let bt=Math.floor(Le/2);(Le&1)===0?(T[bt]=_t,D[bt]=Ze-_t):(N[bt]=_t,H[bt]=Ze-_t)}this.adjustOddEvenCounts(g,w);let Z=0,se=0;for(let Le=T.length-1;Le>=0;Le--)se*=9,se+=T[Le],Z+=T[Le];let ye=0,Se=0;for(let Le=N.length-1;Le>=0;Le--)ye*=9,ye+=N[Le],Se+=N[Le];let Ne=se+3*ye;if(g){if((Z&1)!==0||Z>12||Z<4)throw new ge;let Le=(12-Z)/2,Ze=nr.OUTSIDE_ODD_WIDEST[Le],_t=9-Ze,bt=lt.getRSSvalue(T,Ze,!1),xt=lt.getRSSvalue(N,_t,!0),Dr=nr.OUTSIDE_EVEN_TOTAL_SUBSET[Le],wr=nr.OUTSIDE_GSUM[Le];return new ut(bt*Dr+xt+wr,Ne)}else{if((Se&1)!==0||Se>10||Se<4)throw new ge;let Le=(10-Se)/2,Ze=nr.INSIDE_ODD_WIDEST[Le],_t=9-Ze,bt=lt.getRSSvalue(T,Ze,!0),xt=lt.getRSSvalue(N,_t,!1),Dr=nr.INSIDE_ODD_TOTAL_SUBSET[Le],wr=nr.INSIDE_GSUM[Le];return new ut(xt*Dr+bt+wr,Ne)}}findFinderPattern(l,f){let g=this.getDecodeFinderCounters();g[0]=0,g[1]=0,g[2]=0,g[3]=0;let x=l.getSize(),w=!1,y=0;for(;y<x&&(w=!l.get(y),f!==w);)y++;let T=0,N=y;for(let D=y;D<x;D++)if(l.get(D)!==w)g[T]++;else{if(T===3){if(Be.isFinderPattern(g))return[N,D];N+=g[0]+g[1],g[0]=g[2],g[1]=g[3],g[2]=0,g[3]=0,T--}else T++;g[T]=1,w=!w}throw new ge}parseFoundFinderPattern(l,f,g,x){let w=l.get(x[0]),y=x[0]-1;for(;y>=0&&w!==l.get(y);)y--;y++;const T=x[0]-y,N=this.getDecodeFinderCounters(),D=new Int32Array(N.length);k.arraycopy(N,0,D,1,N.length-1),D[0]=T;const H=this.parseFinderValue(D,nr.FINDER_PATTERNS);let Z=y,se=x[1];return g&&(Z=l.getSize()-1-Z,se=l.getSize()-1-se),new at(H,[y,x[1]],Z,se,f)}adjustOddEvenCounts(l,f){let g=jt.sum(new Int32Array(this.getOddCounts())),x=jt.sum(new Int32Array(this.getEvenCounts())),w=!1,y=!1,T=!1,N=!1;l?(g>12?y=!0:g<4&&(w=!0),x>12?N=!0:x<4&&(T=!0)):(g>11?y=!0:g<5&&(w=!0),x>10?N=!0:x<4&&(T=!0));let D=g+x-f,H=(g&1)===(l?1:0),Z=(x&1)===1;if(D===1)if(H){if(Z)throw new ge;y=!0}else{if(!Z)throw new ge;N=!0}else if(D===-1)if(H){if(Z)throw new ge;w=!0}else{if(!Z)throw new ge;T=!0}else if(D===0){if(H){if(!Z)throw new ge;g<x?(w=!0,N=!0):(y=!0,T=!0)}else if(Z)throw new ge}else throw new ge;if(w){if(y)throw new ge;Be.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&Be.decrement(this.getOddCounts(),this.getOddRoundingErrors()),T){if(N)throw new ge;Be.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&Be.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nr.OUTSIDE_GSUM=[0,161,961,2015,2715],nr.INSIDE_GSUM=[0,336,1036,1516],nr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nr.INSIDE_ODD_WIDEST=[2,4,6,8],nr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Vn extends yt{constructor(l,f){super(),this.readers=[],this.verbose=f===!0;const g=l?l.get(z.POSSIBLE_FORMATS):null,x=l&&l.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;g?((g.includes(Ee.EAN_13)||g.includes(Ee.UPC_A)||g.includes(Ee.EAN_8)||g.includes(Ee.UPC_E))&&this.readers.push(new Us(l)),g.includes(Ee.CODE_39)&&this.readers.push(new Nt(x)),g.includes(Ee.CODE_128)&&this.readers.push(new _e),g.includes(Ee.ITF)&&this.readers.push(new Re),g.includes(Ee.RSS_14)&&this.readers.push(new nr),g.includes(Ee.RSS_EXPANDED)&&this.readers.push(new it(this.verbose))):(this.readers.push(new Us(l)),this.readers.push(new Nt),this.readers.push(new Us(l)),this.readers.push(new _e),this.readers.push(new Re),this.readers.push(new nr),this.readers.push(new it(this.verbose)))}decodeRow(l,f,g){for(let x=0;x<this.readers.length;x++)try{return this.readers[x].decodeRow(l,f,g)}catch{}throw new ge}reset(){this.readers.forEach(l=>l.reset())}}class qa extends ce{constructor(l=500,f){super(new Vn(f),l,f)}}class Br{constructor(l,f,g){this.ecCodewords=l,this.ecBlocks=[f],g&&this.ecBlocks.push(g)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class xr{constructor(l,f){this.count=l,this.dataCodewords=f}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yr{constructor(l,f,g,x,w,y){this.versionNumber=l,this.symbolSizeRows=f,this.symbolSizeColumns=g,this.dataRegionSizeRows=x,this.dataRegionSizeColumns=w,this.ecBlocks=y;let T=0;const N=y.getECCodewords(),D=y.getECBlocks();for(let H of D)T+=H.getCount()*(H.getDataCodewords()+N);this.totalCodewords=T}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(l,f){if((l&1)!==0||(f&1)!==0)throw new M;for(let g of yr.VERSIONS)if(g.symbolSizeRows===l&&g.symbolSizeColumns===f)return g;throw new M}toString(){return""+this.versionNumber}static buildVersions(){return[new yr(1,10,10,8,8,new Br(5,new xr(1,3))),new yr(2,12,12,10,10,new Br(7,new xr(1,5))),new yr(3,14,14,12,12,new Br(10,new xr(1,8))),new yr(4,16,16,14,14,new Br(12,new xr(1,12))),new yr(5,18,18,16,16,new Br(14,new xr(1,18))),new yr(6,20,20,18,18,new Br(18,new xr(1,22))),new yr(7,22,22,20,20,new Br(20,new xr(1,30))),new yr(8,24,24,22,22,new Br(24,new xr(1,36))),new yr(9,26,26,24,24,new Br(28,new xr(1,44))),new yr(10,32,32,14,14,new Br(36,new xr(1,62))),new yr(11,36,36,16,16,new Br(42,new xr(1,86))),new yr(12,40,40,18,18,new Br(48,new xr(1,114))),new yr(13,44,44,20,20,new Br(56,new xr(1,144))),new yr(14,48,48,22,22,new Br(68,new xr(1,174))),new yr(15,52,52,24,24,new Br(42,new xr(2,102))),new yr(16,64,64,14,14,new Br(56,new xr(2,140))),new yr(17,72,72,16,16,new Br(36,new xr(4,92))),new yr(18,80,80,18,18,new Br(48,new xr(4,114))),new yr(19,88,88,20,20,new Br(56,new xr(4,144))),new yr(20,96,96,22,22,new Br(68,new xr(4,174))),new yr(21,104,104,24,24,new Br(56,new xr(6,136))),new yr(22,120,120,18,18,new Br(68,new xr(6,175))),new yr(23,132,132,20,20,new Br(62,new xr(8,163))),new yr(24,144,144,22,22,new Br(62,new xr(8,156),new xr(2,155))),new yr(25,8,18,6,16,new Br(7,new xr(1,5))),new yr(26,8,32,6,14,new Br(11,new xr(1,10))),new yr(27,12,26,10,24,new Br(14,new xr(1,16))),new yr(28,12,36,10,16,new Br(18,new xr(1,22))),new yr(29,16,36,14,16,new Br(24,new xr(1,32))),new yr(30,16,48,14,22,new Br(28,new xr(1,49)))]}}yr.VERSIONS=yr.buildVersions();class qn{constructor(l){const f=l.getHeight();if(f<8||f>144||(f&1)!==0)throw new M;this.version=qn.readVersion(l),this.mappingBitMatrix=this.extractDataRegion(l),this.readMappingMatrix=new Ie(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(l){const f=l.getHeight(),g=l.getWidth();return yr.getVersionForDimensions(f,g)}readCodewords(){const l=new Int8Array(this.version.getTotalCodewords());let f=0,g=4,x=0;const w=this.mappingBitMatrix.getHeight(),y=this.mappingBitMatrix.getWidth();let T=!1,N=!1,D=!1,H=!1;do if(g===w&&x===0&&!T)l[f++]=this.readCorner1(w,y)&255,g-=2,x+=2,T=!0;else if(g===w-2&&x===0&&(y&3)!==0&&!N)l[f++]=this.readCorner2(w,y)&255,g-=2,x+=2,N=!0;else if(g===w+4&&x===2&&(y&7)===0&&!D)l[f++]=this.readCorner3(w,y)&255,g-=2,x+=2,D=!0;else if(g===w-2&&x===0&&(y&7)===4&&!H)l[f++]=this.readCorner4(w,y)&255,g-=2,x+=2,H=!0;else{do g<w&&x>=0&&!this.readMappingMatrix.get(x,g)&&(l[f++]=this.readUtah(g,x,w,y)&255),g-=2,x+=2;while(g>=0&&x<y);g+=1,x+=3;do g>=0&&x<y&&!this.readMappingMatrix.get(x,g)&&(l[f++]=this.readUtah(g,x,w,y)&255),g+=2,x-=2;while(g<w&&x>=0);g+=3,x+=1}while(g<w||x<y);if(f!==this.version.getTotalCodewords())throw new M;return l}readModule(l,f,g,x){return l<0&&(l+=g,f+=4-(g+4&7)),f<0&&(f+=x,l+=4-(x+4&7)),this.readMappingMatrix.set(f,l),this.mappingBitMatrix.get(f,l)}readUtah(l,f,g,x){let w=0;return this.readModule(l-2,f-2,g,x)&&(w|=1),w<<=1,this.readModule(l-2,f-1,g,x)&&(w|=1),w<<=1,this.readModule(l-1,f-2,g,x)&&(w|=1),w<<=1,this.readModule(l-1,f-1,g,x)&&(w|=1),w<<=1,this.readModule(l-1,f,g,x)&&(w|=1),w<<=1,this.readModule(l,f-2,g,x)&&(w|=1),w<<=1,this.readModule(l,f-1,g,x)&&(w|=1),w<<=1,this.readModule(l,f,g,x)&&(w|=1),w}readCorner1(l,f){let g=0;return this.readModule(l-1,0,l,f)&&(g|=1),g<<=1,this.readModule(l-1,1,l,f)&&(g|=1),g<<=1,this.readModule(l-1,2,l,f)&&(g|=1),g<<=1,this.readModule(0,f-2,l,f)&&(g|=1),g<<=1,this.readModule(0,f-1,l,f)&&(g|=1),g<<=1,this.readModule(1,f-1,l,f)&&(g|=1),g<<=1,this.readModule(2,f-1,l,f)&&(g|=1),g<<=1,this.readModule(3,f-1,l,f)&&(g|=1),g}readCorner2(l,f){let g=0;return this.readModule(l-3,0,l,f)&&(g|=1),g<<=1,this.readModule(l-2,0,l,f)&&(g|=1),g<<=1,this.readModule(l-1,0,l,f)&&(g|=1),g<<=1,this.readModule(0,f-4,l,f)&&(g|=1),g<<=1,this.readModule(0,f-3,l,f)&&(g|=1),g<<=1,this.readModule(0,f-2,l,f)&&(g|=1),g<<=1,this.readModule(0,f-1,l,f)&&(g|=1),g<<=1,this.readModule(1,f-1,l,f)&&(g|=1),g}readCorner3(l,f){let g=0;return this.readModule(l-1,0,l,f)&&(g|=1),g<<=1,this.readModule(l-1,f-1,l,f)&&(g|=1),g<<=1,this.readModule(0,f-3,l,f)&&(g|=1),g<<=1,this.readModule(0,f-2,l,f)&&(g|=1),g<<=1,this.readModule(0,f-1,l,f)&&(g|=1),g<<=1,this.readModule(1,f-3,l,f)&&(g|=1),g<<=1,this.readModule(1,f-2,l,f)&&(g|=1),g<<=1,this.readModule(1,f-1,l,f)&&(g|=1),g}readCorner4(l,f){let g=0;return this.readModule(l-3,0,l,f)&&(g|=1),g<<=1,this.readModule(l-2,0,l,f)&&(g|=1),g<<=1,this.readModule(l-1,0,l,f)&&(g|=1),g<<=1,this.readModule(0,f-2,l,f)&&(g|=1),g<<=1,this.readModule(0,f-1,l,f)&&(g|=1),g<<=1,this.readModule(1,f-1,l,f)&&(g|=1),g<<=1,this.readModule(2,f-1,l,f)&&(g|=1),g<<=1,this.readModule(3,f-1,l,f)&&(g|=1),g}extractDataRegion(l){const f=this.version.getSymbolSizeRows(),g=this.version.getSymbolSizeColumns();if(l.getHeight()!==f)throw new C("Dimension of bitMatrix must match the version size");const x=this.version.getDataRegionSizeRows(),w=this.version.getDataRegionSizeColumns(),y=f/x|0,T=g/w|0,N=y*x,D=T*w,H=new Ie(D,N);for(let Z=0;Z<y;++Z){const se=Z*x;for(let ye=0;ye<T;++ye){const Se=ye*w;for(let Ne=0;Ne<x;++Ne){const Le=Z*(x+2)+1+Ne,Ze=se+Ne;for(let _t=0;_t<w;++_t){const bt=ye*(w+2)+1+_t;if(l.get(bt,Le)){const xt=Se+_t;H.set(xt,Ze)}}}}}return H}}class ba{constructor(l,f){this.numDataCodewords=l,this.codewords=f}static getDataBlocks(l,f){const g=f.getECBlocks();let x=0;const w=g.getECBlocks();for(let Ne of w)x+=Ne.getCount();const y=new Array(x);let T=0;for(let Ne of w)for(let Le=0;Le<Ne.getCount();Le++){const Ze=Ne.getDataCodewords(),_t=g.getECCodewords()+Ze;y[T++]=new ba(Ze,new Uint8Array(_t))}const D=y[0].codewords.length-g.getECCodewords(),H=D-1;let Z=0;for(let Ne=0;Ne<H;Ne++)for(let Le=0;Le<T;Le++)y[Le].codewords[Ne]=l[Z++];const se=f.getVersionNumber()===24,ye=se?8:T;for(let Ne=0;Ne<ye;Ne++)y[Ne].codewords[D-1]=l[Z++];const Se=y[0].codewords.length;for(let Ne=D;Ne<Se;Ne++)for(let Le=0;Le<T;Le++){const Ze=se?(Le+8)%T:Le,_t=se&&Ze>7?Ne-1:Ne;y[Ze].codewords[_t]=l[Z++]}if(Z!==l.length)throw new C;return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class is{constructor(l){this.bytes=l,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(l){if(l<1||l>32||l>this.available())throw new C(""+l);let f=0,g=this.bitOffset,x=this.byteOffset;const w=this.bytes;if(g>0){const y=8-g,T=l<y?l:y,N=y-T,D=255>>8-T<<N;f=(w[x]&D)>>N,l-=T,g+=T,g===8&&(g=0,x++)}if(l>0){for(;l>=8;)f=f<<8|w[x]&255,x++,l-=8;if(l>0){const y=8-l,T=255>>y<<y;f=f<<l|(w[x]&T)>>y,g+=l}}return this.bitOffset=g,this.byteOffset=x,f}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Gr;(function(J){J[J.PAD_ENCODE=0]="PAD_ENCODE",J[J.ASCII_ENCODE=1]="ASCII_ENCODE",J[J.C40_ENCODE=2]="C40_ENCODE",J[J.TEXT_ENCODE=3]="TEXT_ENCODE",J[J.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",J[J.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",J[J.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gr||(Gr={}));class na{static decode(l){const f=new is(l),g=new G,x=new G,w=new Array;let y=Gr.ASCII_ENCODE;do if(y===Gr.ASCII_ENCODE)y=this.decodeAsciiSegment(f,g,x);else{switch(y){case Gr.C40_ENCODE:this.decodeC40Segment(f,g);break;case Gr.TEXT_ENCODE:this.decodeTextSegment(f,g);break;case Gr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(f,g);break;case Gr.EDIFACT_ENCODE:this.decodeEdifactSegment(f,g);break;case Gr.BASE256_ENCODE:this.decodeBase256Segment(f,g,w);break;default:throw new M}y=Gr.ASCII_ENCODE}while(y!==Gr.PAD_ENCODE&&f.available()>0);return x.length()>0&&g.append(x.toString()),new He(l,g.toString(),w.length===0?null:w,null)}static decodeAsciiSegment(l,f,g){let x=!1;do{let w=l.readBits(8);if(w===0)throw new M;if(w<=128)return x&&(w+=128),f.append(String.fromCharCode(w-1)),Gr.ASCII_ENCODE;if(w===129)return Gr.PAD_ENCODE;if(w<=229){const y=w-130;y<10&&f.append("0"),f.append(""+y)}else switch(w){case 230:return Gr.C40_ENCODE;case 231:return Gr.BASE256_ENCODE;case 232:f.append("");break;case 233:case 234:break;case 235:x=!0;break;case 236:f.append("[)>05"),g.insert(0,"");break;case 237:f.append("[)>06"),g.insert(0,"");break;case 238:return Gr.ANSIX12_ENCODE;case 239:return Gr.TEXT_ENCODE;case 240:return Gr.EDIFACT_ENCODE;case 241:break;default:if(w!==254||l.available()!==0)throw new M;break}}while(l.available()>0);return Gr.ASCII_ENCODE}static decodeC40Segment(l,f){let g=!1;const x=[];let w=0;do{if(l.available()===8)return;const y=l.readBits(8);if(y===254)return;this.parseTwoBytes(y,l.readBits(8),x);for(let T=0;T<3;T++){const N=x[T];switch(w){case 0:if(N<3)w=N+1;else if(N<this.C40_BASIC_SET_CHARS.length){const D=this.C40_BASIC_SET_CHARS[N];g?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),g=!1):f.append(D)}else throw new M;break;case 1:g?(f.append(String.fromCharCode(N+128)),g=!1):f.append(String.fromCharCode(N)),w=0;break;case 2:if(N<this.C40_SHIFT2_SET_CHARS.length){const D=this.C40_SHIFT2_SET_CHARS[N];g?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),g=!1):f.append(D)}else switch(N){case 27:f.append("");break;case 30:g=!0;break;default:throw new M}w=0;break;case 3:g?(f.append(String.fromCharCode(N+224)),g=!1):f.append(String.fromCharCode(N+96)),w=0;break;default:throw new M}}}while(l.available()>0)}static decodeTextSegment(l,f){let g=!1,x=[],w=0;do{if(l.available()===8)return;const y=l.readBits(8);if(y===254)return;this.parseTwoBytes(y,l.readBits(8),x);for(let T=0;T<3;T++){const N=x[T];switch(w){case 0:if(N<3)w=N+1;else if(N<this.TEXT_BASIC_SET_CHARS.length){const D=this.TEXT_BASIC_SET_CHARS[N];g?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),g=!1):f.append(D)}else throw new M;break;case 1:g?(f.append(String.fromCharCode(N+128)),g=!1):f.append(String.fromCharCode(N)),w=0;break;case 2:if(N<this.TEXT_SHIFT2_SET_CHARS.length){const D=this.TEXT_SHIFT2_SET_CHARS[N];g?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),g=!1):f.append(D)}else switch(N){case 27:f.append("");break;case 30:g=!0;break;default:throw new M}w=0;break;case 3:if(N<this.TEXT_SHIFT3_SET_CHARS.length){const D=this.TEXT_SHIFT3_SET_CHARS[N];g?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),g=!1):f.append(D),w=0}else throw new M;break;default:throw new M}}}while(l.available()>0)}static decodeAnsiX12Segment(l,f){const g=[];do{if(l.available()===8)return;const x=l.readBits(8);if(x===254)return;this.parseTwoBytes(x,l.readBits(8),g);for(let w=0;w<3;w++){const y=g[w];switch(y){case 0:f.append("\r");break;case 1:f.append("*");break;case 2:f.append(">");break;case 3:f.append(" ");break;default:if(y<14)f.append(String.fromCharCode(y+44));else if(y<40)f.append(String.fromCharCode(y+51));else throw new M;break}}}while(l.available()>0)}static parseTwoBytes(l,f,g){let x=(l<<8)+f-1,w=Math.floor(x/1600);g[0]=w,x-=w*1600,w=Math.floor(x/40),g[1]=w,g[2]=x-w*40}static decodeEdifactSegment(l,f){do{if(l.available()<=16)return;for(let g=0;g<4;g++){let x=l.readBits(6);if(x===31){const w=8-l.getBitOffset();w!==8&&l.readBits(w);return}(x&32)===0&&(x|=64),f.append(String.fromCharCode(x))}}while(l.available()>0)}static decodeBase256Segment(l,f,g){let x=1+l.getByteOffset();const w=this.unrandomize255State(l.readBits(8),x++);let y;if(w===0?y=l.available()/8|0:w<250?y=w:y=250*(w-249)+this.unrandomize255State(l.readBits(8),x++),y<0)throw new M;const T=new Uint8Array(y);for(let N=0;N<y;N++){if(l.available()<8)throw new M;T[N]=this.unrandomize255State(l.readBits(8),x++)}g.push(T);try{f.append(Y.decode(T,X.ISO88591))}catch(N){throw new Bt("Platform does not support required encoding: "+N.message)}}static unrandomize255State(l,f){const g=149*f%255+1,x=l-g;return x>=0?x:x+256}}na.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],na.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],na.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],na.TEXT_SHIFT2_SET_CHARS=na.C40_SHIFT2_SET_CHARS,na.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class C0{constructor(){this.rsDecoder=new kt(Oe.DATA_MATRIX_FIELD_256)}decode(l){const f=new qn(l),g=f.getVersion(),x=f.readCodewords(),w=ba.getDataBlocks(x,g);let y=0;for(let D of w)y+=D.getNumDataCodewords();const T=new Uint8Array(y),N=w.length;for(let D=0;D<N;D++){const H=w[D],Z=H.getCodewords(),se=H.getNumDataCodewords();this.correctErrors(Z,se);for(let ye=0;ye<se;ye++)T[ye*N+D]=Z[ye]}return na.decode(T)}correctErrors(l,f){const g=new Int32Array(l);try{this.rsDecoder.decode(g,l.length-f)}catch{throw new I}for(let x=0;x<f;x++)l[x]=g[x]}}class xn{constructor(l){this.image=l,this.rectangleDetector=new Ue(this.image)}detect(){const l=this.rectangleDetector.detect();let f=this.detectSolid1(l);if(f=this.detectSolid2(f),f[3]=this.correctTopRight(f),!f[3])throw new ge;f=this.shiftToModuleCenter(f);const g=f[0],x=f[1],w=f[2],y=f[3];let T=this.transitionsBetween(g,y)+1,N=this.transitionsBetween(w,y)+1;(T&1)===1&&(T+=1),(N&1)===1&&(N+=1),4*T<7*N&&4*N<7*T&&(T=N=Math.max(T,N));let D=xn.sampleGrid(this.image,g,x,w,y,T,N);return new er(D,[g,x,w,y])}static shiftPoint(l,f,g){let x=(f.getX()-l.getX())/(g+1),w=(f.getY()-l.getY())/(g+1);return new At(l.getX()+x,l.getY()+w)}static moveAway(l,f,g){let x=l.getX(),w=l.getY();return x<f?x-=1:x+=1,w<g?w-=1:w+=1,new At(x,w)}detectSolid1(l){let f=l[0],g=l[1],x=l[3],w=l[2],y=this.transitionsBetween(f,g),T=this.transitionsBetween(g,x),N=this.transitionsBetween(x,w),D=this.transitionsBetween(w,f),H=y,Z=[w,f,g,x];return H>T&&(H=T,Z[0]=f,Z[1]=g,Z[2]=x,Z[3]=w),H>N&&(H=N,Z[0]=g,Z[1]=x,Z[2]=w,Z[3]=f),H>D&&(Z[0]=x,Z[1]=w,Z[2]=f,Z[3]=g),Z}detectSolid2(l){let f=l[0],g=l[1],x=l[2],w=l[3],y=this.transitionsBetween(f,w),T=xn.shiftPoint(g,x,(y+1)*4),N=xn.shiftPoint(x,g,(y+1)*4),D=this.transitionsBetween(T,f),H=this.transitionsBetween(N,w);return D<H?(l[0]=f,l[1]=g,l[2]=x,l[3]=w):(l[0]=g,l[1]=x,l[2]=w,l[3]=f),l}correctTopRight(l){let f=l[0],g=l[1],x=l[2],w=l[3],y=this.transitionsBetween(f,w),T=this.transitionsBetween(g,w),N=xn.shiftPoint(f,g,(T+1)*4),D=xn.shiftPoint(x,g,(y+1)*4);y=this.transitionsBetween(N,w),T=this.transitionsBetween(D,w);let H=new At(w.getX()+(x.getX()-g.getX())/(y+1),w.getY()+(x.getY()-g.getY())/(y+1)),Z=new At(w.getX()+(f.getX()-g.getX())/(T+1),w.getY()+(f.getY()-g.getY())/(T+1));if(!this.isValid(H))return this.isValid(Z)?Z:null;if(!this.isValid(Z))return H;let se=this.transitionsBetween(N,H)+this.transitionsBetween(D,H),ye=this.transitionsBetween(N,Z)+this.transitionsBetween(D,Z);return se>ye?H:Z}shiftToModuleCenter(l){let f=l[0],g=l[1],x=l[2],w=l[3],y=this.transitionsBetween(f,w)+1,T=this.transitionsBetween(x,w)+1,N=xn.shiftPoint(f,g,T*4),D=xn.shiftPoint(x,g,y*4);y=this.transitionsBetween(N,w)+1,T=this.transitionsBetween(D,w)+1,(y&1)===1&&(y+=1),(T&1)===1&&(T+=1);let H=(f.getX()+g.getX()+x.getX()+w.getX())/4,Z=(f.getY()+g.getY()+x.getY()+w.getY())/4;f=xn.moveAway(f,H,Z),g=xn.moveAway(g,H,Z),x=xn.moveAway(x,H,Z),w=xn.moveAway(w,H,Z);let se,ye;return N=xn.shiftPoint(f,g,T*4),N=xn.shiftPoint(N,w,y*4),se=xn.shiftPoint(g,f,T*4),se=xn.shiftPoint(se,x,y*4),D=xn.shiftPoint(x,w,T*4),D=xn.shiftPoint(D,g,y*4),ye=xn.shiftPoint(w,x,T*4),ye=xn.shiftPoint(ye,f,y*4),[N,se,D,ye]}isValid(l){return l.getX()>=0&&l.getX()<this.image.getWidth()&&l.getY()>0&&l.getY()<this.image.getHeight()}static sampleGrid(l,f,g,x,w,y,T){return cr.getInstance().sampleGrid(l,y,T,.5,.5,y-.5,.5,y-.5,T-.5,.5,T-.5,f.getX(),f.getY(),w.getX(),w.getY(),x.getX(),x.getY(),g.getX(),g.getY())}transitionsBetween(l,f){let g=Math.trunc(l.getX()),x=Math.trunc(l.getY()),w=Math.trunc(f.getX()),y=Math.trunc(f.getY()),T=Math.abs(y-x)>Math.abs(w-g);if(T){let Ne=g;g=x,x=Ne,Ne=w,w=y,y=Ne}let N=Math.abs(w-g),D=Math.abs(y-x),H=-N/2,Z=x<y?1:-1,se=g<w?1:-1,ye=0,Se=this.image.get(T?x:g,T?g:x);for(let Ne=g,Le=x;Ne!==w;Ne+=se){let Ze=this.image.get(T?Le:Ne,T?Ne:Le);if(Ze!==Se&&(ye++,Se=Ze),H+=D,H>0){if(Le===y)break;Le+=Z,H-=N}}return ye}}class Ms{constructor(){this.decoder=new C0}decode(l,f=null){let g,x;if(f!=null&&f.has(z.PURE_BARCODE)){const D=Ms.extractPureBits(l.getBlackMatrix());g=this.decoder.decode(D),x=Ms.NO_POINTS}else{const D=new xn(l.getBlackMatrix()).detect();g=this.decoder.decode(D.getBits()),x=D.getPoints()}const w=g.getRawBytes(),y=new oe(g.getText(),w,8*w.length,x,Ee.DATA_MATRIX,k.currentTimeMillis()),T=g.getByteSegments();T!=null&&y.putMetadata(Fe.BYTE_SEGMENTS,T);const N=g.getECLevel();return N!=null&&y.putMetadata(Fe.ERROR_CORRECTION_LEVEL,N),y}reset(){}static extractPureBits(l){const f=l.getTopLeftOnBit(),g=l.getBottomRightOnBit();if(f==null||g==null)throw new ge;const x=this.moduleSize(f,l);let w=f[1];const y=g[1];let T=f[0];const D=(g[0]-T+1)/x,H=(y-w+1)/x;if(D<=0||H<=0)throw new ge;const Z=x/2;w+=Z,T+=Z;const se=new Ie(D,H);for(let ye=0;ye<H;ye++){const Se=w+ye*x;for(let Ne=0;Ne<D;Ne++)l.get(T+Ne*x,Se)&&se.set(Ne,ye)}return se}static moduleSize(l,f){const g=f.getWidth();let x=l[0];const w=l[1];for(;x<g&&f.get(x,w);)x++;if(x===g)throw new ge;const y=x-l[0];if(y===0)throw new ge;return y}}Ms.NO_POINTS=[];class Dl extends ce{constructor(l=500){super(new Ms,l)}}var ss;(function(J){J[J.L=0]="L",J[J.M=1]="M",J[J.Q=2]="Q",J[J.H=3]="H"})(ss||(ss={}));class ur{constructor(l,f,g){this.value=l,this.stringValue=f,this.bits=g,ur.FOR_BITS.set(g,this),ur.FOR_VALUE.set(l,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(l){switch(l){case"L":return ur.L;case"M":return ur.M;case"Q":return ur.Q;case"H":return ur.H;default:throw new m(l+"not available")}}toString(){return this.stringValue}equals(l){if(!(l instanceof ur))return!1;const f=l;return this.value===f.value}static forBits(l){if(l<0||l>=ur.FOR_BITS.size)throw new C;return ur.FOR_BITS.get(l)}}ur.FOR_BITS=new Map,ur.FOR_VALUE=new Map,ur.L=new ur(ss.L,"L",1),ur.M=new ur(ss.M,"M",0),ur.Q=new ur(ss.Q,"Q",3),ur.H=new ur(ss.H,"H",2);class Dn{constructor(l){this.errorCorrectionLevel=ur.forBits(l>>3&3),this.dataMask=l&7}static numBitsDiffering(l,f){return Q.bitCount(l^f)}static decodeFormatInformation(l,f){const g=Dn.doDecodeFormatInformation(l,f);return g!==null?g:Dn.doDecodeFormatInformation(l^Dn.FORMAT_INFO_MASK_QR,f^Dn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(l,f){let g=Number.MAX_SAFE_INTEGER,x=0;for(const w of Dn.FORMAT_INFO_DECODE_LOOKUP){const y=w[0];if(y===l||y===f)return new Dn(w[1]);let T=Dn.numBitsDiffering(l,y);T<g&&(x=w[1],g=T),l!==f&&(T=Dn.numBitsDiffering(f,y),T<g&&(x=w[1],g=T))}return g<=3?new Dn(x):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(l){if(!(l instanceof Dn))return!1;const f=l;return this.errorCorrectionLevel===f.errorCorrectionLevel&&this.dataMask===f.dataMask}}Dn.FORMAT_INFO_MASK_QR=21522,Dn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class je{constructor(l,...f){this.ecCodewordsPerBlock=l,this.ecBlocks=f}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let l=0;const f=this.ecBlocks;for(const g of f)l+=g.getCount();return l}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class me{constructor(l,f){this.count=l,this.dataCodewords=f}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ft{constructor(l,f,...g){this.versionNumber=l,this.alignmentPatternCenters=f,this.ecBlocks=g;let x=0;const w=g[0].getECCodewordsPerBlock(),y=g[0].getECBlocks();for(const T of y)x+=T.getCount()*(T.getDataCodewords()+w);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(l){return this.ecBlocks[l.getValue()]}static getProvisionalVersionForDimension(l){if(l%4!==1)throw new M;try{return this.getVersionForNumber((l-17)/4)}catch{throw new M}}static getVersionForNumber(l){if(l<1||l>40)throw new C;return Ft.VERSIONS[l-1]}static decodeVersionInformation(l){let f=Number.MAX_SAFE_INTEGER,g=0;for(let x=0;x<Ft.VERSION_DECODE_INFO.length;x++){const w=Ft.VERSION_DECODE_INFO[x];if(w===l)return Ft.getVersionForNumber(x+7);const y=Dn.numBitsDiffering(l,w);y<f&&(g=x+7,f=y)}return f<=3?Ft.getVersionForNumber(g):null}buildFunctionPattern(){const l=this.getDimensionForVersion(),f=new Ie(l);f.setRegion(0,0,9,9),f.setRegion(l-8,0,8,9),f.setRegion(0,l-8,9,8);const g=this.alignmentPatternCenters.length;for(let x=0;x<g;x++){const w=this.alignmentPatternCenters[x]-2;for(let y=0;y<g;y++)x===0&&(y===0||y===g-1)||x===g-1&&y===0||f.setRegion(this.alignmentPatternCenters[y]-2,w,5,5)}return f.setRegion(6,9,1,l-17),f.setRegion(9,6,l-17,1),this.versionNumber>6&&(f.setRegion(l-11,0,3,6),f.setRegion(0,l-11,6,3)),f}toString(){return""+this.versionNumber}}Ft.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ft.VERSIONS=[new Ft(1,new Int32Array(0),new je(7,new me(1,19)),new je(10,new me(1,16)),new je(13,new me(1,13)),new je(17,new me(1,9))),new Ft(2,Int32Array.from([6,18]),new je(10,new me(1,34)),new je(16,new me(1,28)),new je(22,new me(1,22)),new je(28,new me(1,16))),new Ft(3,Int32Array.from([6,22]),new je(15,new me(1,55)),new je(26,new me(1,44)),new je(18,new me(2,17)),new je(22,new me(2,13))),new Ft(4,Int32Array.from([6,26]),new je(20,new me(1,80)),new je(18,new me(2,32)),new je(26,new me(2,24)),new je(16,new me(4,9))),new Ft(5,Int32Array.from([6,30]),new je(26,new me(1,108)),new je(24,new me(2,43)),new je(18,new me(2,15),new me(2,16)),new je(22,new me(2,11),new me(2,12))),new Ft(6,Int32Array.from([6,34]),new je(18,new me(2,68)),new je(16,new me(4,27)),new je(24,new me(4,19)),new je(28,new me(4,15))),new Ft(7,Int32Array.from([6,22,38]),new je(20,new me(2,78)),new je(18,new me(4,31)),new je(18,new me(2,14),new me(4,15)),new je(26,new me(4,13),new me(1,14))),new Ft(8,Int32Array.from([6,24,42]),new je(24,new me(2,97)),new je(22,new me(2,38),new me(2,39)),new je(22,new me(4,18),new me(2,19)),new je(26,new me(4,14),new me(2,15))),new Ft(9,Int32Array.from([6,26,46]),new je(30,new me(2,116)),new je(22,new me(3,36),new me(2,37)),new je(20,new me(4,16),new me(4,17)),new je(24,new me(4,12),new me(4,13))),new Ft(10,Int32Array.from([6,28,50]),new je(18,new me(2,68),new me(2,69)),new je(26,new me(4,43),new me(1,44)),new je(24,new me(6,19),new me(2,20)),new je(28,new me(6,15),new me(2,16))),new Ft(11,Int32Array.from([6,30,54]),new je(20,new me(4,81)),new je(30,new me(1,50),new me(4,51)),new je(28,new me(4,22),new me(4,23)),new je(24,new me(3,12),new me(8,13))),new Ft(12,Int32Array.from([6,32,58]),new je(24,new me(2,92),new me(2,93)),new je(22,new me(6,36),new me(2,37)),new je(26,new me(4,20),new me(6,21)),new je(28,new me(7,14),new me(4,15))),new Ft(13,Int32Array.from([6,34,62]),new je(26,new me(4,107)),new je(22,new me(8,37),new me(1,38)),new je(24,new me(8,20),new me(4,21)),new je(22,new me(12,11),new me(4,12))),new Ft(14,Int32Array.from([6,26,46,66]),new je(30,new me(3,115),new me(1,116)),new je(24,new me(4,40),new me(5,41)),new je(20,new me(11,16),new me(5,17)),new je(24,new me(11,12),new me(5,13))),new Ft(15,Int32Array.from([6,26,48,70]),new je(22,new me(5,87),new me(1,88)),new je(24,new me(5,41),new me(5,42)),new je(30,new me(5,24),new me(7,25)),new je(24,new me(11,12),new me(7,13))),new Ft(16,Int32Array.from([6,26,50,74]),new je(24,new me(5,98),new me(1,99)),new je(28,new me(7,45),new me(3,46)),new je(24,new me(15,19),new me(2,20)),new je(30,new me(3,15),new me(13,16))),new Ft(17,Int32Array.from([6,30,54,78]),new je(28,new me(1,107),new me(5,108)),new je(28,new me(10,46),new me(1,47)),new je(28,new me(1,22),new me(15,23)),new je(28,new me(2,14),new me(17,15))),new Ft(18,Int32Array.from([6,30,56,82]),new je(30,new me(5,120),new me(1,121)),new je(26,new me(9,43),new me(4,44)),new je(28,new me(17,22),new me(1,23)),new je(28,new me(2,14),new me(19,15))),new Ft(19,Int32Array.from([6,30,58,86]),new je(28,new me(3,113),new me(4,114)),new je(26,new me(3,44),new me(11,45)),new je(26,new me(17,21),new me(4,22)),new je(26,new me(9,13),new me(16,14))),new Ft(20,Int32Array.from([6,34,62,90]),new je(28,new me(3,107),new me(5,108)),new je(26,new me(3,41),new me(13,42)),new je(30,new me(15,24),new me(5,25)),new je(28,new me(15,15),new me(10,16))),new Ft(21,Int32Array.from([6,28,50,72,94]),new je(28,new me(4,116),new me(4,117)),new je(26,new me(17,42)),new je(28,new me(17,22),new me(6,23)),new je(30,new me(19,16),new me(6,17))),new Ft(22,Int32Array.from([6,26,50,74,98]),new je(28,new me(2,111),new me(7,112)),new je(28,new me(17,46)),new je(30,new me(7,24),new me(16,25)),new je(24,new me(34,13))),new Ft(23,Int32Array.from([6,30,54,78,102]),new je(30,new me(4,121),new me(5,122)),new je(28,new me(4,47),new me(14,48)),new je(30,new me(11,24),new me(14,25)),new je(30,new me(16,15),new me(14,16))),new Ft(24,Int32Array.from([6,28,54,80,106]),new je(30,new me(6,117),new me(4,118)),new je(28,new me(6,45),new me(14,46)),new je(30,new me(11,24),new me(16,25)),new je(30,new me(30,16),new me(2,17))),new Ft(25,Int32Array.from([6,32,58,84,110]),new je(26,new me(8,106),new me(4,107)),new je(28,new me(8,47),new me(13,48)),new je(30,new me(7,24),new me(22,25)),new je(30,new me(22,15),new me(13,16))),new Ft(26,Int32Array.from([6,30,58,86,114]),new je(28,new me(10,114),new me(2,115)),new je(28,new me(19,46),new me(4,47)),new je(28,new me(28,22),new me(6,23)),new je(30,new me(33,16),new me(4,17))),new Ft(27,Int32Array.from([6,34,62,90,118]),new je(30,new me(8,122),new me(4,123)),new je(28,new me(22,45),new me(3,46)),new je(30,new me(8,23),new me(26,24)),new je(30,new me(12,15),new me(28,16))),new Ft(28,Int32Array.from([6,26,50,74,98,122]),new je(30,new me(3,117),new me(10,118)),new je(28,new me(3,45),new me(23,46)),new je(30,new me(4,24),new me(31,25)),new je(30,new me(11,15),new me(31,16))),new Ft(29,Int32Array.from([6,30,54,78,102,126]),new je(30,new me(7,116),new me(7,117)),new je(28,new me(21,45),new me(7,46)),new je(30,new me(1,23),new me(37,24)),new je(30,new me(19,15),new me(26,16))),new Ft(30,Int32Array.from([6,26,52,78,104,130]),new je(30,new me(5,115),new me(10,116)),new je(28,new me(19,47),new me(10,48)),new je(30,new me(15,24),new me(25,25)),new je(30,new me(23,15),new me(25,16))),new Ft(31,Int32Array.from([6,30,56,82,108,134]),new je(30,new me(13,115),new me(3,116)),new je(28,new me(2,46),new me(29,47)),new je(30,new me(42,24),new me(1,25)),new je(30,new me(23,15),new me(28,16))),new Ft(32,Int32Array.from([6,34,60,86,112,138]),new je(30,new me(17,115)),new je(28,new me(10,46),new me(23,47)),new je(30,new me(10,24),new me(35,25)),new je(30,new me(19,15),new me(35,16))),new Ft(33,Int32Array.from([6,30,58,86,114,142]),new je(30,new me(17,115),new me(1,116)),new je(28,new me(14,46),new me(21,47)),new je(30,new me(29,24),new me(19,25)),new je(30,new me(11,15),new me(46,16))),new Ft(34,Int32Array.from([6,34,62,90,118,146]),new je(30,new me(13,115),new me(6,116)),new je(28,new me(14,46),new me(23,47)),new je(30,new me(44,24),new me(7,25)),new je(30,new me(59,16),new me(1,17))),new Ft(35,Int32Array.from([6,30,54,78,102,126,150]),new je(30,new me(12,121),new me(7,122)),new je(28,new me(12,47),new me(26,48)),new je(30,new me(39,24),new me(14,25)),new je(30,new me(22,15),new me(41,16))),new Ft(36,Int32Array.from([6,24,50,76,102,128,154]),new je(30,new me(6,121),new me(14,122)),new je(28,new me(6,47),new me(34,48)),new je(30,new me(46,24),new me(10,25)),new je(30,new me(2,15),new me(64,16))),new Ft(37,Int32Array.from([6,28,54,80,106,132,158]),new je(30,new me(17,122),new me(4,123)),new je(28,new me(29,46),new me(14,47)),new je(30,new me(49,24),new me(10,25)),new je(30,new me(24,15),new me(46,16))),new Ft(38,Int32Array.from([6,32,58,84,110,136,162]),new je(30,new me(4,122),new me(18,123)),new je(28,new me(13,46),new me(32,47)),new je(30,new me(48,24),new me(14,25)),new je(30,new me(42,15),new me(32,16))),new Ft(39,Int32Array.from([6,26,54,82,110,138,166]),new je(30,new me(20,117),new me(4,118)),new je(28,new me(40,47),new me(7,48)),new je(30,new me(43,24),new me(22,25)),new je(30,new me(10,15),new me(67,16))),new Ft(40,Int32Array.from([6,30,58,86,114,142,170]),new je(30,new me(19,118),new me(6,119)),new je(28,new me(18,47),new me(31,48)),new je(30,new me(34,24),new me(34,25)),new je(30,new me(20,15),new me(61,16)))];var In;(function(J){J[J.DATA_MASK_000=0]="DATA_MASK_000",J[J.DATA_MASK_001=1]="DATA_MASK_001",J[J.DATA_MASK_010=2]="DATA_MASK_010",J[J.DATA_MASK_011=3]="DATA_MASK_011",J[J.DATA_MASK_100=4]="DATA_MASK_100",J[J.DATA_MASK_101=5]="DATA_MASK_101",J[J.DATA_MASK_110=6]="DATA_MASK_110",J[J.DATA_MASK_111=7]="DATA_MASK_111"})(In||(In={}));class ii{constructor(l,f){this.value=l,this.isMasked=f}unmaskBitMatrix(l,f){for(let g=0;g<f;g++)for(let x=0;x<f;x++)this.isMasked(g,x)&&l.flip(x,g)}}ii.values=new Map([[In.DATA_MASK_000,new ii(In.DATA_MASK_000,(J,l)=>(J+l&1)===0)],[In.DATA_MASK_001,new ii(In.DATA_MASK_001,(J,l)=>(J&1)===0)],[In.DATA_MASK_010,new ii(In.DATA_MASK_010,(J,l)=>l%3===0)],[In.DATA_MASK_011,new ii(In.DATA_MASK_011,(J,l)=>(J+l)%3===0)],[In.DATA_MASK_100,new ii(In.DATA_MASK_100,(J,l)=>(Math.floor(J/2)+Math.floor(l/3)&1)===0)],[In.DATA_MASK_101,new ii(In.DATA_MASK_101,(J,l)=>J*l%6===0)],[In.DATA_MASK_110,new ii(In.DATA_MASK_110,(J,l)=>J*l%6<3)],[In.DATA_MASK_111,new ii(In.DATA_MASK_111,(J,l)=>(J+l+J*l%3&1)===0)]]);class Os{constructor(l){const f=l.getHeight();if(f<21||(f&3)!==1)throw new M;this.bitMatrix=l}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let l=0;for(let w=0;w<6;w++)l=this.copyBit(w,8,l);l=this.copyBit(7,8,l),l=this.copyBit(8,8,l),l=this.copyBit(8,7,l);for(let w=5;w>=0;w--)l=this.copyBit(8,w,l);const f=this.bitMatrix.getHeight();let g=0;const x=f-7;for(let w=f-1;w>=x;w--)g=this.copyBit(8,w,g);for(let w=f-8;w<f;w++)g=this.copyBit(w,8,g);if(this.parsedFormatInfo=Dn.decodeFormatInformation(l,g),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new M}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const l=this.bitMatrix.getHeight(),f=Math.floor((l-17)/4);if(f<=6)return Ft.getVersionForNumber(f);let g=0;const x=l-11;for(let y=5;y>=0;y--)for(let T=l-9;T>=x;T--)g=this.copyBit(T,y,g);let w=Ft.decodeVersionInformation(g);if(w!==null&&w.getDimensionForVersion()===l)return this.parsedVersion=w,w;g=0;for(let y=5;y>=0;y--)for(let T=l-9;T>=x;T--)g=this.copyBit(y,T,g);if(w=Ft.decodeVersionInformation(g),w!==null&&w.getDimensionForVersion()===l)return this.parsedVersion=w,w;throw new M}copyBit(l,f,g){return(this.isMirror?this.bitMatrix.get(f,l):this.bitMatrix.get(l,f))?g<<1|1:g<<1}readCodewords(){const l=this.readFormatInformation(),f=this.readVersion(),g=ii.values.get(l.getDataMask()),x=this.bitMatrix.getHeight();g.unmaskBitMatrix(this.bitMatrix,x);const w=f.buildFunctionPattern();let y=!0;const T=new Uint8Array(f.getTotalCodewords());let N=0,D=0,H=0;for(let Z=x-1;Z>0;Z-=2){Z===6&&Z--;for(let se=0;se<x;se++){const ye=y?x-1-se:se;for(let Se=0;Se<2;Se++)w.get(Z-Se,ye)||(H++,D<<=1,this.bitMatrix.get(Z-Se,ye)&&(D|=1),H===8&&(T[N++]=D,H=0,D=0))}y=!y}if(N!==f.getTotalCodewords())throw new M;return T}remask(){if(this.parsedFormatInfo===null)return;const l=ii.values[this.parsedFormatInfo.getDataMask()],f=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,f)}setMirror(l){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=l}mirror(){const l=this.bitMatrix;for(let f=0,g=l.getWidth();f<g;f++)for(let x=f+1,w=l.getHeight();x<w;x++)l.get(f,x)!==l.get(x,f)&&(l.flip(x,f),l.flip(f,x))}}class PA{constructor(l,f){this.numDataCodewords=l,this.codewords=f}static getDataBlocks(l,f,g){if(l.length!==f.getTotalCodewords())throw new C;const x=f.getECBlocksForLevel(g);let w=0;const y=x.getECBlocks();for(const Se of y)w+=Se.getCount();const T=new Array(w);let N=0;for(const Se of y)for(let Ne=0;Ne<Se.getCount();Ne++){const Le=Se.getDataCodewords(),Ze=x.getECCodewordsPerBlock()+Le;T[N++]=new PA(Le,new Uint8Array(Ze))}const D=T[0].codewords.length;let H=T.length-1;for(;H>=0&&T[H].codewords.length!==D;)H--;H++;const Z=D-x.getECCodewordsPerBlock();let se=0;for(let Se=0;Se<Z;Se++)for(let Ne=0;Ne<N;Ne++)T[Ne].codewords[Se]=l[se++];for(let Se=H;Se<N;Se++)T[Se].codewords[Z]=l[se++];const ye=T[0].codewords.length;for(let Se=Z;Se<ye;Se++)for(let Ne=0;Ne<N;Ne++){const Le=Ne<H?Se:Se+1;T[Ne].codewords[Le]=l[se++]}return T}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Fi;(function(J){J[J.TERMINATOR=0]="TERMINATOR",J[J.NUMERIC=1]="NUMERIC",J[J.ALPHANUMERIC=2]="ALPHANUMERIC",J[J.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",J[J.BYTE=4]="BYTE",J[J.ECI=5]="ECI",J[J.KANJI=6]="KANJI",J[J.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",J[J.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",J[J.HANZI=9]="HANZI"})(Fi||(Fi={}));class $t{constructor(l,f,g,x){this.value=l,this.stringValue=f,this.characterCountBitsForVersions=g,this.bits=x,$t.FOR_BITS.set(x,this),$t.FOR_VALUE.set(l,this)}static forBits(l){const f=$t.FOR_BITS.get(l);if(f===void 0)throw new C;return f}getCharacterCountBits(l){const f=l.getVersionNumber();let g;return f<=9?g=0:f<=26?g=1:g=2,this.characterCountBitsForVersions[g]}getValue(){return this.value}getBits(){return this.bits}equals(l){if(!(l instanceof $t))return!1;const f=l;return this.value===f.value}toString(){return this.stringValue}}$t.FOR_BITS=new Map,$t.FOR_VALUE=new Map,$t.TERMINATOR=new $t(Fi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),$t.NUMERIC=new $t(Fi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),$t.ALPHANUMERIC=new $t(Fi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),$t.STRUCTURED_APPEND=new $t(Fi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),$t.BYTE=new $t(Fi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),$t.ECI=new $t(Fi.ECI,"ECI",Int32Array.from([0,0,0]),7),$t.KANJI=new $t(Fi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),$t.FNC1_FIRST_POSITION=new $t(Fi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),$t.FNC1_SECOND_POSITION=new $t(Fi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),$t.HANZI=new $t(Fi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class dn{static decode(l,f,g,x){const w=new is(l);let y=new G;const T=new Array;let N=-1,D=-1;try{let H=null,Z=!1,se;do{if(w.available()<4)se=$t.TERMINATOR;else{const ye=w.readBits(4);se=$t.forBits(ye)}switch(se){case $t.TERMINATOR:break;case $t.FNC1_FIRST_POSITION:case $t.FNC1_SECOND_POSITION:Z=!0;break;case $t.STRUCTURED_APPEND:if(w.available()<16)throw new M;N=w.readBits(8),D=w.readBits(8);break;case $t.ECI:const ye=dn.parseECIValue(w);if(H=O.getCharacterSetECIByValue(ye),H===null)throw new M;break;case $t.HANZI:const Se=w.readBits(4),Ne=w.readBits(se.getCharacterCountBits(f));Se===dn.GB2312_SUBSET&&dn.decodeHanziSegment(w,y,Ne);break;default:const Le=w.readBits(se.getCharacterCountBits(f));switch(se){case $t.NUMERIC:dn.decodeNumericSegment(w,y,Le);break;case $t.ALPHANUMERIC:dn.decodeAlphanumericSegment(w,y,Le,Z);break;case $t.BYTE:dn.decodeByteSegment(w,y,Le,H,T,x);break;case $t.KANJI:dn.decodeKanjiSegment(w,y,Le);break;default:throw new M}break}}while(se!==$t.TERMINATOR)}catch{throw new M}return new He(l,y.toString(),T.length===0?null:T,g===null?null:g.toString(),N,D)}static decodeHanziSegment(l,f,g){if(g*13>l.available())throw new M;const x=new Uint8Array(2*g);let w=0;for(;g>0;){const y=l.readBits(13);let T=y/96<<8&4294967295|y%96;T<959?T+=41377:T+=42657,x[w]=T>>8&255,x[w+1]=T&255,w+=2,g--}try{f.append(Y.decode(x,X.GB2312))}catch(y){throw new M(y)}}static decodeKanjiSegment(l,f,g){if(g*13>l.available())throw new M;const x=new Uint8Array(2*g);let w=0;for(;g>0;){const y=l.readBits(13);let T=y/192<<8&4294967295|y%192;T<7936?T+=33088:T+=49472,x[w]=T>>8,x[w+1]=T,w+=2,g--}try{f.append(Y.decode(x,X.SHIFT_JIS))}catch(y){throw new M(y)}}static decodeByteSegment(l,f,g,x,w,y){if(8*g>l.available())throw new M;const T=new Uint8Array(g);for(let D=0;D<g;D++)T[D]=l.readBits(8);let N;x===null?N=X.guessEncoding(T,y):N=x.getName();try{f.append(Y.decode(T,N))}catch(D){throw new M(D)}w.push(T)}static toAlphaNumericChar(l){if(l>=dn.ALPHANUMERIC_CHARS.length)throw new M;return dn.ALPHANUMERIC_CHARS[l]}static decodeAlphanumericSegment(l,f,g,x){const w=f.length();for(;g>1;){if(l.available()<11)throw new M;const y=l.readBits(11);f.append(dn.toAlphaNumericChar(Math.floor(y/45))),f.append(dn.toAlphaNumericChar(y%45)),g-=2}if(g===1){if(l.available()<6)throw new M;f.append(dn.toAlphaNumericChar(l.readBits(6)))}if(x)for(let y=w;y<f.length();y++)f.charAt(y)==="%"&&(y<f.length()-1&&f.charAt(y+1)==="%"?f.deleteCharAt(y+1):f.setCharAt(y,""))}static decodeNumericSegment(l,f,g){for(;g>=3;){if(l.available()<10)throw new M;const x=l.readBits(10);if(x>=1e3)throw new M;f.append(dn.toAlphaNumericChar(Math.floor(x/100))),f.append(dn.toAlphaNumericChar(Math.floor(x/10)%10)),f.append(dn.toAlphaNumericChar(x%10)),g-=3}if(g===2){if(l.available()<7)throw new M;const x=l.readBits(7);if(x>=100)throw new M;f.append(dn.toAlphaNumericChar(Math.floor(x/10))),f.append(dn.toAlphaNumericChar(x%10))}else if(g===1){if(l.available()<4)throw new M;const x=l.readBits(4);if(x>=10)throw new M;f.append(dn.toAlphaNumericChar(x))}}static parseECIValue(l){const f=l.readBits(8);if((f&128)===0)return f&127;if((f&192)===128){const g=l.readBits(8);return(f&63)<<8&4294967295|g}if((f&224)===192){const g=l.readBits(16);return(f&31)<<16&4294967295|g}throw new M}}dn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",dn.GB2312_SUBSET=1;class Gc{constructor(l){this.mirrored=l}isMirrored(){return this.mirrored}applyMirroredCorrection(l){if(!this.mirrored||l===null||l.length<3)return;const f=l[0];l[0]=l[2],l[2]=f}}class E0{constructor(){this.rsDecoder=new kt(Oe.QR_CODE_FIELD_256)}decodeBooleanArray(l,f){return this.decodeBitMatrix(Ie.parseFromBooleanArray(l),f)}decodeBitMatrix(l,f){const g=new Os(l);let x=null;try{return this.decodeBitMatrixParser(g,f)}catch(w){x=w}try{g.remask(),g.setMirror(!0),g.readVersion(),g.readFormatInformation(),g.mirror();const w=this.decodeBitMatrixParser(g,f);return w.setOther(new Gc(!0)),w}catch(w){throw x!==null?x:w}}decodeBitMatrixParser(l,f){const g=l.readVersion(),x=l.readFormatInformation().getErrorCorrectionLevel(),w=l.readCodewords(),y=PA.getDataBlocks(w,g,x);let T=0;for(const H of y)T+=H.getNumDataCodewords();const N=new Uint8Array(T);let D=0;for(const H of y){const Z=H.getCodewords(),se=H.getNumDataCodewords();this.correctErrors(Z,se);for(let ye=0;ye<se;ye++)N[D++]=Z[ye]}return dn.decode(N,g,x,f)}correctErrors(l,f){const g=new Int32Array(l);try{this.rsDecoder.decode(g,l.length-f)}catch{throw new I}for(let x=0;x<f;x++)l[x]=g[x]}}class Ls extends At{constructor(l,f,g){super(l,f),this.estimatedModuleSize=g}aboutEquals(l,f,g){if(Math.abs(f-this.getY())<=l&&Math.abs(g-this.getX())<=l){const x=Math.abs(l-this.estimatedModuleSize);return x<=1||x<=this.estimatedModuleSize}return!1}combineEstimate(l,f,g){const x=(this.getX()+f)/2,w=(this.getY()+l)/2,y=(this.estimatedModuleSize+g)/2;return new Ls(x,w,y)}}class Gn{constructor(l,f,g,x,w,y,T){this.image=l,this.startX=f,this.startY=g,this.width=x,this.height=w,this.moduleSize=y,this.resultPointCallback=T,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const l=this.startX,f=this.height,g=this.width,x=l+g,w=this.startY+f/2,y=new Int32Array(3),T=this.image;for(let N=0;N<f;N++){const D=w+((N&1)===0?Math.floor((N+1)/2):-Math.floor((N+1)/2));y[0]=0,y[1]=0,y[2]=0;let H=l;for(;H<x&&!T.get(H,D);)H++;let Z=0;for(;H<x;){if(T.get(H,D))if(Z===1)y[1]++;else if(Z===2){if(this.foundPatternCross(y)){const se=this.handlePossibleCenter(y,D,H);if(se!==null)return se}y[0]=y[2],y[1]=1,y[2]=0,Z=1}else y[++Z]++;else Z===1&&Z++,y[Z]++;H++}if(this.foundPatternCross(y)){const se=this.handlePossibleCenter(y,D,x);if(se!==null)return se}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ge}static centerFromEnd(l,f){return f-l[2]-l[1]/2}foundPatternCross(l){const f=this.moduleSize,g=f/2;for(let x=0;x<3;x++)if(Math.abs(f-l[x])>=g)return!1;return!0}crossCheckVertical(l,f,g,x){const w=this.image,y=w.getHeight(),T=this.crossCheckStateCount;T[0]=0,T[1]=0,T[2]=0;let N=l;for(;N>=0&&w.get(f,N)&&T[1]<=g;)T[1]++,N--;if(N<0||T[1]>g)return NaN;for(;N>=0&&!w.get(f,N)&&T[0]<=g;)T[0]++,N--;if(T[0]>g)return NaN;for(N=l+1;N<y&&w.get(f,N)&&T[1]<=g;)T[1]++,N++;if(N===y||T[1]>g)return NaN;for(;N<y&&!w.get(f,N)&&T[2]<=g;)T[2]++,N++;if(T[2]>g)return NaN;const D=T[0]+T[1]+T[2];return 5*Math.abs(D-x)>=2*x?NaN:this.foundPatternCross(T)?Gn.centerFromEnd(T,N):NaN}handlePossibleCenter(l,f,g){const x=l[0]+l[1]+l[2],w=Gn.centerFromEnd(l,g),y=this.crossCheckVertical(f,w,2*l[1],x);if(!isNaN(y)){const T=(l[0]+l[1]+l[2])/3;for(const D of this.possibleCenters)if(D.aboutEquals(T,y,w))return D.combineEstimate(y,w,T);const N=new Ls(w,y,T);this.possibleCenters.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return null}}class mo extends At{constructor(l,f,g,x){super(l,f),this.estimatedModuleSize=g,this.count=x,x===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(l,f,g){if(Math.abs(f-this.getY())<=l&&Math.abs(g-this.getX())<=l){const x=Math.abs(l-this.estimatedModuleSize);return x<=1||x<=this.estimatedModuleSize}return!1}combineEstimate(l,f,g){const x=this.count+1,w=(this.count*this.getX()+f)/x,y=(this.count*this.getY()+l)/x,T=(this.count*this.estimatedModuleSize+g)/x;return new mo(w,y,T,x)}}class Ul{constructor(l){this.bottomLeft=l[0],this.topLeft=l[1],this.topRight=l[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class wn{constructor(l,f){this.image=l,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=f}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(l){const f=l!=null&&l.get(z.TRY_HARDER)!==void 0,g=l!=null&&l.get(z.PURE_BARCODE)!==void 0,x=this.image,w=x.getHeight(),y=x.getWidth();let T=Math.floor(3*w/(4*wn.MAX_MODULES));(T<wn.MIN_SKIP||f)&&(T=wn.MIN_SKIP);let N=!1;const D=new Int32Array(5);for(let Z=T-1;Z<w&&!N;Z+=T){D[0]=0,D[1]=0,D[2]=0,D[3]=0,D[4]=0;let se=0;for(let ye=0;ye<y;ye++)if(x.get(ye,Z))(se&1)===1&&se++,D[se]++;else if((se&1)===0)if(se===4)if(wn.foundPatternCross(D)){if(this.handlePossibleCenter(D,Z,ye,g)===!0)if(T=2,this.hasSkipped===!0)N=this.haveMultiplyConfirmedCenters();else{const Ne=this.findRowSkip();Ne>D[2]&&(Z+=Ne-D[2]-T,ye=y-1)}else{D[0]=D[2],D[1]=D[3],D[2]=D[4],D[3]=1,D[4]=0,se=3;continue}se=0,D[0]=0,D[1]=0,D[2]=0,D[3]=0,D[4]=0}else D[0]=D[2],D[1]=D[3],D[2]=D[4],D[3]=1,D[4]=0,se=3;else D[++se]++;else D[se]++;wn.foundPatternCross(D)&&this.handlePossibleCenter(D,Z,y,g)===!0&&(T=D[0],this.hasSkipped&&(N=this.haveMultiplyConfirmedCenters()))}const H=this.selectBestPatterns();return At.orderBestPatterns(H),new Ul(H)}static centerFromEnd(l,f){return f-l[4]-l[3]-l[2]/2}static foundPatternCross(l){let f=0;for(let w=0;w<5;w++){const y=l[w];if(y===0)return!1;f+=y}if(f<7)return!1;const g=f/7,x=g/2;return Math.abs(g-l[0])<x&&Math.abs(g-l[1])<x&&Math.abs(3*g-l[2])<3*x&&Math.abs(g-l[3])<x&&Math.abs(g-l[4])<x}getCrossCheckStateCount(){const l=this.crossCheckStateCount;return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l}crossCheckDiagonal(l,f,g,x){const w=this.getCrossCheckStateCount();let y=0;const T=this.image;for(;l>=y&&f>=y&&T.get(f-y,l-y);)w[2]++,y++;if(l<y||f<y)return!1;for(;l>=y&&f>=y&&!T.get(f-y,l-y)&&w[1]<=g;)w[1]++,y++;if(l<y||f<y||w[1]>g)return!1;for(;l>=y&&f>=y&&T.get(f-y,l-y)&&w[0]<=g;)w[0]++,y++;if(w[0]>g)return!1;const N=T.getHeight(),D=T.getWidth();for(y=1;l+y<N&&f+y<D&&T.get(f+y,l+y);)w[2]++,y++;if(l+y>=N||f+y>=D)return!1;for(;l+y<N&&f+y<D&&!T.get(f+y,l+y)&&w[3]<g;)w[3]++,y++;if(l+y>=N||f+y>=D||w[3]>=g)return!1;for(;l+y<N&&f+y<D&&T.get(f+y,l+y)&&w[4]<g;)w[4]++,y++;if(w[4]>=g)return!1;const H=w[0]+w[1]+w[2]+w[3]+w[4];return Math.abs(H-x)<2*x&&wn.foundPatternCross(w)}crossCheckVertical(l,f,g,x){const w=this.image,y=w.getHeight(),T=this.getCrossCheckStateCount();let N=l;for(;N>=0&&w.get(f,N);)T[2]++,N--;if(N<0)return NaN;for(;N>=0&&!w.get(f,N)&&T[1]<=g;)T[1]++,N--;if(N<0||T[1]>g)return NaN;for(;N>=0&&w.get(f,N)&&T[0]<=g;)T[0]++,N--;if(T[0]>g)return NaN;for(N=l+1;N<y&&w.get(f,N);)T[2]++,N++;if(N===y)return NaN;for(;N<y&&!w.get(f,N)&&T[3]<g;)T[3]++,N++;if(N===y||T[3]>=g)return NaN;for(;N<y&&w.get(f,N)&&T[4]<g;)T[4]++,N++;if(T[4]>=g)return NaN;const D=T[0]+T[1]+T[2]+T[3]+T[4];return 5*Math.abs(D-x)>=2*x?NaN:wn.foundPatternCross(T)?wn.centerFromEnd(T,N):NaN}crossCheckHorizontal(l,f,g,x){const w=this.image,y=w.getWidth(),T=this.getCrossCheckStateCount();let N=l;for(;N>=0&&w.get(N,f);)T[2]++,N--;if(N<0)return NaN;for(;N>=0&&!w.get(N,f)&&T[1]<=g;)T[1]++,N--;if(N<0||T[1]>g)return NaN;for(;N>=0&&w.get(N,f)&&T[0]<=g;)T[0]++,N--;if(T[0]>g)return NaN;for(N=l+1;N<y&&w.get(N,f);)T[2]++,N++;if(N===y)return NaN;for(;N<y&&!w.get(N,f)&&T[3]<g;)T[3]++,N++;if(N===y||T[3]>=g)return NaN;for(;N<y&&w.get(N,f)&&T[4]<g;)T[4]++,N++;if(T[4]>=g)return NaN;const D=T[0]+T[1]+T[2]+T[3]+T[4];return 5*Math.abs(D-x)>=x?NaN:wn.foundPatternCross(T)?wn.centerFromEnd(T,N):NaN}handlePossibleCenter(l,f,g,x){const w=l[0]+l[1]+l[2]+l[3]+l[4];let y=wn.centerFromEnd(l,g),T=this.crossCheckVertical(f,Math.floor(y),l[2],w);if(!isNaN(T)&&(y=this.crossCheckHorizontal(Math.floor(y),Math.floor(T),l[2],w),!isNaN(y)&&(!x||this.crossCheckDiagonal(Math.floor(T),Math.floor(y),l[2],w)))){const N=w/7;let D=!1;const H=this.possibleCenters;for(let Z=0,se=H.length;Z<se;Z++){const ye=H[Z];if(ye.aboutEquals(N,T,y)){H[Z]=ye.combineEstimate(T,y,N),D=!0;break}}if(!D){const Z=new mo(y,T,N);H.push(Z),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Z)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let f=null;for(const g of this.possibleCenters)if(g.getCount()>=wn.CENTER_QUORUM)if(f==null)f=g;else return this.hasSkipped=!0,Math.floor((Math.abs(f.getX()-g.getX())-Math.abs(f.getY()-g.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let l=0,f=0;const g=this.possibleCenters.length;for(const y of this.possibleCenters)y.getCount()>=wn.CENTER_QUORUM&&(l++,f+=y.getEstimatedModuleSize());if(l<3)return!1;const x=f/g;let w=0;for(const y of this.possibleCenters)w+=Math.abs(y.getEstimatedModuleSize()-x);return w<=.05*f}selectBestPatterns(){const l=this.possibleCenters.length;if(l<3)throw new ge;const f=this.possibleCenters;let g;if(l>3){let x=0,w=0;for(const N of this.possibleCenters){const D=N.getEstimatedModuleSize();x+=D,w+=D*D}g=x/l;let y=Math.sqrt(w/l-g*g);f.sort((N,D)=>{const H=Math.abs(D.getEstimatedModuleSize()-g),Z=Math.abs(N.getEstimatedModuleSize()-g);return H<Z?-1:H>Z?1:0});const T=Math.max(.2*g,y);for(let N=0;N<f.length&&f.length>3;N++){const D=f[N];Math.abs(D.getEstimatedModuleSize()-g)>T&&(f.splice(N,1),N--)}}if(f.length>3){let x=0;for(const w of f)x+=w.getEstimatedModuleSize();g=x/f.length,f.sort((w,y)=>{if(y.getCount()===w.getCount()){const T=Math.abs(y.getEstimatedModuleSize()-g),N=Math.abs(w.getEstimatedModuleSize()-g);return T<N?1:T>N?-1:0}else return y.getCount()-w.getCount()}),f.splice(3)}return[f[0],f[1],f[2]]}}wn.CENTER_QUORUM=2,wn.MIN_SKIP=3,wn.MAX_MODULES=57;class bi{constructor(l){this.image=l}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(l){this.resultPointCallback=l==null?null:l.get(z.NEED_RESULT_POINT_CALLBACK);const g=new wn(this.image,this.resultPointCallback).find(l);return this.processFinderPatternInfo(g)}processFinderPatternInfo(l){const f=l.getTopLeft(),g=l.getTopRight(),x=l.getBottomLeft(),w=this.calculateModuleSize(f,g,x);if(w<1)throw new ge("No pattern found in proccess finder.");const y=bi.computeDimension(f,g,x,w),T=Ft.getProvisionalVersionForDimension(y),N=T.getDimensionForVersion()-7;let D=null;if(T.getAlignmentPatternCenters().length>0){const ye=g.getX()-f.getX()+x.getX(),Se=g.getY()-f.getY()+x.getY(),Ne=1-3/N,Le=Math.floor(f.getX()+Ne*(ye-f.getX())),Ze=Math.floor(f.getY()+Ne*(Se-f.getY()));for(let _t=4;_t<=16;_t<<=1)try{D=this.findAlignmentInRegion(w,Le,Ze,_t);break}catch(bt){if(!(bt instanceof ge))throw bt}}const H=bi.createTransform(f,g,x,D,y),Z=bi.sampleGrid(this.image,H,y);let se;return D===null?se=[x,f,g]:se=[x,f,g,D],new er(Z,se)}static createTransform(l,f,g,x,w){const y=w-3.5;let T,N,D,H;return x!==null?(T=x.getX(),N=x.getY(),D=y-3,H=D):(T=f.getX()-l.getX()+g.getX(),N=f.getY()-l.getY()+g.getY(),D=y,H=y),Lt.quadrilateralToQuadrilateral(3.5,3.5,y,3.5,D,H,3.5,y,l.getX(),l.getY(),f.getX(),f.getY(),T,N,g.getX(),g.getY())}static sampleGrid(l,f,g){return cr.getInstance().sampleGridWithTransform(l,g,g,f)}static computeDimension(l,f,g,x){const w=jt.round(At.distance(l,f)/x),y=jt.round(At.distance(l,g)/x);let T=Math.floor((w+y)/2)+7;switch(T&3){case 0:T++;break;case 2:T--;break;case 3:throw new ge("Dimensions could be not found.")}return T}calculateModuleSize(l,f,g){return(this.calculateModuleSizeOneWay(l,f)+this.calculateModuleSizeOneWay(l,g))/2}calculateModuleSizeOneWay(l,f){const g=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(f.getX()),Math.floor(f.getY())),x=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(f.getX()),Math.floor(f.getY()),Math.floor(l.getX()),Math.floor(l.getY()));return isNaN(g)?x/7:isNaN(x)?g/7:(g+x)/14}sizeOfBlackWhiteBlackRunBothWays(l,f,g,x){let w=this.sizeOfBlackWhiteBlackRun(l,f,g,x),y=1,T=l-(g-l);T<0?(y=l/(l-T),T=0):T>=this.image.getWidth()&&(y=(this.image.getWidth()-1-l)/(T-l),T=this.image.getWidth()-1);let N=Math.floor(f-(x-f)*y);return y=1,N<0?(y=f/(f-N),N=0):N>=this.image.getHeight()&&(y=(this.image.getHeight()-1-f)/(N-f),N=this.image.getHeight()-1),T=Math.floor(l+(T-l)*y),w+=this.sizeOfBlackWhiteBlackRun(l,f,T,N),w-1}sizeOfBlackWhiteBlackRun(l,f,g,x){const w=Math.abs(x-f)>Math.abs(g-l);if(w){let ye=l;l=f,f=ye,ye=g,g=x,x=ye}const y=Math.abs(g-l),T=Math.abs(x-f);let N=-y/2;const D=l<g?1:-1,H=f<x?1:-1;let Z=0;const se=g+D;for(let ye=l,Se=f;ye!==se;ye+=D){const Ne=w?Se:ye,Le=w?ye:Se;if(Z===1===this.image.get(Ne,Le)){if(Z===2)return jt.distance(ye,Se,l,f);Z++}if(N+=T,N>0){if(Se===x)break;Se+=H,N-=y}}return Z===2?jt.distance(g+D,x,l,f):NaN}findAlignmentInRegion(l,f,g,x){const w=Math.floor(x*l),y=Math.max(0,f-w),T=Math.min(this.image.getWidth()-1,f+w);if(T-y<l*3)throw new ge("Alignment top exceeds estimated module size.");const N=Math.max(0,g-w),D=Math.min(this.image.getHeight()-1,g+w);if(D-N<l*3)throw new ge("Alignment bottom exceeds estimated module size.");return new Gn(this.image,y,N,T-y,D-N,l,this.resultPointCallback).find()}}class ia{constructor(){this.decoder=new E0}getDecoder(){return this.decoder}decode(l,f){let g,x;if(f!=null&&f.get(z.PURE_BARCODE)!==void 0){const N=ia.extractPureBits(l.getBlackMatrix());g=this.decoder.decodeBitMatrix(N,f),x=ia.NO_POINTS}else{const N=new bi(l.getBlackMatrix()).detect(f);g=this.decoder.decodeBitMatrix(N.getBits(),f),x=N.getPoints()}g.getOther()instanceof Gc&&g.getOther().applyMirroredCorrection(x);const w=new oe(g.getText(),g.getRawBytes(),void 0,x,Ee.QR_CODE,void 0),y=g.getByteSegments();y!==null&&w.putMetadata(Fe.BYTE_SEGMENTS,y);const T=g.getECLevel();return T!==null&&w.putMetadata(Fe.ERROR_CORRECTION_LEVEL,T),g.hasStructuredAppend()&&(w.putMetadata(Fe.STRUCTURED_APPEND_SEQUENCE,g.getStructuredAppendSequenceNumber()),w.putMetadata(Fe.STRUCTURED_APPEND_PARITY,g.getStructuredAppendParity())),w}reset(){}static extractPureBits(l){const f=l.getTopLeftOnBit(),g=l.getBottomRightOnBit();if(f===null||g===null)throw new ge;const x=this.moduleSize(f,l);let w=f[1],y=g[1],T=f[0],N=g[0];if(T>=N||w>=y)throw new ge;if(y-w!==N-T&&(N=T+(y-w),N>=l.getWidth()))throw new ge;const D=Math.round((N-T+1)/x),H=Math.round((y-w+1)/x);if(D<=0||H<=0)throw new ge;if(H!==D)throw new ge;const Z=Math.floor(x/2);w+=Z,T+=Z;const se=T+Math.floor((D-1)*x)-N;if(se>0){if(se>Z)throw new ge;T-=se}const ye=w+Math.floor((H-1)*x)-y;if(ye>0){if(ye>Z)throw new ge;w-=ye}const Se=new Ie(D,H);for(let Ne=0;Ne<H;Ne++){const Le=w+Math.floor(Ne*x);for(let Ze=0;Ze<D;Ze++)l.get(T+Math.floor(Ze*x),Le)&&Se.set(Ze,Ne)}return Se}static moduleSize(l,f){const g=f.getHeight(),x=f.getWidth();let w=l[0],y=l[1],T=!0,N=0;for(;w<x&&y<g;){if(T!==f.get(w,y)){if(++N===5)break;T=!T}w++,y++}if(w===x||y===g)throw new ge;return(w-l[0])/7}}ia.NO_POINTS=new Array;class ir{PDF417Common(){}static getBitCountSum(l){return jt.sum(l)}static toIntArray(l){if(l==null||!l.length)return ir.EMPTY_INT_ARRAY;const f=new Int32Array(l.length);let g=0;for(const x of l)f[g++]=x;return f}static getCodeword(l){const f=K.binarySearch(ir.SYMBOL_TABLE,l&262143);return f<0?-1:(ir.CODEWORD_TABLE[f]-1)%ir.NUMBER_OF_CODEWORDS}}ir.NUMBER_OF_CODEWORDS=929,ir.MAX_CODEWORDS_IN_BARCODE=ir.NUMBER_OF_CODEWORDS-1,ir.MIN_ROWS_IN_BARCODE=3,ir.MAX_ROWS_IN_BARCODE=90,ir.MODULES_IN_CODEWORD=17,ir.MODULES_IN_STOP_PATTERN=18,ir.BARS_IN_MODULE=8,ir.EMPTY_INT_ARRAY=new Int32Array([]),ir.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ir.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Kc{constructor(l,f){this.bits=l,this.points=f}getBits(){return this.bits}getPoints(){return this.points}}class sr{static detectMultiple(l,f,g){let x=l.getBlackMatrix(),w=sr.detect(g,x);return w.length||(x=x.clone(),x.rotate180(),w=sr.detect(g,x)),new Kc(x,w)}static detect(l,f){const g=new Array;let x=0,w=0,y=!1;for(;x<f.getHeight();){const T=sr.findVertices(f,x,w);if(T[0]==null&&T[3]==null){if(!y)break;y=!1,w=0;for(const N of g)N[1]!=null&&(x=Math.trunc(Math.max(x,N[1].getY()))),N[3]!=null&&(x=Math.max(x,Math.trunc(N[3].getY())));x+=sr.ROW_STEP;continue}if(y=!0,g.push(T),!l)break;T[2]!=null?(w=Math.trunc(T[2].getX()),x=Math.trunc(T[2].getY())):(w=Math.trunc(T[4].getX()),x=Math.trunc(T[4].getY()))}return g}static findVertices(l,f,g){const x=l.getHeight(),w=l.getWidth(),y=new Array(8);return sr.copyToResult(y,sr.findRowsWithPattern(l,x,w,f,g,sr.START_PATTERN),sr.INDEXES_START_PATTERN),y[4]!=null&&(g=Math.trunc(y[4].getX()),f=Math.trunc(y[4].getY())),sr.copyToResult(y,sr.findRowsWithPattern(l,x,w,f,g,sr.STOP_PATTERN),sr.INDEXES_STOP_PATTERN),y}static copyToResult(l,f,g){for(let x=0;x<g.length;x++)l[g[x]]=f[x]}static findRowsWithPattern(l,f,g,x,w,y){const T=new Array(4);let N=!1;const D=new Int32Array(y.length);for(;x<f;x+=sr.ROW_STEP){let Z=sr.findGuardPattern(l,w,x,g,!1,y,D);if(Z!=null){for(;x>0;){const se=sr.findGuardPattern(l,w,--x,g,!1,y,D);if(se!=null)Z=se;else{x++;break}}T[0]=new At(Z[0],x),T[1]=new At(Z[1],x),N=!0;break}}let H=x+1;if(N){let Z=0,se=Int32Array.from([Math.trunc(T[0].getX()),Math.trunc(T[1].getX())]);for(;H<f;H++){const ye=sr.findGuardPattern(l,se[0],H,g,!1,y,D);if(ye!=null&&Math.abs(se[0]-ye[0])<sr.MAX_PATTERN_DRIFT&&Math.abs(se[1]-ye[1])<sr.MAX_PATTERN_DRIFT)se=ye,Z=0;else{if(Z>sr.SKIPPED_ROW_COUNT_MAX)break;Z++}}H-=Z+1,T[2]=new At(se[0],H),T[3]=new At(se[1],H)}return H-x<sr.BARCODE_MIN_HEIGHT&&K.fill(T,null),T}static findGuardPattern(l,f,g,x,w,y,T){K.fillWithin(T,0,T.length,0);let N=f,D=0;for(;l.get(N,g)&&N>0&&D++<sr.MAX_PIXEL_DRIFT;)N--;let H=N,Z=0,se=y.length;for(let ye=w;H<x;H++)if(l.get(H,g)!==ye)T[Z]++;else{if(Z===se-1){if(sr.patternMatchVariance(T,y,sr.MAX_INDIVIDUAL_VARIANCE)<sr.MAX_AVG_VARIANCE)return new Int32Array([N,H]);N+=T[0]+T[1],k.arraycopy(T,2,T,0,Z-1),T[Z-1]=0,T[Z]=0,Z--}else Z++;T[Z]=1,ye=!ye}return Z===se-1&&sr.patternMatchVariance(T,y,sr.MAX_INDIVIDUAL_VARIANCE)<sr.MAX_AVG_VARIANCE?new Int32Array([N,H-1]):null}static patternMatchVariance(l,f,g){let x=l.length,w=0,y=0;for(let D=0;D<x;D++)w+=l[D],y+=f[D];if(w<y)return 1/0;let T=w/y;g*=T;let N=0;for(let D=0;D<x;D++){let H=l[D],Z=f[D]*T,se=H>Z?H-Z:Z-H;if(se>g)return 1/0;N+=se}return N/w}}sr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),sr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),sr.MAX_AVG_VARIANCE=.42,sr.MAX_INDIVIDUAL_VARIANCE=.8,sr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),sr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),sr.MAX_PIXEL_DRIFT=3,sr.MAX_PATTERN_DRIFT=5,sr.SKIPPED_ROW_COUNT_MAX=25,sr.ROW_STEP=5,sr.BARCODE_MIN_HEIGHT=10;class hn{constructor(l,f){if(f.length===0)throw new C;this.field=l;let g=f.length;if(g>1&&f[0]===0){let x=1;for(;x<g&&f[x]===0;)x++;x===g?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(g-x),k.arraycopy(f,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=f}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);if(l===1){let x=0;for(let w of this.coefficients)x=this.field.add(x,w);return x}let f=this.coefficients[0],g=this.coefficients.length;for(let x=1;x<g;x++)f=this.field.add(this.field.multiply(l,f),this.coefficients[x]);return f}add(l){if(!this.field.equals(l.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return l;if(l.isZero())return this;let f=this.coefficients,g=l.coefficients;if(f.length>g.length){let y=f;f=g,g=y}let x=new Int32Array(g.length),w=g.length-f.length;k.arraycopy(g,0,x,0,w);for(let y=w;y<g.length;y++)x[y]=this.field.add(f[y-w],g[y]);return new hn(this.field,x)}subtract(l){if(!this.field.equals(l.field))throw new C("ModulusPolys do not have same ModulusGF field");return l.isZero()?this:this.add(l.negative())}multiply(l){return l instanceof hn?this.multiplyOther(l):this.multiplyScalar(l)}multiplyOther(l){if(!this.field.equals(l.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||l.isZero())return new hn(this.field,new Int32Array([0]));let f=this.coefficients,g=f.length,x=l.coefficients,w=x.length,y=new Int32Array(g+w-1);for(let T=0;T<g;T++){let N=f[T];for(let D=0;D<w;D++)y[T+D]=this.field.add(y[T+D],this.field.multiply(N,x[D]))}return new hn(this.field,y)}negative(){let l=this.coefficients.length,f=new Int32Array(l);for(let g=0;g<l;g++)f[g]=this.field.subtract(0,this.coefficients[g]);return new hn(this.field,f)}multiplyScalar(l){if(l===0)return new hn(this.field,new Int32Array([0]));if(l===1)return this;let f=this.coefficients.length,g=new Int32Array(f);for(let x=0;x<f;x++)g[x]=this.field.multiply(this.coefficients[x],l);return new hn(this.field,g)}multiplyByMonomial(l,f){if(l<0)throw new C;if(f===0)return new hn(this.field,new Int32Array([0]));let g=this.coefficients.length,x=new Int32Array(g+l);for(let w=0;w<g;w++)x[w]=this.field.multiply(this.coefficients[w],f);return new hn(this.field,x)}toString(){let l=new G;for(let f=this.getDegree();f>=0;f--){let g=this.getCoefficient(f);g!==0&&(g<0?(l.append(" - "),g=-g):l.length()>0&&l.append(" + "),(f===0||g!==1)&&l.append(g),f!==0&&(f===1?l.append("x"):(l.append("x^"),l.append(f))))}return l.toString()}}class QA{add(l,f){return(l+f)%this.modulus}subtract(l,f){return(this.modulus+l-f)%this.modulus}exp(l){return this.expTable[l]}log(l){if(l===0)throw new C;return this.logTable[l]}inverse(l){if(l===0)throw new ve;return this.expTable[this.modulus-this.logTable[l]-1]}multiply(l,f){return l===0||f===0?0:this.expTable[(this.logTable[l]+this.logTable[f])%(this.modulus-1)]}getSize(){return this.modulus}equals(l){return l===this}}class Ps extends QA{constructor(l,f){super(),this.modulus=l,this.expTable=new Int32Array(l),this.logTable=new Int32Array(l);let g=1;for(let x=0;x<l;x++)this.expTable[x]=g,g=g*f%l;for(let x=0;x<l-1;x++)this.logTable[this.expTable[x]]=x;this.zero=new hn(this,new Int32Array([0])),this.one=new hn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,f){if(l<0)throw new C;if(f===0)return this.zero;let g=new Int32Array(l+1);return g[0]=f,new hn(this,g)}}Ps.PDF417_GF=new Ps(ir.NUMBER_OF_CODEWORDS,3);class as{constructor(){this.field=Ps.PDF417_GF}decode(l,f,g){let x=new hn(this.field,l),w=new Int32Array(f),y=!1;for(let Se=f;Se>0;Se--){let Ne=x.evaluateAt(this.field.exp(Se));w[f-Se]=Ne,Ne!==0&&(y=!0)}if(!y)return 0;let T=this.field.getOne();if(g!=null)for(const Se of g){let Ne=this.field.exp(l.length-1-Se),Le=new hn(this.field,new Int32Array([this.field.subtract(0,Ne),1]));T=T.multiply(Le)}let N=new hn(this.field,w),D=this.runEuclideanAlgorithm(this.field.buildMonomial(f,1),N,f),H=D[0],Z=D[1],se=this.findErrorLocations(H),ye=this.findErrorMagnitudes(Z,H,se);for(let Se=0;Se<se.length;Se++){let Ne=l.length-1-this.field.log(se[Se]);if(Ne<0)throw I.getChecksumInstance();l[Ne]=this.field.subtract(l[Ne],ye[Se])}return se.length}runEuclideanAlgorithm(l,f,g){if(l.getDegree()<f.getDegree()){let se=l;l=f,f=se}let x=l,w=f,y=this.field.getZero(),T=this.field.getOne();for(;w.getDegree()>=Math.round(g/2);){let se=x,ye=y;if(x=w,y=T,x.isZero())throw I.getChecksumInstance();w=se;let Se=this.field.getZero(),Ne=x.getCoefficient(x.getDegree()),Le=this.field.inverse(Ne);for(;w.getDegree()>=x.getDegree()&&!w.isZero();){let Ze=w.getDegree()-x.getDegree(),_t=this.field.multiply(w.getCoefficient(w.getDegree()),Le);Se=Se.add(this.field.buildMonomial(Ze,_t)),w=w.subtract(x.multiplyByMonomial(Ze,_t))}T=Se.multiply(y).subtract(ye).negative()}let N=T.getCoefficient(0);if(N===0)throw I.getChecksumInstance();let D=this.field.inverse(N),H=T.multiply(D),Z=w.multiply(D);return[H,Z]}findErrorLocations(l){let f=l.getDegree(),g=new Int32Array(f),x=0;for(let w=1;w<this.field.getSize()&&x<f;w++)l.evaluateAt(w)===0&&(g[x]=this.field.inverse(w),x++);if(x!==f)throw I.getChecksumInstance();return g}findErrorMagnitudes(l,f,g){let x=f.getDegree(),w=new Int32Array(x);for(let D=1;D<=x;D++)w[x-D]=this.field.multiply(D,f.getCoefficient(D));let y=new hn(this.field,w),T=g.length,N=new Int32Array(T);for(let D=0;D<T;D++){let H=this.field.inverse(g[D]),Z=this.field.subtract(0,l.evaluateAt(H)),se=this.field.inverse(y.evaluateAt(H));N[D]=this.field.multiply(Z,se)}return N}}class Qs{constructor(l,f,g,x,w){l instanceof Qs?this.constructor_2(l):this.constructor_1(l,f,g,x,w)}constructor_1(l,f,g,x,w){const y=f==null||g==null,T=x==null||w==null;if(y&&T)throw new ge;y?(f=new At(0,x.getY()),g=new At(0,w.getY())):T&&(x=new At(l.getWidth()-1,f.getY()),w=new At(l.getWidth()-1,g.getY())),this.image=l,this.topLeft=f,this.bottomLeft=g,this.topRight=x,this.bottomRight=w,this.minX=Math.trunc(Math.min(f.getX(),g.getX())),this.maxX=Math.trunc(Math.max(x.getX(),w.getX())),this.minY=Math.trunc(Math.min(f.getY(),x.getY())),this.maxY=Math.trunc(Math.max(g.getY(),w.getY()))}constructor_2(l){this.image=l.image,this.topLeft=l.getTopLeft(),this.bottomLeft=l.getBottomLeft(),this.topRight=l.getTopRight(),this.bottomRight=l.getBottomRight(),this.minX=l.getMinX(),this.maxX=l.getMaxX(),this.minY=l.getMinY(),this.maxY=l.getMaxY()}static merge(l,f){return l==null?f:f==null?l:new Qs(l.image,l.topLeft,l.bottomLeft,f.topRight,f.bottomRight)}addMissingRows(l,f,g){let x=this.topLeft,w=this.bottomLeft,y=this.topRight,T=this.bottomRight;if(l>0){let N=g?this.topLeft:this.topRight,D=Math.trunc(N.getY()-l);D<0&&(D=0);let H=new At(N.getX(),D);g?x=H:y=H}if(f>0){let N=g?this.bottomLeft:this.bottomRight,D=Math.trunc(N.getY()+f);D>=this.image.getHeight()&&(D=this.image.getHeight()-1);let H=new At(N.getX(),D);g?w=H:T=H}return new Qs(this.image,x,w,y,T)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class _a{constructor(l,f,g,x){this.columnCount=l,this.errorCorrectionLevel=x,this.rowCountUpperPart=f,this.rowCountLowerPart=g,this.rowCount=f+g}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Hs{constructor(){this.buffer=""}static form(l,f){let g=-1;function x(y,T,N,D,H,Z){if(y==="%%")return"%";if(f[++g]===void 0)return;y=D?parseInt(D.substr(1)):void 0;let se=H?parseInt(H.substr(1)):void 0,ye;switch(Z){case"s":ye=f[g];break;case"c":ye=f[g][0];break;case"f":ye=parseFloat(f[g]).toFixed(y);break;case"p":ye=parseFloat(f[g]).toPrecision(y);break;case"e":ye=parseFloat(f[g]).toExponential(y);break;case"x":ye=parseInt(f[g]).toString(se||16);break;case"d":ye=parseFloat(parseInt(f[g],se||10).toPrecision(y)).toFixed(0);break}ye=typeof ye=="object"?JSON.stringify(ye):(+ye).toString(se);let Se=parseInt(N),Ne=N&&N[0]+""=="0"?"0":" ";for(;ye.length<Se;)ye=T!==void 0?ye+Ne:Ne+ye;return ye}let w=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(w,x)}format(l,...f){this.buffer+=Hs.form(l,f)}toString(){return this.buffer}}class sa{constructor(l){this.boundingBox=new Qs(l),this.codewords=new Array(l.getMaxY()-l.getMinY()+1)}getCodewordNearby(l){let f=this.getCodeword(l);if(f!=null)return f;for(let g=1;g<sa.MAX_NEARBY_DISTANCE;g++){let x=this.imageRowToCodewordIndex(l)-g;if(x>=0&&(f=this.codewords[x],f!=null)||(x=this.imageRowToCodewordIndex(l)+g,x<this.codewords.length&&(f=this.codewords[x],f!=null)))return f}return null}imageRowToCodewordIndex(l){return l-this.boundingBox.getMinY()}setCodeword(l,f){this.codewords[this.imageRowToCodewordIndex(l)]=f}getCodeword(l){return this.codewords[this.imageRowToCodewordIndex(l)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const l=new Hs;let f=0;for(const g of this.codewords){if(g==null){l.format("%3d:    |   %n",f++);continue}l.format("%3d: %3d|%3d%n",f++,g.getRowNumber(),g.getValue())}return l.toString()}}sa.MAX_NEARBY_DISTANCE=5;class js{constructor(){this.values=new Map}setValue(l){l=Math.trunc(l);let f=this.values.get(l);f==null&&(f=0),f++,this.values.set(l,f)}getValue(){let l=-1,f=new Array;for(const[g,x]of this.values.entries()){const w={getKey:()=>g,getValue:()=>x};w.getValue()>l?(l=w.getValue(),f=[],f.push(w.getKey())):w.getValue()===l&&f.push(w.getKey())}return ir.toIntArray(f)}getConfidence(l){return this.values.get(l)}}class vn extends sa{constructor(l,f){super(l),this._isLeft=f}setRowNumbers(){for(let l of this.getCodewords())l!=null&&l.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(l){let f=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(f,l);let g=this.getBoundingBox(),x=this._isLeft?g.getTopLeft():g.getTopRight(),w=this._isLeft?g.getBottomLeft():g.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(x.getY())),T=this.imageRowToCodewordIndex(Math.trunc(w.getY())),N=-1,D=1,H=0;for(let Z=y;Z<T;Z++){if(f[Z]==null)continue;let se=f[Z],ye=se.getRowNumber()-N;if(ye===0)H++;else if(ye===1)D=Math.max(D,H),H=1,N=se.getRowNumber();else if(ye<0||se.getRowNumber()>=l.getRowCount()||ye>Z)f[Z]=null;else{let Se;D>2?Se=(D-2)*ye:Se=ye;let Ne=Se>=Z;for(let Le=1;Le<=Se&&!Ne;Le++)Ne=f[Z-Le]!=null;Ne?f[Z]=null:(N=se.getRowNumber(),H=1)}}}getRowHeights(){let l=this.getBarcodeMetadata();if(l==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(l);let f=new Int32Array(l.getRowCount());for(let g of this.getCodewords())if(g!=null){let x=g.getRowNumber();if(x>=f.length)continue;f[x]++}return f}adjustIncompleteIndicatorColumnRowNumbers(l){let f=this.getBoundingBox(),g=this._isLeft?f.getTopLeft():f.getTopRight(),x=this._isLeft?f.getBottomLeft():f.getBottomRight(),w=this.imageRowToCodewordIndex(Math.trunc(g.getY())),y=this.imageRowToCodewordIndex(Math.trunc(x.getY())),T=this.getCodewords(),N=-1;for(let D=w;D<y;D++){if(T[D]==null)continue;let H=T[D];H.setRowNumberAsRowIndicatorColumn();let Z=H.getRowNumber()-N;Z===0||(Z===1?N=H.getRowNumber():H.getRowNumber()>=l.getRowCount()?T[D]=null:N=H.getRowNumber())}}getBarcodeMetadata(){let l=this.getCodewords(),f=new js,g=new js,x=new js,w=new js;for(let T of l){if(T==null)continue;T.setRowNumberAsRowIndicatorColumn();let N=T.getValue()%30,D=T.getRowNumber();switch(this._isLeft||(D+=2),D%3){case 0:g.setValue(N*3+1);break;case 1:w.setValue(N/3),x.setValue(N%3);break;case 2:f.setValue(N+1);break}}if(f.getValue().length===0||g.getValue().length===0||x.getValue().length===0||w.getValue().length===0||f.getValue()[0]<1||g.getValue()[0]+x.getValue()[0]<ir.MIN_ROWS_IN_BARCODE||g.getValue()[0]+x.getValue()[0]>ir.MAX_ROWS_IN_BARCODE)return null;let y=new _a(f.getValue()[0],g.getValue()[0],x.getValue()[0],w.getValue()[0]);return this.removeIncorrectCodewords(l,y),y}removeIncorrectCodewords(l,f){for(let g=0;g<l.length;g++){let x=l[g];if(l[g]==null)continue;let w=x.getValue()%30,y=x.getRowNumber();if(y>f.getRowCount()){l[g]=null;continue}switch(this._isLeft||(y+=2),y%3){case 0:w*3+1!==f.getRowCountUpperPart()&&(l[g]=null);break;case 1:(Math.trunc(w/3)!==f.getErrorCorrectionLevel()||w%3!==f.getRowCountLowerPart())&&(l[g]=null);break;case 2:w+1!==f.getColumnCount()&&(l[g]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Xn{constructor(l,f){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=l,this.barcodeColumnCount=l.getColumnCount(),this.boundingBox=f,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let l=ir.MAX_CODEWORDS_IN_BARCODE,f;do f=l,l=this.adjustRowNumbersAndGetCount();while(l>0&&l<f);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(l){l!=null&&l.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let l=this.adjustRowNumbersByRow();if(l===0)return 0;for(let f=1;f<this.barcodeColumnCount+1;f++){let g=this.detectionResultColumns[f].getCodewords();for(let x=0;x<g.length;x++)g[x]!=null&&(g[x].hasValidRowNumber()||this.adjustRowNumbers(f,x,g))}return l}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let l=this.detectionResultColumns[0].getCodewords(),f=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let g=0;g<l.length;g++)if(l[g]!=null&&f[g]!=null&&l[g].getRowNumber()===f[g].getRowNumber())for(let x=1;x<=this.barcodeColumnCount;x++){let w=this.detectionResultColumns[x].getCodewords()[g];w!=null&&(w.setRowNumber(l[g].getRowNumber()),w.hasValidRowNumber()||(this.detectionResultColumns[x].getCodewords()[g]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let l=0,f=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let g=0;g<f.length;g++){if(f[g]==null)continue;let x=f[g].getRowNumber(),w=0;for(let y=this.barcodeColumnCount+1;y>0&&w<this.ADJUST_ROW_NUMBER_SKIP;y--){let T=this.detectionResultColumns[y].getCodewords()[g];T!=null&&(w=Xn.adjustRowNumberIfValid(x,w,T),T.hasValidRowNumber()||l++)}}return l}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let l=0,f=this.detectionResultColumns[0].getCodewords();for(let g=0;g<f.length;g++){if(f[g]==null)continue;let x=f[g].getRowNumber(),w=0;for(let y=1;y<this.barcodeColumnCount+1&&w<this.ADJUST_ROW_NUMBER_SKIP;y++){let T=this.detectionResultColumns[y].getCodewords()[g];T!=null&&(w=Xn.adjustRowNumberIfValid(x,w,T),T.hasValidRowNumber()||l++)}}return l}static adjustRowNumberIfValid(l,f,g){return g==null||g.hasValidRowNumber()||(g.isValidRowNumber(l)?(g.setRowNumber(l),f=0):++f),f}adjustRowNumbers(l,f,g){if(!this.detectionResultColumns[l-1])return;let x=g[f],w=this.detectionResultColumns[l-1].getCodewords(),y=w;this.detectionResultColumns[l+1]!=null&&(y=this.detectionResultColumns[l+1].getCodewords());let T=new Array(14);T[2]=w[f],T[3]=y[f],f>0&&(T[0]=g[f-1],T[4]=w[f-1],T[5]=y[f-1]),f>1&&(T[8]=g[f-2],T[10]=w[f-2],T[11]=y[f-2]),f<g.length-1&&(T[1]=g[f+1],T[6]=w[f+1],T[7]=y[f+1]),f<g.length-2&&(T[9]=g[f+2],T[12]=w[f+2],T[13]=y[f+2]);for(let N of T)if(Xn.adjustRowNumber(x,N))return}static adjustRowNumber(l,f){return f==null?!1:f.hasValidRowNumber()&&f.getBucket()===l.getBucket()?(l.setRowNumber(f.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(l){this.boundingBox=l}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(l,f){this.detectionResultColumns[l]=f}getDetectionResultColumn(l){return this.detectionResultColumns[l]}toString(){let l=this.detectionResultColumns[0];l==null&&(l=this.detectionResultColumns[this.barcodeColumnCount+1]);let f=new Hs;for(let g=0;g<l.getCodewords().length;g++){f.format("CW %3d:",g);for(let x=0;x<this.barcodeColumnCount+2;x++){if(this.detectionResultColumns[x]==null){f.format("    |   ");continue}let w=this.detectionResultColumns[x].getCodewords()[g];if(w==null){f.format("    |   ");continue}f.format(" %3d|%3d",w.getRowNumber(),w.getValue())}f.format("%n")}return f.toString()}}class Cs{constructor(l,f,g,x){this.rowNumber=Cs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(l),this.endX=Math.trunc(f),this.bucket=Math.trunc(g),this.value=Math.trunc(x)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(l){return l!==Cs.BARCODE_ROW_UNKNOWN&&this.bucket===l%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(l){this.rowNumber=l}toString(){return this.rowNumber+"|"+this.value}}Cs.BARCODE_ROW_UNKNOWN=-1;class Yn{static initialize(){for(let l=0;l<ir.SYMBOL_TABLE.length;l++){let f=ir.SYMBOL_TABLE[l],g=f&1;for(let x=0;x<ir.BARS_IN_MODULE;x++){let w=0;for(;(f&1)===g;)w+=1,f>>=1;g=f&1,Yn.RATIOS_TABLE[l]||(Yn.RATIOS_TABLE[l]=new Array(ir.BARS_IN_MODULE)),Yn.RATIOS_TABLE[l][ir.BARS_IN_MODULE-x-1]=Math.fround(w/ir.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(l){let f=Yn.getDecodedCodewordValue(Yn.sampleBitCounts(l));return f!==-1?f:Yn.getClosestDecodedValue(l)}static sampleBitCounts(l){let f=jt.sum(l),g=new Int32Array(ir.BARS_IN_MODULE),x=0,w=0;for(let y=0;y<ir.MODULES_IN_CODEWORD;y++){let T=f/(2*ir.MODULES_IN_CODEWORD)+y*f/ir.MODULES_IN_CODEWORD;w+l[x]<=T&&(w+=l[x],x++),g[x]++}return g}static getDecodedCodewordValue(l){let f=Yn.getBitValue(l);return ir.getCodeword(f)===-1?-1:f}static getBitValue(l){let f=0;for(let g=0;g<l.length;g++)for(let x=0;x<l[g];x++)f=f<<1|(g%2===0?1:0);return Math.trunc(f)}static getClosestDecodedValue(l){let f=jt.sum(l),g=new Array(ir.BARS_IN_MODULE);if(f>1)for(let y=0;y<g.length;y++)g[y]=Math.fround(l[y]/f);let x=mt.MAX_VALUE,w=-1;this.bSymbolTableReady||Yn.initialize();for(let y=0;y<Yn.RATIOS_TABLE.length;y++){let T=0,N=Yn.RATIOS_TABLE[y];for(let D=0;D<ir.BARS_IN_MODULE;D++){let H=Math.fround(N[D]-g[D]);if(T+=Math.fround(H*H),T>=x)break}T<x&&(x=T,w=ir.SYMBOL_TABLE[y])}return w}}Yn.bSymbolTableReady=!1,Yn.RATIOS_TABLE=new Array(ir.SYMBOL_TABLE.length).map(J=>new Array(ir.BARS_IN_MODULE));class Xa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(l){this.segmentIndex=l}getFileId(){return this.fileId}setFileId(l){this.fileId=l}getOptionalData(){return this.optionalData}setOptionalData(l){this.optionalData=l}isLastSegment(){return this.lastSegment}setLastSegment(l){this.lastSegment=l}getSegmentCount(){return this.segmentCount}setSegmentCount(l){this.segmentCount=l}getSender(){return this.sender||null}setSender(l){this.sender=l}getAddressee(){return this.addressee||null}setAddressee(l){this.addressee=l}getFileName(){return this.fileName}setFileName(l){this.fileName=l}getFileSize(){return this.fileSize}setFileSize(l){this.fileSize=l}getChecksum(){return this.checksum}setChecksum(l){this.checksum=l}getTimestamp(){return this.timestamp}setTimestamp(l){this.timestamp=l}}class HA{static parseLong(l,f=void 0){return parseInt(l,f)}}class Ya extends d{}Ya.kind="NullPointerException";class Ml{writeBytes(l){this.writeBytesOffset(l,0,l.length)}writeBytesOffset(l,f,g){if(l==null)throw new Ya;if(f<0||f>l.length||g<0||f+g>l.length||f+g<0)throw new U;if(g===0)return;for(let x=0;x<g;x++)this.write(l[f+x])}flush(){}close(){}}class Hi extends d{}class Ho extends Ml{constructor(l=32){if(super(),this.count=0,l<0)throw new C("Negative initial size: "+l);this.buf=new Uint8Array(l)}ensureCapacity(l){l-this.buf.length>0&&this.grow(l)}grow(l){let g=this.buf.length<<1;if(g-l<0&&(g=l),g<0){if(l<0)throw new Hi;g=Q.MAX_VALUE}this.buf=K.copyOfUint8Array(this.buf,g)}write(l){this.ensureCapacity(this.count+1),this.buf[this.count]=l,this.count+=1}writeBytesOffset(l,f,g){if(f<0||f>l.length||g<0||f+g-l.length>0)throw new U;this.ensureCapacity(this.count+g),k.arraycopy(l,f,this.buf,this.count,g),this.count+=g}writeTo(l){l.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return K.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(l){return l?typeof l=="string"?this.toString_string(l):this.toString_number(l):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(l){return new String(this.buf).toString()}toString_number(l){return new String(this.buf).toString()}close(){}}var en;(function(J){J[J.ALPHA=0]="ALPHA",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.PUNCT=3]="PUNCT",J[J.ALPHA_SHIFT=4]="ALPHA_SHIFT",J[J.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(en||(en={}));function xo(){if(typeof window<"u")return window.BigInt||null;if(typeof Yh<"u")return Yh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let jo;function Vs(J){if(typeof jo>"u"&&(jo=xo()),jo===null)throw new Error("BigInt is not supported!");return jo(J)}function wo(){let J=[];J[0]=Vs(1);let l=Vs(900);J[1]=l;for(let f=2;f<16;f++)J[f]=J[f-1]*l;return J}class Je{static decode(l,f){let g=new G(""),x=O.ISO8859_1;g.enableDecoding(x);let w=1,y=l[w++],T=new Xa;for(;w<l[0];){switch(y){case Je.TEXT_COMPACTION_MODE_LATCH:w=Je.textCompaction(l,w,g);break;case Je.BYTE_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:w=Je.byteCompaction(y,l,x,w,g);break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(l[w++]);break;case Je.NUMERIC_COMPACTION_MODE_LATCH:w=Je.numericCompaction(l,w,g);break;case Je.ECI_CHARSET:O.getCharacterSetECIByValue(l[w++]);break;case Je.ECI_GENERAL_PURPOSE:w+=2;break;case Je.ECI_USER_DEFINED:w++;break;case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:w=Je.decodeMacroBlock(l,w,T);break;case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:throw new M;default:w--,w=Je.textCompaction(l,w,g);break}if(w<l.length)y=l[w++];else throw M.getFormatInstance()}if(g.length()===0)throw M.getFormatInstance();let N=new He(null,g.toString(),null,f);return N.setOther(T),N}static decodeMacroBlock(l,f,g){if(f+Je.NUMBER_OF_SEQUENCE_CODEWORDS>l[0])throw M.getFormatInstance();let x=new Int32Array(Je.NUMBER_OF_SEQUENCE_CODEWORDS);for(let T=0;T<Je.NUMBER_OF_SEQUENCE_CODEWORDS;T++,f++)x[T]=l[f];g.setSegmentIndex(Q.parseInt(Je.decodeBase900toBase10(x,Je.NUMBER_OF_SEQUENCE_CODEWORDS)));let w=new G;f=Je.textCompaction(l,f,w),g.setFileId(w.toString());let y=-1;for(l[f]===Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(y=f+1);f<l[0];)switch(l[f]){case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(f++,l[f]){case Je.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let T=new G;f=Je.textCompaction(l,f+1,T),g.setFileName(T.toString());break;case Je.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let N=new G;f=Je.textCompaction(l,f+1,N),g.setSender(N.toString());break;case Je.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let D=new G;f=Je.textCompaction(l,f+1,D),g.setAddressee(D.toString());break;case Je.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let H=new G;f=Je.numericCompaction(l,f+1,H),g.setSegmentCount(Q.parseInt(H.toString()));break;case Je.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let Z=new G;f=Je.numericCompaction(l,f+1,Z),g.setTimestamp(HA.parseLong(Z.toString()));break;case Je.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let se=new G;f=Je.numericCompaction(l,f+1,se),g.setChecksum(Q.parseInt(se.toString()));break;case Je.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ye=new G;f=Je.numericCompaction(l,f+1,ye),g.setFileSize(HA.parseLong(ye.toString()));break;default:throw M.getFormatInstance()}break;case Je.MACRO_PDF417_TERMINATOR:f++,g.setLastSegment(!0);break;default:throw M.getFormatInstance()}if(y!==-1){let T=f-y;g.isLastSegment()&&T--,g.setOptionalData(K.copyOfRange(l,y,y+T))}return f}static textCompaction(l,f,g){let x=new Int32Array((l[0]-f)*2),w=new Int32Array((l[0]-f)*2),y=0,T=!1;for(;f<l[0]&&!T;){let N=l[f++];if(N<Je.TEXT_COMPACTION_MODE_LATCH)x[y]=N/30,x[y+1]=N%30,y+=2;else switch(N){case Je.TEXT_COMPACTION_MODE_LATCH:x[y++]=Je.TEXT_COMPACTION_MODE_LATCH;break;case Je.BYTE_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:case Je.NUMERIC_COMPACTION_MODE_LATCH:case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:f--,T=!0;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x[y]=Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,N=l[f++],w[y]=N,y++;break}}return Je.decodeTextCompaction(x,w,y,g),f}static decodeTextCompaction(l,f,g,x){let w=en.ALPHA,y=en.ALPHA,T=0;for(;T<g;){let N=l[T],D="";switch(w){case en.ALPHA:if(N<26)D=String.fromCharCode(65+N);else switch(N){case 26:D=" ";break;case Je.LL:w=en.LOWER;break;case Je.ML:w=en.MIXED;break;case Je.PS:y=w,w=en.PUNCT_SHIFT;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(f[T]);break;case Je.TEXT_COMPACTION_MODE_LATCH:w=en.ALPHA;break}break;case en.LOWER:if(N<26)D=String.fromCharCode(97+N);else switch(N){case 26:D=" ";break;case Je.AS:y=w,w=en.ALPHA_SHIFT;break;case Je.ML:w=en.MIXED;break;case Je.PS:y=w,w=en.PUNCT_SHIFT;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(f[T]);break;case Je.TEXT_COMPACTION_MODE_LATCH:w=en.ALPHA;break}break;case en.MIXED:if(N<Je.PL)D=Je.MIXED_CHARS[N];else switch(N){case Je.PL:w=en.PUNCT;break;case 26:D=" ";break;case Je.LL:w=en.LOWER;break;case Je.AL:w=en.ALPHA;break;case Je.PS:y=w,w=en.PUNCT_SHIFT;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(f[T]);break;case Je.TEXT_COMPACTION_MODE_LATCH:w=en.ALPHA;break}break;case en.PUNCT:if(N<Je.PAL)D=Je.PUNCT_CHARS[N];else switch(N){case Je.PAL:w=en.ALPHA;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(f[T]);break;case Je.TEXT_COMPACTION_MODE_LATCH:w=en.ALPHA;break}break;case en.ALPHA_SHIFT:if(w=y,N<26)D=String.fromCharCode(65+N);else switch(N){case 26:D=" ";break;case Je.TEXT_COMPACTION_MODE_LATCH:w=en.ALPHA;break}break;case en.PUNCT_SHIFT:if(w=y,N<Je.PAL)D=Je.PUNCT_CHARS[N];else switch(N){case Je.PAL:w=en.ALPHA;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(f[T]);break;case Je.TEXT_COMPACTION_MODE_LATCH:w=en.ALPHA;break}break}D!==""&&x.append(D),T++}}static byteCompaction(l,f,g,x,w){let y=new Ho,T=0,N=0,D=!1;switch(l){case Je.BYTE_COMPACTION_MODE_LATCH:let H=new Int32Array(6),Z=f[x++];for(;x<f[0]&&!D;)switch(H[T++]=Z,N=900*N+Z,Z=f[x++],Z){case Je.TEXT_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH:case Je.NUMERIC_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:x--,D=!0;break;default:if(T%5===0&&T>0){for(let se=0;se<6;++se)y.write(Number(Vs(N)>>Vs(8*(5-se))));N=0,T=0}break}x===f[0]&&Z<Je.TEXT_COMPACTION_MODE_LATCH&&(H[T++]=Z);for(let se=0;se<T;se++)y.write(H[se]);break;case Je.BYTE_COMPACTION_MODE_LATCH_6:for(;x<f[0]&&!D;){let se=f[x++];if(se<Je.TEXT_COMPACTION_MODE_LATCH)T++,N=900*N+se;else switch(se){case Je.TEXT_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH:case Je.NUMERIC_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:x--,D=!0;break}if(T%5===0&&T>0){for(let ye=0;ye<6;++ye)y.write(Number(Vs(N)>>Vs(8*(5-ye))));N=0,T=0}}break}return w.append(Y.decode(y.toByteArray(),g)),x}static numericCompaction(l,f,g){let x=0,w=!1,y=new Int32Array(Je.MAX_NUMERIC_CODEWORDS);for(;f<l[0]&&!w;){let T=l[f++];if(f===l[0]&&(w=!0),T<Je.TEXT_COMPACTION_MODE_LATCH)y[x]=T,x++;else switch(T){case Je.TEXT_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:f--,w=!0;break}(x%Je.MAX_NUMERIC_CODEWORDS===0||T===Je.NUMERIC_COMPACTION_MODE_LATCH||w)&&x>0&&(g.append(Je.decodeBase900toBase10(y,x)),x=0)}return f}static decodeBase900toBase10(l,f){let g=Vs(0);for(let w=0;w<f;w++)g+=Je.EXP900[f-w-1]*Vs(l[w]);let x=g.toString();if(x.charAt(0)!=="1")throw new M;return x.substring(1)}}Je.TEXT_COMPACTION_MODE_LATCH=900,Je.BYTE_COMPACTION_MODE_LATCH=901,Je.NUMERIC_COMPACTION_MODE_LATCH=902,Je.BYTE_COMPACTION_MODE_LATCH_6=924,Je.ECI_USER_DEFINED=925,Je.ECI_GENERAL_PURPOSE=926,Je.ECI_CHARSET=927,Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Je.MACRO_PDF417_TERMINATOR=922,Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Je.MAX_NUMERIC_CODEWORDS=15,Je.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Je.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Je.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Je.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Je.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Je.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Je.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Je.PL=25,Je.LL=27,Je.AS=27,Je.ML=28,Je.AL=28,Je.PS=29,Je.PAL=29,Je.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Je.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Je.EXP900=xo()?wo():[],Je.NUMBER_OF_SEQUENCE_CODEWORDS=2;class gr{constructor(){}static decode(l,f,g,x,w,y,T){let N=new Qs(l,f,g,x,w),D=null,H=null,Z;for(let Se=!0;;Se=!1){if(f!=null&&(D=gr.getRowIndicatorColumn(l,N,f,!0,y,T)),x!=null&&(H=gr.getRowIndicatorColumn(l,N,x,!1,y,T)),Z=gr.merge(D,H),Z==null)throw ge.getNotFoundInstance();let Ne=Z.getBoundingBox();if(Se&&Ne!=null&&(Ne.getMinY()<N.getMinY()||Ne.getMaxY()>N.getMaxY()))N=Ne;else break}Z.setBoundingBox(N);let se=Z.getBarcodeColumnCount()+1;Z.setDetectionResultColumn(0,D),Z.setDetectionResultColumn(se,H);let ye=D!=null;for(let Se=1;Se<=se;Se++){let Ne=ye?Se:se-Se;if(Z.getDetectionResultColumn(Ne)!==void 0)continue;let Le;Ne===0||Ne===se?Le=new vn(N,Ne===0):Le=new sa(N),Z.setDetectionResultColumn(Ne,Le);let Ze=-1,_t=Ze;for(let bt=N.getMinY();bt<=N.getMaxY();bt++){if(Ze=gr.getStartColumn(Z,Ne,bt,ye),Ze<0||Ze>N.getMaxX()){if(_t===-1)continue;Ze=_t}let xt=gr.detectCodeword(l,N.getMinX(),N.getMaxX(),ye,Ze,bt,y,T);xt!=null&&(Le.setCodeword(bt,xt),_t=Ze,y=Math.min(y,xt.getWidth()),T=Math.max(T,xt.getWidth()))}}return gr.createDecoderResult(Z)}static merge(l,f){if(l==null&&f==null)return null;let g=gr.getBarcodeMetadata(l,f);if(g==null)return null;let x=Qs.merge(gr.adjustBoundingBox(l),gr.adjustBoundingBox(f));return new Xn(g,x)}static adjustBoundingBox(l){if(l==null)return null;let f=l.getRowHeights();if(f==null)return null;let g=gr.getMax(f),x=0;for(let T of f)if(x+=g-T,T>0)break;let w=l.getCodewords();for(let T=0;x>0&&w[T]==null;T++)x--;let y=0;for(let T=f.length-1;T>=0&&(y+=g-f[T],!(f[T]>0));T--);for(let T=w.length-1;y>0&&w[T]==null;T--)y--;return l.getBoundingBox().addMissingRows(x,y,l.isLeft())}static getMax(l){let f=-1;for(let g of l)f=Math.max(f,g);return f}static getBarcodeMetadata(l,f){let g;if(l==null||(g=l.getBarcodeMetadata())==null)return f==null?null:f.getBarcodeMetadata();let x;return f==null||(x=f.getBarcodeMetadata())==null?g:g.getColumnCount()!==x.getColumnCount()&&g.getErrorCorrectionLevel()!==x.getErrorCorrectionLevel()&&g.getRowCount()!==x.getRowCount()?null:g}static getRowIndicatorColumn(l,f,g,x,w,y){let T=new vn(f,x);for(let N=0;N<2;N++){let D=N===0?1:-1,H=Math.trunc(Math.trunc(g.getX()));for(let Z=Math.trunc(Math.trunc(g.getY()));Z<=f.getMaxY()&&Z>=f.getMinY();Z+=D){let se=gr.detectCodeword(l,0,l.getWidth(),x,H,Z,w,y);se!=null&&(T.setCodeword(Z,se),x?H=se.getStartX():H=se.getEndX())}}return T}static adjustCodewordCount(l,f){let g=f[0][1],x=g.getValue(),w=l.getBarcodeColumnCount()*l.getBarcodeRowCount()-gr.getNumberOfECCodeWords(l.getBarcodeECLevel());if(x.length===0){if(w<1||w>ir.MAX_CODEWORDS_IN_BARCODE)throw ge.getNotFoundInstance();g.setValue(w)}else x[0]!==w&&g.setValue(w)}static createDecoderResult(l){let f=gr.createBarcodeMatrix(l);gr.adjustCodewordCount(l,f);let g=new Array,x=new Int32Array(l.getBarcodeRowCount()*l.getBarcodeColumnCount()),w=[],y=new Array;for(let N=0;N<l.getBarcodeRowCount();N++)for(let D=0;D<l.getBarcodeColumnCount();D++){let H=f[N][D+1].getValue(),Z=N*l.getBarcodeColumnCount()+D;H.length===0?g.push(Z):H.length===1?x[Z]=H[0]:(y.push(Z),w.push(H))}let T=new Array(w.length);for(let N=0;N<T.length;N++)T[N]=w[N];return gr.createDecoderResultFromAmbiguousValues(l.getBarcodeECLevel(),x,ir.toIntArray(g),ir.toIntArray(y),T)}static createDecoderResultFromAmbiguousValues(l,f,g,x,w){let y=new Int32Array(x.length),T=100;for(;T-- >0;){for(let N=0;N<y.length;N++)f[x[N]]=w[N][y[N]];try{return gr.decodeCodewords(f,l,g)}catch(N){if(!(N instanceof I))throw N}if(y.length===0)throw I.getChecksumInstance();for(let N=0;N<y.length;N++)if(y[N]<w[N].length-1){y[N]++;break}else if(y[N]=0,N===y.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(l){let f=Array.from({length:l.getBarcodeRowCount()},()=>new Array(l.getBarcodeColumnCount()+2));for(let x=0;x<f.length;x++)for(let w=0;w<f[x].length;w++)f[x][w]=new js;let g=0;for(let x of l.getDetectionResultColumns()){if(x!=null){for(let w of x.getCodewords())if(w!=null){let y=w.getRowNumber();if(y>=0){if(y>=f.length)continue;f[y][g].setValue(w.getValue())}}}g++}return f}static isValidBarcodeColumn(l,f){return f>=0&&f<=l.getBarcodeColumnCount()+1}static getStartColumn(l,f,g,x){let w=x?1:-1,y=null;if(gr.isValidBarcodeColumn(l,f-w)&&(y=l.getDetectionResultColumn(f-w).getCodeword(g)),y!=null)return x?y.getEndX():y.getStartX();if(y=l.getDetectionResultColumn(f).getCodewordNearby(g),y!=null)return x?y.getStartX():y.getEndX();if(gr.isValidBarcodeColumn(l,f-w)&&(y=l.getDetectionResultColumn(f-w).getCodewordNearby(g)),y!=null)return x?y.getEndX():y.getStartX();let T=0;for(;gr.isValidBarcodeColumn(l,f-w);){f-=w;for(let N of l.getDetectionResultColumn(f).getCodewords())if(N!=null)return(x?N.getEndX():N.getStartX())+w*T*(N.getEndX()-N.getStartX());T++}return x?l.getBoundingBox().getMinX():l.getBoundingBox().getMaxX()}static detectCodeword(l,f,g,x,w,y,T,N){w=gr.adjustCodewordStartColumn(l,f,g,x,w,y);let D=gr.getModuleBitCount(l,f,g,x,w,y);if(D==null)return null;let H,Z=jt.sum(D);if(x)H=w+Z;else{for(let Se=0;Se<D.length/2;Se++){let Ne=D[Se];D[Se]=D[D.length-1-Se],D[D.length-1-Se]=Ne}H=w,w=H-Z}if(!gr.checkCodewordSkew(Z,T,N))return null;let se=Yn.getDecodedValue(D),ye=ir.getCodeword(se);return ye===-1?null:new Cs(w,H,gr.getCodewordBucketNumber(se),ye)}static getModuleBitCount(l,f,g,x,w,y){let T=w,N=new Int32Array(8),D=0,H=x?1:-1,Z=x;for(;(x?T<g:T>=f)&&D<N.length;)l.get(T,y)===Z?(N[D]++,T+=H):(D++,Z=!Z);return D===N.length||T===(x?g:f)&&D===N.length-1?N:null}static getNumberOfECCodeWords(l){return 2<<l}static adjustCodewordStartColumn(l,f,g,x,w,y){let T=w,N=x?-1:1;for(let D=0;D<2;D++){for(;(x?T>=f:T<g)&&x===l.get(T,y);){if(Math.abs(w-T)>gr.CODEWORD_SKEW_SIZE)return w;T+=N}N=-N,x=!x}return T}static checkCodewordSkew(l,f,g){return f-gr.CODEWORD_SKEW_SIZE<=l&&l<=g+gr.CODEWORD_SKEW_SIZE}static decodeCodewords(l,f,g){if(l.length===0)throw M.getFormatInstance();let x=1<<f+1,w=gr.correctErrors(l,g,x);gr.verifyCodewordCount(l,x);let y=Je.decode(l,""+f);return y.setErrorsCorrected(w),y.setErasures(g.length),y}static correctErrors(l,f,g){if(f!=null&&f.length>g/2+gr.MAX_ERRORS||g<0||g>gr.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return gr.errorCorrection.decode(l,g,f)}static verifyCodewordCount(l,f){if(l.length<4)throw M.getFormatInstance();let g=l[0];if(g>l.length)throw M.getFormatInstance();if(g===0)if(f<l.length)l[0]=l.length-f;else throw M.getFormatInstance()}static getBitCountForCodeword(l){let f=new Int32Array(8),g=0,x=f.length-1;for(;!((l&1)!==g&&(g=l&1,x--,x<0));)f[x]++,l>>=1;return f}static getCodewordBucketNumber(l){return l instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(l):this.getCodewordBucketNumber_number(l)}static getCodewordBucketNumber_number(l){return gr.getCodewordBucketNumber(gr.getBitCountForCodeword(l))}static getCodewordBucketNumber_Int32Array(l){return(l[0]-l[2]+l[4]-l[6]+9)%9}static toString(l){let f=new Hs;for(let g=0;g<l.length;g++){f.format("Row %2d: ",g);for(let x=0;x<l[g].length;x++){let w=l[g][x];w.getValue().length===0?f.format("        ",null):f.format("%4d(%2d)",w.getValue()[0],w.getConfidence(w.getValue()[0]))}f.format("%n")}return f.toString()}}gr.CODEWORD_SKEW_SIZE=2,gr.MAX_ERRORS=3,gr.MAX_EC_CODEWORDS=512,gr.errorCorrection=new as;class si{decode(l,f=null){let g=si.decode(l,f,!1);if(g==null||g.length===0||g[0]==null)throw ge.getNotFoundInstance();return g[0]}decodeMultiple(l,f=null){try{return si.decode(l,f,!0)}catch(g){throw g instanceof M||g instanceof I?ge.getNotFoundInstance():g}}static decode(l,f,g){const x=new Array,w=sr.detectMultiple(l,f,g);for(const y of w.getPoints()){const T=gr.decode(w.getBits(),y[4],y[5],y[6],y[7],si.getMinCodewordWidth(y),si.getMaxCodewordWidth(y)),N=new oe(T.getText(),T.getRawBytes(),void 0,y,Ee.PDF_417);N.putMetadata(Fe.ERROR_CORRECTION_LEVEL,T.getECLevel());const D=T.getOther();D!=null&&N.putMetadata(Fe.PDF417_EXTRA_METADATA,D),x.push(N)}return x.map(y=>y)}static getMaxWidth(l,f){return l==null||f==null?0:Math.trunc(Math.abs(l.getX()-f.getX()))}static getMinWidth(l,f){return l==null||f==null?Q.MAX_VALUE:Math.trunc(Math.abs(l.getX()-f.getX()))}static getMaxCodewordWidth(l){return Math.floor(Math.max(Math.max(si.getMaxWidth(l[0],l[4]),si.getMaxWidth(l[6],l[2])*ir.MODULES_IN_CODEWORD/ir.MODULES_IN_STOP_PATTERN),Math.max(si.getMaxWidth(l[1],l[5]),si.getMaxWidth(l[7],l[3])*ir.MODULES_IN_CODEWORD/ir.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(l){return Math.floor(Math.min(Math.min(si.getMinWidth(l[0],l[4]),si.getMinWidth(l[6],l[2])*ir.MODULES_IN_CODEWORD/ir.MODULES_IN_STOP_PATTERN),Math.min(si.getMinWidth(l[1],l[5]),si.getMinWidth(l[7],l[3])*ir.MODULES_IN_CODEWORD/ir.MODULES_IN_STOP_PATTERN)))}reset(){}}class Vo extends d{}Vo.kind="ReaderException";class vo{constructor(l,f){this.verbose=l===!0,f&&this.setHints(f)}decode(l,f){return f&&this.setHints(f),this.decodeInternal(l)}decodeWithState(l){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(l)}setHints(l){this.hints=l;const f=!n(l)&&l.get(z.TRY_HARDER)===!0,g=n(l)?null:l.get(z.POSSIBLE_FORMATS),x=new Array;if(!n(g)){const w=g.some(y=>y===Ee.UPC_A||y===Ee.UPC_E||y===Ee.EAN_13||y===Ee.EAN_8||y===Ee.CODABAR||y===Ee.CODE_39||y===Ee.CODE_93||y===Ee.CODE_128||y===Ee.ITF||y===Ee.RSS_14||y===Ee.RSS_EXPANDED);w&&!f&&x.push(new Vn(l,this.verbose)),g.includes(Ee.QR_CODE)&&x.push(new ia),g.includes(Ee.DATA_MATRIX)&&x.push(new Ms),g.includes(Ee.AZTEC)&&x.push(new mr),g.includes(Ee.PDF_417)&&x.push(new si),w&&f&&x.push(new Vn(l,this.verbose))}x.length===0&&(f||x.push(new Vn(l,this.verbose)),x.push(new ia),x.push(new Ms),x.push(new mr),x.push(new si),f&&x.push(new Vn(l,this.verbose))),this.readers=x}reset(){if(this.readers!==null)for(const l of this.readers)l.reset()}decodeInternal(l){if(this.readers===null)throw new Vo("No readers where selected, nothing can be read.");for(const f of this.readers)try{return f.decode(l,this.hints)}catch(g){if(g instanceof Vo)continue}throw new ge("No MultiFormat Readers were able to detect the code.")}}class jA extends ce{constructor(l=null,f=500){const g=new vo;g.setHints(l),super(g,f)}decodeBitmap(l){return this.reader.decodeWithState(l)}}class zc extends ce{constructor(l=500){super(new si,l)}}class VA extends ce{constructor(l=500){super(new ia,l)}}var Go;(function(J){J[J.ERROR_CORRECTION=0]="ERROR_CORRECTION",J[J.CHARACTER_SET=1]="CHARACTER_SET",J[J.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",J[J.MIN_SIZE=3]="MIN_SIZE",J[J.MAX_SIZE=4]="MAX_SIZE",J[J.MARGIN=5]="MARGIN",J[J.PDF417_COMPACT=6]="PDF417_COMPACT",J[J.PDF417_COMPACTION=7]="PDF417_COMPACTION",J[J.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",J[J.AZTEC_LAYERS=9]="AZTEC_LAYERS",J[J.QR_VERSION=10]="QR_VERSION"})(Go||(Go={}));var Pn=Go;class Ta{constructor(l){this.field=l,this.cachedGenerators=[],this.cachedGenerators.push(new Tt(l,Int32Array.from([1])))}buildGenerator(l){const f=this.cachedGenerators;if(l>=f.length){let g=f[f.length-1];const x=this.field;for(let w=f.length;w<=l;w++){const y=g.multiply(new Tt(x,Int32Array.from([1,x.exp(w-1+x.getGeneratorBase())])));f.push(y),g=y}}return f[l]}encode(l,f){if(f===0)throw new C("No error correction bytes");const g=l.length-f;if(g<=0)throw new C("No data bytes provided");const x=this.buildGenerator(f),w=new Int32Array(g);k.arraycopy(l,0,w,0,g);let y=new Tt(this.field,w);y=y.multiplyByMonomial(f,1);const N=y.divide(x)[1].getCoefficients(),D=f-N.length;for(let H=0;H<D;H++)l[g+H]=0;k.arraycopy(N,0,l,g+D,N.length)}}class _n{constructor(){}static applyMaskPenaltyRule1(l){return _n.applyMaskPenaltyRule1Internal(l,!0)+_n.applyMaskPenaltyRule1Internal(l,!1)}static applyMaskPenaltyRule2(l){let f=0;const g=l.getArray(),x=l.getWidth(),w=l.getHeight();for(let y=0;y<w-1;y++){const T=g[y];for(let N=0;N<x-1;N++){const D=T[N];D===T[N+1]&&D===g[y+1][N]&&D===g[y+1][N+1]&&f++}}return _n.N2*f}static applyMaskPenaltyRule3(l){let f=0;const g=l.getArray(),x=l.getWidth(),w=l.getHeight();for(let y=0;y<w;y++)for(let T=0;T<x;T++){const N=g[y];T+6<x&&N[T]===1&&N[T+1]===0&&N[T+2]===1&&N[T+3]===1&&N[T+4]===1&&N[T+5]===0&&N[T+6]===1&&(_n.isWhiteHorizontal(N,T-4,T)||_n.isWhiteHorizontal(N,T+7,T+11))&&f++,y+6<w&&g[y][T]===1&&g[y+1][T]===0&&g[y+2][T]===1&&g[y+3][T]===1&&g[y+4][T]===1&&g[y+5][T]===0&&g[y+6][T]===1&&(_n.isWhiteVertical(g,T,y-4,y)||_n.isWhiteVertical(g,T,y+7,y+11))&&f++}return f*_n.N3}static isWhiteHorizontal(l,f,g){f=Math.max(f,0),g=Math.min(g,l.length);for(let x=f;x<g;x++)if(l[x]===1)return!1;return!0}static isWhiteVertical(l,f,g,x){g=Math.max(g,0),x=Math.min(x,l.length);for(let w=g;w<x;w++)if(l[w][f]===1)return!1;return!0}static applyMaskPenaltyRule4(l){let f=0;const g=l.getArray(),x=l.getWidth(),w=l.getHeight();for(let N=0;N<w;N++){const D=g[N];for(let H=0;H<x;H++)D[H]===1&&f++}const y=l.getHeight()*l.getWidth();return Math.floor(Math.abs(f*2-y)*10/y)*_n.N4}static getDataMaskBit(l,f,g){let x,w;switch(l){case 0:x=g+f&1;break;case 1:x=g&1;break;case 2:x=f%3;break;case 3:x=(g+f)%3;break;case 4:x=Math.floor(g/2)+Math.floor(f/3)&1;break;case 5:w=g*f,x=(w&1)+w%3;break;case 6:w=g*f,x=(w&1)+w%3&1;break;case 7:w=g*f,x=w%3+(g+f&1)&1;break;default:throw new C("Invalid mask pattern: "+l)}return x===0}static applyMaskPenaltyRule1Internal(l,f){let g=0;const x=f?l.getHeight():l.getWidth(),w=f?l.getWidth():l.getHeight(),y=l.getArray();for(let T=0;T<x;T++){let N=0,D=-1;for(let H=0;H<w;H++){const Z=f?y[T][H]:y[H][T];Z===D?N++:(N>=5&&(g+=_n.N1+(N-5)),N=1,D=Z)}N>=5&&(g+=_n.N1+(N-5))}return g}}_n.N1=3,_n.N2=3,_n.N3=40,_n.N4=10;class Ko{constructor(l,f){this.width=l,this.height=f;const g=new Array(f);for(let x=0;x!==f;x++)g[x]=new Uint8Array(l);this.bytes=g}getHeight(){return this.height}getWidth(){return this.width}get(l,f){return this.bytes[f][l]}getArray(){return this.bytes}setNumber(l,f,g){this.bytes[f][l]=g}setBoolean(l,f,g){this.bytes[f][l]=g?1:0}clear(l){for(const f of this.bytes)K.fill(f,l)}equals(l){if(!(l instanceof Ko))return!1;const f=l;if(this.width!==f.width||this.height!==f.height)return!1;for(let g=0,x=this.height;g<x;++g){const w=this.bytes[g],y=f.bytes[g];for(let T=0,N=this.width;T<N;++T)if(w[T]!==y[T])return!1}return!0}toString(){const l=new G;for(let f=0,g=this.height;f<g;++f){const x=this.bytes[f];for(let w=0,y=this.width;w<y;++w)switch(x[w]){case 0:l.append(" 0");break;case 1:l.append(" 1");break;default:l.append("  ");break}l.append(`
`)}return l.toString()}}class ji{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const l=new G;return l.append(`<<
`),l.append(" mode: "),l.append(this.mode?this.mode.toString():"null"),l.append(`
 ecLevel: `),l.append(this.ecLevel?this.ecLevel.toString():"null"),l.append(`
 version: `),l.append(this.version?this.version.toString():"null"),l.append(`
 maskPattern: `),l.append(this.maskPattern.toString()),this.matrix?(l.append(`
 matrix:
`),l.append(this.matrix.toString())):l.append(`
 matrix: null
`),l.append(`>>
`),l.toString()}setMode(l){this.mode=l}setECLevel(l){this.ecLevel=l}setVersion(l){this.version=l}setMaskPattern(l){this.maskPattern=l}setMatrix(l){this.matrix=l}static isValidMaskPattern(l){return l>=0&&l<ji.NUM_MASK_PATTERNS}}ji.NUM_MASK_PATTERNS=8;class tn extends d{}tn.kind="WriterException";class tr{constructor(){}static clearMatrix(l){l.clear(255)}static buildMatrix(l,f,g,x,w){tr.clearMatrix(w),tr.embedBasicPatterns(g,w),tr.embedTypeInfo(f,x,w),tr.maybeEmbedVersionInfo(g,w),tr.embedDataBits(l,x,w)}static embedBasicPatterns(l,f){tr.embedPositionDetectionPatternsAndSeparators(f),tr.embedDarkDotAtLeftBottomCorner(f),tr.maybeEmbedPositionAdjustmentPatterns(l,f),tr.embedTimingPatterns(f)}static embedTypeInfo(l,f,g){const x=new te;tr.makeTypeInfoBits(l,f,x);for(let w=0,y=x.getSize();w<y;++w){const T=x.get(x.getSize()-1-w),N=tr.TYPE_INFO_COORDINATES[w],D=N[0],H=N[1];if(g.setBoolean(D,H,T),w<8){const Z=g.getWidth()-w-1;g.setBoolean(Z,8,T)}else{const se=g.getHeight()-7+(w-8);g.setBoolean(8,se,T)}}}static maybeEmbedVersionInfo(l,f){if(l.getVersionNumber()<7)return;const g=new te;tr.makeVersionInfoBits(l,g);let x=17;for(let w=0;w<6;++w)for(let y=0;y<3;++y){const T=g.get(x);x--,f.setBoolean(w,f.getHeight()-11+y,T),f.setBoolean(f.getHeight()-11+y,w,T)}}static embedDataBits(l,f,g){let x=0,w=-1,y=g.getWidth()-1,T=g.getHeight()-1;for(;y>0;){for(y===6&&(y-=1);T>=0&&T<g.getHeight();){for(let N=0;N<2;++N){const D=y-N;if(!tr.isEmpty(g.get(D,T)))continue;let H;x<l.getSize()?(H=l.get(x),++x):H=!1,f!==255&&_n.getDataMaskBit(f,D,T)&&(H=!H),g.setBoolean(D,T,H)}T+=w}w=-w,T+=w,y-=2}if(x!==l.getSize())throw new tn("Not all bits consumed: "+x+"/"+l.getSize())}static findMSBSet(l){return 32-Q.numberOfLeadingZeros(l)}static calculateBCHCode(l,f){if(f===0)throw new C("0 polynomial");const g=tr.findMSBSet(f);for(l<<=g-1;tr.findMSBSet(l)>=g;)l^=f<<tr.findMSBSet(l)-g;return l}static makeTypeInfoBits(l,f,g){if(!ji.isValidMaskPattern(f))throw new tn("Invalid mask pattern");const x=l.getBits()<<3|f;g.appendBits(x,5);const w=tr.calculateBCHCode(x,tr.TYPE_INFO_POLY);g.appendBits(w,10);const y=new te;if(y.appendBits(tr.TYPE_INFO_MASK_PATTERN,15),g.xor(y),g.getSize()!==15)throw new tn("should not happen but we got: "+g.getSize())}static makeVersionInfoBits(l,f){f.appendBits(l.getVersionNumber(),6);const g=tr.calculateBCHCode(l.getVersionNumber(),tr.VERSION_INFO_POLY);if(f.appendBits(g,12),f.getSize()!==18)throw new tn("should not happen but we got: "+f.getSize())}static isEmpty(l){return l===255}static embedTimingPatterns(l){for(let f=8;f<l.getWidth()-8;++f){const g=(f+1)%2;tr.isEmpty(l.get(f,6))&&l.setNumber(f,6,g),tr.isEmpty(l.get(6,f))&&l.setNumber(6,f,g)}}static embedDarkDotAtLeftBottomCorner(l){if(l.get(8,l.getHeight()-8)===0)throw new tn;l.setNumber(8,l.getHeight()-8,1)}static embedHorizontalSeparationPattern(l,f,g){for(let x=0;x<8;++x){if(!tr.isEmpty(g.get(l+x,f)))throw new tn;g.setNumber(l+x,f,0)}}static embedVerticalSeparationPattern(l,f,g){for(let x=0;x<7;++x){if(!tr.isEmpty(g.get(l,f+x)))throw new tn;g.setNumber(l,f+x,0)}}static embedPositionAdjustmentPattern(l,f,g){for(let x=0;x<5;++x){const w=tr.POSITION_ADJUSTMENT_PATTERN[x];for(let y=0;y<5;++y)g.setNumber(l+y,f+x,w[y])}}static embedPositionDetectionPattern(l,f,g){for(let x=0;x<7;++x){const w=tr.POSITION_DETECTION_PATTERN[x];for(let y=0;y<7;++y)g.setNumber(l+y,f+x,w[y])}}static embedPositionDetectionPatternsAndSeparators(l){const f=tr.POSITION_DETECTION_PATTERN[0].length;tr.embedPositionDetectionPattern(0,0,l),tr.embedPositionDetectionPattern(l.getWidth()-f,0,l),tr.embedPositionDetectionPattern(0,l.getWidth()-f,l);const g=8;tr.embedHorizontalSeparationPattern(0,g-1,l),tr.embedHorizontalSeparationPattern(l.getWidth()-g,g-1,l),tr.embedHorizontalSeparationPattern(0,l.getWidth()-g,l);const x=7;tr.embedVerticalSeparationPattern(x,0,l),tr.embedVerticalSeparationPattern(l.getHeight()-x-1,0,l),tr.embedVerticalSeparationPattern(x,l.getHeight()-x,l)}static maybeEmbedPositionAdjustmentPatterns(l,f){if(l.getVersionNumber()<2)return;const g=l.getVersionNumber()-1,x=tr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[g];for(let w=0,y=x.length;w!==y;w++){const T=x[w];if(T>=0)for(let N=0;N!==y;N++){const D=x[N];D>=0&&tr.isEmpty(f.get(D,T))&&tr.embedPositionAdjustmentPattern(D-2,T-2,f)}}}}tr.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),tr.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),tr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),tr.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),tr.VERSION_INFO_POLY=7973,tr.TYPE_INFO_POLY=1335,tr.TYPE_INFO_MASK_PATTERN=21522;class Wc{constructor(l,f){this.dataBytes=l,this.errorCorrectionBytes=f}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class cn{constructor(){}static calculateMaskPenalty(l){return _n.applyMaskPenaltyRule1(l)+_n.applyMaskPenaltyRule2(l)+_n.applyMaskPenaltyRule3(l)+_n.applyMaskPenaltyRule4(l)}static encode(l,f,g=null){let x=cn.DEFAULT_BYTE_MODE_ENCODING;const w=g!==null&&g.get(Pn.CHARACTER_SET)!==void 0;w&&(x=g.get(Pn.CHARACTER_SET).toString());const y=this.chooseMode(l,x),T=new te;if(y===$t.BYTE&&(w||cn.DEFAULT_BYTE_MODE_ENCODING!==x)){const bt=O.getCharacterSetECIByName(x);bt!==void 0&&this.appendECI(bt,T)}this.appendModeInfo(y,T);const N=new te;this.appendBytes(l,y,N,x);let D;if(g!==null&&g.get(Pn.QR_VERSION)!==void 0){const bt=Number.parseInt(g.get(Pn.QR_VERSION).toString(),10);D=Ft.getVersionForNumber(bt);const xt=this.calculateBitsNeeded(y,T,N,D);if(!this.willFit(xt,D,f))throw new tn("Data too big for requested version")}else D=this.recommendVersion(f,y,T,N);const H=new te;H.appendBitArray(T);const Z=y===$t.BYTE?N.getSizeInBytes():l.length;this.appendLengthInfo(Z,D,y,H),H.appendBitArray(N);const se=D.getECBlocksForLevel(f),ye=D.getTotalCodewords()-se.getTotalECCodewords();this.terminateBits(ye,H);const Se=this.interleaveWithECBytes(H,D.getTotalCodewords(),ye,se.getNumBlocks()),Ne=new ji;Ne.setECLevel(f),Ne.setMode(y),Ne.setVersion(D);const Le=D.getDimensionForVersion(),Ze=new Ko(Le,Le),_t=this.chooseMaskPattern(Se,f,D,Ze);return Ne.setMaskPattern(_t),tr.buildMatrix(Se,f,D,_t,Ze),Ne.setMatrix(Ze),Ne}static recommendVersion(l,f,g,x){const w=this.calculateBitsNeeded(f,g,x,Ft.getVersionForNumber(1)),y=this.chooseVersion(w,l),T=this.calculateBitsNeeded(f,g,x,y);return this.chooseVersion(T,l)}static calculateBitsNeeded(l,f,g,x){return f.getSize()+l.getCharacterCountBits(x)+g.getSize()}static getAlphanumericCode(l){return l<cn.ALPHANUMERIC_TABLE.length?cn.ALPHANUMERIC_TABLE[l]:-1}static chooseMode(l,f=null){if(O.SJIS.getName()===f&&this.isOnlyDoubleByteKanji(l))return $t.KANJI;let g=!1,x=!1;for(let w=0,y=l.length;w<y;++w){const T=l.charAt(w);if(cn.isDigit(T))g=!0;else if(this.getAlphanumericCode(T.charCodeAt(0))!==-1)x=!0;else return $t.BYTE}return x?$t.ALPHANUMERIC:g?$t.NUMERIC:$t.BYTE}static isOnlyDoubleByteKanji(l){let f;try{f=Y.encode(l,O.SJIS)}catch{return!1}const g=f.length;if(g%2!==0)return!1;for(let x=0;x<g;x+=2){const w=f[x]&255;if((w<129||w>159)&&(w<224||w>235))return!1}return!0}static chooseMaskPattern(l,f,g,x){let w=Number.MAX_SAFE_INTEGER,y=-1;for(let T=0;T<ji.NUM_MASK_PATTERNS;T++){tr.buildMatrix(l,f,g,T,x);let N=this.calculateMaskPenalty(x);N<w&&(w=N,y=T)}return y}static chooseVersion(l,f){for(let g=1;g<=40;g++){const x=Ft.getVersionForNumber(g);if(cn.willFit(l,x,f))return x}throw new tn("Data too big")}static willFit(l,f,g){const x=f.getTotalCodewords(),y=f.getECBlocksForLevel(g).getTotalECCodewords(),T=x-y,N=(l+7)/8;return T>=N}static terminateBits(l,f){const g=l*8;if(f.getSize()>g)throw new tn("data bits cannot fit in the QR Code"+f.getSize()+" > "+g);for(let y=0;y<4&&f.getSize()<g;++y)f.appendBit(!1);const x=f.getSize()&7;if(x>0)for(let y=x;y<8;y++)f.appendBit(!1);const w=l-f.getSizeInBytes();for(let y=0;y<w;++y)f.appendBits((y&1)===0?236:17,8);if(f.getSize()!==g)throw new tn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(l,f,g,x,w,y){if(x>=g)throw new tn("Block ID too large");const T=l%g,N=g-T,D=Math.floor(l/g),H=D+1,Z=Math.floor(f/g),se=Z+1,ye=D-Z,Se=H-se;if(ye!==Se)throw new tn("EC bytes mismatch");if(g!==N+T)throw new tn("RS blocks mismatch");if(l!==(Z+ye)*N+(se+Se)*T)throw new tn("Total bytes mismatch");x<N?(w[0]=Z,y[0]=ye):(w[0]=se,y[0]=Se)}static interleaveWithECBytes(l,f,g,x){if(l.getSizeInBytes()!==g)throw new tn("Number of bits and data bytes does not match");let w=0,y=0,T=0;const N=new Array;for(let H=0;H<x;++H){const Z=new Int32Array(1),se=new Int32Array(1);cn.getNumDataBytesAndNumECBytesForBlockID(f,g,x,H,Z,se);const ye=Z[0],Se=new Uint8Array(ye);l.toBytes(8*w,Se,0,ye);const Ne=cn.generateECBytes(Se,se[0]);N.push(new Wc(Se,Ne)),y=Math.max(y,ye),T=Math.max(T,Ne.length),w+=Z[0]}if(g!==w)throw new tn("Data bytes does not match offset");const D=new te;for(let H=0;H<y;++H)for(const Z of N){const se=Z.getDataBytes();H<se.length&&D.appendBits(se[H],8)}for(let H=0;H<T;++H)for(const Z of N){const se=Z.getErrorCorrectionBytes();H<se.length&&D.appendBits(se[H],8)}if(f!==D.getSizeInBytes())throw new tn("Interleaving error: "+f+" and "+D.getSizeInBytes()+" differ.");return D}static generateECBytes(l,f){const g=l.length,x=new Int32Array(g+f);for(let y=0;y<g;y++)x[y]=l[y]&255;new Ta(Oe.QR_CODE_FIELD_256).encode(x,f);const w=new Uint8Array(f);for(let y=0;y<f;y++)w[y]=x[g+y];return w}static appendModeInfo(l,f){f.appendBits(l.getBits(),4)}static appendLengthInfo(l,f,g,x){const w=g.getCharacterCountBits(f);if(l>=1<<w)throw new tn(l+" is bigger than "+((1<<w)-1));x.appendBits(l,w)}static appendBytes(l,f,g,x){switch(f){case $t.NUMERIC:cn.appendNumericBytes(l,g);break;case $t.ALPHANUMERIC:cn.appendAlphanumericBytes(l,g);break;case $t.BYTE:cn.append8BitBytes(l,g,x);break;case $t.KANJI:cn.appendKanjiBytes(l,g);break;default:throw new tn("Invalid mode: "+f)}}static getDigit(l){return l.charCodeAt(0)-48}static isDigit(l){const f=cn.getDigit(l);return f>=0&&f<=9}static appendNumericBytes(l,f){const g=l.length;let x=0;for(;x<g;){const w=cn.getDigit(l.charAt(x));if(x+2<g){const y=cn.getDigit(l.charAt(x+1)),T=cn.getDigit(l.charAt(x+2));f.appendBits(w*100+y*10+T,10),x+=3}else if(x+1<g){const y=cn.getDigit(l.charAt(x+1));f.appendBits(w*10+y,7),x+=2}else f.appendBits(w,4),x++}}static appendAlphanumericBytes(l,f){const g=l.length;let x=0;for(;x<g;){const w=cn.getAlphanumericCode(l.charCodeAt(x));if(w===-1)throw new tn;if(x+1<g){const y=cn.getAlphanumericCode(l.charCodeAt(x+1));if(y===-1)throw new tn;f.appendBits(w*45+y,11),x+=2}else f.appendBits(w,6),x++}}static append8BitBytes(l,f,g){let x;try{x=Y.encode(l,g)}catch(w){throw new tn(w)}for(let w=0,y=x.length;w!==y;w++){const T=x[w];f.appendBits(T,8)}}static appendKanjiBytes(l,f){let g;try{g=Y.encode(l,O.SJIS)}catch(w){throw new tn(w)}const x=g.length;for(let w=0;w<x;w+=2){const y=g[w]&255,T=g[w+1]&255,N=y<<8&4294967295|T;let D=-1;if(N>=33088&&N<=40956?D=N-33088:N>=57408&&N<=60351&&(D=N-49472),D===-1)throw new tn("Invalid byte sequence");const H=(D>>8)*192+(D&255);f.appendBits(H,13)}}static appendECI(l,f){f.appendBits($t.ECI.getBits(),4),f.appendBits(l.getValue(),8)}}cn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),cn.DEFAULT_BYTE_MODE_ENCODING=O.UTF8.getName();class Gs{write(l,f,g,x=null){if(l.length===0)throw new C("Found empty contents");if(f<0||g<0)throw new C("Requested dimensions are too small: "+f+"x"+g);let w=ur.L,y=Gs.QUIET_ZONE_SIZE;x!==null&&(x.get(Pn.ERROR_CORRECTION)!==void 0&&(w=ur.fromString(x.get(Pn.ERROR_CORRECTION).toString())),x.get(Pn.MARGIN)!==void 0&&(y=Number.parseInt(x.get(Pn.MARGIN).toString(),10)));const T=cn.encode(l,w,x);return this.renderResult(T,f,g,y)}writeToDom(l,f,g,x,w=null){typeof l=="string"&&(l=document.querySelector(l));const y=this.write(f,g,x,w);l&&l.appendChild(y)}renderResult(l,f,g,x){const w=l.getMatrix();if(w===null)throw new Bt;const y=w.getWidth(),T=w.getHeight(),N=y+x*2,D=T+x*2,H=Math.max(f,N),Z=Math.max(g,D),se=Math.min(Math.floor(H/N),Math.floor(Z/D)),ye=Math.floor((H-y*se)/2),Se=Math.floor((Z-T*se)/2),Ne=this.createSVGElement(H,Z);for(let Le=0,Ze=Se;Le<T;Le++,Ze+=se)for(let _t=0,bt=ye;_t<y;_t++,bt+=se)if(w.get(_t,Le)===1){const xt=this.createSvgRectElement(bt,Ze,se,se);Ne.appendChild(xt)}return Ne}createSVGElement(l,f){const g=document.createElementNS(Gs.SVG_NS,"svg");return g.setAttributeNS(null,"height",l.toString()),g.setAttributeNS(null,"width",f.toString()),g}createSvgRectElement(l,f,g,x){const w=document.createElementNS(Gs.SVG_NS,"rect");return w.setAttributeNS(null,"x",l.toString()),w.setAttributeNS(null,"y",f.toString()),w.setAttributeNS(null,"height",g.toString()),w.setAttributeNS(null,"width",x.toString()),w.setAttributeNS(null,"fill","#000000"),w}}Gs.QUIET_ZONE_SIZE=4,Gs.SVG_NS="http://www.w3.org/2000/svg";class Jn{encode(l,f,g,x,w){if(l.length===0)throw new C("Found empty contents");if(f!==Ee.QR_CODE)throw new C("Can only encode QR_CODE, but got "+f);if(g<0||x<0)throw new C(`Requested dimensions are too small: ${g}x${x}`);let y=ur.L,T=Jn.QUIET_ZONE_SIZE;w!==null&&(w.get(Pn.ERROR_CORRECTION)!==void 0&&(y=ur.fromString(w.get(Pn.ERROR_CORRECTION).toString())),w.get(Pn.MARGIN)!==void 0&&(T=Number.parseInt(w.get(Pn.MARGIN).toString(),10)));const N=cn.encode(l,y,w);return Jn.renderResult(N,g,x,T)}static renderResult(l,f,g,x){const w=l.getMatrix();if(w===null)throw new Bt;const y=w.getWidth(),T=w.getHeight(),N=y+x*2,D=T+x*2,H=Math.max(f,N),Z=Math.max(g,D),se=Math.min(Math.floor(H/N),Math.floor(Z/D)),ye=Math.floor((H-y*se)/2),Se=Math.floor((Z-T*se)/2),Ne=new Ie(H,Z);for(let Le=0,Ze=Se;Le<T;Le++,Ze+=se)for(let _t=0,bt=ye;_t<y;_t++,bt+=se)w.get(_t,Le)===1&&Ne.setRegion(bt,Ze,se,se);return Ne}}Jn.QUIET_ZONE_SIZE=4;class qc{encode(l,f,g,x,w){let y;switch(f){case Ee.QR_CODE:y=new Jn;break;default:throw new C("No encoder available for format "+f)}return y.encode(l,f,g,x,w)}}class Es extends Ge{constructor(l,f,g,x,w,y,T,N){if(super(y,T),this.yuvData=l,this.dataWidth=f,this.dataHeight=g,this.left=x,this.top=w,x+y>f||w+T>g)throw new C("Crop rectangle does not fit within image data.");N&&this.reverseHorizontal(y,T)}getRow(l,f){if(l<0||l>=this.getHeight())throw new C("Requested row is outside the image: "+l);const g=this.getWidth();(f==null||f.length<g)&&(f=new Uint8ClampedArray(g));const x=(l+this.top)*this.dataWidth+this.left;return k.arraycopy(this.yuvData,x,f,0,g),f}getMatrix(){const l=this.getWidth(),f=this.getHeight();if(l===this.dataWidth&&f===this.dataHeight)return this.yuvData;const g=l*f,x=new Uint8ClampedArray(g);let w=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return k.arraycopy(this.yuvData,w,x,0,g),x;for(let y=0;y<f;y++){const T=y*l;k.arraycopy(this.yuvData,w,x,T,l),w+=this.dataWidth}return x}isCropSupported(){return!0}crop(l,f,g,x){return new Es(this.yuvData,this.dataWidth,this.dataHeight,this.left+l,this.top+f,g,x,!1)}renderThumbnail(){const l=this.getWidth()/Es.THUMBNAIL_SCALE_FACTOR,f=this.getHeight()/Es.THUMBNAIL_SCALE_FACTOR,g=new Int32Array(l*f),x=this.yuvData;let w=this.top*this.dataWidth+this.left;for(let y=0;y<f;y++){const T=y*l;for(let N=0;N<l;N++){const D=x[w+N*Es.THUMBNAIL_SCALE_FACTOR]&255;g[T+N]=4278190080|D*65793}w+=this.dataWidth*Es.THUMBNAIL_SCALE_FACTOR}return g}getThumbnailWidth(){return this.getWidth()/Es.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Es.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(l,f){const g=this.yuvData;for(let x=0,w=this.top*this.dataWidth+this.left;x<f;x++,w+=this.dataWidth){const y=w+l/2;for(let T=w,N=w+l-1;T<y;T++,N--){const D=g[T];g[T]=g[N],g[N]=D}}}invert(){return new be(this)}}Es.THUMBNAIL_SCALE_FACTOR=2;class Ba extends Ge{constructor(l,f,g,x,w,y,T){if(super(f,g),this.dataWidth=x,this.dataHeight=w,this.left=y,this.top=T,l.BYTES_PER_ELEMENT===4){const N=f*g,D=new Uint8ClampedArray(N);for(let H=0;H<N;H++){const Z=l[H],se=Z>>16&255,ye=Z>>7&510,Se=Z&255;D[H]=(se+ye+Se)/4&255}this.luminances=D}else this.luminances=l;if(x===void 0&&(this.dataWidth=f),w===void 0&&(this.dataHeight=g),y===void 0&&(this.left=0),T===void 0&&(this.top=0),this.left+f>this.dataWidth||this.top+g>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(l,f){if(l<0||l>=this.getHeight())throw new C("Requested row is outside the image: "+l);const g=this.getWidth();(f==null||f.length<g)&&(f=new Uint8ClampedArray(g));const x=(l+this.top)*this.dataWidth+this.left;return k.arraycopy(this.luminances,x,f,0,g),f}getMatrix(){const l=this.getWidth(),f=this.getHeight();if(l===this.dataWidth&&f===this.dataHeight)return this.luminances;const g=l*f,x=new Uint8ClampedArray(g);let w=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return k.arraycopy(this.luminances,w,x,0,g),x;for(let y=0;y<f;y++){const T=y*l;k.arraycopy(this.luminances,w,x,T,l),w+=this.dataWidth}return x}isCropSupported(){return!0}crop(l,f,g,x){return new Ba(this.luminances,g,x,this.dataWidth,this.dataHeight,this.left+l,this.top+f)}invert(){return new be(this)}}class B extends O{static forName(l){return this.getCharacterSetECIByName(l)}}class L{}L.ISO_8859_1=O.ISO8859_1;class W{isCompact(){return this.compact}setCompact(l){this.compact=l}getSize(){return this.size}setSize(l){this.size=l}getLayers(){return this.layers}setLayers(l){this.layers=l}getCodeWords(){return this.codeWords}setCodeWords(l){this.codeWords=l}getMatrix(){return this.matrix}setMatrix(l){this.matrix=l}}class ue{static singletonList(l){return[l]}static min(l,f){return l.sort(f)[0]}}class Qe{constructor(l){this.previous=l}getPrevious(){return this.previous}}class $e extends Qe{constructor(l,f,g){super(l),this.value=f,this.bitCount=g}appendTo(l,f){l.appendBits(this.value,this.bitCount)}add(l,f){return new $e(this,l,f)}addBinaryShift(l,f){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new $e(this,l,f)}toString(){let l=this.value&(1<<this.bitCount)-1;return l|=1<<this.bitCount,"<"+Q.toBinaryString(l|1<<this.bitCount).substring(1)+">"}}class Ut extends $e{constructor(l,f,g){super(l,0,0),this.binaryShiftStart=f,this.binaryShiftByteCount=g}appendTo(l,f){for(let g=0;g<this.binaryShiftByteCount;g++)(g===0||g===31&&this.binaryShiftByteCount<=62)&&(l.appendBits(31,5),this.binaryShiftByteCount>62?l.appendBits(this.binaryShiftByteCount-31,16):g===0?l.appendBits(Math.min(this.binaryShiftByteCount,31),5):l.appendBits(this.binaryShiftByteCount-31,5)),l.appendBits(f[this.binaryShiftStart+g],8)}addBinaryShift(l,f){return new Ut(this,l,f)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function nn(J,l,f){return new Ut(J,l,f)}function Nn(J,l,f){return new $e(J,l,f)}const Rr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Tn=0,Kn=1,ai=2,Vi=3,ki=4,Ja=new $e(null,0,0),zo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Yp(J){for(let l of J)K.fill(l,-1);return J[Tn][ki]=0,J[Kn][ki]=0,J[Kn][Tn]=28,J[Vi][ki]=0,J[ai][ki]=0,J[ai][Tn]=15,J}const GA=Yp(K.createInt32Array(6,6));class aa{constructor(l,f,g,x){this.token=l,this.mode=f,this.binaryShiftByteCount=g,this.bitCount=x}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(l,f){let g=this.bitCount,x=this.token;if(l!==this.mode){let y=zo[this.mode][l];x=Nn(x,y&65535,y>>16),g+=y>>16}let w=l===ai?4:5;return x=Nn(x,f,w),new aa(x,l,0,g+w)}shiftAndAppend(l,f){let g=this.token,x=this.mode===ai?4:5;return g=Nn(g,GA[this.mode][l],x),g=Nn(g,f,5),new aa(g,this.mode,0,this.bitCount+x+5)}addBinaryShiftChar(l){let f=this.token,g=this.mode,x=this.bitCount;if(this.mode===ki||this.mode===ai){let T=zo[g][Tn];f=Nn(f,T&65535,T>>16),x+=T>>16,g=Tn}let w=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,y=new aa(f,g,this.binaryShiftByteCount+1,x+w);return y.binaryShiftByteCount===2078&&(y=y.endBinaryShift(l+1)),y}endBinaryShift(l){if(this.binaryShiftByteCount===0)return this;let f=this.token;return f=nn(f,l-this.binaryShiftByteCount,this.binaryShiftByteCount),new aa(f,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(l){let f=this.bitCount+(zo[this.mode][l.mode]>>16);return this.binaryShiftByteCount<l.binaryShiftByteCount?f+=aa.calculateBinaryShiftCost(l)-aa.calculateBinaryShiftCost(this):this.binaryShiftByteCount>l.binaryShiftByteCount&&l.binaryShiftByteCount>0&&(f+=10),f<=l.bitCount}toBitArray(l){let f=[];for(let x=this.endBinaryShift(l.length).token;x!==null;x=x.getPrevious())f.unshift(x);let g=new te;for(const x of f)x.appendTo(g,l);return g}toString(){return X.format("%s bits=%d bytes=%d",Rr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(l){return l.binaryShiftByteCount>62?21:l.binaryShiftByteCount>31?20:l.binaryShiftByteCount>0?10:0}}aa.INITIAL_STATE=new aa(Ja,Tn,0,0);function zd(J){const l=X.getCharCode(" "),f=X.getCharCode("."),g=X.getCharCode(",");J[Tn][l]=1;const x=X.getCharCode("Z"),w=X.getCharCode("A");for(let se=w;se<=x;se++)J[Tn][se]=se-w+2;J[Kn][l]=1;const y=X.getCharCode("z"),T=X.getCharCode("a");for(let se=T;se<=y;se++)J[Kn][se]=se-T+2;J[ai][l]=1;const N=X.getCharCode("9"),D=X.getCharCode("0");for(let se=D;se<=N;se++)J[ai][se]=se-D+2;J[ai][g]=12,J[ai][f]=13;const H=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let se=0;se<H.length;se++)J[Vi][X.getCharCode(H[se])]=se;const Z=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let se=0;se<Z.length;se++)X.getCharCode(Z[se])>0&&(J[ki][X.getCharCode(Z[se])]=se);return J}const KA=zd(K.createInt32Array(5,256));class Wo{constructor(l){this.text=l}encode(){const l=X.getCharCode(" "),f=X.getCharCode(`
`);let g=ue.singletonList(aa.INITIAL_STATE);for(let w=0;w<this.text.length;w++){let y,T=w+1<this.text.length?this.text[w+1]:0;switch(this.text[w]){case X.getCharCode("\r"):y=T===f?2:0;break;case X.getCharCode("."):y=T===l?3:0;break;case X.getCharCode(","):y=T===l?4:0;break;case X.getCharCode(":"):y=T===l?5:0;break;default:y=0}y>0?(g=Wo.updateStateListForPair(g,w,y),w++):g=this.updateStateListForChar(g,w)}return ue.min(g,(w,y)=>w.getBitCount()-y.getBitCount()).toBitArray(this.text)}updateStateListForChar(l,f){const g=[];for(let x of l)this.updateStateForChar(x,f,g);return Wo.simplifyStates(g)}updateStateForChar(l,f,g){let x=this.text[f]&255,w=KA[l.getMode()][x]>0,y=null;for(let T=0;T<=ki;T++){let N=KA[T][x];if(N>0){if(y==null&&(y=l.endBinaryShift(f)),!w||T===l.getMode()||T===ai){const D=y.latchAndAppend(T,N);g.push(D)}if(!w&&GA[l.getMode()][T]>=0){const D=y.shiftAndAppend(T,N);g.push(D)}}}if(l.getBinaryShiftByteCount()>0||KA[l.getMode()][x]===0){let T=l.addBinaryShiftChar(f);g.push(T)}}static updateStateListForPair(l,f,g){const x=[];for(let w of l)this.updateStateForPair(w,f,g,x);return this.simplifyStates(x)}static updateStateForPair(l,f,g,x){let w=l.endBinaryShift(f);if(x.push(w.latchAndAppend(ki,g)),l.getMode()!==ki&&x.push(w.shiftAndAppend(ki,g)),g===3||g===4){let y=w.latchAndAppend(ai,16-g).latchAndAppend(ai,1);x.push(y)}if(l.getBinaryShiftByteCount()>0){let y=l.addBinaryShiftChar(f).addBinaryShiftChar(f+1);x.push(y)}}static simplifyStates(l){let f=[];for(const g of l){let x=!0;for(const w of f){if(w.isBetterThanOrEqualTo(g)){x=!1;break}g.isBetterThanOrEqualTo(w)&&(f=f.filter(y=>y!==w))}x&&f.push(g)}return f}}class Lr{constructor(){}static encodeBytes(l){return Lr.encode(l,Lr.DEFAULT_EC_PERCENT,Lr.DEFAULT_AZTEC_LAYERS)}static encode(l,f,g){let x=new Wo(l).encode(),w=Q.truncDivision(x.getSize()*f,100)+11,y=x.getSize()+w,T,N,D,H,Z;if(g!==Lr.DEFAULT_AZTEC_LAYERS){if(T=g<0,N=Math.abs(g),N>(T?Lr.MAX_NB_BITS_COMPACT:Lr.MAX_NB_BITS))throw new C(X.format("Illegal value %s for layers",g));D=Lr.totalBitsInLayer(N,T),H=Lr.WORD_SIZE[N];let xt=D-D%H;if(Z=Lr.stuffBits(x,H),Z.getSize()+w>xt)throw new C("Data to large for user specified layer");if(T&&Z.getSize()>H*64)throw new C("Data to large for user specified layer")}else{H=0,Z=null;for(let xt=0;;xt++){if(xt>Lr.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(T=xt<=3,N=T?xt+1:xt,D=Lr.totalBitsInLayer(N,T),y>D)continue;(Z==null||H!==Lr.WORD_SIZE[N])&&(H=Lr.WORD_SIZE[N],Z=Lr.stuffBits(x,H));let Dr=D-D%H;if(!(T&&Z.getSize()>H*64)&&Z.getSize()+w<=Dr)break}}let se=Lr.generateCheckWords(Z,D,H),ye=Z.getSize()/H,Se=Lr.generateModeMessage(T,N,ye),Ne=(T?11:14)+N*4,Le=new Int32Array(Ne),Ze;if(T){Ze=Ne;for(let xt=0;xt<Le.length;xt++)Le[xt]=xt}else{Ze=Ne+1+2*Q.truncDivision(Q.truncDivision(Ne,2)-1,15);let xt=Q.truncDivision(Ne,2),Dr=Q.truncDivision(Ze,2);for(let wr=0;wr<xt;wr++){let Zn=wr+Q.truncDivision(wr,15);Le[xt-wr-1]=Dr-Zn-1,Le[xt+wr]=Dr+Zn+1}}let _t=new Ie(Ze);for(let xt=0,Dr=0;xt<N;xt++){let wr=(N-xt)*4+(T?9:12);for(let Zn=0;Zn<wr;Zn++){let Ks=Zn*2;for(let Gi=0;Gi<2;Gi++)se.get(Dr+Ks+Gi)&&_t.set(Le[xt*2+Gi],Le[xt*2+Zn]),se.get(Dr+wr*2+Ks+Gi)&&_t.set(Le[xt*2+Zn],Le[Ne-1-xt*2-Gi]),se.get(Dr+wr*4+Ks+Gi)&&_t.set(Le[Ne-1-xt*2-Gi],Le[Ne-1-xt*2-Zn]),se.get(Dr+wr*6+Ks+Gi)&&_t.set(Le[Ne-1-xt*2-Zn],Le[xt*2+Gi])}Dr+=wr*8}if(Lr.drawModeMessage(_t,T,Ze,Se),T)Lr.drawBullsEye(_t,Q.truncDivision(Ze,2),5);else{Lr.drawBullsEye(_t,Q.truncDivision(Ze,2),7);for(let xt=0,Dr=0;xt<Q.truncDivision(Ne,2)-1;xt+=15,Dr+=16)for(let wr=Q.truncDivision(Ze,2)&1;wr<Ze;wr+=2)_t.set(Q.truncDivision(Ze,2)-Dr,wr),_t.set(Q.truncDivision(Ze,2)+Dr,wr),_t.set(wr,Q.truncDivision(Ze,2)-Dr),_t.set(wr,Q.truncDivision(Ze,2)+Dr)}let bt=new W;return bt.setCompact(T),bt.setSize(Ze),bt.setLayers(N),bt.setCodeWords(ye),bt.setMatrix(_t),bt}static drawBullsEye(l,f,g){for(let x=0;x<g;x+=2)for(let w=f-x;w<=f+x;w++)l.set(w,f-x),l.set(w,f+x),l.set(f-x,w),l.set(f+x,w);l.set(f-g,f-g),l.set(f-g+1,f-g),l.set(f-g,f-g+1),l.set(f+g,f-g),l.set(f+g,f-g+1),l.set(f+g,f+g-1)}static generateModeMessage(l,f,g){let x=new te;return l?(x.appendBits(f-1,2),x.appendBits(g-1,6),x=Lr.generateCheckWords(x,28,4)):(x.appendBits(f-1,5),x.appendBits(g-1,11),x=Lr.generateCheckWords(x,40,4)),x}static drawModeMessage(l,f,g,x){let w=Q.truncDivision(g,2);if(f)for(let y=0;y<7;y++){let T=w-3+y;x.get(y)&&l.set(T,w-5),x.get(y+7)&&l.set(w+5,T),x.get(20-y)&&l.set(T,w+5),x.get(27-y)&&l.set(w-5,T)}else for(let y=0;y<10;y++){let T=w-5+y+Q.truncDivision(y,5);x.get(y)&&l.set(T,w-7),x.get(y+10)&&l.set(w+7,T),x.get(29-y)&&l.set(T,w+7),x.get(39-y)&&l.set(w-7,T)}}static generateCheckWords(l,f,g){let x=l.getSize()/g,w=new Ta(Lr.getGF(g)),y=Q.truncDivision(f,g),T=Lr.bitsToWords(l,g,y);w.encode(T,y-x);let N=f%g,D=new te;D.appendBits(0,N);for(const H of Array.from(T))D.appendBits(H,g);return D}static bitsToWords(l,f,g){let x=new Int32Array(g),w,y;for(w=0,y=l.getSize()/f;w<y;w++){let T=0;for(let N=0;N<f;N++)T|=l.get(w*f+N)?1<<f-N-1:0;x[w]=T}return x}static getGF(l){switch(l){case 4:return Oe.AZTEC_PARAM;case 6:return Oe.AZTEC_DATA_6;case 8:return Oe.AZTEC_DATA_8;case 10:return Oe.AZTEC_DATA_10;case 12:return Oe.AZTEC_DATA_12;default:throw new C("Unsupported word size "+l)}}static stuffBits(l,f){let g=new te,x=l.getSize(),w=(1<<f)-2;for(let y=0;y<x;y+=f){let T=0;for(let N=0;N<f;N++)(y+N>=x||l.get(y+N))&&(T|=1<<f-1-N);(T&w)===w?(g.appendBits(T&w,f),y--):(T&w)===0?(g.appendBits(T|1,f),y--):g.appendBits(T,f)}return g}static totalBitsInLayer(l,f){return((f?88:112)+16*l)*l}}Lr.DEFAULT_EC_PERCENT=33,Lr.DEFAULT_AZTEC_LAYERS=0,Lr.MAX_NB_BITS=32,Lr.MAX_NB_BITS_COMPACT=4,Lr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class zA{encode(l,f,g,x){return this.encodeWithHints(l,f,g,x,null)}encodeWithHints(l,f,g,x,w){let y=L.ISO_8859_1,T=Lr.DEFAULT_EC_PERCENT,N=Lr.DEFAULT_AZTEC_LAYERS;return w!=null&&(w.has(Pn.CHARACTER_SET)&&(y=B.forName(w.get(Pn.CHARACTER_SET).toString())),w.has(Pn.ERROR_CORRECTION)&&(T=Q.parseInt(w.get(Pn.ERROR_CORRECTION).toString())),w.has(Pn.AZTEC_LAYERS)&&(N=Q.parseInt(w.get(Pn.AZTEC_LAYERS).toString()))),zA.encodeLayers(l,f,g,x,y,T,N)}static encodeLayers(l,f,g,x,w,y,T){if(f!==Ee.AZTEC)throw new C("Can only encode AZTEC, but got "+f);let N=Lr.encode(X.getBytes(l,w),y,T);return zA.renderResult(N,g,x)}static renderResult(l,f,g){let x=l.getMatrix();if(x==null)throw new Bt;let w=x.getWidth(),y=x.getHeight(),T=Math.max(f,w),N=Math.max(g,y),D=Math.min(T/w,N/y),H=(T-w*D)/2,Z=(N-y*D)/2,se=new Ie(T,N);for(let ye=0,Se=Z;ye<y;ye++,Se+=D)for(let Ne=0,Le=H;Ne<w;Ne++,Le+=D)x.get(Ne,ye)&&se.setRegion(Le,Se,D,D);return se}}r.AbstractExpandedDecoder=he,r.ArgumentException=m,r.ArithmeticException=ve,r.AztecCode=W,r.AztecCodeReader=mr,r.AztecCodeWriter=zA,r.AztecDecoder=Ot,r.AztecDetector=Ht,r.AztecDetectorResult=Nr,r.AztecEncoder=Lr,r.AztecHighLevelEncoder=Wo,r.AztecPoint=hr,r.BarcodeFormat=Ee,r.Binarizer=F,r.BinaryBitmap=b,r.BitArray=te,r.BitMatrix=Ie,r.BitSource=is,r.BrowserAztecCodeReader=pt,r.BrowserBarcodeReader=qa,r.BrowserCodeReader=ce,r.BrowserDatamatrixCodeReader=Dl,r.BrowserMultiFormatReader=jA,r.BrowserPDF417Reader=zc,r.BrowserQRCodeReader=VA,r.BrowserQRCodeSvgWriter=Gs,r.CharacterSetECI=O,r.ChecksumException=I,r.Code128Reader=_e,r.Code39Reader=Nt,r.DataMatrixDecodedBitStreamParser=na,r.DataMatrixReader=Ms,r.DecodeHintType=z,r.DecoderResult=He,r.DefaultGridSampler=Zt,r.DetectorResult=er,r.EAN13Reader=kr,r.EncodeHintType=Pn,r.Exception=d,r.FormatException=M,r.GenericGF=Oe,r.GenericGFPoly=Tt,r.GlobalHistogramBinarizer=de,r.GridSampler=It,r.GridSamplerInstance=cr,r.HTMLCanvasElementLuminanceSource=De,r.HybridBinarizer=we,r.ITFReader=Re,r.IllegalArgumentException=C,r.IllegalStateException=Bt,r.InvertedLuminanceSource=be,r.LuminanceSource=Ge,r.MathUtils=jt,r.MultiFormatOneDReader=Vn,r.MultiFormatReader=vo,r.MultiFormatWriter=qc,r.NotFoundException=ge,r.OneDReader=yt,r.PDF417DecodedBitStreamParser=Je,r.PDF417DecoderErrorCorrection=as,r.PDF417Reader=si,r.PDF417ResultMetadata=Xa,r.PerspectiveTransform=Lt,r.PlanarYUVLuminanceSource=Es,r.QRCodeByteMatrix=Ko,r.QRCodeDataMask=ii,r.QRCodeDecodedBitStreamParser=dn,r.QRCodeDecoderErrorCorrectionLevel=ur,r.QRCodeDecoderFormatInformation=Dn,r.QRCodeEncoder=cn,r.QRCodeEncoderQRCode=ji,r.QRCodeMaskUtil=_n,r.QRCodeMatrixUtil=tr,r.QRCodeMode=$t,r.QRCodeReader=ia,r.QRCodeVersion=Ft,r.QRCodeWriter=Jn,r.RGBLuminanceSource=Ba,r.RSS14Reader=nr,r.RSSExpandedReader=it,r.ReaderException=Vo,r.ReedSolomonDecoder=kt,r.ReedSolomonEncoder=Ta,r.ReedSolomonException=st,r.Result=oe,r.ResultMetadataType=Fe,r.ResultPoint=At,r.StringUtils=X,r.UnsupportedOperationException=ee,r.VideoInputDevice=ne,r.WhiteRectangleDetector=Ue,r.WriterException=tn,r.ZXingArrays=K,r.ZXingCharset=B,r.ZXingInteger=Q,r.ZXingStandardCharsets=L,r.ZXingStringBuilder=G,r.ZXingStringEncoding=Y,r.ZXingSystem=k,r.createAbstractExpandedDecoder=Et,Object.defineProperty(r,"__esModule",{value:!0})}))})(Ff,Ff.exports)),Ff.exports}var zn=Fee();const kee=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var K4=(function(){function t(e,r,n){if(this.formatMap=new Map([[Wt.QR_CODE,zn.BarcodeFormat.QR_CODE],[Wt.AZTEC,zn.BarcodeFormat.AZTEC],[Wt.CODABAR,zn.BarcodeFormat.CODABAR],[Wt.CODE_39,zn.BarcodeFormat.CODE_39],[Wt.CODE_93,zn.BarcodeFormat.CODE_93],[Wt.CODE_128,zn.BarcodeFormat.CODE_128],[Wt.DATA_MATRIX,zn.BarcodeFormat.DATA_MATRIX],[Wt.MAXICODE,zn.BarcodeFormat.MAXICODE],[Wt.ITF,zn.BarcodeFormat.ITF],[Wt.EAN_13,zn.BarcodeFormat.EAN_13],[Wt.EAN_8,zn.BarcodeFormat.EAN_8],[Wt.PDF_417,zn.BarcodeFormat.PDF_417],[Wt.RSS_14,zn.BarcodeFormat.RSS_14],[Wt.RSS_EXPANDED,zn.BarcodeFormat.RSS_EXPANDED],[Wt.UPC_A,zn.BarcodeFormat.UPC_A],[Wt.UPC_E,zn.BarcodeFormat.UPC_E],[Wt.UPC_EAN_EXTENSION,zn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!kee)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var i=this.createZXingFormats(e),s=new Map;s.set(zn.DecodeHintType.POSSIBLE_FORMATS,i),s.set(zn.DecodeHintType.TRY_HARDER,!1),this.hints=s}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,i){try{n(r.decode(e))}catch(s){i(s)}})},t.prototype.decode=function(e){var r=new zn.MultiFormatReader(this.verbose,this.hints),n=new zn.HTMLCanvasElementLuminanceSource(e),i=new zn.BinaryBitmap(new zn.HybridBinarizer(n)),s=r.decode(i);return{text:s.text,format:ik.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,i){e.set(r,n)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var s=i[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),Dee=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(m){try{d(n.next(m))}catch(C){o(C)}}function h(m){try{d(n.throw(m))}catch(C){o(C)}}function d(m){m.done?s(m.value):i(m.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},Uee=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return h([d,m])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(m){d=[6,m],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},z4=(function(){function t(e,r,n){if(this.formatMap=new Map([[Wt.QR_CODE,"qr_code"],[Wt.AZTEC,"aztec"],[Wt.CODABAR,"codabar"],[Wt.CODE_39,"code_39"],[Wt.CODE_93,"code_93"],[Wt.CODE_128,"code_128"],[Wt.DATA_MATRIX,"data_matrix"],[Wt.ITF,"itf"],[Wt.EAN_13,"ean_13"],[Wt.EAN_8,"ean_8"],[Wt.PDF_417,"pdf417"],[Wt.UPC_A,"upc_a"],[Wt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return Dee(this,void 0,void 0,function(){var r,n;return Uee(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=i.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:ik.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,i=0,s=e;i<s.length;i++){var o=s[i],c=o.boundingBox.width*o.boundingBox.height;c>n&&(n=c,r=o)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var s=i[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,i){e.set(r,n)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),W4=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(m){try{d(n.next(m))}catch(C){o(C)}}function h(m){try{d(n.throw(m))}catch(C){o(C)}}function d(m){m.done?s(m.value):i(m.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},q4=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return h([d,m])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(m){d=[6,m],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Mee=(function(){function t(e,r,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&z4.isSupported()?(this.primaryDecoder=new z4(e,n,i),this.secondaryDecoder=new K4(e,n,i)):this.primaryDecoder=new K4(e,n,i)}return t.prototype.decodeAsync=function(e){return W4(this,void 0,void 0,function(){var r;return q4(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return W4(this,void 0,void 0,function(){var r,n;return q4(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var i=n[r];e+=i}var s=e/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),Gy=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Z1=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(m){try{d(n.next(m))}catch(C){o(C)}}function h(m){try{d(n.throw(m))}catch(C){o(C)}}function d(m){m.done?s(m.value):i(m.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},$1=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return h([d,m])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(m){d=[6,m],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ak=(function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t})(),Oee=(function(t){Gy(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(ak),Lee=(function(t){Gy(e,t);function e(r){return t.call(this,"zoom",r)||this}return e})(Oee),Pee=(function(t){Gy(e,t);function e(r){return t.call(this,"torch",r)||this}return e})(ak),Qee=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new Lee(this.track)},t.prototype.torchFeature=function(){return new Pee(this.track)},t})(),Hee=(function(){function t(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,i),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,i){return Z1(this,void 0,void 0,function(){var s,o;return $1(this,function(c){switch(c.label){case 0:return s=new t(e,r,i),n.aspectRatio?(o={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:c.sent(),c.label=2;case 2:return s.setupSurface(),[2,s]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Z1(this,void 0,void 0,function(){return $1(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var i=e.mediaStream.getVideoTracks(),s=i.length,o=0;e.mediaStream.getVideoTracks().forEach(function(c){e.mediaStream.removeTrack(c),c.stop(),++o,o>=s&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new Qee(this.getFirstTrackOrFail())},t})(),jee=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,n){return Z1(this,void 0,void 0,function(){return $1(this,function(i){return[2,Hee.create(e,this.mediaStream,r,n)]})})},t.create=function(e){return Z1(this,void 0,void 0,function(){var r,n;return $1(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=i.sent(),[2,new t(n)]}})})},t})(),X4=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(m){try{d(n.next(m))}catch(C){o(C)}}function h(m){try{d(n.throw(m))}catch(C){o(C)}}function d(m){m.done?s(m.value):i(m.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},Y4=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return h([d,m])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(m){d=[6,m],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Vee=(function(){function t(){}return t.failIfNotSupported=function(){return X4(this,void 0,void 0,function(){return Y4(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return X4(this,void 0,void 0,function(){return Y4(this,function(r){return[2,jee.create(e)]})})},t})(),Gee=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(m){try{d(n.next(m))}catch(C){o(C)}}function h(m){try{d(n.throw(m))}catch(C){o(C)}}function d(m){m.done?s(m.value):i(m.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},Kee=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return h([d,m])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(m){d=[6,m],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},zee=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Qu.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Qu.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Gee(this,void 0,void 0,function(){var e,r,n,i,s,o,c;return Kee(this,function(h){switch(h.label){case 0:return e=function(d){for(var m=d.getVideoTracks(),C=0,b=m;C<b.length;C++){var I=b[C];I.enabled=!1,I.stop(),d.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=h.sent(),i=[],s=0,o=n;s<o.length;s++)c=o[s],c.kind==="videoinput"&&i.push({id:c.deviceId,label:c.label});return e(r),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(s){for(var o=[],c=0,h=s;c<h.length;c++){var d=h[c];d.kind==="video"&&o.push({id:d.id,label:d.label})}e(o)},i=MediaStreamTrack;i.getSources(n)})},t})(),ti;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(ti||(ti={}));var Wee=(function(){function t(){this.state=ti.NOT_STARTED,this.onGoingTransactionNewState=ti.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===ti.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ti.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===ti.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ti.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ti.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case ti.UNKNOWN:throw"Transition from unknown is not allowed";case ti.NOT_STARTED:this.failIfNewStateIs(e,[ti.PAUSED]);break;case ti.SCANNING:break;case ti.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var n=0,i=r;n<i.length;n++){var s=i[n];if(e===s)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),qee=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===ti.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==ti.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ti.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===ti.PAUSED},t})(),Xee=(function(){function t(){}return t.create=function(){return new qee(new Wee)},t})(),Yee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ma=(function(t){Yee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(See),Jee=(function(){function t(e,r){this.logger=r,this.fps=ma.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ma.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?sk.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!fl(this.qrbox)},t.create=function(e,r){return new t(e,r)},t})(),ok=(function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new Nee(this.verbose),this.qrcode=new Mee(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Xee.create()}return t.prototype.start=function(e,r,n,i){var s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;i?o=i:o=this.verbose?this.logger.log:function(){};var c=Jee.create(r,this.logger);this.clearElement();var h=!1;c.videoConstraints&&(c.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=h,m=document.getElementById(this.elementId);m.clientWidth?m.clientWidth:ma.DEFAULT_WIDTH,m.style.position="relative",this.shouldScan=!0,this.element=m;var C=this,b=this.stateManagerProxy.startTransition(ti.SCANNING);return new Promise(function(I,F){var k=d?c.videoConstraints:C.createVideoConstraints(e);if(!k){b.cancel(),F("videoConstraints should be defined");return}var U={};(!d||c.aspectRatio)&&(U.aspectRatio=c.aspectRatio);var V={onRenderSurfaceReady:function(K,Q){C.setupUi(K,Q,c),C.isScanning=!0,C.foreverScan(c,n,o)}};Vee.failIfNotSupported().then(function(K){K.create(k).then(function(Q){return Q.render(s.element,U,V).then(function(te){C.renderedCamera=te,b.execute(),I(null)}).catch(function(te){b.cancel(),F(te)})}).catch(function(Q){b.cancel(),F(Qu.errorGettingUserMedia(Q))})}).catch(function(K){b.cancel(),F(Qu.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ti.PAUSED),this.showPausedState(),(fl(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(ti.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(ti.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var s=document.getElementById(ma.SHADED_REGION_ELEMENT_ID);s&&e.element.removeChild(s)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),r.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(fl(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,s){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var c=o.width,h=o.height,d=document.getElementById(n.elementId),m=d.clientWidth?d.clientWidth:ma.DEFAULT_WIDTH,C=Math.max(d.clientHeight?d.clientHeight:h,ma.FILE_SCAN_MIN_HEIGHT),b=n.computeCanvasDrawConfig(c,h,m,C);if(r){var I=n.createCanvasElement(m,C,"qr-canvas-visible");I.style.display="inline-block",d.appendChild(I);var F=I.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=m,F.canvas.height=C,F.drawImage(o,0,0,c,h,b.x,b.y,b.width,b.height)}var k=ma.FILE_SCAN_HIDDEN_CANVAS_PADDING,U=Math.max(o.width,b.width),V=Math.max(o.height,b.height),K=U+2*k,Q=V+2*k,te=n.createCanvasElement(K,Q);d.appendChild(te);var re=te.getContext("2d");if(!re)throw"Unable to get 2d context from canvas";re.canvas.width=K,re.canvas.height=Q,re.drawImage(o,0,0,c,h,k,k,U,V);try{n.qrcode.decodeRobustlyAsync(te).then(function(z){i(V4.createFromQrcodeResult(z))}).catch(s)}catch(z){s("QR code parse error, error = ".concat(z))}},o.onerror=s,o.onabort=s,o.onstalled=s,o.onsuspend=s,o.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return zee.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!sk.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[Wt.QR_CODE,Wt.AZTEC,Wt.CODABAR,Wt.CODE_39,Wt.CODE_93,Wt.CODE_128,Wt.DATA_MATRIX,Wt.MAXICODE,Wt.ITF,Wt.EAN_13,Wt.EAN_8,Wt.PDF_417,Wt.RSS_14,Wt.RSS_EXPANDED,Wt.UPC_A,Wt.UPC_E,Wt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,s=e.formatsToSupport;i<s.length;i++){var o=s[i];Bee(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(fl(e))return!0;if(!fl(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(fl(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return fl(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,n){var i=this,s=n.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(e,r,s),c=function(d){if(d<ma.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ma.MIN_QR_BOX_SIZE,"px.")},h=function(d){return d>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=e),d};c(o.width),c(o.height),o.width=h(o.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},t.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var i=fl(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(e,r,i);s.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&s.height<=r,c={x:0,y:0,width:e,height:r},h=o?this.getShadedRegionBounds(e,r,s):c,d=this.createCanvasElement(h.width,h.height),m={willReadFrequently:!0},C=d.getContext("2d",m);C.canvas.width=h.width,C.canvas.height=h.height,this.element.append(d),o&&this.possiblyInsertShadingElement(this.element,e,r,s),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=C,this.canvasElement=d},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Qu.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,V4.createFromQrcodeResult(i)),n.possiblyUpdateShaders(!0),!0}).catch(function(i){n.possiblyUpdateShaders(!1);var s=Qu.codeParseError(i);return r(s,Iee.createFrom(s)),!1})},t.prototype.foreverScan=function(e,r,n){var i=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),o=s.videoWidth/s.clientWidth,c=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*o,d=this.qrRegion.height*c,m=this.qrRegion.x*o,C=this.qrRegion.y*c;this.context.drawImage(s,m,C,h,d,0,0,this.qrRegion.width,this.qrRegion.height);var b=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,r,n)},i.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(I){!I&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(r,n).finally(function(){b()})):b()}).catch(function(I){i.logger.logError("Error happend while scanning context",I),b()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",i={user:!0,environment:!0},s="exact",o=function(F){if(F in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(F,"'")},c=Object.keys(e);if(c.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(c.length," keys");var h=Object.keys(e)[0];if(h!==r&&h!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(h===r){var d=e.facingMode;if(typeof d=="string"){if(o(d))return{facingMode:d}}else if(typeof d=="object")if(s in d){if(o(d["".concat(s)]))return{facingMode:{exact:d["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var m=typeof d;throw"Invalid type of 'facingMode' = ".concat(m)}}else{var C=e.deviceId;if(typeof C=="string")return{deviceId:C};if(typeof C=="object"){if(s in C)return{deviceId:{exact:C["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var b=typeof C;throw"Invalid type of 'deviceId' = ".concat(b)}}}var I=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},t.prototype.computeCanvasDrawConfig=function(e,r,n,i){if(e<=n&&r<=i){var s=(n-e)/2,o=(i-r)/2;return{x:s,y:o,width:e,height:r}}else{var c=e,h=r;return e>n&&(r=n/e*r,e=n),r>i&&(e=i/r*e,r=i),this.logger.log("Image downsampled from "+"".concat(c,"X").concat(h)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?ma.BORDER_SHADER_MATCH_COLOR:ma.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,n){var i=e,s=r,o=document.createElement("canvas");return o.style.width="".concat(i,"px"),o.style.height="".concat(s,"px"),o.style.display="none",o.id=fl(n)?"qr-canvas":n,o},t.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(e,r,n,i){if(!(r-i.width<1||n-i.height<1)){var s=document.createElement("div");s.style.position="absolute";var o=(r-i.width)/2,c=(n-i.height)/2;if(s.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(ma.SHADED_REGION_ELEMENT_ID),r-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var h=5,d=40;this.insertShaderBorders(s,d,h,-h,null,0,!0),this.insertShaderBorders(s,d,h,-h,null,0,!1),this.insertShaderBorders(s,d,h,null,-h,0,!0),this.insertShaderBorders(s,d,h,null,-h,0,!1),this.insertShaderBorders(s,h,d+h,-h,null,-h,!0),this.insertShaderBorders(s,h,d+h,null,-h,-h,!0),this.insertShaderBorders(s,h,d+h,-h,null,-h,!1),this.insertShaderBorders(s,h,d+h,null,-h,-h,!1),this.hasBorderShaders=!0}e.append(s)}},t.prototype.insertShaderBorders=function(e,r,n,i,s,o,c){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=ma.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(r,"px"),h.style.height="".concat(n,"px"),i!==null&&(h.style.top="".concat(i,"px")),s!==null&&(h.style.bottom="".concat(s,"px")),c?h.style.left="".concat(o,"px"):h.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),e.appendChild(h)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),J4;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(J4||(J4={}));const Zee=({currentUser:t,products:e,onAddProduct:r,onUpdateProduct:n,onDeleteProduct:i,onLogout:s,onNavigateToHome:o,onNavigateToCreateInvoice:c,onNavigateToCustomers:h,onNavigateToSettings:d,isSelectionMode:m=!1,onSelectProduct:C,onStartInvoiceWithProduct:b,selectedItems:I=[],settings:F,invoicePriceMode:k="retail",initialSearchTerm:U=""})=>{var yt;const[V,K]=xe.useState(U),[Q,te]=xe.useState(!1),[re,z]=xe.useState(!1),[M,P]=xe.useState(!1),[O,ee]=xe.useState(!1),[Y,X]=xe.useState(!1),[G,Ie]=xe.useState([]),ge=xe.useRef(null),de=xe.useRef(null),[we,Ge]=xe.useState(null),[be,De]=xe.useState([]),ne=xe.useRef(null),q=xe.useRef(null),[ce,oe]=xe.useState(null),[ae,Ee]=xe.useState(null),[Ke,Fe]=xe.useState(null),[He,tt]=xe.useState(null),[Tt,ve]=xe.useState(1),[Oe,st]=xe.useState(""),[Bt,kt]=xe.useState(null),ft=xe.useRef(null),Ot=xe.useRef(!1),jt=xe.useRef(null),mt=xe.useRef(null),At=xe.useRef(null),er=xe.useRef(null);xe.useEffect(()=>{U&&K(U)},[U]);const Nr=xe.useMemo(()=>t.role==="admin"||t.permissions.isManager||t.permissions.viewWholesalePrice,[t]),[Ue,It]=xe.useState({name:"",code:"",price:"",wholesalePrice:"",purchasePrice:"",stock:"",category:"",images:[]});xe.useEffect(()=>()=>{de.current&&de.current.getTracks().forEach(_e=>_e.stop())},[]),xe.useEffect(()=>{let _e=null,Nt=!0;if(Q){const Re=setTimeout(()=>{if(Nt)try{_e=new ok("reader"),At.current=_e,_e.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},Dt=>{Nt&&(K(Dt),te(!1))},()=>{}).catch(()=>{Nt&&te(!1)})}catch{Nt&&te(!1)}},300);return()=>{Nt=!1,clearTimeout(Re),_e!=null&&_e.isScanning&&_e.stop().then(()=>_e==null?void 0:_e.clear()).catch(()=>{})}}},[Q]),xe.useEffect(()=>(we&&q.current&&(ne.current&&ne.current.destroy(),ne.current=new Cropper(q.current,{aspectRatio:1,viewMode:1,dragMode:"move",autoCropArea:.8})),()=>{ne.current&&ne.current.destroy()}),[we]);const Lt=async()=>{X(!0);try{const _e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});de.current=_e,ge.current&&(ge.current.srcObject=_e)}catch{X(!1)}},Zt=()=>{de.current&&de.current.getTracks().forEach(_e=>_e.stop()),X(!1)},cr=()=>{var _e;if(ge.current){const Nt=document.createElement("canvas");Nt.width=ge.current.videoWidth,Nt.height=ge.current.videoHeight,(_e=Nt.getContext("2d"))==null||_e.drawImage(ge.current,0,0),Ie(Re=>[...Re,Nt.toDataURL("image/jpeg",.9)])}};xe.useEffect(()=>{ae&&er.current&&setTimeout(()=>{try{JsBarcode(er.current,ae.code,{format:"CODE128",width:2,height:50,displayValue:!0})}catch{}},50)},[ae]);const hr=_e=>{var Dt;const Nt=(Dt=_e.target.files)==null?void 0:Dt[0];if(!Nt)return;ee(!0);const Re=new FileReader;Re.onload=async rr=>{var et,Rt;try{const Mt=Kw((et=rr.target)==null?void 0:et.result,{type:"array"}),kr=Tee.sheet_to_json(Mt.Sheets[Mt.SheetNames[0]],{defval:""});for(const Tr of kr){const qr=(Rt=Tr[" "]||Tr.||Tr.name)==null?void 0:Rt.toString().trim(),Vr=parseFloat(Tr.||Tr.||Tr.price)||0;qr&&Vr>0&&r({id:`prd-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,name:qr,code:Tr.||`ID-${Math.floor(Math.random()*9e4)}`,price:Vr,wholesalePrice:parseFloat(Tr.)||0,purchasePrice:parseFloat(Tr.)||0,stock:parseInt(Tr.)||0,category:Tr.||""})}}catch{}finally{ee(!1),_e.target.value=""}},Re.readAsArrayBuffer(Nt)},Ht=_e=>{const Nt=_e.target.files;if(Nt&&Nt.length>0){const Re=[];Array.from(Nt).forEach(Dt=>{Re.push(new Promise(rr=>{const et=new FileReader;et.onloadend=()=>rr(et.result),et.readAsDataURL(Dt)}))}),Promise.all(Re).then(Dt=>{Ge(Dt[0]),De(Dt.slice(1))})}_e.target.value=""},mr=xe.useMemo(()=>{const _e=V.toLowerCase().trim();if(!_e)return e;const Nt=_e.split(/\s+/);return e.filter(Re=>{const Dt=Re.name.toLowerCase(),rr=Re.code.toLowerCase(),et=Re.id.toLowerCase();return Nt.every(Rt=>Dt.includes(Rt)||rr.includes(Rt)||et===Rt)}).sort((Re,Dt)=>{const rr=Re.name.toLowerCase(),et=Dt.name.toLowerCase();if(rr===_e)return-1;if(et===_e)return 1;const Rt=rr.startsWith(_e),Mt=et.startsWith(_e);if(Rt&&!Mt)return-1;if(!Rt&&Mt)return 1;let kr=0,Tr=0;return Nt.forEach(qr=>{rr.split(/\s+/).some(Vr=>Vr===qr)?kr+=5:rr.split(/\s+/).some(Vr=>Vr.startsWith(qr))?kr+=2:rr.includes(qr)&&(kr+=1),et.split(/\s+/).some(Vr=>Vr===qr)?Tr+=5:et.split(/\s+/).some(Vr=>Vr.startsWith(qr))?Tr+=2:et.includes(qr)&&(Tr+=1)}),kr!==Tr?Tr-kr:rr.length-et.length})},[V,e]),pt=()=>{He&&(i(He),tt(null),Ee(null))};return u.jsxs("div",{className:"w-full min-h-screen md:h-auto bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative shadow-2xl md:shadow-none font-['Tajawal']",children:[u.jsx("input",{type:"file",ref:jt,onChange:hr,accept:".xlsx, .xls, .csv",className:"hidden"}),u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20 md:sticky md:top-0 md:bg-black/90 md:backdrop-blur-md md:border-b md:border-gray-800",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:m?" ":""}),m&&u.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${k==="wholesale"?"bg-orange-500 animate-pulse":"bg-[#57b385]"}`}),u.jsx("span",{className:"text-[10px] font-black uppercase text-[#57b385]",children:k==="wholesale"?" : ":" :  "})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[m&&u.jsxs("button",{onClick:c,className:"bg-[#57b385] px-4 py-2 rounded-xl text-xs font-black text-white shadow-lg flex items-center gap-2",children:[u.jsx("span",{children:" "}),u.jsx("div",{className:"bg-white/20 px-2 py-0.5 rounded-md",children:I.reduce((_e,Nt)=>_e+Nt.count,0)})]}),!m&&t.permissions.editProducts&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>{var _e;return(_e=jt.current)==null?void 0:_e.click()},className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-[#57b385] active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),u.jsx("polyline",{points:"14.5 2 14.5 8 20 8"}),u.jsx("path",{d:"M8 13h2"}),u.jsx("path",{d:"M8 17h2"}),u.jsx("path",{d:"M14 13h2"}),u.jsx("path",{d:"M14 17h2"})]})}),u.jsx("button",{onClick:()=>{It({name:"",code:"",price:"",wholesalePrice:"",purchasePrice:"",stock:"",category:"",images:[]}),z(!0)},className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-[#57b385] active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})]})]}),u.jsx("div",{className:"px-6 py-4",children:u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"text",placeholder:"    ...",className:"w-full bg-[#111111] border border-gray-800 rounded-2xl py-4 pr-12 pl-14 text-white focus:border-[#57b385] outline-none text-right font-medium",value:V,onChange:_e=>K(_e.target.value)}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-[#57b385] transition-colors",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]})}),u.jsx("button",{onClick:()=>te(!0),className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 text-gray-500 hover:text-[#57b385] transition-colors active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),u.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),u.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),u.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),u.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]})})]})}),u.jsx("div",{className:"flex-1 px-4 md:px-6 overflow-y-auto space-y-4 md:space-y-0 md:grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:gap-4 pb-32 custom-scrollbar",children:mr.length>0?mr.map(_e=>{var Re,Dt;const Nt=((Re=I.find(rr=>rr.id===_e.id))==null?void 0:Re.count)||0;return u.jsxs("div",{onClick:()=>{m&&C?C({id:_e.id,name:_e.name,price:k==="wholesale"?_e.wholesalePrice:_e.price},1):Ee(_e)},onTouchStart:()=>{ft.current=setTimeout(()=>{Ot.current=!0,oe(_e),ve(1),st((k==="wholesale"?_e.wholesalePrice:_e.price).toString()),navigator.vibrate&&navigator.vibrate(50)},500)},onTouchEnd:()=>{clearTimeout(ft.current),setTimeout(()=>Ot.current=!1,10)},className:`bg-[#111111] rounded-[2.5rem] border ${Nt>0?"border-[#57b385]":"border-gray-800/40"} p-5 flex flex-col gap-4 transition-all relative overflow-hidden active:scale-[0.97] cursor-pointer h-full`,children:[Nt>0&&u.jsxs("div",{className:"absolute top-0 right-0 bg-[#57b385] text-white text-[12px] font-black px-4 py-1.5 rounded-bl-3xl",children:[": ",Nt]}),u.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1a1a] rounded-2xl border border-gray-800 flex items-center justify-center text-[#57b385] overflow-hidden",children:(Dt=_e.images)!=null&&Dt[0]?u.jsx("img",{src:_e.images[0],className:"w-full h-full object-cover"}):u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),u.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),u.jsx("path",{d:"M12 22V12"})]})}),u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("h4",{className:"text-xl font-bold text-white mb-1 line-clamp-1",children:_e.name}),u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:_e.code}),u.jsx("span",{className:"text-[10px] bg-[#1a1a1a] px-2 py-0.5 rounded-md text-[#57b385] font-bold border border-[#57b385]/20",children:_e.category})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between bg-black/20 rounded-2xl p-3 border border-gray-800/50 mt-auto",children:[u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold",children:""}),u.jsxs("div",{className:"text-lg font-black",children:[(k==="wholesale"?_e.wholesalePrice:_e.price).toFixed(2)," ."]})]}),u.jsxs("div",{className:"flex flex-col items-end",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold",children:""}),u.jsxs("div",{className:`text-sm font-black ${_e.stock>0?"text-gray-200":"text-red-500"}`,children:[_e.stock," "]})]})]})]},_e.id)}):u.jsx("div",{className:"text-center py-20 text-gray-600 opacity-30 col-span-full font-bold",children:"  "})}),Y&&u.jsxs("div",{className:"fixed inset-0 z-[600] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300",children:[u.jsx("video",{ref:ge,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),u.jsxs("div",{className:"absolute bottom-10 flex gap-10",children:[u.jsx("button",{onClick:Zt,className:"w-14 h-14 bg-white/10 rounded-full flex items-center justify-center text-white",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}),u.jsx("button",{onClick:cr,className:"w-20 h-20 bg-white rounded-full flex items-center justify-center",children:u.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-black"})}),u.jsx("button",{onClick:()=>{G.length>0&&(Ge(G[0]),De(G.slice(1)),Zt())},className:"w-14 h-14 bg-[#57b385] rounded-full flex items-center justify-center text-white shadow-xl",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})})})]})]}),we&&u.jsxs("div",{className:"fixed inset-0 z-[600] bg-black flex flex-col animate-in fade-in duration-300",children:[u.jsx("div",{className:"flex-1 bg-[#111111] flex items-center justify-center",children:u.jsx("img",{ref:q,src:we,className:"max-w-full max-h-full object-contain"})}),u.jsxs("div",{className:"p-6 bg-black border-t border-gray-800 flex gap-4 justify-center",children:[u.jsx("button",{onClick:()=>{if(ne.current){const _e=ne.current.getCroppedCanvas({width:800,height:800}).toDataURL("image/jpeg",.8);It(Nt=>({...Nt,images:[...Nt.images,_e]})),be.length>0?(Ge(be[0]),De(Nt=>Nt.slice(1))):Ge(null)}},className:"flex-1 max-w-xs bg-[#57b385] py-4 rounded-2xl font-black",children:" "}),u.jsx("button",{onClick:()=>Ge(null),className:"flex-1 max-w-xs bg-[#1a1a1a] py-4 rounded-2xl font-bold border border-gray-800",children:""})]})]}),(re||M)&&u.jsx("div",{className:"fixed inset-0 z-[500] bg-black/90 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-2xl bg-[#161616] rounded-[3rem] border border-gray-800 p-8 shadow-2xl space-y-4 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("button",{onClick:()=>{z(!1),P(!1)},className:"p-2 bg-[#1a1a1a] rounded-xl text-gray-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("h2",{className:"text-xl font-black",children:re?" ":" "})]}),u.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-8",children:[u.jsxs("div",{className:"flex flex-col items-center gap-3",children:[u.jsx("div",{className:"flex gap-2 overflow-x-auto w-full pb-3 no-scrollbar",children:Ue.images.map((_e,Nt)=>u.jsxs("div",{className:"relative flex-shrink-0 w-24 h-24 bg-[#1a1a1a] rounded-2xl border border-gray-800 overflow-hidden",children:[u.jsx("img",{src:_e,className:"w-full h-full object-cover"}),u.jsx("button",{onClick:()=>It(Re=>({...Re,images:Re.images.filter((Dt,rr)=>rr!==Nt)})),className:"absolute top-1 right-1 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})})]},Nt))}),u.jsxs("div",{className:"flex gap-2 w-full",children:[u.jsxs("button",{onClick:Lt,className:"flex-1 h-16 bg-[#1a1a1a] rounded-[1.5rem] border border-gray-800 flex flex-col items-center justify-center text-blue-500",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),u.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),u.jsx("span",{className:"text-[10px] font-bold",children:""})]}),u.jsxs("div",{onClick:()=>{var _e;return(_e=mt.current)==null?void 0:_e.click()},className:"flex-[1.5] h-16 bg-[#1a1a1a] rounded-[1.5rem] border-2 border-dashed border-gray-700 cursor-pointer flex flex-col items-center justify-center text-gray-500",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),u.jsx("span",{className:"text-[10px] font-bold",children:" "}),u.jsx("input",{ref:mt,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Ht})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",placeholder:" ",className:"w-full bg-black/60 border border-gray-800 rounded-2xl py-3 px-4 text-white text-right font-bold",value:Ue.name,onChange:_e=>It({...Ue,name:_e.target.value})}),u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsx("input",{type:"number",placeholder:"",className:"bg-black/60 border border-gray-800 rounded-2xl py-3 px-1 text-white text-center font-black text-sm",value:Ue.price,onChange:_e=>It({...Ue,price:_e.target.value})}),u.jsx("input",{type:"number",placeholder:"",className:"bg-black/60 border border-gray-800 rounded-2xl py-3 px-1 text-white text-center font-black text-sm",value:Ue.wholesalePrice,onChange:_e=>It({...Ue,wholesalePrice:_e.target.value})}),u.jsx("input",{type:"number",placeholder:"",className:"bg-black/60 border border-gray-800 rounded-2xl py-3 px-1 text-white text-center font-black text-sm",value:Ue.purchasePrice,onChange:_e=>It({...Ue,purchasePrice:_e.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx("input",{type:"text",placeholder:"",className:"bg-black/60 border border-gray-800 rounded-2xl py-3 px-4 text-white text-center font-mono",value:Ue.code,onChange:_e=>It({...Ue,code:_e.target.value})}),u.jsx("input",{type:"number",placeholder:"",className:"bg-black/60 border border-gray-800 rounded-2xl py-3 px-4 text-white text-center font-black",value:Ue.stock,onChange:_e=>It({...Ue,stock:_e.target.value})})]}),u.jsxs("select",{className:"w-full bg-black/60 border border-gray-800 rounded-2xl py-3 px-4 text-white text-right font-bold appearance-none",value:Ue.category,onChange:_e=>It({...Ue,category:_e.target.value}),children:[u.jsx("option",{value:"",children:""}),u.jsx("option",{value:"",children:""}),u.jsx("option",{value:"",children:""}),u.jsx("option",{value:"",children:""}),u.jsx("option",{value:"",children:""})]})]})]}),u.jsx("button",{onClick:()=>{if(re){if(!Ue.name||!Ue.price)return;r({id:Date.now().toString(),name:Ue.name,code:Ue.code||`PRD-${Math.floor(Math.random()*1e4)}`,price:parseFloat(Ue.price),wholesalePrice:parseFloat(Ue.wholesalePrice||"0"),purchasePrice:parseFloat(Ue.purchasePrice||"0"),stock:parseInt(Ue.stock||"0"),category:Ue.category,image:Ue.images[0],images:Ue.images}),z(!1)}else Ke&&(n({id:Ke,name:Ue.name,code:Ue.code,price:parseFloat(Ue.price),wholesalePrice:parseFloat(Ue.wholesalePrice||"0"),purchasePrice:parseFloat(Ue.purchasePrice||"0"),stock:parseInt(Ue.stock||"0"),category:Ue.category,image:Ue.images[0],images:Ue.images}),P(!1),Fe(null))},className:"w-full bg-[#57b385] py-5 rounded-2xl text-white font-black text-lg shadow-xl mt-4",children:re?"":""})]})}),ae&&u.jsx("div",{className:"fixed inset-0 z-[400] bg-black/90 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-md bg-[#161616] rounded-[3rem] border border-gray-800 p-8 shadow-2xl space-y-6 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("div",{className:"flex gap-2",children:t.permissions.editProducts&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{It({name:ae.name,code:ae.code,price:ae.price.toString(),wholesalePrice:ae.wholesalePrice.toString(),purchasePrice:ae.purchasePrice.toString(),stock:ae.stock.toString(),category:ae.category,images:ae.images||[]}),Fe(ae.id),Ee(null),P(!0)},className:"p-3 bg-orange-500/10 rounded-2xl border border-orange-500/20 text-orange-500 font-bold text-xs",children:""}),u.jsxs("button",{onClick:()=>tt(ae.id),className:"p-3 bg-red-500/10 rounded-2xl border border-red-500/20 text-red-500 font-bold text-xs flex items-center gap-1.5",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),""]})]})}),u.jsx("div",{onClick:()=>{var _e;return kt(((_e=ae.images)==null?void 0:_e[0])||ae.image||null)},className:"w-24 h-24 bg-[#1a1a1a] rounded-[2rem] border border-[#57b385]/30 flex items-center justify-center overflow-hidden",children:(yt=ae.images)!=null&&yt[0]?u.jsx("img",{src:ae.images[0],className:"w-full h-full object-cover"}):u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),u.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),u.jsx("path",{d:"M12 22V12"})]})})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-gray-500 text-[10px] font-bold uppercase tracking-widest",children:" "}),u.jsx("p",{className:"text-2xl font-black text-white leading-tight",children:ae.name})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsxs("div",{className:"bg-black/40 rounded-3xl p-3 border border-gray-800 text-center",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold block",children:""}),u.jsx("div",{className:"text-sm font-black text-[#57b385]",children:ae.price.toFixed(2)})]}),Nr&&u.jsxs("div",{className:"bg-black/40 rounded-3xl p-3 border border-gray-800 text-center",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold block",children:""}),u.jsx("div",{className:"text-sm font-black text-orange-400",children:ae.wholesalePrice.toFixed(2)})]}),t.permissions.viewPurchasePrice&&u.jsxs("div",{className:"bg-black/40 rounded-3xl p-3 border border-gray-800 text-center",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold block",children:""}),u.jsx("div",{className:"text-sm font-black text-red-400",children:ae.purchasePrice.toFixed(2)})]})]}),u.jsxs("div",{className:"bg-black/40 rounded-3xl p-5 border border-gray-800 space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 font-bold text-sm",children:ae.code}),u.jsx("span",{className:"text-[10px] text-gray-600 font-bold",children:" "})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("span",{className:`text-sm font-black ${ae.stock>0?"text-white":"text-red-500"}`,children:[ae.stock," "]}),u.jsx("span",{className:"text-[10px] text-gray-600 font-bold",children:" "})]})]}),u.jsx("div",{className:"bg-white rounded-3xl p-3 flex flex-col items-center justify-center",children:u.jsx("svg",{ref:er,className:"w-full h-auto max-h-20"})})]}),u.jsx("button",{onClick:()=>Ee(null),className:"w-full bg-[#1a1a1a] border border-gray-800 text-gray-400 py-4 rounded-2xl font-black active:scale-95",children:""})]})}),He&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"               ."})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:pt,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>tt(null),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),ce&&u.jsx("div",{className:"fixed inset-0 z-[300] bg-black/80 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[3rem] border border-gray-800 p-8 shadow-2xl space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-gray-400 text-sm font-bold",children:m?" ":"  "}),u.jsx("p",{className:"text-xl font-black text-white",children:ce.name})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"number",className:"w-full bg-black/60 border border-gray-800 rounded-2xl py-3 px-4 text-white text-center font-black text-lg",value:Oe,onChange:_e=>st(_e.target.value)}),u.jsxs("div",{className:"flex items-center justify-between w-full bg-black/40 rounded-3xl p-4 border border-gray-800",children:[u.jsx("button",{onClick:()=>ve(_e=>_e+1),className:"w-14 h-14 bg-gray-800 rounded-2xl flex items-center justify-center text-white shadow-lg",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("input",{type:"number",className:"w-20 bg-transparent text-center text-4xl font-black text-[#57b385]",value:Tt,onChange:_e=>ve(parseInt(_e.target.value)||1)}),u.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:""})]}),u.jsx("button",{onClick:()=>ve(_e=>Math.max(1,_e-1)),className:"w-14 h-14 bg-gray-800 rounded-2xl flex items-center justify-center text-white shadow-lg",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})]}),u.jsxs("div",{className:"w-full text-center py-2 bg-[#57b385]/5 rounded-2xl border border-[#57b385]/10",children:[u.jsx("p",{className:"text-[10px] text-gray-500 font-bold",children:""}),u.jsxs("p",{className:"text-2xl font-black text-white",children:[((parseFloat(Oe)||0)*Tt).toFixed(2)," ."]})]})]}),u.jsxs("div",{className:"flex gap-4 pt-2",children:[u.jsx("button",{onClick:()=>{m&&C?C({id:ce.id,name:ce.name,price:parseFloat(Oe)||0},Tt):b&&b({id:ce.id,name:ce.name,price:parseFloat(Oe)||0},Tt),oe(null)},className:"flex-1 bg-[#57b385] py-4 rounded-2xl text-white font-black active:scale-95 transition-all",children:m?"":" "}),u.jsx("button",{onClick:()=>oe(null),className:"px-6 bg-[#222222] text-gray-400 py-4 rounded-2xl font-bold border border-gray-700",children:""})]})]})}),Q&&u.jsxs("div",{className:"fixed inset-0 z-[600] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300",children:[u.jsxs("div",{className:"absolute top-10 left-6 right-6 flex justify-between items-center z-10",children:[u.jsx("button",{onClick:()=>te(!1),className:"p-3 bg-white/10 backdrop-blur-md rounded-2xl text-white",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("h2",{className:"text-lg font-bold",children:" "}),u.jsx("div",{className:"w-10"})]}),u.jsxs("div",{className:"relative w-full h-[60%] flex items-center justify-center overflow-hidden",children:[u.jsx("div",{id:"reader",className:"w-full h-full object-cover rounded-3xl overflow-hidden"}),u.jsx("div",{className:"absolute inset-0 pointer-events-none z-20 flex items-center justify-center",children:u.jsx("div",{className:"w-64 h-32 border-2 border-[#57b385] rounded-3xl shadow-[0_0_0_1000px_rgba(0,0,0,0.6)] relative",children:u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-full h-0.5 bg-red-500/50 animate-pulse"})})})})]}),u.jsx("button",{onClick:()=>te(!1),className:"mt-10 px-10 py-4 bg-white/10 rounded-2xl text-white font-bold",children:""})]}),Bt&&u.jsxs("div",{className:"fixed inset-0 z-[700] bg-black flex items-center justify-center p-2 animate-in fade-in duration-300",onClick:()=>kt(null),children:[u.jsx("img",{src:Bt,className:"max-w-full max-h-full object-contain shadow-2xl"}),u.jsx("button",{className:"absolute top-10 right-6 p-4 bg-white/10 rounded-full text-white backdrop-blur-md active:scale-90 transition-all",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})})]}),u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-[#0c0c0c]/90 backdrop-blur-xl border-t border-gray-800 px-4 py-3 flex justify-between items-center z-10",children:[u.jsx(Pg,{onClick:o,icon:u.jsx($ee,{}),label:""}),u.jsx(Pg,{icon:u.jsx(ete,{}),label:"",active:!m}),u.jsx("div",{className:"relative -top-6",children:u.jsx("button",{disabled:!t.permissions.createInvoices,onClick:c,className:`p-4 rounded-2xl border border-gray-700 shadow-2xl transition-all group ${t.permissions.createInvoices?m?"bg-[#57b385]":"bg-[#1a1a1a]":"bg-gray-800 opacity-50"}`,children:u.jsx("svg",{className:"transition-colors",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:m?u.jsx("path",{d:"M20 6L9 17l-5-5"}):u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})})}),u.jsx(Pg,{onClick:h,icon:u.jsx(tte,{}),label:""}),u.jsx(Pg,{onClick:d,icon:u.jsx(rte,{}),label:""})]})]})},Pg=({icon:t,label:e,active:r=!1,onClick:n})=>u.jsxs("button",{onClick:n,className:`flex flex-col items-center gap-1 transition-all ${r?"text-[#57b385]":"text-gray-500 hover:text-gray-300"}`,children:[u.jsx("div",{className:r?"scale-110":"",children:t}),u.jsx("span",{className:"text-[10px] font-bold",children:e})]}),$ee=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),u.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),ete=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),u.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),u.jsx("path",{d:"M12 22V12"})]}),tte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),rte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),nte=({currentUser:t,onNavigateToHome:e,onNavigateToProductSelection:r,items:n,setInvoiceItems:i,products:s,onUpdateQuantity:o,onClearInvoice:c,onAddManualItem:h,onSaveInvoice:d,initialInvoice:m,settings:C,onUpdateItem:b,customerName:I,setCustomerName:F,customerPhone:k,setCustomerPhone:U,priceMode:V,setPriceMode:K})=>{const[Q,te]=xe.useState(new Date().toISOString().split("T")[0]),[re,z]=xe.useState(!1),[M,P]=xe.useState(""),[O,ee]=xe.useState(""),[Y,X]=xe.useState(""),[G,Ie]=xe.useState(""),[ge,de]=xe.useState(null),[we,Ge]=xe.useState({name:"",price:"",count:1}),[be,De]=xe.useState(!1),[ne,q]=xe.useState("direct"),[ce,oe]=xe.useState(""),[ae,Ee]=xe.useState(!1),[Ke,Fe]=xe.useState(!1),He=xe.useRef(null);xe.useEffect(()=>{m?(te(m.date),P(m.id),De(m.type==="paid"),q(m.method),Ee(m.type==="partial"),oe(m.paidAmount>0?m.paidAmount.toString():""),m.priceMode&&K(m.priceMode)):P(`INV-${Math.floor(1e5+Math.random()*9e5)}`)},[m,K]);const tt=mt=>{mt!==V&&(K(mt),i(At=>At.map(er=>{if(er.isManual)return er;const Nr=s.find(It=>It.id===er.id);if(!Nr)return er;const Ue=mt==="wholesale"?Nr.wholesalePrice:Nr.price;return{...er,price:Ue,total:Ue*er.count}})),navigator.vibrate&&navigator.vibrate(40))},Tt=xe.useMemo(()=>n.reduce((mt,At)=>mt+At.total,0),[n]),ve=xe.useMemo(()=>ae?parseFloat(ce)||0:be?Tt:0,[be,ae,ce,Tt]),Oe=xe.useMemo(()=>Math.max(0,Tt-ve),[Tt,ve]),st=mt=>new Intl.NumberFormat("ar-MA",{style:"decimal",minimumFractionDigits:2}).format(mt),Bt=()=>{if(O&&Y){const mt=parseFloat(G)||0;h(O,parseFloat(Y),mt),ee(""),X(""),Ie(""),z(!1)}},kt=mt=>{de(mt),Ge({name:mt.productName,price:mt.price.toString(),count:mt.count})},ft=()=>{ge&&we.name&&we.price&&(b(ge.id,{productName:we.name,price:parseFloat(we.price),count:we.count}),de(null))},Ot=(mt=!1)=>{const At=ve,er=Oe;let Nr="unpaid";er<=0?Nr="paid":At>0&&(Nr="partial");const Ue={id:M,creatorName:m&&m.creatorName||t.name,name:I||" ",phone:k,amount:Tt,paidAmount:At,remainingAmount:er,date:Q,type:Nr,method:ne,createdAt:m?m.createdAt:Date.now(),items:[...n],payments:m?m.payments:At>0?[{id:`init-${Date.now()}`,amount:At,timestamp:Date.now(),method:ne}]:[],priceMode:V};mt&&vR(Ue,C),d(Ue)},jt=async()=>{const mt=ve,At=Oe;let er="unpaid";At<=0?er="paid":mt>0&&(er="partial");const Nr={id:M,creatorName:m&&m.creatorName||t.name,name:I||" ",phone:k,amount:Tt,paidAmount:mt,remainingAmount:At,date:Q,type:er,method:ne,createdAt:m?m.createdAt:Date.now(),items:[...n],payments:m?m.payments:mt>0?[{id:`init-${Date.now()}`,amount:mt,timestamp:Date.now(),method:ne}]:[],priceMode:V};if(He.current){Fe(!0);try{(await Uo(He.current,{scale:4,backgroundColor:"#ffffff",useCORS:!0,logging:!1,width:450})).toBlob(async It=>{if(!It){Fe(!1),alert("  ");return}try{const Lt=new ClipboardItem({"image/png":It});await navigator.clipboard.write([Lt]);let Zt=k?k.replace(/\D/g,""):"";(Zt.startsWith("06")||Zt.startsWith("07")||Zt.startsWith("05"))&&(Zt="212"+Zt.substring(1)),window.open(Zt?`https://wa.me/${Zt}`:"https://wa.me/","_blank")}catch{alert("   ."),window.open("https://wa.me/","_blank")}finally{Fe(!1)}},"image/png",1)}catch{Fe(!1)}d(Nr)}};return u.jsxs("div",{className:"w-full min-h-screen md:h-auto bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative shadow-2xl md:shadow-none border-gray-800 font-['Tajawal']",children:[u.jsxs("div",{ref:He,style:{position:"fixed",top:0,left:-9999,width:"450px",padding:"30px",backgroundColor:"white",color:"black",fontFamily:"'Tajawal', sans-serif",direction:"rtl",zIndex:-1,border:"1px solid #eee"},children:[u.jsxs("div",{style:{textAlign:"center",borderBottom:"2px solid #000",paddingBottom:"15px",marginBottom:"20px"},children:[C.businessLogo&&u.jsx("img",{src:C.businessLogo,alt:"Logo",style:{maxWidth:"80px",marginBottom:"10px"}}),u.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",margin:"0 0 5px 0"},children:C.businessName}),u.jsx("h1",{style:{fontSize:"26px",fontWeight:"900",margin:"0 0 10px 0"},children:" "}),u.jsxs("p",{style:{fontSize:"14px",color:"#555",margin:0},children:[" : ",M]}),u.jsxs("p",{style:{fontSize:"14px",color:"#555",margin:0},children:[": ",Q]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("p",{style:{fontSize:"16px",margin:"0 0 5px 0",color:"#666"},children:":"}),u.jsx("h2",{style:{fontSize:"22px",fontWeight:"bold",margin:0},children:I||" "}),k&&u.jsx("p",{style:{fontSize:"14px",color:"#888",margin:"5px 0 0 0"},children:k})]}),u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"#f3f4f6"},children:[u.jsx("th",{style:{padding:"10px",borderBottom:"2px solid #000",textAlign:"right",fontSize:"16px"},children:""}),u.jsx("th",{style:{padding:"10px",borderBottom:"2px solid #000",textAlign:"center",fontSize:"16px"},children:""}),u.jsx("th",{style:{padding:"10px",borderBottom:"2px solid #000",textAlign:"left",fontSize:"16px"},children:""})]})}),u.jsx("tbody",{children:n.map((mt,At)=>u.jsxs("tr",{style:{borderBottom:"1px dashed #ccc"},children:[u.jsx("td",{style:{padding:"10px",fontSize:"16px",fontWeight:"bold"},children:mt.productName}),u.jsx("td",{style:{padding:"10px",fontSize:"16px",textAlign:"center"},children:mt.count}),u.jsx("td",{style:{padding:"10px",fontSize:"18px",fontWeight:"900",textAlign:"left"},children:st(mt.total)})]},At))})]}),u.jsxs("div",{style:{borderTop:"2px solid #000",paddingTop:"15px",marginTop:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{fontSize:"18px",fontWeight:"bold"},children:" :"}),u.jsxs("span",{style:{fontSize:"24px",fontWeight:"900"},children:[st(Tt)," ."]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px"},children:[u.jsxs("span",{style:{fontSize:"16px"},children:[" (",ne==="direct"?"":"","):"]}),u.jsxs("span",{style:{fontSize:"16px",fontWeight:"bold",color:"#059669"},children:[st(ve)," ."]})]}),Oe>0&&u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px",backgroundColor:"#fff5f5",padding:"10px",borderRadius:"8px"},children:[u.jsx("span",{style:{fontSize:"18px",fontWeight:"900",color:"#dc2626"},children:" ():"}),u.jsxs("span",{style:{fontSize:"20px",fontWeight:"900",color:"#dc2626",direction:"ltr"},children:[st(Oe)," DH"]})]}),u.jsx("div",{style:{marginTop:"30px",textAlign:"center",fontSize:"12px",color:"#888",borderTop:"1px solid #eee",paddingTop:"10px"},children:u.jsxs("p",{children:["   - ",C.signatureName||"MAMA App"]})})]}),u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20 md:sticky md:top-0 md:bg-black/90 md:backdrop-blur-md md:border-b md:border-gray-800",children:[u.jsx("button",{onClick:e,className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-gray-400 hover:text-white transition-colors active:scale-90",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})}),u.jsx("h1",{className:"text-xl font-bold",children:m?" ":" "}),u.jsx("button",{onClick:c,className:"text-red-500 text-xs font-bold px-2 py-1 hover:bg-red-500/10 rounded-lg transition-all",children:""})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-48 md:pb-32 space-y-6 custom-scrollbar md:grid md:grid-cols-2 md:gap-6 md:space-y-0",children:[u.jsxs("div",{className:"space-y-6 md:h-full md:flex md:flex-col",children:[u.jsxs("div",{className:"bg-[#111111] rounded-3xl border border-gray-800/40 p-1.5 flex gap-1 animate-in fade-in slide-in-from-top-2 duration-400",children:[u.jsxs("button",{onClick:()=>tt("retail"),className:`flex-1 py-3 rounded-2xl text-sm font-black transition-all flex items-center justify-center gap-2 ${V==="retail"?"bg-[#57b385] text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]})," ()"]}),u.jsxs("button",{onClick:()=>tt("wholesale"),className:`flex-1 py-3 rounded-2xl text-sm font-black transition-all flex items-center justify-center gap-2 ${V==="wholesale"?"bg-orange-500 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})," ()"]})]}),u.jsxs("div",{className:"bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("div",{className:"w-8 h-8 bg-[#57b385]/10 rounded-lg flex items-center justify-center border border-[#57b385]/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#57b385",strokeWidth:"2.5",children:[u.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),u.jsx("h2",{className:"text-sm font-bold text-gray-400",children:" "})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",placeholder:" ",className:"w-full bg-black/40 border border-gray-800 rounded-xl py-3 md:py-2.5 px-4 text-sm text-white focus:border-[#57b385] outline-none transition-all text-right font-bold",value:I,onChange:mt=>F(mt.target.value)}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx("input",{type:"tel",placeholder:" ",className:"w-full bg-black/40 border border-gray-800 rounded-xl py-3 md:py-2.5 px-4 text-sm text-white focus:border-[#57b385] outline-none transition-all text-right",value:k,onChange:mt=>U(mt.target.value)}),u.jsx("input",{type:"date",className:"w-full bg-black/40 border border-gray-800 rounded-xl py-3 md:py-2.5 px-4 text-sm text-white focus:border-[#57b385] outline-none transition-all text-right",value:Q,onChange:mt=>te(mt.target.value)})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:r,className:`flex flex-col items-center justify-center gap-2 bg-[#111111] border border-gray-800 rounded-[1.5rem] py-4 md:py-3 hover:border-[#57b385]/30 transition-all active:scale-95 ${V==="wholesale"?"border-orange-500/20":""}`,children:[u.jsx("div",{className:`w-10 h-10 ${V==="wholesale"?"bg-orange-500/10 text-orange-500":"bg-[#57b385]/10 text-[#57b385]"} rounded-full flex items-center justify-center`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]})}),u.jsx("span",{className:"text-xs font-bold text-gray-300",children:" "})]}),u.jsxs("button",{onClick:()=>z(!0),className:"flex flex-col items-center justify-center gap-2 bg-[#111111] border border-gray-800 rounded-[1.5rem] py-4 md:py-3 hover:border-blue-500/30 transition-all active:scale-95",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-full flex items-center justify-center text-blue-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),u.jsx("span",{className:"text-xs font-bold text-gray-300",children:" "})]})]}),n.length>0&&u.jsxs("div",{className:"bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 space-y-4 animate-in slide-in-from-bottom duration-300",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500/10 rounded-lg flex items-center justify-center border border-blue-500/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2.5",children:[u.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"}),u.jsx("line",{x1:"2",y1:"10",x2:"22",y2:"10"})]})}),u.jsx("h2",{className:"text-sm font-bold text-gray-400",children:" "})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold block mr-1",children:" "}),u.jsxs("div",{className:"grid grid-cols-3 gap-2 bg-black/40 p-1.5 rounded-2xl border border-gray-800",children:[u.jsx("button",{onClick:()=>{De(!0),Ee(!1)},className:`py-3 md:py-2 rounded-xl text-[10px] font-bold transition-all ${be&&!ae?"bg-[#57b385] text-white":"text-gray-500"}`,children:""}),u.jsx("button",{onClick:()=>Ee(!0),className:`py-3 md:py-2 rounded-xl text-[10px] font-bold transition-all ${ae?"bg-orange-500 text-white":"text-gray-500"}`,children:""}),u.jsx("button",{onClick:()=>{De(!1),Ee(!1)},className:`py-3 md:py-2 rounded-xl text-[10px] font-bold transition-all ${!be&&!ae?"bg-red-500 text-white":"text-gray-500"}`,children:""})]})]}),ae&&u.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top duration-200",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold block mr-1",children:"   (.)"}),u.jsx("input",{type:"number",className:"w-full bg-black border border-gray-800 rounded-xl py-3 md:py-2 px-4 text-white text-center font-black",value:ce,onChange:mt=>oe(mt.target.value),placeholder:"0.00"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold block mr-1",children:" "}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-black/40 p-1.5 rounded-2xl border border-gray-800",children:[u.jsx("button",{onClick:()=>q("direct"),className:`py-3 md:py-2 rounded-xl text-[10px] font-bold transition-all ${ne==="direct"?"bg-white text-black":"text-gray-500"}`,children:" (Cash)"}),u.jsx("button",{onClick:()=>q("cheque"),className:`py-3 md:py-2 rounded-xl text-[10px] font-bold transition-all ${ne==="cheque"?"bg-blue-600 text-white":"text-gray-500"}`,children:" (Cheque)"})]})]})]})]}),u.jsxs("div",{className:"space-y-4 md:flex md:flex-col md:h-full",children:[u.jsx("div",{className:"flex items-center gap-2 px-1",children:u.jsxs("h2",{className:"text-sm font-bold text-gray-500",children:["  (",n.length,")"]})}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-[#111111] md:bg-transparent rounded-2xl md:rounded-none md:border-none border border-gray-800/40 p-4 md:p-0",children:n.length>0?u.jsx("div",{className:"space-y-3",children:n.map(mt=>u.jsxs("div",{onClick:()=>kt(mt),className:"bg-[#111111] md:bg-[#161616] rounded-2xl border border-gray-800/40 p-4 flex flex-col gap-3 group animate-in slide-in-from-left duration-300 active:scale-[0.98] transition-all cursor-pointer hover:border-gray-700",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsx("button",{onClick:At=>{At.stopPropagation(),o(mt.id,-mt.count)},className:"text-red-500/50 hover:text-red-500 p-1 transition-colors z-10 relative",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})}),u.jsxs("div",{className:"text-right flex-1 pr-3",children:[u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[mt.isManual&&u.jsx("span",{className:"text-[8px] bg-blue-500/20 text-blue-400 px-1.5 py-0.5 rounded border border-blue-500/30",children:""}),u.jsx("h3",{className:"font-bold text-white text-base",children:mt.productName})]}),u.jsxs("p",{className:"text-xs text-gray-500 font-bold",children:[st(mt.price)," "]})]})]}),u.jsxs("div",{className:"flex items-center justify-between bg-black/30 rounded-xl p-2 border border-gray-800/30",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:At=>{At.stopPropagation(),o(mt.id,1)},className:"w-8 h-8 bg-gray-800 rounded-lg flex items-center justify-center text-white active:scale-90 transition-all z-10 relative",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),u.jsx("span",{className:"text-lg font-black min-w-[30px] text-center",children:mt.count}),u.jsx("button",{onClick:At=>{At.stopPropagation(),o(mt.id,-1)},className:"w-8 h-8 bg-gray-800 rounded-lg flex items-center justify-center text-white active:scale-90 transition-all z-10 relative",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})]}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:"text-xs text-gray-500 font-bold ml-1",children:":"}),u.jsxs("span",{className:"text-[#57b385] font-black",children:[st(mt.total)," ."]})]})]})]},mt.id))}):u.jsxs("div",{onClick:r,className:"border-2 border-dashed border-gray-800 rounded-[2rem] py-12 flex flex-col items-center justify-center gap-4 text-gray-600 cursor-pointer hover:border-[#57b385]/30 hover:bg-[#57b385]/5 transition-all h-full",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-800/30 rounded-full flex items-center justify-center",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),u.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]})}),u.jsx("p",{className:"font-bold text-sm",children:"  "})]})})]})]}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-[#0c0c0c]/80 backdrop-blur-xl border-t border-gray-800 p-6 z-30 md:static md:w-full md:max-w-4xl md:mx-auto md:bg-transparent md:border-none",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4 bg-black/60 p-4 rounded-2xl border border-gray-800/50",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"text-xs text-gray-500 font-bold",children:" "}),u.jsxs("h3",{className:"text-2xl font-black text-[#57b385]",children:[st(Tt)," ",u.jsx("span",{className:"text-sm",children:"."})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xs text-gray-500 font-bold",children:""}),u.jsxs("h3",{className:`text-xl font-black ${Oe>0?"text-red-500":"text-gray-500"}`,children:[st(Oe)," ."]})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{onClick:jt,disabled:n.length===0||Ke,className:`flex-1 py-4 md:py-3 rounded-2xl text-white text-lg font-black shadow-xl transition-all active:scale-[0.98] flex items-center justify-center gap-2 ${n.length===0||Ke?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-[#25D366] hover:bg-[#20b858]"}`,children:[Ke?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),""]}),u.jsxs("button",{onClick:()=>Ot(!0),disabled:n.length===0,className:`flex-1 py-4 md:py-3 rounded-2xl text-white text-lg font-black shadow-xl transition-all active:scale-[0.98] flex items-center justify-center gap-2 ${n.length===0?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-[#1a1a1a] border border-gray-700 hover:bg-gray-800"}`,children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),u.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),u.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),""]}),u.jsxs("button",{onClick:()=>Ot(!1),disabled:n.length===0,className:`flex-1 py-4 md:py-3 rounded-2xl text-white text-lg font-black shadow-xl transition-all active:scale-[0.98] flex items-center justify-center gap-2 ${n.length===0?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-[#57b385] hover:brightness-110"}`,children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),u.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),u.jsx("polyline",{points:"7 3 7 8 15 8"})]}),""]})]})]}),re&&u.jsx("div",{className:"fixed inset-0 z-[300] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center text-blue-500 mx-auto border border-blue-500/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),u.jsx("h3",{className:"text-xl font-black text-white",children:"  "}),u.jsx("p",{className:"text-xs text-gray-500",children:"    "})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:"  / "}),u.jsx("input",{type:"text",className:"w-full bg-black border border-gray-800 rounded-2xl py-4 md:py-2.5 px-4 text-white focus:border-blue-500 outline-none transition-all text-right font-bold",value:O,onChange:mt=>ee(mt.target.value),autoFocus:!0})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" (.)"}),u.jsx("input",{type:"number",className:"w-full bg-black border border-gray-800 rounded-2xl py-4 md:py-2.5 px-4 text-white focus:border-blue-500 outline-none transition-all text-center font-black",value:Y,onChange:mt=>X(mt.target.value)})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:""}),u.jsxs("div",{className:"flex items-center bg-black rounded-2xl border border-gray-800 overflow-hidden",children:[u.jsx("button",{onClick:()=>Ie(mt=>(parseFloat(mt)||0)+1+""),className:"w-10 h-[58px] md:h-[46px] flex items-center justify-center text-white bg-gray-900 active:bg-gray-800",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),u.jsx("input",{type:"number",className:"flex-1 bg-transparent text-center font-black text-white h-[58px] md:h-[46px] outline-none",value:G,onChange:mt=>Ie(mt.target.value),placeholder:"0"}),u.jsx("button",{onClick:()=>Ie(mt=>Math.max(0,(parseFloat(mt)||0)-1)+""),className:"w-10 h-[58px] md:h-[46px] flex items-center justify-center text-white bg-gray-900 active:bg-gray-800",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})]})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsx("button",{onClick:Bt,disabled:!O||!Y,className:`w-full py-4 rounded-2xl text-white font-black text-lg shadow-xl active:scale-95 transition-all ${!O||!Y?"bg-gray-800 opacity-50":"bg-blue-600 hover:bg-blue-500"}`,children:" "}),u.jsx("button",{onClick:()=>z(!1),className:"w-full bg-[#1a1a1a] text-gray-400 py-3 rounded-2xl font-bold border border-gray-800 active:scale-95 transition-all",children:""})]})]})}),ge&&u.jsx("div",{className:"fixed inset-0 z-[300] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("div",{className:"w-16 h-16 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mx-auto border border-orange-500/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M12 20h9"}),u.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]})}),u.jsx("h3",{className:"text-xl font-black text-white",children:" "}),u.jsx("p",{className:"text-xs text-gray-500",children:"     "})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" "}),u.jsx("input",{type:"text",className:"w-full bg-black border border-gray-800 rounded-2xl py-4 md:py-2.5 px-4 text-white focus:border-orange-500 outline-none transition-all text-right font-bold",value:we.name,onChange:mt=>Ge({...we,name:mt.target.value}),autoFocus:!0})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" (.)"}),u.jsx("input",{type:"number",className:"w-full bg-black border border-gray-800 rounded-2xl py-4 md:py-2.5 px-4 text-white focus:border-orange-500 outline-none transition-all text-center font-black",value:we.price,onChange:mt=>Ge({...we,price:mt.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:""}),u.jsxs("div",{className:"flex items-center bg-black rounded-2xl border border-gray-800 overflow-hidden",children:[u.jsx("button",{onClick:()=>Ge(mt=>({...mt,count:Math.max(1,mt.count+1)})),className:"w-10 h-[58px] md:h-[46px] flex items-center justify-center text-white bg-gray-900 active:bg-gray-800",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),u.jsx("input",{type:"number",className:"flex-1 bg-transparent text-center font-black text-white h-[58px] md:h-[46px] outline-none",value:we.count,onChange:mt=>Ge(At=>({...At,count:Math.max(1,parseInt(mt.target.value)||1)}))}),u.jsx("button",{onClick:()=>Ge(mt=>({...mt,count:Math.max(1,mt.count-1)})),className:"w-10 h-[58px] md:h-[46px] flex items-center justify-center text-white bg-gray-900 active:bg-gray-800",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})]})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsx("button",{onClick:ft,disabled:!we.name||!we.price,className:`w-full py-4 rounded-2xl text-white font-black text-lg shadow-xl active:scale-95 transition-all ${!we.name||!we.price?"bg-gray-800 opacity-50":"bg-orange-500 hover:bg-orange-400"}`,children:" "}),u.jsx("button",{onClick:()=>de(null),className:"w-full bg-[#1a1a1a] text-gray-400 py-3 rounded-2xl font-bold border border-gray-800 active:scale-95 transition-all",children:""})]})]})})]})},ite=({currentUser:t,onNavigateToHome:e,settings:r,onUpdateSettings:n,invoices:i,onEditInvoice:s,onNavigateToProducts:o,onNavigateToCustomers:c,onNavigateToCreateInvoice:h,onLogout:d,onNavigateToRecycleBin:m,staffList:C,onAddStaff:b,onUpdateStaff:I,onDeleteStaff:F})=>{var Nr,Ue,It,Lt,Zt,cr,hr,Ht,mr,pt,yt,_e,Nt;const[k,U]=xe.useState(!1),[V,K]=xe.useState(!1),[Q,te]=xe.useState(!1),[re,z]=xe.useState(null),[M,P]=xe.useState(null),[O,ee]=xe.useState(null),[Y,X]=xe.useState(null),[G,Ie]=xe.useState(!1),[ge,de]=xe.useState(""),[we,Ge]=xe.useState(!1),[be,De]=xe.useState({text:"",type:""}),[ne,q]=xe.useState({name:"",phone:"",email:"",password:""}),[ce,oe]=xe.useState({name:"",phone:"",email:"",password:""}),ae=xe.useRef(null),Ee=xe.useRef(null),Ke=xe.useRef(!1),Fe=t.role==="admin"||t.permissions.isManager;xe.useEffect(()=>{let Re=null;if(k){const Dt=setTimeout(()=>{if(document.getElementById("invoice-reader"))try{Re=new ok("invoice-reader"),ae.current=Re,Re.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},rr=>{const et=i.find(Rt=>Rt.id===rr);et&&(U(!1),ee(et))},()=>{}).catch(rr=>{U(!1)})}catch{U(!1)}},300);return()=>{clearTimeout(Dt),Re&&Re.isScanning&&Re.stop().then(()=>Re==null?void 0:Re.clear()).catch(console.error)}}},[k,i]);const He=()=>{const Re="abcdefghijklmnopqrstuvwxyz0123456789";let Dt="";for(let rr=0;rr<8;rr++)Dt+=Re[Math.floor(Math.random()*Re.length)];return Dt},tt=Re=>{var rr;const Dt=(rr=Re.target.files)==null?void 0:rr[0];if(Dt){const et=new FileReader;et.onloadend=()=>n(Rt=>({...Rt,businessLogo:et.result})),et.readAsDataURL(Dt)}},Tt=Re=>{!Fe||Re.status==="pending"||(Ke.current=!1,Ee.current=setTimeout(()=>{Ke.current=!0,P(Re),oe({name:Re.name,phone:Re.phone,email:Re.email||"",password:Re.password}),te(!0),navigator.vibrate&&navigator.vibrate(60)},600))},ve=Re=>{Ee.current&&(clearTimeout(Ee.current),!Ke.current&&Fe&&Re.status==="approved"&&z(Re))},Oe=async()=>{if(!ne.name||!ne.email||!ne.password)return;const Re={id:Date.now().toString(),name:ne.name,phone:ne.phone,email:ne.email,password:ne.password,status:"approved",permissions:{manageDebt:!1,editProducts:!1,createInvoices:!0,viewNotifications:!0,viewAdminInvoices:!1,viewPurchasePrice:!1,viewWholesalePrice:!1,manageSuppliers:!1,manageRequests:!1,manageCheckbook:!1,manageSpecialOrders:!1,viewAllWork:!1,isManager:!1}};await b(Re),q({name:"",phone:"",email:"",password:""}),K(!1)},st=async Re=>{try{await Fu(Jt(Pt,"staff",Re),{status:"approved"}),navigator.vibrate&&navigator.vibrate([50,30,50])}catch(Dt){console.error(Dt)}},Bt=async Re=>{window.confirm("     ")&&await ga(Jt(Pt,"staff",Re))},kt=async()=>{!M||!ce.name||!ce.password||(await I({...M,name:ce.name,phone:ce.phone,email:ce.email,password:ce.password}),te(!1),P(null))},ft=async()=>{if(!ge||ge.length<6){De({text:"     6   ",type:"error"});return}Ge(!0);try{const Re=pc.currentUser;Re&&(await N9(Re,ge),De({text:"    ",type:"success"}),setTimeout(()=>{Ie(!1),de(""),De({text:"",type:""})},2e3))}catch(Re){Re.code==="auth/requires-recent-login"?De({text:"          ",type:"error"}):De({text:"   ",type:"error"})}finally{Ge(!1)}},Ot=async(Re,Dt)=>{const rr=C.find(Rt=>Rt.id===Re);if(!rr)return;let et={...rr.permissions};Dt==="isManager"?!rr.permissions.isManager?et={manageDebt:!0,editProducts:!0,createInvoices:!0,viewNotifications:!0,viewAdminInvoices:!0,viewPurchasePrice:!0,viewWholesalePrice:!0,manageSuppliers:!0,manageRequests:!0,manageCheckbook:!0,manageSpecialOrders:!0,viewAllWork:!0,isManager:!0}:et.isManager=!1:et[Dt]=!et[Dt],await I({...rr,permissions:et})},jt=async()=>{Y&&(await F(Y),X(null),z(null))},mt=Re=>{const Dt=`   MAMA:
: ${Re.email}
  : ${Re.password}

     .`;navigator.clipboard.writeText(Dt),navigator.vibrate&&navigator.vibrate(30),alert("     ")},At=C.filter(Re=>Re.status==="pending"),er=C.filter(Re=>Re.status==="approved"&&Re.id!==t.uid);return u.jsxs("div",{className:"w-full min-h-screen md:h-auto bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative shadow-2xl md:shadow-none font-['Tajawal']",children:[u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20 md:sticky md:top-0 md:bg-black/90 md:backdrop-blur-md md:border-b md:border-gray-800",children:[u.jsx("button",{onClick:e,className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-gray-400 hover:text-white transition-colors active:scale-90",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})}),u.jsx("h1",{className:"text-xl font-bold",children:""}),u.jsx("div",{className:"w-10"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-32 space-y-6 custom-scrollbar pt-2 md:grid md:grid-cols-2 md:gap-6 md:space-y-0 md:auto-rows-min",children:[u.jsx(uf,{title:" ",icon:u.jsx(ste,{}),children:u.jsxs("div",{className:"bg-black/40 p-4 rounded-2xl border border-gray-800 flex items-center justify-between gap-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("h4",{className:"text-sm font-bold text-white",children:t.name}),u.jsx("p",{className:"text-[10px] text-gray-500",children:Fe?" ":" ( )"})]}),Fe?u.jsx("button",{onClick:()=>Ie(!0),className:"px-4 py-2 bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 rounded-xl text-[10px] font-black active:scale-95 transition-all",children:"  "}):u.jsx("div",{className:"text-[9px] text-red-500/80 font-bold bg-red-500/5 px-3 py-2 rounded-xl border border-red-500/10 text-center leading-tight",children:"     "})]})}),Fe&&u.jsxs(u.Fragment,{children:[u.jsx(uf,{title:"  ",icon:u.jsx(ate,{}),children:u.jsxs("div",{className:"space-y-4",children:[At.length>0&&u.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-2 duration-500",children:[u.jsxs("p",{className:"text-[10px] text-orange-500 font-black uppercase tracking-wider flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full animate-ping"}),"   (",At.length,")"]}),At.map(Re=>u.jsxs("div",{className:"bg-orange-500/5 border border-orange-500/20 p-4 rounded-2xl flex flex-col gap-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-xl flex items-center justify-center text-orange-500 font-black",children:Re.name.charAt(0)}),u.jsxs("div",{className:"text-right flex-1",children:[u.jsx("h4",{className:"text-sm font-bold",children:Re.name}),u.jsx("span",{className:"text-[9px] text-gray-500",children:Re.email})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>st(Re.id),className:"flex-1 bg-orange-500 text-white py-2.5 rounded-xl text-[10px] font-black active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>Bt(Re.id),className:"px-4 bg-[#1a1a1a] text-red-500 border border-red-500/20 py-2.5 rounded-xl text-[10px] font-bold active:scale-95 transition-all",children:""})]})]},Re.id))]}),u.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-2 uppercase tracking-wider",children:"  (  )"}),u.jsxs("div",{className:"space-y-3",children:[er.map(Re=>u.jsxs("div",{onTouchStart:()=>Tt(Re),onTouchEnd:()=>ve(Re),onMouseDown:()=>{Fe&&(Ee.current=setTimeout(()=>{Ke.current=!0,P(Re),oe({name:Re.name,phone:Re.phone,email:Re.email||"",password:Re.password}),te(!0)},600))},onMouseUp:()=>{Ee.current&&(clearTimeout(Ee.current),!Ke.current&&Fe&&z(Re)),Ke.current=!1},className:"bg-black/40 p-4 rounded-2xl border border-gray-800 flex items-center justify-between group cursor-pointer active:scale-[0.98] transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-black ${Re.permissions.isManager?"bg-orange-500/20 text-orange-500 border border-orange-500/30":"bg-[#57b385]/10 text-[#57b385]"}`,children:Re.name.charAt(0)}),u.jsxs("div",{className:"text-right",children:[u.jsxs("h4",{className:"text-sm font-bold flex items-center gap-2",children:[Re.name,Re.permissions.isManager&&u.jsx("span",{className:"text-[8px] bg-orange-500 text-white px-1.5 py-0.5 rounded-md",children:""})]}),u.jsx("span",{className:"text-[9px] text-gray-500 font-mono tracking-tighter",children:Re.email})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:Dt=>{Dt.stopPropagation(),mt(Re)},className:"p-2 bg-white/5 rounded-lg text-gray-500 hover:text-indigo-400 transition-colors",title:"  ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),u.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}),u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"text-gray-700 group-hover:text-gray-400 transition-colors",children:u.jsx("path",{d:"m9 18 6-6-6-6"})})]})]},Re.id)),er.length===0&&At.length===0&&u.jsx("div",{className:"text-center py-6 text-gray-600 border border-dashed border-gray-800 rounded-2xl text-xs font-bold",children:"    "})]}),u.jsxs("button",{onClick:()=>K(!0),className:"w-full bg-[#57b385]/10 border border-[#57b385]/20 py-4 md:py-3 rounded-2xl flex items-center justify-center gap-2 text-[#57b385] font-black text-sm active:scale-95 transition-all",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"   "]})]})}),u.jsx(uf,{title:"  ()",icon:u.jsx(ote,{}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(Oa,{label:"  ",value:r.loginEmail,onChange:Re=>n(Dt=>({...Dt,loginEmail:Re}))}),u.jsx(Oa,{label:"   ()",value:r.loginPassword,onChange:Re=>n(Dt=>({...Dt,loginPassword:Re}))}),u.jsx("p",{className:"text-[9px] text-gray-600 px-2 leading-tight",children:"          ."})]})})]}),u.jsx(uf,{title:" ",icon:u.jsx(lte,{}),children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:()=>U(!0),className:"w-full bg-[#1a1a1a] border border-gray-800 hover:border-[#57b385]/50 py-4 md:py-3 rounded-2xl flex items-center justify-center gap-4 transition-all active:scale-95 group",children:[u.jsx("div",{className:"w-10 h-10 bg-[#57b385]/10 rounded-xl flex items-center justify-center text-[#57b385] group-hover:scale-110 transition-transform",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),u.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),u.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),u.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),u.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]})}),u.jsx("span",{className:"text-sm font-bold text-gray-200",children:"  "})]}),Fe&&u.jsxs("button",{onClick:m,className:"w-full bg-[#1a1a1a] border border-gray-800 hover:border-red-500/50 py-4 md:py-3 rounded-2xl flex items-center justify-center gap-4 transition-all active:scale-95 group",children:[u.jsx("div",{className:"w-10 h-10 bg-red-500/10 rounded-xl flex items-center justify-center text-red-500 group-hover:scale-110 transition-transform",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})}),u.jsx("span",{className:"text-sm font-bold text-gray-200",children:" "})]})]})}),Fe&&u.jsx(uf,{title:" ",icon:u.jsx(Ate,{}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col items-center gap-3 py-2",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"w-24 h-24 bg-[#1a1a1a] rounded-3xl border-2 border-dashed border-gray-700 flex items-center justify-center overflow-hidden",children:r.businessLogo?u.jsx("img",{src:r.businessLogo,alt:"Logo",className:"w-full h-full object-contain p-2"}):u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#4b5563",strokeWidth:"2",children:[u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),u.jsx("circle",{cx:"9",cy:"9",r:"2"}),u.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})}),u.jsxs("label",{className:"absolute -bottom-2 -right-2 w-10 h-10 bg-[#57b385] rounded-xl flex items-center justify-center cursor-pointer shadow-lg active:scale-90 transition-all",children:[u.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:tt}),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",children:[u.jsx("path",{d:"M12 20h9"}),u.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]})]})]}),u.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"  "})]}),u.jsx(Oa,{label:"  ",value:r.userName,onChange:Re=>n(Dt=>({...Dt,userName:Re}))}),u.jsx(Oa,{label:" ",value:r.businessName,onChange:Re=>n(Dt=>({...Dt,businessName:Re}))}),u.jsx(Oa,{label:"  ",value:r.specialOrderLabel||" ",onChange:Re=>n(Dt=>({...Dt,specialOrderLabel:Re}))})]})}),u.jsx("div",{className:"pt-4 md:col-span-2",children:u.jsxs("button",{onClick:d,className:"w-full bg-red-500/10 border border-red-500/20 py-4 md:py-3 rounded-2xl flex items-center justify-center gap-3 text-red-500 font-black text-sm active:scale-95 transition-all hover:bg-red-500 hover:text-white group",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"group-hover:stroke-white transition-colors",children:[u.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),u.jsx("polyline",{points:"16 17 21 12 16 7"}),u.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})," "]})})]}),G&&u.jsx("div",{className:"fixed inset-0 z-[550] bg-black/95 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-indigo-500/30 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-4",children:[u.jsx("button",{onClick:()=>Ie(!1),className:"p-2 bg-[#1a1a1a] rounded-xl text-gray-500 active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("h2",{className:"text-xl font-black text-indigo-400",children:"   "})]}),be.text&&u.jsx("div",{className:`p-3 rounded-xl text-center text-xs font-bold border ${be.type==="error"?"bg-red-500/10 text-red-500 border-red-500/20":"bg-green-500/10 text-green-500 border-green-500/20"}`,children:be.text}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(Oa,{label:"  ",type:"password",value:ge,onChange:de}),u.jsx("p",{className:"text-[10px] text-gray-500 text-center px-4 leading-relaxed",children:"          ."})]}),u.jsx("button",{onClick:ft,disabled:we||!ge,className:`w-full py-4 rounded-2xl text-white font-black text-lg shadow-xl active:scale-95 transition-all flex items-center justify-center gap-2 ${we?"bg-gray-800 opacity-50":"bg-indigo-600 shadow-indigo-900/20"}`,children:we?" ...":" "})]})}),V&&u.jsx("div",{className:"fixed inset-0 z-[500] bg-black/95 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800/50 pb-4",children:[u.jsx("button",{onClick:()=>K(!1),className:"p-2 bg-[#1a1a1a] rounded-xl text-gray-500 active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("h2",{className:"text-xl font-black",children:" "})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(Oa,{label:" ",value:ne.name,onChange:Re=>q({...ne,name:Re})}),u.jsx(Oa,{label:" ",value:ne.email,onChange:Re=>q({...ne,email:Re})}),u.jsxs("div",{className:"relative",children:[u.jsx(Oa,{label:" ",value:ne.password,onChange:Re=>q({...ne,password:Re})}),u.jsx("button",{onClick:()=>q({...ne,password:He()}),className:"absolute top-0 left-0 text-[8px] bg-indigo-500 text-white px-2 py-1 rounded font-black active:scale-90 transition-transform",children:" "})]})]}),u.jsx("button",{onClick:Oe,className:"w-full bg-[#57b385] py-4 rounded-2xl text-white font-black text-lg shadow-xl active:scale-95 transition-all",children:" "})]})}),Q&&u.jsx("div",{className:"fixed inset-0 z-[550] bg-black/95 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-orange-500/30 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-4",children:[u.jsx("button",{onClick:()=>te(!1),className:"p-2 bg-[#1a1a1a] rounded-xl text-gray-500 active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("h2",{className:"text-xl font-black text-orange-500",children:"  "})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-center",children:u.jsx("p",{className:"text-[10px] text-red-500 font-black",children:" :     "})}),u.jsx(Oa,{label:" ",value:ce.name,onChange:Re=>oe({...ce,name:Re})}),u.jsx(Oa,{label:" ",value:ce.email,onChange:Re=>oe({...ce,email:Re})}),u.jsxs("div",{className:"p-4 bg-orange-500/5 border border-orange-500/10 rounded-3xl space-y-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Oa,{label:"  ",value:ce.password,onChange:Re=>oe({...ce,password:Re})}),u.jsx("button",{onClick:()=>oe({...ce,password:He()}),className:"absolute top-0 left-0 text-[8px] bg-orange-500 text-white px-2 py-1 rounded font-black active:scale-90",children:""})]}),u.jsx("p",{className:"text-[8px] text-gray-500 text-center leading-tight",children:"     .        ."})]})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx("button",{onClick:kt,className:"w-full bg-orange-600 py-4 rounded-2xl text-white font-black text-lg shadow-xl active:scale-95 transition-all shadow-orange-900/20",children:" "}),u.jsxs("button",{onClick:()=>mt({...M,email:ce.email,password:ce.password}),className:"w-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 py-3 rounded-2xl font-bold active:scale-95 flex items-center justify-center gap-2 text-xs",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),u.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),"  "]})]})]})}),re&&u.jsx("div",{className:"fixed inset-0 z-[500] bg-black/95 backdrop-blur-xl flex flex-col items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-md bg-[#161616] rounded-[3rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh] custom-scrollbar",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-4",children:[u.jsx("button",{onClick:()=>z(null),className:"p-2 bg-[#1a1a1a] rounded-xl text-gray-500 active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsxs("h2",{className:"text-xl font-black text-orange-500",children:[" ",re.name]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-orange-500/5 p-5 rounded-[2rem] border border-orange-500/10",children:u.jsx(ha,{label:" ",description:"    ",enabled:((Nr=C.find(Re=>Re.id===re.id))==null?void 0:Nr.permissions.isManager)||!1,onToggle:()=>Ot(re.id,"isManager")})}),u.jsxs("div",{className:"grid grid-cols-1 gap-4 bg-black/40 p-6 rounded-[2.5rem] border border-gray-800",children:[u.jsx("h3",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2 px-2",children:"  "}),u.jsx(ha,{label:" ",description:"   ",enabled:((Ue=C.find(Re=>Re.id===re.id))==null?void 0:Ue.permissions.viewNotifications)||!1,onToggle:()=>Ot(re.id,"viewNotifications")}),u.jsx(ha,{label:"  ",description:"    ",enabled:((It=C.find(Re=>Re.id===re.id))==null?void 0:It.permissions.viewAllWork)||!1,onToggle:()=>Ot(re.id,"viewAllWork")}),u.jsx(ha,{label:"  ",description:"   ",enabled:((Lt=C.find(Re=>Re.id===re.id))==null?void 0:Lt.permissions.viewAdminInvoices)||!1,onToggle:()=>Ot(re.id,"viewAdminInvoices")}),u.jsx(ha,{label:"  ",description:"   ",enabled:((Zt=C.find(Re=>Re.id===re.id))==null?void 0:Zt.permissions.viewPurchasePrice)||!1,onToggle:()=>Ot(re.id,"viewPurchasePrice")}),u.jsx(ha,{label:"  ",description:"    ",enabled:((cr=C.find(Re=>Re.id===re.id))==null?void 0:cr.permissions.viewWholesalePrice)||!1,onToggle:()=>Ot(re.id,"viewWholesalePrice")})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4 bg-black/40 p-6 rounded-[2.5rem] border border-gray-800",children:[u.jsx("h3",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2 px-2",children:"  "}),u.jsx(ha,{label:" ",description:"    ",enabled:((hr=C.find(Re=>Re.id===re.id))==null?void 0:hr.permissions.createInvoices)||!1,onToggle:()=>Ot(re.id,"createInvoices")}),u.jsx(ha,{label:" ",description:"    ",enabled:((Ht=C.find(Re=>Re.id===re.id))==null?void 0:Ht.permissions.manageDebt)||!1,onToggle:()=>Ot(re.id,"manageDebt")}),u.jsx(ha,{label:" ",description:"   ",enabled:((mr=C.find(Re=>Re.id===re.id))==null?void 0:mr.permissions.editProducts)||!1,onToggle:()=>Ot(re.id,"editProducts")}),u.jsx(ha,{label:"  ",description:"    ",enabled:((pt=C.find(Re=>Re.id===re.id))==null?void 0:pt.permissions.manageSuppliers)||!1,onToggle:()=>Ot(re.id,"manageSuppliers")}),u.jsx(ha,{label:" ",description:"     ",enabled:((yt=C.find(Re=>Re.id===re.id))==null?void 0:yt.permissions.manageRequests)||!1,onToggle:()=>Ot(re.id,"manageRequests")}),u.jsx(ha,{label:"  ",description:"   ",enabled:((_e=C.find(Re=>Re.id===re.id))==null?void 0:_e.permissions.manageCheckbook)||!1,onToggle:()=>Ot(re.id,"manageCheckbook")}),u.jsx(ha,{label:"  ",description:"   ",enabled:((Nt=C.find(Re=>Re.id===re.id))==null?void 0:Nt.permissions.manageSpecialOrders)||!1,onToggle:()=>Ot(re.id,"manageSpecialOrders")})]})]}),u.jsxs("div",{className:"flex flex-col gap-3 pt-4 border-t border-gray-800",children:[u.jsx("button",{onClick:()=>z(null),className:"w-full bg-[#57b385] py-4 rounded-2xl text-white font-black active:scale-95 transition-all shadow-xl shadow-green-900/20",children:"  "}),u.jsx("button",{onClick:()=>X(re.id),className:"w-full bg-red-500/10 text-red-500 border border-red-500/20 py-4 rounded-2xl font-bold active:scale-95 transition-all hover:bg-red-500 hover:text-white",children:"   "})]})]})}),Y&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),u.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"                ."})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:jt,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>X(null),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),k&&u.jsxs("div",{className:"fixed inset-0 z-[600] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300",children:[u.jsx("div",{id:"invoice-reader",className:"w-full h-full object-cover"}),u.jsx("button",{onClick:()=>U(!1),className:"absolute bottom-10 px-10 py-4 bg-white/10 rounded-2xl text-white font-bold",children:""})]}),O&&u.jsx("div",{className:"fixed inset-0 z-[700] bg-black/90 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-sm bg-[#161616] rounded-[3rem] border border-gray-800 p-8 shadow-2xl space-y-6 text-center animate-in zoom-in duration-300",children:[u.jsx("h3",{className:"text-xl font-black text-white",children:"   "}),u.jsxs("p",{className:"text-gray-500 text-sm",children:[O.name," - ",O.date]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{ee(null),s(O)},className:"flex-1 bg-[#57b385] text-white py-4 rounded-2xl font-black shadow-lg active:scale-95",children:" "}),u.jsx("button",{onClick:()=>ee(null),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95",children:""})]})]})}),u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-[#0c0c0c]/90 backdrop-blur-xl border-t border-gray-800 px-4 py-3 flex justify-between items-center z-30",children:[u.jsx(Qg,{onClick:e,icon:u.jsx(cte,{}),label:""}),u.jsx(Qg,{onClick:o,icon:u.jsx(ute,{}),label:""}),u.jsx("div",{className:"relative -top-6",children:u.jsx("button",{disabled:!t.permissions.createInvoices,onClick:h,className:`p-4 rounded-2xl border border-gray-700 shadow-2xl active:scale-95 transition-all group ${t.permissions.createInvoices?"bg-[#1a1a1a]":"bg-gray-800 opacity-50"}`,children:u.jsxs("svg",{className:"group-hover:stroke-[#57b385] transition-colors",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})}),u.jsx(Qg,{onClick:c,icon:u.jsx(fte,{}),label:""}),u.jsx(Qg,{onClick:()=>{},icon:u.jsx(dte,{}),label:"",active:!0})]})]})},uf=({title:t,icon:e,children:r})=>u.jsxs("div",{className:"bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-[#1a1a1a] rounded-xl border border-gray-800 flex items-center justify-center text-gray-400",children:e}),u.jsx("h3",{className:"text-lg font-bold text-gray-200",children:t})]}),r]}),Oa=({label:t,value:e,onChange:r,type:n="text"})=>u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2 uppercase tracking-wider",children:t}),u.jsx("input",{type:n,className:"w-full bg-black/40 border border-gray-800 rounded-2xl py-3 px-4 text-white focus:border-[#57b385] outline-none transition-all text-right font-bold text-sm",value:e,onChange:i=>r(i.target.value)})]}),ha=({label:t,description:e,enabled:r,onToggle:n})=>u.jsxs("div",{className:"flex items-center justify-between py-2.5 px-2 hover:bg-white/5 rounded-2xl transition-colors",children:[u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("h4",{className:"text-sm font-bold text-white mb-0.5",children:t}),u.jsx("p",{className:"text-[10px] text-gray-500 leading-tight",children:e})]}),u.jsx("button",{onClick:n,className:`w-12 h-7 rounded-full p-1 transition-all duration-300 ml-4 ${r?"bg-[#57b385]":"bg-gray-800"}`,children:u.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transition-all duration-300 ${r?"translate-x-0":"-translate-x-5"}`})})]}),Qg=({icon:t,label:e,active:r=!1,onClick:n})=>u.jsxs("button",{onClick:n,className:`flex flex-col items-center gap-1 transition-all ${r?"text-[#57b385]":"text-gray-500 hover:text-gray-300"}`,children:[u.jsx("div",{className:r?"scale-110":"",children:t}),u.jsx("span",{className:"text-[10px] font-bold",children:e})]}),ste=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),ate=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),ote=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),lte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Ate=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),u.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),u.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),cte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),u.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),ute=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),u.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),u.jsx("path",{d:"M12 22V12"})]}),fte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),dte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),hte=({currentUser:t,onNavigateToHome:e,onNavigateToProducts:r,onNavigateToSettings:n,onNavigateToCreateInvoice:i,invoices:s,generalPayments:o,onAddGeneralPayment:c,onDeleteGeneralPayment:h,onDeleteCustomer:d,onProcessPayment:m,onEditInvoice:C,onNewInvoiceForCustomer:b,settings:I})=>{const[F,k]=xe.useState(""),[U,V]=xe.useState(null),[K,Q]=xe.useState(null),[te,re]=xe.useState("full"),[z,M]=xe.useState(""),[P,O]=xe.useState("direct"),[ee,Y]=xe.useState(""),[X,G]=xe.useState("direct"),[Ie,ge]=xe.useState(null),[de,we]=xe.useState(!1),[Ge,be]=xe.useState(!1),De=xe.useRef(null),[ne,q]=xe.useState(!1),ce=xe.useRef(null),oe=xe.useMemo(()=>{const Oe=new Map;return s.forEach(st=>{const Bt=Oe.get(st.name)||{name:st.name,phone:st.phone,totalPurchased:0,totalPaid:0,totalDebt:0,lastInvoiceDate:st.date,lastInvoiceTimestamp:st.createdAt,invoiceCount:0,invoices:[],generalPayments:[]};Bt.totalPurchased+=st.amount,Bt.totalPaid+=st.paidAmount,Bt.totalDebt+=st.remainingAmount,Bt.invoiceCount+=1,Bt.invoices.push(st),st.createdAt>=Bt.lastInvoiceTimestamp&&(Bt.lastInvoiceDate=st.date,Bt.lastInvoiceTimestamp=st.createdAt,st.phone&&(Bt.phone=st.phone)),Oe.set(st.name,Bt)}),o.forEach(st=>{const Bt=Oe.get(st.customerName);if(Bt)Bt.totalDebt-=st.amount,Bt.totalPaid+=st.amount,Bt.generalPayments||(Bt.generalPayments=[]),Bt.generalPayments.push(st);else{const kt={name:st.customerName,totalPurchased:0,totalPaid:st.amount,totalDebt:-st.amount,lastInvoiceDate:st.date,lastInvoiceTimestamp:st.timestamp,invoiceCount:0,invoices:[],generalPayments:[st]};Oe.set(st.customerName,kt)}}),Array.from(Oe.values()).filter(st=>st.name.includes(F)).sort((st,Bt)=>Bt.lastInvoiceTimestamp-st.lastInvoiceTimestamp)},[s,o,F]),ae=xe.useMemo(()=>U&&oe.find(Oe=>Oe.name===U)||null,[oe,U]);xe.useEffect(()=>{U&&window.scrollTo({top:0,behavior:"smooth"})},[U]);const Ee=Oe=>new Intl.NumberFormat("ar-MA",{style:"decimal",minimumFractionDigits:2}).format(Oe),Ke=()=>{if(!K)return;const Oe=te==="full"?K.remainingAmount:parseFloat(z)||0;Oe>0&&(m(K.id,Oe,P),Q(null),M(""),re("full"))},Fe=()=>{const Oe=parseFloat(ee);if(!Oe||Oe<=0||!ae)return;const st={id:`gen-pay-${Date.now()}`,customerName:ae.name,amount:Oe,date:new Date().toISOString().split("T")[0],timestamp:Date.now(),method:X};c(st),Y(""),new Audio("https://www.soundjay.com/button/beep-07.mp3").play().catch(()=>{})},He=()=>{Ie&&(h(Ie),ge(null))},tt=()=>{U&&d&&(d(U),V(null),we(!1))},Tt=async()=>{if(!(!ae||!De.current)){be(!0);try{(await Uo(De.current,{scale:4,backgroundColor:"#ffffff",useCORS:!0,logging:!1})).toBlob(async st=>{if(!st){be(!1),alert("  ");return}try{const Bt=new ClipboardItem({"image/png":st});await navigator.clipboard.write([Bt]);let kt=ae.phone?ae.phone.replace(/\D/g,""):"";(kt.startsWith("06")||kt.startsWith("07")||kt.startsWith("05"))&&(kt="212"+kt.substring(1)),window.open(kt?`https://wa.me/${kt}`:"https://wa.me/","_blank")}catch{alert("   ."),window.open("https://wa.me/","_blank")}finally{be(!1)}},"image/png",1)}catch{be(!1)}}},ve=async()=>{if(!(!ae||!ce.current)){q(!0);try{(await Uo(ce.current,{scale:4,backgroundColor:"#ffffff",useCORS:!0,logging:!1})).toBlob(async st=>{if(!st){q(!1),alert("  ");return}try{const Bt=new ClipboardItem({"image/png":st});await navigator.clipboard.write([Bt]);let kt=ae.phone?ae.phone.replace(/\D/g,""):"";(kt.startsWith("06")||kt.startsWith("07")||kt.startsWith("05"))&&(kt="212"+kt.substring(1)),window.open(kt?`https://wa.me/${kt}`:"https://wa.me/","_blank")}catch{alert("   ."),window.open("https://wa.me/","_blank")}finally{q(!1)}},"image/png",1)}catch{q(!1)}}};return u.jsxs("div",{className:"w-full min-h-screen md:h-auto bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative shadow-2xl md:rounded-[3rem] border border-gray-800 font-['Tajawal']",children:[ae&&u.jsxs("div",{ref:De,style:{position:"fixed",top:0,left:-9999,width:"400px",padding:"30px",backgroundColor:"white",color:"black",fontFamily:"'Tajawal', sans-serif",direction:"rtl",zIndex:-1,borderRadius:"12px",border:"1px solid #eee"},children:[u.jsxs("div",{style:{textAlign:"center",borderBottom:"2px solid #000",paddingBottom:"15px",marginBottom:"20px"},children:[u.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",margin:"0 0 5px 0"},children:I.businessName}),u.jsx("h1",{style:{fontSize:"24px",fontWeight:"900",margin:"0 0 5px 0"},children:" "}),u.jsxs("p",{style:{fontSize:"14px",color:"#555",margin:0},children:[": ",new Date().toLocaleDateString("ar-MA")]})]}),u.jsxs("div",{style:{marginBottom:"25px"},children:[u.jsx("p",{style:{fontSize:"16px",margin:"0 0 5px 0",color:"#666"},children:"():"}),u.jsx("h2",{style:{fontSize:"22px",fontWeight:"bold",margin:0},children:ae.name}),ae.phone&&u.jsx("p",{style:{fontSize:"14px",color:"#888",margin:"5px 0 0 0"},children:ae.phone})]}),u.jsxs("div",{style:{backgroundColor:"#fff0f0",border:"2px solid #ffcccc",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[u.jsx("p",{style:{fontSize:"16px",fontWeight:"bold",margin:"0 0 10px 0",color:"#cc0000"},children:"  ( )"}),u.jsxs("div",{style:{fontSize:"32px",fontWeight:"900",color:"#cc0000",direction:"ltr"},children:[Ee(ae.totalDebt)," DH"]})]}),u.jsx("div",{style:{marginTop:"30px",textAlign:"center",fontSize:"12px",color:"#888",borderTop:"1px solid #eee",paddingTop:"10px"},children:u.jsxs("p",{children:["   - ",I.signatureName||"MAMA App"]})})]}),ae&&u.jsxs("div",{ref:ce,style:{position:"fixed",top:0,left:-9999,width:"450px",padding:"30px",backgroundColor:"white",color:"black",fontFamily:"'Tajawal', sans-serif",direction:"rtl",zIndex:-1,border:"1px solid #eee"},children:[u.jsxs("div",{style:{textAlign:"center",borderBottom:"2px solid #000",paddingBottom:"15px",marginBottom:"20px"},children:[u.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",margin:"0 0 5px 0"},children:I.businessName}),u.jsx("h1",{style:{fontSize:"26px",fontWeight:"900",margin:"0 0 10px 0"},children:" "}),u.jsxs("p",{style:{fontSize:"14px",color:"#555",margin:0},children:[": ",ae.name]}),u.jsxs("p",{style:{fontSize:"14px",color:"#555",margin:0},children:[" : ",new Date().toLocaleDateString("ar-MA")]})]}),u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"#f3f4f6"},children:[u.jsx("th",{style:{padding:"10px",borderBottom:"2px solid #000",textAlign:"right",fontSize:"16px"},children:""}),u.jsx("th",{style:{padding:"10px",borderBottom:"2px solid #000",textAlign:"left",fontSize:"16px"},children:" "})]})}),u.jsx("tbody",{children:ae.invoices.sort((Oe,st)=>Oe.createdAt-st.createdAt).map((Oe,st)=>u.jsxs("tr",{style:{borderBottom:"1px dashed #ccc"},children:[u.jsx("td",{style:{padding:"10px",fontSize:"16px",fontWeight:"bold"},children:Oe.date}),u.jsx("td",{style:{padding:"10px",fontSize:"18px",fontWeight:"900",textAlign:"left"},children:Ee(Oe.amount)})]},st))})]}),u.jsxs("div",{style:{borderTop:"2px solid #000",paddingTop:"15px",marginTop:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{fontSize:"18px",fontWeight:"bold"},children:" :"}),u.jsxs("span",{style:{fontSize:"24px",fontWeight:"900"},children:[Ee(ae.totalPurchased)," ."]})]}),ae.generalPayments&&ae.generalPayments.length>0&&u.jsxs("div",{style:{marginTop:"20px"},children:[u.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",borderBottom:"2px solid #ddd",paddingBottom:"5px",marginBottom:"10px"},children:"  "}),u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"10px"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"#e6fffa"},children:[u.jsx("th",{style:{padding:"8px",textAlign:"right",fontSize:"14px",borderBottom:"1px solid #ddd"},children:""}),u.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"14px",borderBottom:"1px solid #ddd"},children:" "}),u.jsx("th",{style:{padding:"8px",textAlign:"left",fontSize:"14px",borderBottom:"1px solid #ddd"},children:""})]})}),u.jsx("tbody",{children:ae.generalPayments.sort((Oe,st)=>Oe.timestamp-st.timestamp).map((Oe,st)=>u.jsxs("tr",{style:{borderBottom:"1px dashed #eee"},children:[u.jsx("td",{style:{padding:"8px",fontSize:"14px"},children:new Date(Oe.date).toLocaleDateString("ar-MA")}),u.jsx("td",{style:{padding:"8px",fontSize:"14px",textAlign:"center"},children:Oe.method==="direct"?"":""}),u.jsx("td",{style:{padding:"8px",fontSize:"14px",fontWeight:"bold",textAlign:"left",color:"#059669"},children:Ee(Oe.amount)})]},st))})]})]}),u.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"15px",borderRadius:"8px",marginTop:"20px",border:"1px solid #eee"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[u.jsx("span",{style:{fontWeight:"bold"},children:" :"}),u.jsxs("span",{style:{fontWeight:"bold",color:"#059669"},children:[Ee(ae.totalPaid)," ."]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"20px",marginTop:"10px",borderTop:"1px solid #ccc",paddingTop:"10px"},children:[u.jsx("span",{style:{fontWeight:"900",color:"#dc2626"},children:"  ( ):"}),u.jsxs("span",{style:{fontWeight:"900",color:"#dc2626",direction:"ltr"},children:[Ee(ae.totalDebt)," DH"]})]})]}),u.jsx("div",{style:{marginTop:"30px",textAlign:"center",fontSize:"12px",color:"#888"},children:u.jsx("p",{children:I.signatureName||"MAMA App"})})]}),u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:" "}),u.jsx("span",{className:"text-[10px] text-[#57b385] font-bold",children:"   "})]}),u.jsx("div",{className:"w-10 h-10 bg-[#1a1a1a] rounded-xl border border-gray-800 flex items-center justify-center text-[#57b385]",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})})]}),u.jsx("div",{className:"px-6 py-4",children:u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"text",placeholder:"   ...",className:"w-full bg-[#111111] border border-gray-800 rounded-2xl py-4 pr-12 pl-4 text-white focus:border-[#57b385] outline-none transition-all text-right placeholder:text-gray-600 font-medium",value:F,onChange:Oe=>k(Oe.target.value)}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-[#57b385] transition-colors",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]})})]})}),u.jsx("div",{className:"flex-1 px-4 overflow-y-auto space-y-4 pb-32 custom-scrollbar",children:oe.length>0?oe.map(Oe=>{const st=Oe.totalPurchased>0?Math.max(0,Oe.totalDebt)/Oe.totalPurchased*100:0;return u.jsxs("div",{onClick:()=>V(Oe.name),className:"bg-[#111111] rounded-[2.5rem] border border-gray-800/40 p-5 flex flex-col gap-4 group transition-all relative overflow-hidden active:scale-[0.98] cursor-pointer",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-14 h-14 min-w-[56px] bg-[#1a1a1a] rounded-2xl border border-gray-800 flex items-center justify-center text-gray-500 group-hover:text-[#57b385] transition-all",children:u.jsx("span",{className:"text-xl font-black",children:Oe.name.charAt(0)})}),u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("h4",{className:"text-xl font-black text-white leading-none mb-1",children:Oe.name}),u.jsxs("p",{className:"text-[10px] text-gray-500 font-bold",children:[" : ",Oe.lastInvoiceDate]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-black/20 rounded-2xl p-3 border border-gray-800/50",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold block mb-1",children:" "}),u.jsxs("div",{className:"text-sm font-black text-white",children:[Ee(Oe.totalPurchased)," ."]})]}),u.jsxs("div",{className:"bg-black/20 rounded-2xl p-3 border border-gray-800/50",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold block mb-1",children:" "}),u.jsxs("div",{className:`text-sm font-black ${Oe.totalDebt>0?"text-red-500":"text-[#57b385]"}`,children:[Ee(Oe.totalDebt)," ."]})]})]}),Oe.totalPurchased>0&&u.jsx("div",{className:"w-full bg-gray-800 h-1.5 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all duration-1000 ${Oe.totalDebt>0?"bg-red-500":"bg-[#57b385]"}`,style:{width:`${Math.max(2,st)}%`}})})]},Oe.name)}):u.jsx("div",{className:"text-center py-20 text-gray-600 font-bold",children:"    "})}),ae&&u.jsxs("div",{className:"fixed inset-0 z-[150] bg-[#0c0c0c] flex flex-col animate-in slide-in-from-bottom duration-400",children:[u.jsxs("div",{className:"px-6 pt-10 pb-6 flex justify-between items-center border-b border-gray-800/50 bg-[#0c0c0c]",children:[u.jsx("button",{onClick:()=>{V(null),Y("")},className:"p-3 bg-[#1a1a1a] rounded-2xl border border-gray-800 text-gray-400 hover:text-white active:scale-90 transition-all",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})}),u.jsx("h2",{className:"text-xl font-bold",children:"  "}),u.jsxs("div",{className:"flex gap-2",children:[b&&t.permissions.createInvoices&&u.jsx("button",{onClick:()=>b(ae.name,ae.phone||""),className:"p-3 bg-[#57b385]/10 rounded-2xl border border-[#57b385]/20 text-[#57b385] hover:bg-[#57b385] hover:text-white active:scale-90 transition-all shadow-lg shadow-green-900/20",title:"    ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),t.role==="admin"?u.jsx("button",{onClick:()=>we(!0),className:"p-3 bg-red-500/10 rounded-2xl border border-red-500/20 text-red-500 hover:bg-red-500 hover:text-white active:scale-90 transition-all",title:"   ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}):u.jsx("div",{className:"w-10"})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-8 space-y-6 custom-scrollbar pb-32",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("div",{className:"w-20 h-20 bg-[#1a1a1a] rounded-[2rem] border border-gray-800 mx-auto flex items-center justify-center text-4xl font-black text-[#57b385]",children:ae.name.charAt(0)}),u.jsx("h3",{className:"text-2xl font-black",children:ae.name}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[ae.phone&&u.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1a1a] px-4 py-1.5 rounded-full border border-gray-800 text-[#57b385] font-black text-xs",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),u.jsx("a",{href:`tel:${ae.phone}`,children:ae.phone})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-[10px] bg-[#1a1a1a] px-3 py-1 rounded-full border border-gray-800 text-gray-400 font-bold",children:[ae.invoiceCount," "]}),u.jsxs("div",{className:`flex items-center gap-2 px-1.5 py-1 rounded-full border ${ae.totalDebt>0?"bg-red-500/10 border-red-500/20":"bg-green-500/10 border-green-500/20"}`,children:[u.jsxs("span",{className:`text-[10px] font-bold px-2 ${ae.totalDebt>0?"text-red-500":"text-green-500"}`,children:[" : ",Ee(ae.totalDebt)," ."]}),ae.totalDebt>0&&u.jsx("button",{onClick:Tt,disabled:Ge,className:`w-7 h-7 bg-[#25D366] hover:bg-[#20b858] rounded-full flex items-center justify-center text-white shadow-md active:scale-90 transition-all ${Ge?"opacity-50 cursor-wait":""}`,children:Ge?u.jsx("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})})})]})]})]})]}),ae.totalDebt>0&&t.permissions.manageDebt&&u.jsxs("div",{className:"bg-[#1a1a1a] rounded-3xl border border-gray-800 p-5 space-y-4 shadow-xl",children:[u.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-700/50 pb-2",children:[u.jsx("div",{className:"w-8 h-8 bg-green-500/10 rounded-lg flex items-center justify-center text-green-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("path",{d:"M12 2v20"}),u.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}),u.jsx("h3",{className:"font-bold text-white text-sm",children:"  "})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{type:"number",className:"w-full bg-black border border-gray-700 rounded-xl py-3 pr-4 pl-12 text-white font-black text-center focus:border-green-500 outline-none transition-colors",placeholder:" (.)",value:ee,onChange:Oe=>Y(Oe.target.value)}),u.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-xs font-bold",children:"DH"})]}),u.jsx("button",{onClick:()=>G(Oe=>Oe==="direct"?"cheque":"direct"),className:`w-12 rounded-xl flex items-center justify-center border font-bold text-xs transition-all ${X==="direct"?"bg-white text-black border-white":"bg-blue-600 text-white border-blue-600"}`,children:X==="direct"?"":""})]}),parseFloat(ee)>0&&u.jsxs("div",{className:"text-center text-[10px] text-gray-400",children:["  : ",u.jsxs("span",{className:"text-white font-bold",children:[Ee(Math.max(0,ae.totalDebt-parseFloat(ee)))," ."]})]}),u.jsxs("button",{onClick:Fe,disabled:!ee||parseFloat(ee)<=0,className:`w-full py-3 rounded-xl font-black text-sm shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2 ${ee?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})})," "]})]}),ae.generalPayments&&ae.generalPayments.length>0&&u.jsxs("div",{className:"bg-[#111111] rounded-3xl border border-gray-800 p-5 space-y-4",children:[u.jsxs("h4",{className:"text-sm font-bold text-green-500 border-b border-gray-800/30 pb-3 flex items-center gap-2",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),u.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"  "]}),u.jsx("div",{className:"space-y-3",children:ae.generalPayments.sort((Oe,st)=>st.timestamp-Oe.timestamp).map(Oe=>u.jsxs("div",{className:"bg-green-500/5 p-4 rounded-2xl border border-green-500/10 flex justify-between items-center group",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-white font-black text-sm",children:[Ee(Oe.amount)," ."]}),u.jsxs("div",{className:"text-[10px] text-gray-500 flex gap-2",children:[u.jsx("span",{children:new Date(Oe.date).toLocaleDateString("ar-MA")}),u.jsxs("span",{className:"text-green-600/70 font-bold",children:["(",Oe.method==="direct"?"":"",")"]})]})]}),t.permissions.manageDebt&&u.jsx("button",{onClick:()=>ge(Oe.id),className:"p-2 text-gray-600 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},Oe.id))})]}),u.jsxs("div",{className:"bg-[#111111] rounded-3xl border border-gray-800 p-5 space-y-4",children:[u.jsx("h4",{className:"text-sm font-bold text-gray-500 border-b border-gray-800/30 pb-3",children:"  "}),u.jsx("div",{className:"space-y-3",children:ae.invoices.sort((Oe,st)=>st.createdAt-Oe.createdAt).map(Oe=>u.jsxs("div",{className:"bg-black/40 p-4 rounded-2xl border border-gray-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-black text-white",children:Oe.id}),u.jsx("span",{className:`text-[8px] px-1.5 py-0.5 rounded border font-bold ${Oe.type==="paid"?"bg-green-500/10 text-green-500 border-green-500/20":Oe.type==="partial"?"bg-orange-500/10 text-orange-500 border-orange-500/20":"bg-red-500/10 text-red-500 border-red-500/20"}`,children:Oe.type==="paid"?"":Oe.type==="partial"?" ":""})]}),u.jsx("span",{className:"text-[10px] text-gray-500",children:Oe.date})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[Oe.type!=="paid"&&t.permissions.manageDebt&&u.jsx("button",{onClick:()=>Q(Oe),className:"flex items-center gap-1.5 px-3 h-9 bg-gray-800 hover:bg-gray-700 rounded-xl text-gray-300 shadow-lg active:scale-90 transition-all border border-gray-700",children:u.jsx("span",{className:"text-[10px] font-bold",children:" "})}),u.jsx("button",{disabled:!t.permissions.createInvoices,onClick:()=>C(Oe),className:`w-9 h-9 bg-[#1a1a1a] rounded-xl flex items-center justify-center text-gray-500 hover:text-white border border-gray-800 transition-colors ${t.permissions.createInvoices?"":"opacity-20 cursor-not-allowed"}`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M12 20h9"}),u.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]})})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-2 border-t border-gray-800/50 pt-3",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"text-[8px] text-gray-500 block uppercase",children:""}),u.jsx("span",{className:"text-[10px] font-black text-white",children:Ee(Oe.amount)})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"text-[8px] text-gray-500 block uppercase",children:""}),u.jsx("span",{className:"text-[10px] font-black text-[#57b385]",children:Ee(Oe.paidAmount)})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"text-[8px] text-gray-500 block uppercase",children:""}),u.jsx("span",{className:"text-[10px] font-black text-red-500",children:Ee(Oe.remainingAmount)})]})]}),Oe.payments&&Oe.payments.length>0&&u.jsxs("div",{className:"mt-3 bg-black/20 rounded-xl p-2 space-y-1",children:[u.jsx("span",{className:"text-[8px] text-gray-600 font-bold block mb-1",children:" :"}),Oe.payments.map((st,Bt)=>u.jsxs("div",{className:"flex justify-between items-center text-[8px]",children:[u.jsx("span",{className:"text-gray-400",children:new Date(st.timestamp).toLocaleDateString("ar-MA")}),u.jsxs("span",{className:"text-[#57b385] font-bold",children:["+",Ee(st.amount)," . (",st.method==="direct"?"":"",")"]})]},Bt))]})]},Oe.id))})]})]}),u.jsxs("div",{className:"p-6 bg-[#0c0c0c] border-t border-gray-800 pb-10 relative",children:[u.jsx("button",{onClick:()=>{V(null),Y("")},className:"w-full bg-[#1a1a1a] text-gray-400 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:" "}),u.jsx("div",{className:"absolute bottom-24 right-6 z-50",children:u.jsx("button",{onClick:ve,disabled:ne||ae.invoices.length===0,className:`w-14 h-14 bg-[#25D366] hover:bg-[#20b858] rounded-full flex items-center justify-center text-white shadow-2xl shadow-green-900/40 active:scale-90 transition-all border-4 border-[#0c0c0c] ${ne?"opacity-50 cursor-wait":""}`,children:ne?u.jsx("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})})})})]})]}),de&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),u.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"  "}),u.jsxs("p",{className:"text-sm text-gray-400",children:['      "',U,'"        .']})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:tt,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:"  "}),u.jsx("button",{onClick:()=>we(!1),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),Ie&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"           ."})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:He,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>ge(null),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),K&&u.jsx("div",{className:"fixed inset-0 z-[250] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-16 h-16 bg-[#57b385]/10 rounded-full flex items-center justify-center text-[#57b385] mx-auto border border-[#57b385]/20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("polyline",{points:"16 12 12 8 8 12"}),u.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"8"})]})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"text-xl font-black text-white",children:"  "}),u.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:["  : ",u.jsxs("span",{className:"text-red-500 font-black",children:[Ee(K.remainingAmount)," ."]})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-black/40 p-1 rounded-2xl border border-gray-800",children:[u.jsx("button",{onClick:()=>re("full"),className:`py-2.5 rounded-xl text-xs font-bold transition-all ${te==="full"?"bg-[#57b385] text-white shadow-lg":"text-gray-500"}`,children:"  "}),u.jsx("button",{onClick:()=>re("partial"),className:`py-2.5 rounded-xl text-xs font-bold transition-all ${te==="partial"?"bg-orange-500 text-white shadow-lg":"text-gray-500"}`,children:" "})]}),te==="partial"&&u.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 duration-200",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:"  (.)"}),u.jsx("input",{type:"number",placeholder:"0.00",className:"w-full bg-black border border-gray-800 rounded-xl py-4 px-4 text-white focus:border-[#57b385] outline-none text-center font-black text-lg",value:z,onChange:Oe=>M(Oe.target.value),autoFocus:!0})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" "}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx("button",{onClick:()=>O("direct"),className:`py-2 rounded-xl text-[10px] font-bold border transition-all ${P==="direct"?"bg-white text-black border-white":"bg-transparent text-gray-500 border-gray-800"}`,children:""}),u.jsx("button",{onClick:()=>O("cheque"),className:`py-2 rounded-xl text-[10px] font-bold border transition-all ${P==="cheque"?"bg-blue-600 text-white border-blue-600":"bg-transparent text-gray-500 border-gray-800"}`,children:""})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsx("button",{onClick:Ke,disabled:te==="partial"&&(!z||parseFloat(z)<=0),className:`w-full py-4 rounded-2xl text-white font-black text-lg shadow-xl active:scale-95 transition-all ${te==="partial"&&(!z||parseFloat(z)<=0)?"bg-gray-800 opacity-50":"bg-[#57b385]"}`,children:"  "}),u.jsx("button",{onClick:()=>Q(null),className:"w-full bg-[#1a1a1a] text-gray-400 py-3 rounded-2xl font-bold border border-gray-800 active:scale-95 transition-all",children:""})]})]})}),u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-[#0c0c0c]/90 backdrop-blur-xl border-t border-gray-800 px-4 py-3 flex justify-between items-center z-30",children:[u.jsx(Hg,{onClick:e,icon:u.jsx(gte,{}),label:""}),u.jsx(Hg,{onClick:r,icon:u.jsx(pte,{}),label:""}),u.jsx("div",{className:"relative -top-6",children:u.jsx("button",{disabled:!t.permissions.createInvoices,onClick:i,className:`p-4 rounded-2xl border border-gray-700 shadow-2xl hover:scale-110 active:scale-95 transition-all ${t.permissions.createInvoices?"bg-[#1a1a1a]":"bg-gray-800 opacity-50 cursor-not-allowed"}`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})}),u.jsx(Hg,{icon:u.jsx(mte,{}),label:"",active:!0}),u.jsx(Hg,{onClick:n,icon:u.jsx(xte,{}),label:""})]})]})},Hg=({icon:t,label:e,active:r=!1,onClick:n})=>u.jsxs("button",{onClick:n,className:`flex flex-col items-center gap-1 transition-all ${r?"text-[#57b385]":"text-gray-500 hover:text-gray-300"}`,children:[u.jsx("div",{className:r?"scale-110":"",children:t}),u.jsx("span",{className:"text-[10px] font-bold",children:e})]}),gte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),u.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),pte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),u.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),u.jsx("path",{d:"M12 22V12"})]}),mte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),xte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),wte=({onNavigateToHome:t,notifications:e,onMarkAllAsRead:r,onClearAll:n,onMarkAsRead:i})=>{const[s,o]=xe.useState("all"),c=xe.useMemo(()=>s==="all"?e:e.filter(C=>C.type===s),[e,s]),h=xe.useMemo(()=>({unread:e.filter(C=>!C.isRead).length,debt:e.filter(C=>C.type==="debt").length,stock:e.filter(C=>C.type==="stock").length,sale:e.filter(C=>C.type==="sale").length}),[e]),d=C=>{const b=Date.now()-C,I=Math.floor(b/6e4);if(I<1)return"";if(I<60)return` ${I} `;const F=Math.floor(I/60);return F<24?` ${F} `:new Date(C).toLocaleDateString("ar-MA")},m=C=>{switch(C){case"debt":return{bg:"bg-red-500/10",border:"border-red-500/20",iconColor:"text-red-500",iconBg:"bg-red-500/20",dot:"bg-red-500"};case"stock":return{bg:"bg-orange-500/10",border:"border-orange-500/20",iconColor:"text-orange-500",iconBg:"bg-orange-500/20",dot:"bg-orange-500"};case"sale":return{bg:"bg-[#57b385]/10",border:"border-[#57b385]/20",iconColor:"text-[#57b385]",iconBg:"bg-[#57b385]/20",dot:"bg-[#57b385]"}}};return u.jsxs("div",{className:"w-full min-h-screen md:h-auto bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative shadow-2xl md:shadow-none font-['Tajawal']",children:[u.jsxs("div",{className:"px-6 pt-10 pb-6 flex justify-between items-center bg-[#0c0c0c] border-b border-gray-800/50 md:sticky md:top-0 md:bg-black/90 md:backdrop-blur-md z-20",children:[u.jsx("button",{onClick:t,className:"p-3 bg-[#1a1a1a] rounded-2xl border border-gray-800 text-gray-400 hover:text-white transition-all active:scale-90",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("h1",{className:"text-xl font-black",children:" "}),u.jsxs("span",{className:"text-[10px] text-[#57b385] font-bold",children:[" ",h.unread,"  "]})]}),u.jsx("button",{onClick:n,className:"p-3 bg-red-500/10 rounded-2xl border border-red-500/20 text-red-500 hover:bg-red-500 hover:text-white transition-all active:scale-90",title:" ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})})]}),u.jsxs("div",{className:"px-6 py-4 flex gap-2 overflow-x-auto custom-scrollbar no-scrollbar md:justify-center",children:[u.jsx(jg,{active:s==="all",label:"",count:e.length,onClick:()=>o("all"),color:"gray"}),u.jsx(jg,{active:s==="debt",label:"",count:h.debt,onClick:()=>o("debt"),color:"red"}),u.jsx(jg,{active:s==="stock",label:"",count:h.stock,onClick:()=>o("stock"),color:"orange"}),u.jsx(jg,{active:s==="sale",label:"",count:h.sale,onClick:()=>o("sale"),color:"green"})]}),u.jsx("div",{className:"px-6 pb-4 md:max-w-lg md:mx-auto",children:u.jsxs("button",{onClick:r,className:"w-full py-3 bg-[#1a1a1a] border border-gray-800 rounded-2xl text-xs font-bold text-gray-400 hover:text-white transition-all flex items-center justify-center gap-2 active:scale-[0.98]",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M20 6L9 17l-5-5"})}),"  "]})}),u.jsx("div",{className:"flex-1 overflow-y-auto px-6 space-y-4 pb-32 custom-scrollbar md:grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:gap-4 md:space-y-0",children:c.length>0?c.map(C=>{const b=m(C.type);return u.jsxs("div",{onClick:()=>i(C.id),className:`relative group p-5 rounded-[2rem] border transition-all duration-300 active:scale-[0.98] cursor-pointer h-full ${C.isRead?"bg-[#111111] border-gray-800/40":`${b.bg} ${b.border} shadow-lg shadow-black/20`}`,children:[!C.isRead&&u.jsx("div",{className:`absolute top-5 left-5 w-2 h-2 rounded-full ${b.dot} animate-pulse shadow-lg`}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:`w-12 h-12 min-w-[48px] rounded-2xl flex items-center justify-center ${b.iconBg} ${b.iconColor} shadow-inner`,children:[C.type==="debt"&&u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M12 2v20"}),u.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),C.type==="stock"&&u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),u.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),u.jsx("path",{d:"M12 22V12"})]}),C.type==="sale"&&u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M20 6L9 17l-5-5"})})]}),u.jsxs("div",{className:"flex-1 text-right space-y-1",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:d(C.timestamp)}),u.jsx("h4",{className:`text-base font-black ${C.isRead?"text-gray-200":"text-white"}`,children:C.title})]}),u.jsx("p",{className:`text-xs leading-relaxed ${C.isRead?"text-gray-500":"text-gray-300 font-medium"}`,children:C.message})]})]})]},C.id)}):u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-600 space-y-4 col-span-full",children:[u.jsx("div",{className:"w-20 h-20 bg-[#1a1a1a] rounded-full flex items-center justify-center opacity-20",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),u.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]})}),u.jsx("p",{className:"font-bold text-sm",children:"   "})]})}),u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-[#0c0c0c]/90 backdrop-blur-xl border-t border-gray-800 px-4 py-3 flex justify-between items-center z-10",children:[u.jsx(Vg,{onClick:t,icon:u.jsx(vte,{}),label:""}),u.jsx(Vg,{onClick:()=>{},icon:u.jsx(yte,{}),label:""}),u.jsx("div",{className:"relative -top-6",children:u.jsx("button",{className:"bg-[#1a1a1a] p-4 rounded-2xl border border-gray-700 shadow-2xl transition-all",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})}),u.jsx(Vg,{onClick:()=>{},icon:u.jsx(Cte,{}),label:""}),u.jsx(Vg,{onClick:()=>{},icon:u.jsx(Ete,{}),label:""})]})]})},jg=({active:t,label:e,count:r,onClick:n,color:i})=>{const s={red:t?"bg-red-500 text-white shadow-red-900/20":"text-red-500 bg-red-500/10 border-red-500/20",orange:t?"bg-orange-500 text-white shadow-orange-900/20":"text-orange-500 bg-orange-500/10 border-orange-500/20",green:t?"bg-[#57b385] text-white shadow-green-900/20":"text-[#57b385] bg-[#57b385]/10 border-[#57b385]/20",gray:t?"bg-white text-black shadow-white/10":"text-gray-400 bg-white/5 border-white/10"};return u.jsxs("button",{onClick:n,className:`px-5 py-2.5 rounded-2xl border text-xs font-black transition-all flex items-center gap-2 whitespace-nowrap active:scale-95 ${s[i]}`,children:[e,u.jsx("span",{className:`px-1.5 py-0.5 rounded-lg text-[10px] ${t?"bg-black/20 text-white":"bg-black/40"}`,children:r})]})},Vg=({icon:t,label:e,onClick:r})=>u.jsxs("button",{onClick:r,className:"flex flex-col items-center gap-1 text-gray-500 hover:text-gray-300 transition-all",children:[u.jsx("div",{className:"",children:t}),u.jsx("span",{className:"text-[10px] font-bold",children:e})]}),vte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),u.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),yte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),u.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),u.jsx("path",{d:"M12 22V12"})]}),Cte=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Ete=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),bte=({currentUser:t,onNavigateToHome:e,onAddInvoice:r,onUpdateInvoice:n,onDeleteInvoice:i,onDeleteSupplier:s,onRenameSupplier:o,invoices:c,settings:h})=>{const[d,m]=xe.useState(!1),[C,b]=xe.useState(null),[I,F]=xe.useState(null),[k,U]=xe.useState(""),[V,K]=xe.useState(!1),[Q,te]=xe.useState(!1),[re,z]=xe.useState(!1),[M,P]=xe.useState(""),[O,ee]=xe.useState(!1),Y=xe.useRef(null),X=xe.useRef(null),[G,Ie]=xe.useState(null),[ge,de]=xe.useState([]),[we,Ge]=xe.useState(null),[be,De]=xe.useState([]),ne=xe.useRef(null),q=xe.useRef(null),ce=xe.useRef(null),[oe,ae]=xe.useState(null),[Ee,Ke]=xe.useState(""),[Fe,He]=xe.useState(""),[tt,Tt]=xe.useState(""),[ve,Oe]=xe.useState(""),[st,Bt]=xe.useState(new Date().toISOString().split("T")[0]),[kt,ft]=xe.useState(new Date().toISOString().split("T")[0]),[Ot,jt]=xe.useState(!1),mt=xe.useRef(null),At=xe.useMemo(()=>{const et=new Map;return c.forEach(Rt=>{const Mt=et.get(Rt.supplierName)||{name:Rt.supplierName,totalAmount:0,totalPaid:0,totalRemaining:0,lastInvoiceDate:Rt.date,invoiceCount:0,invoices:[]},kr=Rt.amount-(Rt.paidAmount||0);Mt.totalAmount+=Rt.amount,Mt.totalPaid+=Rt.paidAmount||0,Mt.totalRemaining+=kr,Mt.invoiceCount+=1,Mt.invoices.push(Rt),new Date(Rt.date)>new Date(Mt.lastInvoiceDate)&&(Mt.lastInvoiceDate=Rt.date),et.set(Rt.supplierName,Mt)}),Array.from(et.values()).filter(Rt=>Rt.name.includes(k)).sort((Rt,Mt)=>new Date(Mt.lastInvoiceDate).getTime()-new Date(Rt.lastInvoiceDate).getTime())},[c,k]),er=xe.useMemo(()=>I&&At.find(et=>et.name===I)||null,[At,I]);xe.useEffect(()=>()=>{X.current&&X.current.getTracks().forEach(et=>et.stop())},[]);const Nr=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert("    .");return}ee(!0);try{const et=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1});X.current=et,Y.current&&(Y.current.srcObject=et,Y.current.onloadedmetadata=()=>{var Rt;(Rt=Y.current)==null||Rt.play().catch(Mt=>console.error("Play error",Mt))})}catch{ee(!1),alert("  .")}},Ue=()=>{X.current&&(X.current.getTracks().forEach(et=>et.stop()),X.current=null),Y.current&&(Y.current.srcObject=null),ee(!1)},It=()=>{if(Y.current){const et=document.createElement("canvas");et.width=Y.current.videoWidth,et.height=Y.current.videoHeight;const Rt=et.getContext("2d");if(Rt){Rt.drawImage(Y.current,0,0);const Mt=et.toDataURL("image/jpeg",.9);Ie(Mt),Ue()}}};xe.useEffect(()=>(G&&q.current&&(ne.current&&ne.current.destroy(),ne.current=new Cropper(q.current,{viewMode:1,dragMode:"move",autoCropArea:.9,restore:!1,guides:!0,center:!0,highlight:!1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1})),()=>{ne.current&&(ne.current.destroy(),ne.current=null)}),[G]);const Lt=et=>{const Rt=et.target.files;if(Rt&&Rt.length>0){const Mt=[];Array.from(Rt).forEach(kr=>{Mt.push(new Promise(Tr=>{const qr=new FileReader;qr.onloadend=()=>Tr(qr.result),qr.readAsDataURL(kr)}))}),Promise.all(Mt).then(kr=>{Ie(kr[0]),De(kr.slice(1))})}et.target.value=""},Zt=()=>{if(ne.current){const Rt=ne.current.getCroppedCanvas({maxWidth:1024,maxHeight:1024}).toDataURL("image/jpeg",.8);de(Mt=>[...Mt,Rt]),be.length>0?(Ie(be[0]),De(Mt=>Mt.slice(1))):Ie(null)}},cr=()=>{be.length>0?(Ie(be[0]),De(et=>et.slice(1))):Ie(null)},hr=et=>{de(Rt=>Rt.filter((Mt,kr)=>kr!==et))},Ht=et=>new Intl.NumberFormat("ar-MA",{style:"decimal",minimumFractionDigits:2}).format(et),mr=()=>{Ke(I||""),He(""),Tt(""),Oe(""),de([]),De([]),ft(new Date().toISOString().split("T")[0]),Bt(new Date().toISOString().split("T")[0]),ae(null)},pt=et=>{ae(et.id),Ke(et.supplierName),He(et.amount.toString()),Tt(et.paidAmount?et.paidAmount.toString():""),Oe(""),Bt(new Date().toISOString().split("T")[0]),ft(et.date),et.images&&et.images.length>0?de(et.images):et.image?de([et.image]):de([]),m(!0)},yt=()=>{if(!Ee||!Fe)return;const et=(parseFloat(tt)||0)+(parseFloat(ve)||0),Rt=c.find(Tr=>Tr.id===oe);let Mt=(Rt==null?void 0:Rt.payments)||[];!oe&&et>0?Mt=[{id:`pay-${Date.now()}`,amount:et,timestamp:new Date(kt).getTime(),method:"direct"}]:oe&&parseFloat(ve)>0&&(Mt=[...Mt,{id:`pay-${Date.now()}`,amount:parseFloat(ve),timestamp:new Date(st).getTime(),method:"direct"}]);const kr={id:oe||`sup-${Date.now()}`,supplierName:Ee,amount:parseFloat(Fe),paidAmount:et,date:kt,image:ge.length>0?ge[0]:void 0,images:ge,createdAt:oe&&(Rt==null?void 0:Rt.createdAt)||Date.now(),payments:Mt};oe?n(kr):r(kr),m(!1),mr()},_e=()=>{I&&(s(I),F(null),K(!1))},Nt=()=>{I&&M&&M!==I&&(o(I,M),F(M),z(!1))},Re=()=>{I&&(mr(),Ke(I),m(!0))},Dt=At.reduce((et,Rt)=>et+Rt.totalRemaining,0),rr=async()=>{if(!(!er||!mt.current)){jt(!0);try{(await Uo(mt.current,{scale:3,backgroundColor:"#ffffff",useCORS:!0,logging:!1,width:450})).toBlob(async Rt=>{if(!Rt){jt(!1),alert("  ");return}try{const Mt=new ClipboardItem({"image/png":Rt});await navigator.clipboard.write([Mt]),window.open("https://wa.me/","_blank")}catch{alert("   ."),window.open("https://wa.me/","_blank")}finally{jt(!1)}},"image/png",1)}catch{jt(!1)}}};return u.jsxs("div",{className:"w-full min-h-screen md:h-auto bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative shadow-2xl md:shadow-none font-['Tajawal']",children:[er&&u.jsxs("div",{ref:mt,style:{position:"fixed",top:0,left:-9999,width:"450px",padding:"30px",backgroundColor:"white",color:"black",fontFamily:"'Tajawal', sans-serif",direction:"rtl",zIndex:-1,border:"1px solid #eee"},children:[u.jsxs("div",{style:{textAlign:"center",borderBottom:"2px solid #000",paddingBottom:"15px",marginBottom:"20px"},children:[u.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",margin:"0 0 5px 0"},children:h.businessName}),u.jsx("h1",{style:{fontSize:"26px",fontWeight:"900",margin:"0 0 10px 0"},children:"  "}),u.jsxs("p",{style:{fontSize:"14px",color:"#555",margin:0},children:[": ",new Date().toLocaleDateString("ar-MA")]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("p",{style:{fontSize:"16px",margin:"0 0 5px 0",color:"#666"},children:":"}),u.jsx("h2",{style:{fontSize:"22px",fontWeight:"bold",margin:0},children:er.name})]}),u.jsxs("div",{style:{backgroundColor:"#fff5f5",border:"2px solid #feb2b2",borderRadius:"12px",padding:"20px",textAlign:"center",marginBottom:"20px"},children:[u.jsx("p",{style:{fontSize:"16px",fontWeight:"bold",margin:"0 0 10px 0",color:"#c53030"},children:"  ( )"}),u.jsxs("div",{style:{fontSize:"32px",fontWeight:"900",color:"#c53030",direction:"ltr"},children:[Ht(er.totalRemaining)," DH"]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h4",{style:{fontSize:"16px",fontWeight:"bold",borderBottom:"1px solid #eee",paddingBottom:"5px",marginBottom:"10px"},children:" :"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[u.jsx("span",{children:" :"}),u.jsxs("span",{style:{fontWeight:"bold"},children:[Ht(er.totalAmount)," ."]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[u.jsx("span",{children:" :"}),u.jsxs("span",{style:{fontWeight:"bold",color:"#2f855a"},children:[Ht(er.totalPaid)," ."]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:" :"}),u.jsx("span",{style:{fontWeight:"bold"},children:er.invoiceCount})]})]}),u.jsx("div",{style:{marginTop:"30px",textAlign:"center",fontSize:"12px",color:"#888",borderTop:"1px solid #eee",paddingTop:"10px"},children:u.jsxs("p",{children:["  - ",h.signatureName||"MAMA App"]})})]}),u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20 md:sticky md:top-0 md:bg-black/90 md:backdrop-blur-md md:border-b md:border-gray-800",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:" "}),u.jsx("span",{className:"text-[10px] text-red-500 font-bold",children:"    "})]}),u.jsx("button",{onClick:e,className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-gray-400 hover:text-white transition-colors active:scale-90",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})})]}),u.jsxs("div",{className:"px-6 py-4 space-y-4 md:grid md:grid-cols-2 md:gap-4 md:space-y-0",children:[u.jsxs("div",{className:"bg-red-500/5 rounded-2xl p-4 border border-red-500/20 flex justify-between items-center shadow-lg",children:[u.jsx("span",{className:"text-gray-400 text-xs font-bold",children:"  "}),u.jsxs("span",{className:"text-xl font-black text-red-500",children:[Ht(Dt)," ."]})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"text",placeholder:"  ...",className:"w-full bg-[#111111] border border-gray-800 rounded-2xl py-4 pr-10 pl-4 text-white focus:border-red-500 outline-none transition-all text-right placeholder:text-gray-600 font-medium",value:k,onChange:et=>U(et.target.value)}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]})})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-6 pb-32 space-y-3 custom-scrollbar md:grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:gap-4 md:space-y-0",children:At.length>0?At.map(et=>u.jsxs("div",{onClick:()=>F(et.name),className:"bg-[#111111] rounded-[2rem] border border-gray-800/40 p-5 flex flex-col gap-4 group transition-all relative overflow-hidden active:scale-[0.98] cursor-pointer h-full",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-14 h-14 min-w-[56px] bg-[#1a1a1a] rounded-2xl border border-gray-800 flex items-center justify-center text-red-500 group-hover:scale-105 transition-all shadow-inner",children:u.jsx("span",{className:"text-xl font-black",children:et.name.charAt(0)})}),u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("h4",{className:"text-xl font-black text-white leading-none mb-1 line-clamp-1",children:et.name}),u.jsxs("p",{className:"text-[10px] text-gray-500 font-bold",children:[" : ",et.invoiceCount]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-auto",children:[u.jsxs("div",{className:"bg-black/20 rounded-2xl p-3 border border-gray-800/50",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold block mb-1",children:" "}),u.jsx("div",{className:"text-sm font-black text-white",children:Ht(et.totalAmount)})]}),u.jsxs("div",{className:"bg-black/20 rounded-2xl p-3 border border-gray-800/50",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold block mb-1",children:" "}),u.jsx("div",{className:`text-sm font-black ${et.totalRemaining>0?"text-red-500":"text-[#57b385]"}`,children:Ht(et.totalRemaining)})]})]}),u.jsx("div",{className:"w-full bg-gray-800 h-1.5 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000",style:{width:`${Math.min(100,et.totalRemaining/Math.max(1,et.totalAmount)*100)}%`}})})]},et.name)):u.jsx("div",{className:"text-center py-20 text-gray-600 font-bold col-span-full",children:"    "})}),u.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-30",children:u.jsxs("button",{onClick:()=>{mr(),m(!0)},className:"bg-red-600 hover:bg-red-500 text-white px-8 py-4 rounded-full font-black shadow-2xl shadow-red-900/30 active:scale-95 transition-all flex items-center gap-2 border-4 border-[#0c0c0c]",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),u.jsx("span",{children:"  "})]})}),er&&u.jsx("div",{className:"fixed inset-0 z-[150] bg-[#0c0c0c] md:bg-black/95 md:backdrop-blur-sm flex flex-col items-center justify-center animate-in slide-in-from-bottom duration-400",children:u.jsxs("div",{className:"w-full h-full md:max-w-2xl md:h-[90vh] md:bg-[#161616] md:rounded-[3rem] md:border md:border-gray-800 flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"px-6 pt-10 pb-6 flex justify-between items-center border-b border-gray-800/50 bg-[#0c0c0c] md:bg-[#161616]",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>F(null),className:"p-3 bg-[#1a1a1a] rounded-2xl border border-gray-800 text-gray-400 hover:text-white active:scale-90 transition-all",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})}),u.jsxs("button",{onClick:Re,className:"p-3 bg-red-600 rounded-2xl border border-red-500 text-white hover:bg-red-500 active:scale-90 transition-all shadow-lg shadow-red-900/20 flex items-center gap-2",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),u.jsx("span",{className:"text-xs font-bold",children:" "})]})]}),u.jsx("h2",{className:"text-xl font-bold",children:"  "}),t.role==="admin"?u.jsx("button",{onClick:()=>K(!0),className:"p-3 bg-red-500/10 rounded-2xl border border-red-500/20 text-red-500 hover:bg-red-500 hover:text-white active:scale-90 transition-all shadow-lg shadow-red-900/20",title:"   ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}):u.jsx("div",{className:"w-10"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-8 space-y-6 custom-scrollbar pb-32",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("div",{className:"w-20 h-20 bg-[#1a1a1a] rounded-[2rem] border border-gray-800 mx-auto flex items-center justify-center text-4xl font-black text-red-500 shadow-xl",children:er.name.charAt(0)}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("h3",{className:"text-2xl font-black",children:er.name}),u.jsx("button",{onClick:()=>{P(er.name),z(!0)},className:"p-1.5 bg-[#1a1a1a] rounded-lg text-gray-400 hover:text-white border border-gray-800",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})})})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs("span",{className:"text-[10px] bg-red-500/10 px-3 py-1 rounded-full border border-red-500/20 text-red-500 font-bold",children:[" : ",Ht(er.totalRemaining)," ."]}),u.jsxs("span",{className:"text-[10px] bg-[#1a1a1a] px-3 py-1 rounded-full border border-gray-800 text-gray-400 font-bold",children:[er.invoiceCount," "]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-sm font-bold text-gray-500 border-b border-gray-800/30 pb-3",children:" "}),u.jsx("div",{className:"space-y-3 md:grid md:grid-cols-2 md:gap-3 md:space-y-0",children:er.invoices.sort((et,Rt)=>new Date(Rt.date).getTime()-new Date(et.date).getTime()).map(et=>{const Rt=et.amount-(et.paidAmount||0);return u.jsxs("div",{onClick:()=>b(et),className:"bg-[#111111] md:bg-black/40 p-4 rounded-2xl border border-gray-800 flex justify-between items-center active:scale-95 transition-all cursor-pointer group hover:border-gray-600",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-black/40 rounded-xl flex items-center justify-center text-gray-500 group-hover:text-red-500 transition-colors",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u.jsx("path",{d:"M14 2v6h6"})]})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-white font-bold text-sm",children:et.date}),u.jsxs("div",{className:"text-[10px] text-gray-500",children:[" : ",Ht(et.paidAmount||0)]})]})]}),u.jsxs("div",{className:"text-left",children:[u.jsxs("div",{className:"text-white font-black text-sm",children:[Ht(et.amount)," ."]}),u.jsx("div",{className:`text-[10px] font-bold ${Rt>0?"text-red-500":"text-green-500"}`,children:Rt>0?`: ${Ht(Rt)}`:""})]})]},et.id)})})]})]}),u.jsxs("div",{className:"p-6 bg-[#0c0c0c] md:bg-[#161616] border-t border-gray-800 pb-10 md:pb-6 flex gap-3",children:[u.jsxs("button",{onClick:rr,disabled:Ot||er.totalRemaining===0,className:`flex-1 bg-[#25D366] text-white py-4 rounded-2xl font-black text-lg shadow-xl active:scale-95 flex items-center justify-center gap-2 ${Ot?"opacity-50 cursor-wait":""}`,children:[Ot?u.jsx("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})})," "]}),u.jsx("button",{onClick:()=>F(null),className:"px-8 bg-[#1a1a1a] text-gray-400 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),re&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"  "}),u.jsx("p",{className:"text-sm text-gray-400",children:"      "})]}),u.jsx("input",{type:"text",className:"w-full bg-black border border-gray-800 rounded-2xl py-3 px-4 text-white focus:border-red-500 outline-none transition-all text-right font-bold",value:M,onChange:et=>P(et.target.value),placeholder:"  ",autoFocus:!0}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:Nt,disabled:!M||M===I,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:" "}),u.jsx("button",{onClick:()=>z(!1),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),V&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"  "}),u.jsxs("p",{className:"text-sm text-gray-400",children:['       "',I,'"         .']})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:_e,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:"  "}),u.jsx("button",{onClick:()=>K(!1),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),C&&u.jsx("div",{className:"fixed inset-0 z-[450] bg-black/90 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800/50 pb-4",children:[u.jsx("button",{onClick:()=>b(null),className:"p-2 bg-[#1a1a1a] rounded-xl text-gray-500 hover:text-white transition-all active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("h2",{className:"text-xl font-black text-white",children:" "})]}),u.jsxs("div",{className:"text-center space-y-1",children:[u.jsx("div",{className:"w-20 h-20 bg-[#1a1a1a] rounded-full mx-auto flex items-center justify-center text-red-500 border border-red-500/20 mb-2",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u.jsx("path",{d:"M14 2v6h6"})]})}),u.jsx("h3",{className:"text-2xl font-black text-white",children:C.supplierName}),u.jsx("p",{className:"text-sm text-gray-500 font-bold",children:C.date})]}),u.jsxs("div",{className:"bg-[#111111] rounded-2xl border border-gray-800/50 p-4 space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs font-bold",children:" "}),u.jsx("span",{className:"text-lg font-black text-white",children:Ht(C.amount)})]}),u.jsx("div",{className:"w-full h-px bg-gray-800"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs font-bold",children:""}),u.jsx("span",{className:"text-sm font-black text-[#57b385]",children:Ht(C.paidAmount||0)})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs font-bold",children:""}),u.jsx("span",{className:`text-sm font-black ${C.amount-(C.paidAmount||0)>0?"text-red-500":"text-gray-500"}`,children:Ht(C.amount-(C.paidAmount||0))})]})]}),C.images&&C.images.length>0&&u.jsx("div",{className:"grid grid-cols-2 gap-2",children:C.images.map((et,Rt)=>u.jsx("div",{className:"aspect-square bg-black rounded-xl overflow-hidden border border-gray-800",onClick:()=>Ge(et),children:u.jsx("img",{src:et,alt:"Bon",className:"w-full h-full object-cover"})},Rt))}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:()=>pt(C),className:"flex-1 bg-orange-500 hover:bg-orange-400 text-white py-4 rounded-2xl font-bold shadow-lg active:scale-95 transition-all",children:""}),u.jsx("button",{onClick:()=>te(!0),className:"flex-1 bg-[#1a1a1a] text-red-500 border border-red-500/20 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),Q&&C&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"       "})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{i(C.id),b(null),te(!1)},className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>te(!1),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),O&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full h-full relative flex flex-col",children:[u.jsxs("div",{className:"flex-1 relative overflow-hidden bg-black flex items-center justify-center",children:[u.jsx("video",{ref:Y,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:u.jsx("div",{className:"w-72 h-[450px] border-2 border-white/30 rounded-[2rem] shadow-[0_0_0_1000px_rgba(0,0,0,0.5)]"})})]}),u.jsxs("div",{className:"p-10 bg-black flex justify-between items-center px-12 border-t border-white/10",children:[u.jsx("button",{onClick:Ue,className:"w-14 h-14 bg-white/10 rounded-full flex items-center justify-center text-white active:scale-90 transition-all",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}),u.jsx("button",{onClick:It,className:"w-20 h-20 bg-white rounded-full flex items-center justify-center text-black active:scale-90 transition-all border-[6px] border-white/20",children:u.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-black"})}),u.jsx("div",{className:"w-14"})]})]})}),d&&u.jsx("div",{className:"fixed inset-0 z-[500] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-xl font-black text-white mb-1",children:oe?" ":"  "}),u.jsx("p",{className:"text-xs text-gray-500",children:"     "})]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" "}),ge.length>0&&u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:ge.map((et,Rt)=>u.jsxs("div",{className:"relative flex-shrink-0 w-20 h-24 bg-[#1a1a1a] rounded-xl border border-gray-800 overflow-hidden",children:[u.jsx("img",{src:et,alt:`Img ${Rt}`,className:"w-full h-full object-cover"}),u.jsx("button",{onClick:()=>hr(Rt),className:"absolute top-1 right-1 w-6 h-6 bg-red-600/90 text-white rounded-full flex items-center justify-center active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},Rt))}),u.jsxs("div",{className:"flex gap-2 w-full",children:[u.jsxs("button",{onClick:Nr,className:"flex-1 h-16 bg-[#1a1a1a] rounded-[1.5rem] border border-gray-800 flex items-center justify-center hover:border-blue-500/50 transition-all text-blue-500 gap-2",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),u.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),u.jsx("span",{className:"text-[10px] font-bold",children:""})]}),u.jsxs("div",{onClick:()=>{var et;return(et=ce.current)==null?void 0:et.click()},className:"flex-[1.5] h-16 bg-[#1a1a1a] rounded-[1.5rem] border-2 border-dashed border-gray-700 flex items-center justify-center hover:border-red-500/50 transition-all cursor-pointer",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),u.jsx("span",{className:"text-[10px] font-bold",children:" "})]}),u.jsx("input",{ref:ce,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Lt})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" "}),u.jsx("input",{type:"text",className:"w-full bg-black border border-gray-800 rounded-2xl py-3 md:py-2 px-4 text-white focus:border-red-500 outline-none transition-all text-right font-bold md:text-sm",value:Ee,onChange:et=>Ke(et.target.value),autoFocus:!0})]}),u.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-3",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:"  (.)"}),u.jsx("input",{type:"number",className:"w-full bg-black border border-gray-800 rounded-2xl py-3 md:py-2 px-4 text-white focus:border-red-500 outline-none text-center font-black text-lg md:text-sm",value:Fe,onChange:et=>He(et.target.value)})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:oe?" ":" "}),u.jsx("input",{type:"number",className:"w-full bg-black border border-gray-800 rounded-2xl py-3 md:py-2 px-4 text-[#57b385] text-center font-black text-lg md:text-sm opacity-70",value:tt,onChange:et=>Tt(et.target.value),readOnly:!!oe})]})]}),oe&&u.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 duration-300",children:[u.jsx("label",{className:"text-[10px] text-[#57b385] font-bold mr-2",children:"  ( )"}),u.jsx("input",{type:"number",className:"w-full bg-[#57b385]/10 border border-[#57b385]/50 rounded-2xl py-3 md:py-2 px-4 text-[#57b385] outline-none text-center font-black text-lg md:text-sm placeholder:text-[#57b385]/30",value:ve,onChange:et=>Oe(et.target.value),placeholder:"0.00"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" "}),u.jsx("input",{type:"date",className:"w-full bg-black border border-gray-800 rounded-2xl py-3 md:py-2 px-4 text-white focus:border-red-500 outline-none text-right md:text-sm",value:kt,onChange:et=>ft(et.target.value)})]})]}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsx("button",{onClick:yt,disabled:!Ee||!Fe,className:"w-full py-4 md:py-3 rounded-2xl text-white font-black text-lg bg-red-600 hover:bg-red-500 disabled:bg-gray-800 active:scale-95 transition-all",children:""}),u.jsx("button",{onClick:()=>{m(!1),mr()},className:"w-full bg-[#1a1a1a] text-gray-400 py-3 md:py-2.5 rounded-2xl font-bold border border-gray-800 active:scale-95 transition-all",children:""})]})]})}),G&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full h-full relative bg-black flex flex-col",children:[u.jsx("div",{className:"flex-1 relative overflow-hidden flex items-center justify-center bg-[#111111]",children:u.jsx("img",{ref:q,src:G,alt:"Crop",className:"max-w-full max-h-full object-contain"})}),u.jsxs("div",{className:"p-6 bg-black border-t border-gray-800 flex gap-4",children:[u.jsx("button",{onClick:Zt,className:"flex-1 bg-red-600 text-white py-4 rounded-2xl font-black text-lg active:scale-95",children:" "}),u.jsx("button",{onClick:cr,className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95",children:""})]})]})}),we&&u.jsxs("div",{className:"fixed inset-0 z-[700] bg-black flex items-center justify-center p-2 animate-in fade-in duration-300",onClick:()=>Ge(null),children:[u.jsx("img",{src:we,alt:"Full",className:"max-w-full max-h-full object-contain"}),u.jsx("button",{className:"absolute top-6 right-6 p-4 bg-white/10 rounded-full text-white",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})})]})]})},_te=({onNavigateToHome:t,requests:e,onAddRequest:r,onUpdateRequest:n,onDeleteRequest:i,settings:s})=>{var Nr;const[o,c]=xe.useState(!1),[h,d]=xe.useState(null),[m,C]=xe.useState(""),[b,I]=xe.useState(null),[F,k]=xe.useState(!1),[U,V]=xe.useState([]),K=xe.useRef(null),Q=xe.useRef(null),[te,re]=xe.useState(""),[z,M]=xe.useState([]),[P,O]=xe.useState(null),[ee,Y]=xe.useState([]),[X,G]=xe.useState(null),[Ie,ge]=xe.useState(null),[de,we]=xe.useState(!1),[Ge,be]=xe.useState(!1),De=xe.useRef(null),ne=xe.useRef(null),q=xe.useRef(null),ce=xe.useRef(null),oe=xe.useRef(null);xe.useEffect(()=>()=>{Q.current&&Q.current.getTracks().forEach(Ue=>Ue.stop())},[]);const ae=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert("    .");return}V([]),k(!0);try{const Ue=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1});Q.current=Ue,K.current&&(K.current.srcObject=Ue,K.current.onloadedmetadata=()=>{var It;(It=K.current)==null||It.play().catch(Lt=>console.error("Play error",Lt))})}catch(Ue){console.error("Camera access error:",Ue),k(!1);let It="  .";(Ue.name==="NotAllowedError"||Ue.name==="PermissionDeniedError")&&(It="    .      ."),alert(It)}},Ee=()=>{Q.current&&(Q.current.getTracks().forEach(Ue=>Ue.stop()),Q.current=null),K.current&&(K.current.srcObject=null),k(!1)},Ke=()=>{if(K.current){const Ue=document.createElement("canvas");Ue.width=K.current.videoWidth,Ue.height=K.current.videoHeight;const It=Ue.getContext("2d");if(It){It.drawImage(K.current,0,0);const Lt=Ue.toDataURL("image/jpeg",.9);V(Zt=>[...Zt,Lt]),navigator.vibrate&&navigator.vibrate(50)}}},Fe=()=>{U.length>0&&(O(U[0]),Y(U.slice(1))),Ee()};xe.useEffect(()=>{if(P&&oe.current){ce.current&&ce.current.destroy();const Ue=new Cropper(oe.current,{viewMode:1,dragMode:"move",autoCropArea:.9,restore:!1,guides:!0,center:!0,highlight:!1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1});ce.current=Ue}return()=>{ce.current&&(ce.current.destroy(),ce.current=null)}},[P]);const He=xe.useMemo(()=>e.filter(Ue=>Ue.status==="pending").filter(Ue=>Ue.productName.toLowerCase().includes(m.toLowerCase())),[e,m]),tt=()=>{re(""),M([]),Y([]),I(null)},Tt=()=>{tt(),c(!0)},ve=Ue=>{I(Ue.id),re(Ue.productName),Ue.images&&Ue.images.length>0?M(Ue.images):Ue.image?M([Ue.image]):M([]),c(!0),d(null)},Oe=Ue=>{const It=Ue.target.files;if(It&&It.length>0){const Lt=[];Array.from(It).forEach(Zt=>{Lt.push(new Promise(cr=>{const hr=new FileReader;hr.onloadend=()=>cr(hr.result),hr.readAsDataURL(Zt)}))}),Promise.all(Lt).then(Zt=>{O(Zt[0]),Y(Zt.slice(1))})}Ue.target.value=""},st=()=>{if(ce.current){const It=ce.current.getCroppedCanvas({maxWidth:1024,maxHeight:1024}).toDataURL("image/jpeg",.8);M(Lt=>[...Lt,It]),ee.length>0?(O(ee[0]),Y(Lt=>Lt.slice(1))):O(null)}},Bt=()=>{ee.length>0?(O(ee[0]),Y(Ue=>Ue.slice(1))):O(null)},kt=Ue=>{M(It=>It.filter((Lt,Zt)=>Zt!==Ue))},ft=()=>{var It;if(!te)return;const Ue={id:b||`req-${Date.now()}`,productName:te,image:z.length>0?z[0]:void 0,images:z,status:"pending",createdAt:b&&((It=e.find(Lt=>Lt.id===b))==null?void 0:It.createdAt)||Date.now()};b?n(Ue):r(Ue),c(!1),tt()},Ot=()=>{Ie&&(i(Ie),ge(null),d(null))},jt=async()=>{if(!(!h||!ne.current)){we(!0);try{(await Uo(ne.current,{scale:2.5,backgroundColor:"#ffffff",useCORS:!0,logging:!1})).toBlob(async It=>{if(!It){we(!1),alert("  ");return}try{const Lt=new ClipboardItem({"image/png":It});await navigator.clipboard.write([Lt]),window.open("https://wa.me/","_blank")}catch(Lt){console.error("Clipboard failed",Lt),alert("       ."),window.open("https://wa.me/","_blank")}finally{we(!1)}},"image/png",1)}catch(Ue){console.error("Share error",Ue),we(!1)}}},mt=async()=>{if(!(He.length===0||!De.current)){be(!0);try{(await Uo(De.current,{scale:2.5,backgroundColor:"#ffffff",useCORS:!0,logging:!1})).toBlob(async It=>{if(!It){be(!1),alert("  ");return}try{const Lt=new ClipboardItem({"image/png":It});await navigator.clipboard.write([Lt]),window.open("https://wa.me/","_blank")}catch(Lt){console.error("Clipboard failed",Lt),window.open("https://wa.me/","_blank")}finally{be(!1)}},"image/png",1)}catch(Ue){console.error("Share error",Ue),be(!1)}}},At=()=>{if(!h)return;const Ue=window.open("","_blank");if(!Ue){alert("   ");return}const It=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <title>  - ${h.productName}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap');
            body { font-family: 'Tajawal', sans-serif; padding: 40px; direction: rtl; }
            .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 20px; }
            .content { margin-top: 30px; font-size: 24px; text-align: center; }
            .images { display: grid; grid-template-cols: 1fr 1fr; gap: 20px; margin-top: 30px; }
            img { width: 100%; border-radius: 12px; }
          </style>
        </head>
        <body>
          <div class="header">
            <h3>${s.businessName}</h3>
            <h1> </h1>
            <p>: ${new Date(h.createdAt).toLocaleDateString("ar-MA")}</p>
          </div>
          <div class="content">
            <strong> :</strong>
            <p>${h.productName}</p>
          </div>
          <div class="images">
            ${(h.images||[]).map(Lt=>`<img src="${Lt}" />`).join("")}
          </div>
          <script>window.onload = function() { window.print(); setTimeout(() => window.close(), 500); }<\/script>
        </body>
      </html>
    `;Ue.document.write(It),Ue.document.close()},er=()=>{if(He.length===0)return;const Ue=window.open("","_blank");if(!Ue){alert("   ");return}const It=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <title> </title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap');
            body { font-family: 'Tajawal', sans-serif; padding: 30px; direction: rtl; }
            .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 20px; }
            table { width: 100%; border-collapse: collapse; }
            th { background: #f4f4f4; padding: 12px; border: 1px solid #ddd; text-align: right; }
            td { padding: 12px; border: 1px solid #ddd; }
            .date { font-size: 12px; color: #666; }
          </style>
        </head>
        <body>
          <div class="header">
            <h3>${s.businessName}</h3>
            <h1>  </h1>
            <p class="date"> : ${new Date().toLocaleDateString("ar-MA")}</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th> </th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              ${He.map((Lt,Zt)=>`
                <tr>
                  <td>${Zt+1}</td>
                  <td><strong>${Lt.productName}</strong></td>
                  <td>${new Date(Lt.createdAt).toLocaleDateString("ar-MA")}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          <script>window.onload = function() { window.print(); setTimeout(() => window.close(), 500); }<\/script>
        </body>
      </html>
    `;Ue.document.write(It),Ue.document.close()};return u.jsxs("div",{className:"w-full min-h-screen md:h-auto bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative shadow-2xl md:shadow-none font-['Tajawal']",children:[u.jsxs("div",{ref:ne,style:{position:"fixed",top:0,left:-9999,width:"450px",padding:"30px",backgroundColor:"white",color:"black",fontFamily:"'Tajawal', sans-serif",direction:"rtl",zIndex:-1},children:[u.jsxs("div",{style:{textAlign:"center",borderBottom:"2px solid #000",paddingBottom:"15px",marginBottom:"20px"},children:[u.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",margin:"0 0 5px 0"},children:s.businessName}),u.jsx("h1",{style:{fontSize:"28px",fontWeight:"900",margin:"0 0 10px 0"},children:" "}),u.jsxs("p",{style:{fontSize:"16px",margin:0,color:"#444"},children:[": ",h?new Date(h.createdAt).toLocaleDateString("ar-MA"):""]})]}),u.jsxs("div",{style:{padding:"20px",backgroundColor:"#f9fafb",borderRadius:"12px",border:"1px solid #eee",textAlign:"center"},children:[u.jsx("p",{style:{fontSize:"16px",color:"#666",marginBottom:"5px"},children:"  :"}),u.jsx("h2",{style:{fontSize:"24px",fontWeight:"900",margin:0},children:h==null?void 0:h.productName})]})]}),u.jsxs("div",{ref:De,style:{position:"fixed",top:0,left:-9999,width:"900px",padding:"40px",backgroundColor:"white",color:"black",fontFamily:"'Tajawal', sans-serif",direction:"rtl",zIndex:-1},children:[u.jsxs("div",{style:{textAlign:"center",borderBottom:"3px solid #000",paddingBottom:"20px",marginBottom:"30px"},children:[u.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 5px 0"},children:s.businessName}),u.jsx("h1",{style:{fontSize:"32px",fontWeight:"900",margin:"0 0 10px 0"},children:"  (Demand)"}),u.jsxs("p",{style:{fontSize:"18px",margin:0,color:"#444"},children:[": ",new Date().toLocaleDateString("ar-MA")]})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",direction:"rtl"},children:He.map((Ue,It)=>u.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"15px",backgroundColor:"#f9fafb",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("span",{style:{backgroundColor:"#2563eb",color:"#fff",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"900"},children:It+1}),u.jsx("span",{style:{fontSize:"24px",fontWeight:"900",color:"#1f2937"},children:Ue.productName})]}),u.jsx("span",{style:{fontSize:"16px",color:"#6b7280",fontWeight:"900"},children:new Date(Ue.createdAt).toLocaleDateString("ar-MA")})]},It))}),u.jsx("div",{style:{marginTop:"40px",borderTop:"3px solid #000",paddingTop:"20px",textAlign:"center"},children:u.jsxs("p",{style:{fontSize:"18px",fontWeight:"bold"},children:["  : ",He.length]})})]}),u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20 md:sticky md:top-0 md:bg-black/90 md:backdrop-blur-md md:border-b md:border-gray-800",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:" "}),u.jsx("span",{className:"text-[10px] text-blue-500 font-bold",children:"    "})]}),u.jsx("button",{onClick:t,className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-gray-400 hover:text-white transition-colors active:scale-90",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})})]}),u.jsx("div",{className:"px-6 py-4",children:u.jsxs("div",{className:"relative group md:max-w-2xl md:mx-auto",children:[u.jsx("input",{type:"text",placeholder:"  ...",className:"w-full bg-[#111111] border border-gray-800 rounded-2xl py-3.5 pr-10 pl-4 text-white focus:border-blue-500 outline-none transition-all text-right placeholder:text-gray-600 font-medium text-sm",value:m,onChange:Ue=>C(Ue.target.value)}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]})})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-6 pb-32 space-y-3 custom-scrollbar md:max-w-2xl md:mx-auto w-full",children:He.length>0?He.map(Ue=>{var It;return u.jsxs("div",{onClick:()=>d(Ue),className:"bg-[#111111] rounded-[2rem] border border-gray-800/60 p-4 flex items-center gap-4 group transition-all relative overflow-hidden active:scale-[0.98] cursor-pointer w-full hover:border-gray-600 shadow-lg shadow-black/20",children:[u.jsx("div",{className:"w-16 h-16 min-w-[64px] bg-[#1a1a1a] rounded-2xl border border-gray-800 flex items-center justify-center text-blue-500 overflow-hidden shadow-inner",children:Ue.image||Ue.images&&Ue.images.length>0?u.jsx("img",{src:((It=Ue.images)==null?void 0:It[0])||Ue.image,alt:"req",className:"w-full h-full object-cover"}):u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),u.jsx("path",{d:"M15 2H9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1Z"}),u.jsx("path",{d:"M12 11h4"}),u.jsx("path",{d:"M12 16h4"}),u.jsx("path",{d:"M8 11h.01"}),u.jsx("path",{d:"M8 16h.01"})]})}),u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("h3",{className:"text-lg font-black text-white leading-tight line-clamp-1",children:Ue.productName}),u.jsxs("p",{className:"text-[10px] text-gray-500 font-bold mt-1",children:[" : ",new Date(Ue.createdAt).toLocaleDateString("ar-MA")]})]}),u.jsx("div",{className:"w-10 h-10 bg-[#1a1a1a] rounded-xl flex items-center justify-center text-gray-600 group-hover:text-blue-500 transition-colors",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})})]},Ue.id)}):u.jsxs("div",{className:"text-center py-20 text-gray-600 flex flex-col items-center gap-2 opacity-50 col-span-full",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M16 4h2a2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),u.jsx("path",{d:"M15 2H9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1Z"})]}),u.jsx("p",{children:"   "})]})}),u.jsxs("div",{className:"fixed bottom-32 right-6 z-40 flex flex-col gap-3",children:[u.jsx("button",{onClick:er,className:"w-12 h-12 bg-white rounded-full flex items-center justify-center text-black shadow-lg shadow-white/10 active:scale-90 transition-all border border-gray-200",title:"  ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),u.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),u.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]})}),u.jsx("button",{onClick:mt,disabled:Ge,className:`w-12 h-12 bg-[#25D366] rounded-full flex items-center justify-center text-white shadow-lg shadow-green-900/20 active:scale-90 transition-all ${Ge?"opacity-50 cursor-wait":""}`,title:"  ",children:Ge?u.jsx("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})})})]}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black/80 to-transparent pointer-events-none flex justify-center pb-8 z-30",children:u.jsxs("button",{onClick:Tt,className:"pointer-events-auto bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 rounded-full font-black shadow-2xl shadow-blue-900/30 active:scale-95 transition-all flex items-center gap-2 border-4 border-[#0c0c0c]",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),u.jsx("span",{children:"  "})]})}),h&&u.jsx("div",{className:"fixed inset-0 z-[150] bg-black/95 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[3rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800/50 pb-4",children:[u.jsx("button",{onClick:()=>d(null),className:"p-2 bg-[#1a1a1a] rounded-xl text-gray-500 hover:text-white transition-all active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("h2",{className:"text-xl font-black text-white",children:" "})]}),u.jsxs("div",{className:"text-center space-y-3",children:[u.jsx("div",{onClick:()=>{var It;const Ue=((It=h.images)==null?void 0:It[0])||h.image;Ue&&G(Ue)},className:"w-24 h-24 bg-[#1a1a1a] rounded-[2rem] mx-auto flex items-center justify-center text-blue-500 border border-blue-500/20 shadow-2xl overflow-hidden cursor-pointer active:scale-95 transition-transform",children:h.image||h.images&&h.images.length>0?u.jsx("img",{src:((Nr=h.images)==null?void 0:Nr[0])||h.image,alt:"req",className:"w-full h-full object-cover"}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"})})}),u.jsx("h3",{className:"text-2xl font-black text-white",children:h.productName}),u.jsx("p",{className:"text-sm text-gray-500 font-bold bg-black/40 px-4 py-1.5 rounded-full inline-block",children:new Date(h.createdAt).toLocaleDateString("ar-MA")})]}),h.images&&h.images.length>1&&u.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.images.slice(1).map((Ue,It)=>u.jsx("div",{className:"aspect-square bg-black rounded-xl overflow-hidden border border-gray-800 cursor-pointer active:scale-95 transition-transform",onClick:()=>G(Ue),children:u.jsx("img",{src:Ue,alt:"req",className:"w-full h-full object-cover"})},It))}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:jt,disabled:de,className:`bg-[#25D366] text-white py-4 rounded-2xl font-black shadow-lg flex items-center justify-center gap-2 active:scale-95 transition-all ${de?"opacity-50":""}`,children:[de?u.jsx("svg",{className:"animate-spin",width:"20",height:"20",viewBox:"0 0 24 24",children:u.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),""]}),u.jsxs("button",{onClick:At,className:"bg-white text-black py-4 rounded-2xl font-black shadow-lg flex items-center justify-center gap-2 active:scale-95",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),u.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),u.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),""]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx("button",{onClick:()=>ve(h),className:"bg-orange-500/10 text-orange-500 border border-orange-500/20 py-4 rounded-2xl font-bold active:scale-95 hover:bg-orange-500 hover:text-white transition-all",children:" "}),u.jsx("button",{onClick:()=>ge(h.id),className:"bg-red-500/10 text-red-500 border border-red-500/20 py-4 rounded-2xl font-bold active:scale-95 hover:bg-red-500 hover:text-white transition-all",children:" "})]})]})]})}),o&&u.jsx("div",{className:"fixed inset-0 z-[500] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-xl font-black text-white mb-1",children:b?" ":" "}),u.jsx("p",{className:"text-xs text-gray-500",children:"      "})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2 uppercase tracking-widest",children:"  ()"}),z.length>0&&u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:z.map((Ue,It)=>u.jsxs("div",{className:"relative flex-shrink-0 w-20 h-24 bg-[#1a1a1a] rounded-xl border border-gray-800 overflow-hidden",children:[u.jsx("img",{src:Ue,alt:`Img ${It}`,className:"w-full h-full object-cover"}),u.jsx("button",{onClick:()=>kt(It),className:"absolute top-1 right-1 w-6 h-6 bg-red-600/90 text-white rounded-full flex items-center justify-center active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},It))}),u.jsxs("div",{className:"flex gap-2 w-full",children:[u.jsxs("button",{onClick:ae,className:"flex-1 h-16 bg-[#1a1a1a] rounded-[1.5rem] border border-gray-800 flex flex-col items-center justify-center hover:border-blue-500/50 transition-all text-blue-500 gap-1 active:scale-95",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),u.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),u.jsx("span",{className:"text-[10px] font-bold",children:""})]}),u.jsx("div",{onClick:()=>{var Ue;return(Ue=q.current)==null?void 0:Ue.click()},className:"flex-[1.5] h-16 bg-[#1a1a1a] rounded-[1.5rem] border-2 border-dashed border-gray-700 hover:border-blue-500 hover:bg-blue-500/5 transition-all cursor-pointer flex flex-col items-center justify-center relative overflow-hidden group active:scale-95",children:u.jsxs("div",{className:"flex flex-col items-center gap-1 text-gray-500 group-hover:text-blue-500 transition-colors",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),u.jsx("span",{className:"text-[10px] font-bold",children:" "})]})})]}),u.jsx("input",{ref:q,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Oe})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2 uppercase tracking-widest",children:"  "}),u.jsx("input",{type:"text",className:"w-full bg-black border border-gray-800 rounded-2xl py-4 md:py-3 px-4 text-white focus:border-blue-500 outline-none transition-all text-right font-bold text-lg md:text-sm",value:te,onChange:Ue=>re(Ue.target.value),placeholder:"  ...",autoFocus:!0})]})]}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsx("button",{onClick:ft,disabled:!te,className:`w-full py-4 md:py-3 rounded-2xl text-white font-black text-lg shadow-xl active:scale-95 transition-all ${te?"bg-blue-600 hover:bg-blue-500":"bg-gray-800 opacity-50 cursor-not-allowed"}`,children:b?" ":" "}),u.jsx("button",{onClick:()=>c(!1),className:"w-full bg-[#1a1a1a] text-gray-400 py-3 md:py-2.5 rounded-2xl font-bold border border-gray-800 active:scale-95 transition-all",children:""})]})]})}),F&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full h-full relative flex flex-col",children:[u.jsxs("div",{className:"flex-1 relative overflow-hidden bg-black flex items-center justify-center",children:[u.jsx("video",{ref:K,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),U.length>0&&u.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 bg-blue-600 px-4 py-1.5 rounded-full border-2 border-white shadow-lg animate-bounce",children:u.jsxs("span",{className:"text-sm font-black text-white",children:[U.length,"  "]})}),u.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:u.jsx("div",{className:"w-72 h-[450px] border-2 border-white/30 rounded-[2rem] shadow-[0_0_0_1000px_rgba(0,0,0,0.5)]"})})]}),u.jsxs("div",{className:"p-10 bg-black flex justify-between items-center px-12 border-t border-white/10",children:[u.jsx("button",{onClick:Ee,className:"w-14 h-14 bg-white/10 rounded-full flex items-center justify-center text-white active:scale-90 transition-all",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}),u.jsx("button",{onClick:Ke,className:"w-20 h-20 bg-white rounded-full flex items-center justify-center text-black active:scale-90 transition-all border-[6px] border-white/20 relative",children:u.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-black"})}),U.length>0?u.jsx("button",{onClick:Fe,className:"w-14 h-14 bg-[#57b385] rounded-full flex items-center justify-center text-white active:scale-90 transition-all shadow-xl shadow-green-900/40",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})})}):u.jsx("div",{className:"w-14"})]})]})}),P&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full h-full relative bg-black flex flex-col",children:[u.jsx("div",{className:"flex-1 relative overflow-hidden flex items-center justify-center bg-[#111111]",children:u.jsx("img",{ref:oe,src:P,alt:"Crop",className:"max-w-full max-h-full object-contain"})}),u.jsxs("div",{className:"p-6 bg-black border-t border-gray-800 flex gap-4 items-center",children:[u.jsx("div",{className:"flex-1",children:u.jsx("button",{onClick:st,className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-4 rounded-2xl font-black text-lg shadow-xl active:scale-95 transition-all",children:ee.length>0?` (${ee.length+1} )`:" "})}),u.jsx("div",{className:"flex-1",children:u.jsx("button",{onClick:Bt,className:"w-full bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:ee.length>0?"":""})})]})]})}),Ie&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"       "})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:Ot,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>ge(null),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),X&&u.jsxs("div",{className:"fixed inset-0 z-[700] bg-black flex items-center justify-center p-2 animate-in fade-in duration-300",onClick:()=>G(null),children:[u.jsx("img",{src:X,alt:"Full",className:"max-w-full max-h-full object-contain shadow-2xl"}),u.jsx("button",{className:"absolute top-10 right-6 p-4 bg-white/10 rounded-full text-white backdrop-blur-md active:scale-90 transition-all",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})})]})]})},Tte=({onNavigateToHome:t,checks:e,onAddCheck:r,onUpdateCheck:n,onDeleteCheck:i,settings:s})=>{const[o,c]=xe.useState("primary"),[h,d]=xe.useState(!1),[m,C]=xe.useState(""),[b,I]=xe.useState(null),[F,k]=xe.useState(null),[U,V]=xe.useState(!1),K=xe.useRef(null),[Q,te]=xe.useState(null),[re,z]=xe.useState(new Date().toISOString().split("T")[0]),[M,P]=xe.useState(""),[O,ee]=xe.useState(""),[Y,X]=xe.useState(new Date().toISOString().split("T")[0]),[G,Ie]=xe.useState(""),ge=new Date().toISOString().split("T")[0],de=xe.useMemo(()=>o==="primary"?{name:"  1",accentColor:"text-purple-500",bgColor:"bg-purple-600",btnBg:"bg-purple-600 hover:bg-purple-500",borderColor:"focus:border-purple-500",shadow:"shadow-purple-900/30",lightBg:"bg-purple-500/10",lightText:"text-purple-400",borderLight:"border-purple-500/20"}:{name:"  2",accentColor:"text-blue-500",bgColor:"bg-blue-600",btnBg:"bg-blue-600 hover:bg-blue-500",borderColor:"focus:border-blue-500",shadow:"shadow-blue-900/30",lightBg:"bg-blue-500/10",lightText:"text-blue-400",borderLight:"border-blue-500/20"},[o]),we=xe.useMemo(()=>e.filter(Fe=>{if((Fe.checkbookType||"primary")!==o||!(Fe.name.includes(m)||Fe.amount.toString().includes(m)||Fe.serialNumber&&Fe.serialNumber.includes(m)))return!1;if(F!==null)try{if(parseInt(Fe.paymentDate.split("-")[1],10)!==F)return!1}catch{return!1}return!0}),[e,m,F,o]),Ge=xe.useMemo(()=>we.reduce((Fe,He)=>He.paymentDate<ge?Fe:Fe+He.amount,0),[we,ge]),be=()=>{const Fe=new Date;if(z(Fe.toISOString().split("T")[0]),P(""),ee(""),F!==null){const He=Fe.getFullYear(),tt=new Date(He,F,0).getDate(),Tt=Math.min(Fe.getDate(),tt),ve=F.toString().padStart(2,"0"),Oe=Tt.toString().padStart(2,"0");X(`${He}-${ve}-${Oe}`)}else X(Fe.toISOString().split("T")[0]);Ie(""),I(null)},De=()=>{be(),d(!0)},ne=Fe=>{I(Fe.id),z(Fe.creationDate),P(Fe.name),ee(Fe.amount.toString()),X(Fe.paymentDate),Ie(Fe.serialNumber||""),d(!0)},q=()=>{var He;if(!M||!O)return;const Fe={id:b||`chk-${Date.now()}`,creationDate:re,name:M,amount:parseFloat(O),paymentDate:Y,serialNumber:G,checkbookType:o,createdAt:b&&((He=e.find(tt=>tt.id===b))==null?void 0:He.createdAt)||Date.now()};b?n(Fe):r(Fe),d(!1),be()},ce=()=>{Q&&(i(Q),te(null),d(!1),be())},oe=()=>{if(we.length===0){alert("   ");return}const Fe=window.open("","_blank");if(!Fe){alert("   ");return}const He=F?` ${F}`:" ",tt=o==="primary"?"  1":"  2",Tt=`
        <!DOCTYPE html>
        <html lang="ar" dir="rtl">
        <head>
            <title> </title>
            <style>
                @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap');
                body { font-family: 'Tajawal', sans-serif; padding: 20px; direction: rtl; text-align: right; }
                .header { text-align: center; margin-bottom: 20px; border-bottom: 2px dashed #000; padding-bottom: 10px; }
                h2 { margin: 0; font-size: 20px; }
                p { margin: 5px 0 0; color: #555; font-size: 14px; }
                table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                th { border-bottom: 2px solid #000; padding: 8px; font-weight: 800; font-size: 14px; }
                td { padding: 8px; border-bottom: 1px solid #ddd; font-size: 14px; }
                .amount-col { text-align: left; font-weight: bold; }
                .status-paid { color: green; font-size: 12px; }
                .total { margin-top: 30px; border-top: 2px solid #000; padding-top: 15px; font-weight: 900; font-size: 18px; display: flex; justify-content: space-between; }
                @media print {
                   @page { margin: 0; size: A4; }
                   body { padding: 1cm; }
                }
            </style>
        </head>
        <body>
            <div class="header">
                <h3>${s.businessName}</h3>
                <h2>   - ${tt}</h2>
                <p>: ${He}</p>
                <p> : ${new Date().toLocaleDateString("ar-MA")}</p>
            </div>
            <table>
                <thead>
                    <tr>
                        <th style="text-align: right;"> </th>
                        <th style="text-align: center;"></th>
                        <th style="text-align: left;"> (.)</th>
                    </tr>
                </thead>
                <tbody>
                    ${we.map(ve=>{const Oe=ve.paymentDate<ge;return`
                        <tr>
                            <td>${ve.name} ${Oe?'<span class="status-paid">( )</span>':""}</td>
                            <td style="text-align: center;">${ve.paymentDate}</td>
                            <td class="amount-col">${ve.amount.toFixed(2)}</td>
                        </tr>
                    `}).join("")}
                </tbody>
            </table>
            <div class="total">
                <span> ( ):</span>
                <span>${Ge.toFixed(2)} .</span>
            </div>
            <script>
                window.onload = function() { window.print(); setTimeout(function(){ window.close() }, 500); }
            <\/script>
        </body>
        </html>
    `;Fe.document.write(Tt),Fe.document.close()},ae=async()=>{if(we.length!==0&&K.current){V(!0);try{(await Uo(K.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1})).toBlob(async He=>{if(!He){alert("  "),V(!1);return}try{const tt=new ClipboardItem({"image/png":He});await navigator.clipboard.write([tt]),window.open("https://wa.me/","_blank")}catch(tt){console.error("Clipboard failed",tt),alert("  .      ."),window.open("https://wa.me/","_blank")}finally{V(!1)}},"image/png",1)}catch(Fe){console.error("Error generating report image",Fe),V(!1),alert("    ")}}},Ee=F?` ${F}`:" ",Ke=o==="primary"?"  1":"  2";return u.jsxs("div",{className:"w-full min-h-screen md:h-auto bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative shadow-2xl md:shadow-none font-['Tajawal']",children:[u.jsxs("div",{ref:K,style:{position:"fixed",top:0,left:-9999,width:"600px",padding:"40px",backgroundColor:"white",color:"black",fontFamily:"'Tajawal', sans-serif",direction:"rtl",zIndex:-1},children:[u.jsxs("div",{style:{textAlign:"center",borderBottom:"3px solid #000",paddingBottom:"20px",marginBottom:"20px"},children:[u.jsx("h3",{style:{fontSize:"22px",fontWeight:"bold",margin:"0 0 5px 0"},children:s.businessName}),u.jsxs("h1",{style:{fontSize:"28px",fontWeight:"900",margin:0,color:"#000"},children:["  (",Ke,")"]}),u.jsxs("p",{style:{fontSize:"18px",color:"#555",marginTop:"10px"},children:[": ",Ee]}),u.jsxs("p",{style:{fontSize:"14px",color:"#777"},children:[" : ",new Date().toLocaleDateString("ar-MA")]})]}),u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"30px"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[u.jsx("th",{style:{padding:"12px",borderBottom:"2px solid #000",textAlign:"right",fontSize:"16px"},children:""}),u.jsx("th",{style:{padding:"12px",borderBottom:"2px solid #000",textAlign:"center",fontSize:"16px"},children:""}),u.jsx("th",{style:{padding:"12px",borderBottom:"2px solid #000",textAlign:"left",fontSize:"16px"},children:""})]})}),u.jsx("tbody",{children:we.map((Fe,He)=>{const tt=Fe.paymentDate<ge;return u.jsxs("tr",{style:{borderBottom:"1px solid #ddd",backgroundColor:tt?"#f0fff4":"transparent"},children:[u.jsxs("td",{style:{padding:"12px",fontSize:"14px",fontWeight:"bold"},children:[Fe.name,tt&&u.jsx("span",{style:{color:"green",fontSize:"12px",marginRight:"5px"},children:"( )"})]}),u.jsx("td",{style:{padding:"12px",fontSize:"14px",textAlign:"center",fontFamily:"monospace"},children:Fe.paymentDate}),u.jsx("td",{style:{padding:"12px",fontSize:"16px",textAlign:"left",fontWeight:"900"},children:Fe.amount.toFixed(2)})]},He)})})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#000",color:"white",padding:"15px 20px",borderRadius:"12px"},children:[u.jsx("span",{style:{fontSize:"18px",fontWeight:"bold"},children:" ( ):"}),u.jsxs("span",{style:{fontSize:"24px",fontWeight:"900"},children:[Ge.toFixed(2)," ."]})]})]}),u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20 md:sticky md:top-0 md:bg-black/90 md:backdrop-blur-md md:border-b md:border-gray-800",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:" "}),u.jsxs("span",{className:`text-[10px] ${de.accentColor} font-bold transition-colors`,children:[de.name," -  "]})]}),u.jsx("button",{onClick:t,className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-gray-400 hover:text-white transition-colors active:scale-90",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})})]}),u.jsx("div",{className:"px-6 pb-4 md:pt-4",children:u.jsxs("div",{className:"flex bg-[#1a1a1a] p-1 rounded-2xl border border-gray-800 relative max-w-lg md:mx-auto",children:[u.jsx("button",{onClick:()=>c("primary"),className:`flex-1 py-3 rounded-xl text-xs font-bold transition-all relative z-10 ${o==="primary"?"bg-purple-600 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:"  1"}),u.jsx("button",{onClick:()=>c("secondary"),className:`flex-1 py-3 rounded-xl text-xs font-bold transition-all relative z-10 ${o==="secondary"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:"  2"})]})}),u.jsx("div",{className:"px-6 pb-4",children:u.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 border border-gray-800 flex justify-between items-center shadow-lg transition-all md:max-w-lg md:mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`w-8 h-8 ${de.lightBg} rounded-lg flex items-center justify-center ${de.accentColor} transition-colors`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M12 2v20"}),u.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-gray-400 text-xs font-bold",children:[" ",de.name]}),u.jsx("span",{className:"text-[9px] text-gray-600",children:"(   )"})]})]}),u.jsxs("span",{className:"text-xl font-black text-white tracking-tight",children:[Ge.toFixed(2)," ",u.jsx("span",{className:`text-xs ${de.accentColor}`,children:"."})]})]})}),u.jsxs("div",{className:"px-6 pb-4 md:grid md:grid-cols-2 md:gap-4 md:items-start",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"text",placeholder:"    ...",className:`w-full bg-[#111111] border border-gray-800 rounded-2xl py-3 pr-10 pl-4 text-white ${de.borderColor} outline-none transition-all text-right placeholder:text-gray-600 font-medium text-sm`,value:m,onChange:Fe=>C(Fe.target.value)}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]})})]}),u.jsxs("div",{className:"mt-4 md:mt-0 flex gap-2 overflow-x-auto custom-scrollbar pb-2 no-scrollbar",children:[u.jsx("button",{onClick:()=>k(null),className:`px-4 py-2.5 rounded-xl text-xs font-bold transition-all whitespace-nowrap flex-shrink-0 ${F===null?`${de.bgColor} text-white shadow-lg`:"bg-[#1a1a1a] text-gray-500 border border-gray-800"}`,children:""}),Array.from({length:12},(Fe,He)=>He+1).map(Fe=>u.jsx("button",{onClick:()=>k(Fe===F?null:Fe),className:`w-10 h-10 min-w-[40px] rounded-xl text-xs font-bold flex items-center justify-center transition-all flex-shrink-0 ${F===Fe?`${de.bgColor} text-white shadow-lg`:"bg-[#1a1a1a] text-gray-500 border border-gray-800"}`,children:Fe},Fe))]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-6 pb-32 space-y-3 custom-scrollbar md:grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:gap-4 md:space-y-0",children:we.length>0?we.map(Fe=>{const He=Fe.paymentDate<ge;return u.jsxs("div",{onClick:()=>ne(Fe),className:`bg-[#111111] rounded-2xl border p-4 flex flex-col gap-2 relative overflow-hidden group transition-all active:scale-[0.98] cursor-pointer h-full ${He?"border-green-500/30 bg-green-900/5":"border-gray-800/60"}`,children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-12 h-12 rounded-xl border flex items-center justify-center ${He?"bg-green-500/10 border-green-500/20 text-green-500":`bg-[#1a1a1a] border-gray-800 ${de.accentColor}`}`,children:He?u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M20 6 9 17l-5-5"})}):u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),u.jsx("line",{x1:"2",y1:"10",x2:"22",y2:"10"})]})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:`font-bold text-base leading-tight mb-0.5 line-clamp-1 ${He?"text-green-100":"text-white"}`,children:Fe.name}),Fe.serialNumber&&u.jsxs("span",{className:`text-[10px] ${de.lightBg} ${de.lightText} px-1.5 py-0.5 rounded border ${de.borderLight} font-mono`,children:["#",Fe.serialNumber]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-[10px] text-gray-500 block",children:[" : ",Fe.paymentDate]}),He&&u.jsx("span",{className:"text-[8px] bg-green-500 text-white px-1.5 py-0.5 rounded-full font-bold",children:" "})]})]})]}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:`text-lg font-black ${He?"text-green-500":"text-white"}`,children:Fe.amount.toFixed(2)}),u.jsx("span",{className:"text-[10px] text-gray-500 block font-bold",children:"."})]})]}),u.jsx("div",{className:"w-full h-px bg-gray-800/50 my-1 mt-auto"}),u.jsx("div",{className:"flex justify-between items-center text-[10px] text-gray-400",children:u.jsxs("span",{children:[" : ",Fe.creationDate]})})]},Fe.id)}):u.jsxs("div",{className:"text-center py-20 text-gray-600 flex flex-col items-center gap-2 opacity-50 col-span-full",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),u.jsx("line",{x1:"2",y1:"10",x2:"22",y2:"10"})]}),u.jsx("p",{children:"   "})]})}),u.jsxs("div",{className:"fixed bottom-32 right-6 z-40 flex flex-col gap-3",children:[u.jsx("button",{onClick:oe,className:"w-12 h-12 bg-white rounded-full flex items-center justify-center text-black shadow-lg shadow-white/10 active:scale-90 transition-all border border-gray-200",title:" ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),u.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),u.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]})}),u.jsx("button",{onClick:ae,disabled:U,className:`w-12 h-12 bg-[#25D366] rounded-full flex items-center justify-center text-white shadow-lg shadow-green-900/20 active:scale-90 transition-all ${U?"opacity-50 cursor-wait":""}`,title:"   ",children:U?u.jsx("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})})})]}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black/90 to-transparent pointer-events-none flex justify-center pb-8 z-30",children:u.jsxs("button",{onClick:De,className:`pointer-events-auto ${de.btnBg} text-white px-8 py-4 rounded-full font-black ${de.shadow} shadow-2xl active:scale-95 transition-all flex items-center gap-2 border-4 border-[#0c0c0c]`,children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),u.jsx("span",{children:" "})]})}),h&&u.jsx("div",{className:"fixed inset-0 z-[500] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-xl font-black text-white mb-1",children:b?" ":" "}),u.jsx("p",{className:`text-xs ${de.accentColor} font-bold`,children:de.name})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-3",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" "}),u.jsx("input",{type:"date",className:`w-full bg-black border border-gray-800 rounded-2xl py-3 md:py-2.5 px-4 text-white ${de.borderColor} outline-none transition-all text-right font-medium md:text-sm`,value:re,onChange:Fe=>z(Fe.target.value)})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" "}),u.jsx("input",{type:"text",className:`w-full bg-black border border-gray-800 rounded-2xl py-3 md:py-2.5 px-4 text-white ${de.borderColor} outline-none transition-all text-right font-bold font-mono md:text-sm`,value:G,onChange:Fe=>Ie(Fe.target.value),placeholder:"  "})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" ()"}),u.jsx("input",{type:"text",className:`w-full bg-black border border-gray-800 rounded-2xl py-4 md:py-2.5 px-4 text-white ${de.borderColor} outline-none transition-all text-right font-bold text-lg md:text-sm`,value:M,onChange:Fe=>P(Fe.target.value),placeholder:"  ...",autoFocus:!0})]}),u.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-3",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" (.)"}),u.jsx("input",{type:"number",className:`w-full bg-black border border-gray-800 rounded-2xl py-4 md:py-2.5 px-4 text-white ${de.borderColor} outline-none transition-all text-center font-black text-lg md:text-sm`,value:O,onChange:Fe=>ee(Fe.target.value),placeholder:"0.00"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-bold mr-2",children:" "}),u.jsx("input",{type:"date",className:`w-full bg-black border border-gray-800 rounded-2xl py-3 md:py-2.5 px-4 text-white ${de.borderColor} outline-none transition-all text-right font-medium md:text-sm`,value:Y,onChange:Fe=>X(Fe.target.value)})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{onClick:q,disabled:!M||!O,className:`flex-1 py-4 md:py-3 rounded-2xl text-white font-black text-lg shadow-xl active:scale-95 transition-all ${!M||!O?"bg-gray-800 opacity-50":`${de.btnBg}`}`,children:""})}),b&&u.jsx("button",{onClick:()=>te(b),className:"w-full bg-red-500/10 text-red-500 py-3 md:py-2.5 rounded-2xl font-bold border border-red-500/20 active:scale-95 transition-all hover:bg-red-500/20",children:" "}),u.jsx("button",{onClick:()=>d(!1),className:"w-full bg-[#1a1a1a] text-gray-400 py-3 md:py-2.5 rounded-2xl font-bold border border-gray-800 active:scale-95 transition-all",children:""})]})]})}),Q&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"       "})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:ce,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>te(null),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})})]})},Bte=({onNavigateToHome:t,orders:e,onAddOrder:r,onUpdateOrder:n,onDeleteOrder:i,settings:s})=>{const[o,c]=xe.useState(!1),[h,d]=xe.useState(""),[m,C]=xe.useState(null),[b,I]=xe.useState(null),[F,k]=xe.useState("pending"),[U,V]=xe.useState([]),[K,Q]=xe.useState(""),[te,re]=xe.useState(""),[z,M]=xe.useState(!1),P=xe.useRef(null),O=xe.useMemo(()=>e.filter(ne=>{var oe;const q=(oe=ne.items)==null?void 0:oe.some(ae=>ae.name.toLowerCase().includes(h.toLowerCase())),ce=ne.productName&&ne.productName.toLowerCase().includes(h.toLowerCase());return q||ce}).sort((ne,q)=>q.createdAt-ne.createdAt),[e,h]),ee=()=>{V([]),Q(""),re(""),C(null),k("pending")},Y=()=>{ee(),c(!0)},X=ne=>{C(ne.id),Q(""),re(""),k(ne.status||"pending"),ne.items&&ne.items.length>0?V([...ne.items]):ne.productName?V([{id:`legacy-${Date.now()}`,name:ne.productName,quantity:ne.quantity||1}]):V([]),c(!0)},G=()=>{if(!K||!te)return;const ne={id:`item-${Date.now()}-${Math.random()}`,name:K,quantity:parseFloat(te)};V(q=>[...q,ne]),Q(""),re("")},Ie=ne=>{V(q=>q.filter(ce=>ce.id!==ne))},ge=(ne,q,ce)=>{V(oe=>oe.map(ae=>ae.id===ne?{...ae,[q]:q==="quantity"?parseFloat(ce)||0:ce}:ae))},de=()=>{var q;if(U.length===0)return;const ne={id:m||`ord-${Date.now()}`,items:U,status:F,createdAt:m&&((q=e.find(ce=>ce.id===m))==null?void 0:q.createdAt)||Date.now()};m?n(ne):r(ne),c(!1),ee()},we=(ne,q)=>{ne.stopPropagation();const ce=q.status==="completed"?"pending":"completed";n({...q,status:ce}),navigator.vibrate&&navigator.vibrate(40)},Ge=()=>{b&&(i(b),I(null),c(!1),ee())},be=()=>{if(U.length===0)return;const ne=window.open("","_blank");if(!ne){alert("   ");return}const q=s.specialOrderLabel||" ",ce=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <title>${q}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap');
            body { font-family: 'Tajawal', sans-serif; padding: 20px; direction: rtl; text-align: right; }
            .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
            h2 { margin: 0; }
            ul { list-style: none; padding: 0; }
            li { padding: 10px 0; border-bottom: 1px dashed #ccc; display: flex; justify-content: space-between; font-size: 18px; font-weight: bold; }
          </style>
        </head>
        <body>
          <div class="header"><h3>${s.businessName}</h3><h2>${q}</h2><p>: ${new Date().toLocaleDateString("ar-MA")}</p></div>
          <ul>${U.map(oe=>`<li><span>${oe.name}</span><span>${oe.quantity}</span></li>`).join("")}</ul>
          <script>window.onload = function() { window.print(); setTimeout(() => window.close(), 500); }<\/script>
        </body>
      </html>
    `;ne.document.write(ce),ne.document.close()},De=async()=>{if(!(U.length===0||!P.current)){M(!0);try{await new Promise(q=>setTimeout(q,100)),(await Uo(P.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1,windowWidth:1600,windowHeight:1200})).toBlob(async q=>{if(!q){M(!1),alert("  ");return}try{const ce=new ClipboardItem({"image/png":q});await navigator.clipboard.write([ce]),window.open("https://wa.me/","_blank")}catch(ce){console.error("Clipboard failed",ce),alert("   .        ."),window.open("https://wa.me/","_blank")}finally{M(!1)}},"image/png",.9)}catch(ne){console.error("Html2Canvas failed",ne),M(!1),alert("    ")}}};return u.jsxs("div",{className:"w-full min-h-screen bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative font-['Tajawal']",children:[u.jsxs("div",{ref:P,style:{position:"fixed",top:0,left:-9999,width:"800px",padding:"40px",backgroundColor:"#fff",color:"#000",direction:"rtl",zIndex:-1,fontFamily:"'Tajawal', sans-serif"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"4px solid #e11d48",paddingBottom:"20px",marginBottom:"30px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"40px",fontWeight:"900",margin:"0",color:"#e11d48",lineHeight:"1"},children:s.specialOrderLabel||" "}),u.jsx("p",{style:{fontSize:"20px",color:"#555",marginTop:"5px",fontWeight:"bold"},children:s.businessName})]}),u.jsxs("div",{style:{textAlign:"left"},children:[u.jsx("p",{style:{fontSize:"18px",color:"#888",margin:0},children:""}),u.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",margin:0},children:new Date().toLocaleDateString("ar-MA")})]})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:U.map((ne,q)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px 20px",backgroundColor:q%2===0?"#fff1f2":"#fff",borderBottom:"2px solid #ffe4e6",borderRadius:"12px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[u.jsx("span",{style:{width:"40px",height:"40px",backgroundColor:"#e11d48",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",fontWeight:"900"},children:q+1}),u.jsx("span",{style:{fontSize:"32px",fontWeight:"900",color:"#1f2937"},children:ne.name})]}),u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px",backgroundColor:"#fff",padding:"5px 20px",borderRadius:"12px",border:"3px solid #e11d48"},children:u.jsx("span",{style:{fontSize:"36px",fontWeight:"900",color:"#e11d48"},children:ne.quantity})})]},q))}),u.jsxs("div",{style:{marginTop:"40px",backgroundColor:"#1f2937",color:"white",padding:"20px",borderRadius:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold"},children:[" : ",U.length]}),u.jsx("span",{style:{fontSize:"18px",opacity:.8},children:s.businessName})]})]}),u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20 md:sticky md:top-0 md:bg-black/90 md:backdrop-blur-md md:border-b md:border-gray-800",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:" "}),u.jsx("span",{className:"text-[10px] text-rose-500 font-bold",children:"   "})]}),u.jsx("button",{onClick:t,className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-gray-400 hover:text-white transition-all active:scale-90",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})})]}),u.jsx("div",{className:"px-6 py-4",children:u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"text",placeholder:"    ...",className:"w-full bg-[#111111] border border-gray-800 rounded-2xl py-3 pr-10 pl-4 text-white focus:border-rose-500 outline-none transition-all text-right placeholder:text-gray-600 font-medium text-sm",value:h,onChange:ne=>d(ne.target.value)}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]})})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-6 pb-32 space-y-3 custom-scrollbar md:grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:gap-4 md:space-y-0",children:O.length>0?O.map(ne=>{var q,ce;return u.jsxs("div",{onClick:()=>X(ne),className:`bg-[#111111] rounded-2xl border ${ne.status==="completed"?"border-[#57b385]/40 bg-[#57b385]/5":"border-gray-800/60"} p-4 flex justify-between items-start gap-3 relative overflow-hidden group transition-all active:scale-[0.98] cursor-pointer h-full hover:border-gray-600`,children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-12 h-12 min-w-[48px] rounded-xl border flex items-center justify-center transition-all ${ne.status==="completed"?"bg-[#57b385]/10 border-[#57b385]/20 text-[#57b385]":"bg-[#1a1a1a] border-gray-800 text-rose-500"}`,children:ne.status==="completed"?u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h3",{className:"font-black text-xs text-gray-400",children:new Date(ne.createdAt).toLocaleDateString("ar-MA")}),u.jsx("span",{className:`text-[8px] px-1.5 py-0.5 rounded-full font-black ${ne.status==="completed"?"bg-[#57b385] text-white":"bg-rose-500 text-white"}`,children:ne.status==="completed"?"":" "})]}),u.jsxs("div",{className:"space-y-1",children:[(q=ne.items)==null?void 0:q.slice(0,3).map((oe,ae)=>u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-white font-bold text-sm line-clamp-1",children:oe.name}),u.jsxs("span",{className:`text-[9px] px-1.5 py-0.5 rounded font-mono font-black ${ne.status==="completed"?"bg-[#57b385]/20 text-[#57b385]":"bg-rose-500/10 text-rose-500"}`,children:["x",oe.quantity]})]},ae)),((ce=ne.items)==null?void 0:ce.length)>3&&u.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",ne.items.length-3,"  ..."]})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("button",{onClick:oe=>we(oe,ne),className:`p-2 rounded-xl border transition-all active:scale-90 ${ne.status==="completed"?"bg-[#1a1a1a] text-gray-500 border-gray-800":"bg-[#57b385]/10 text-[#57b385] border-[#57b385]/20"}`,title:ne.status==="completed"?" ":" ",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})})}),u.jsx("div",{className:"bg-[#1a1a1a] p-2 rounded-xl border border-gray-800 flex items-center justify-center",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"text-gray-500",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})})]})]},ne.id)}):u.jsx("div",{className:"text-center py-20 text-gray-600 opacity-50 col-span-full font-bold",children:"    "})}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black/80 to-transparent pointer-events-none flex justify-center pb-8 z-30",children:u.jsxs("button",{onClick:Y,className:"pointer-events-auto bg-rose-600 hover:bg-rose-500 text-white px-8 py-4 rounded-full font-black shadow-2xl shadow-rose-900/30 active:scale-95 transition-all flex items-center gap-2 border-4 border-[#0c0c0c]",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),u.jsx("span",{children:"  "})]})}),o&&u.jsx("div",{className:"fixed inset-0 z-[500] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 flex flex-col max-h-[95vh]",children:[u.jsxs("div",{className:"text-center flex-shrink-0",children:[u.jsx("h3",{className:"text-xl font-black text-white mb-1",children:m?" ":"  "}),u.jsx("div",{className:"flex justify-center mt-2",children:u.jsxs("div",{className:"bg-black/40 p-1 rounded-xl border border-gray-800 flex gap-1",children:[u.jsx("button",{onClick:()=>k("pending"),className:`px-4 py-1.5 rounded-lg text-[10px] font-black transition-all ${F==="pending"?"bg-rose-600 text-white":"text-gray-500"}`,children:" "}),u.jsx("button",{onClick:()=>k("completed"),className:`px-4 py-1.5 rounded-lg text-[10px] font-black transition-all ${F==="completed"?"bg-[#57b385] text-white":"text-gray-500"}`,children:" "})]})})]}),u.jsxs("div",{className:"flex gap-2 items-center flex-shrink-0 bg-black/20 p-3 rounded-2xl border border-gray-800/50",children:[u.jsx("div",{className:"flex-1 space-y-1",children:u.jsx("input",{type:"text",className:"w-full bg-black border border-gray-800 rounded-xl py-2.5 px-3 text-white focus:border-rose-500 outline-none transition-all text-right font-bold text-sm",value:K,onChange:ne=>Q(ne.target.value),placeholder:"  ...",onKeyDown:ne=>ne.key==="Enter"&&G()})}),u.jsx("div",{className:"w-16 space-y-1",children:u.jsx("input",{type:"number",className:"w-full bg-black border border-gray-800 rounded-xl py-2.5 px-1 text-white focus:border-rose-500 outline-none transition-all text-center font-black text-sm",value:te,onChange:ne=>re(ne.target.value),placeholder:"",onKeyDown:ne=>ne.key==="Enter"&&G()})}),u.jsx("button",{onClick:G,disabled:!K||!te,className:`w-10 h-10 rounded-xl flex items-center justify-center text-white transition-all active:scale-90 ${!K||!te?"bg-gray-800 text-gray-500":"bg-rose-600 hover:bg-rose-500 shadow-lg"}`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-[#111111] rounded-2xl border border-gray-800 p-3 space-y-2 min-h-[150px]",children:U.length>0?U.map(ne=>u.jsx("div",{className:"bg-[#1a1a1a] p-3 rounded-xl border border-gray-800/50 space-y-2",children:u.jsxs("div",{className:"flex justify-between items-center gap-2",children:[u.jsx("button",{onClick:()=>Ie(ne.id),className:"text-red-500 hover:text-red-400 p-1 active:scale-90 flex-shrink-0",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),u.jsx("input",{type:"text",className:"flex-1 bg-transparent text-right font-bold text-sm text-white outline-none border-b border-transparent focus:border-rose-500/30",value:ne.name,onChange:q=>ge(ne.id,"name",q.target.value)}),u.jsx("input",{type:"number",className:"w-12 bg-black/40 rounded-lg text-center font-black text-xs text-rose-500 p-1 border border-gray-800",value:ne.quantity,onChange:q=>ge(ne.id,"quantity",q.target.value)})]})},ne.id)):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-600 text-xs gap-2",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),u.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),u.jsx("p",{children:"  "})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2 flex-shrink-0",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:de,disabled:U.length===0,className:`flex-[2] py-4 rounded-2xl text-white font-black text-lg shadow-xl active:scale-95 transition-all ${U.length===0?"bg-gray-800 opacity-50":F==="completed"?"bg-[#57b385] hover:brightness-110 shadow-[#57b385]/20":"bg-rose-600 hover:bg-rose-500 shadow-rose-900/20"}`,children:m?" ":" "}),u.jsx("button",{onClick:be,disabled:U.length===0,className:"w-14 bg-[#1a1a1a] hover:bg-white/10 text-white rounded-2xl flex items-center justify-center border border-gray-800 active:scale-90 transition-all disabled:opacity-50",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),u.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),u.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]})}),u.jsx("button",{onClick:De,disabled:U.length===0||z,className:`w-14 bg-[#25D366] hover:bg-[#20b858] text-white rounded-2xl flex items-center justify-center border border-[#25D366]/20 active:scale-90 transition-all disabled:opacity-50 ${z?"opacity-50 cursor-wait":""}`,children:z?u.jsx("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})})})]}),u.jsxs("div",{className:"flex gap-2",children:[m&&u.jsx("button",{onClick:()=>I(m),className:"flex-1 bg-red-500/10 text-red-500 py-3 rounded-2xl font-bold border border-red-500/20 active:scale-95 transition-all hover:bg-red-500/20",children:" "}),u.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-[#1a1a1a] text-gray-500 py-3 rounded-2xl font-bold border border-gray-800 active:scale-95 transition-all",children:""})]})]})]})}),b&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"       "})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:Ge,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>I(null),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})})]})},Ste=({currentUser:t,onNavigateToHome:e,quotes:r,onAddQuote:n,onUpdateQuote:i,onDeleteQuote:s,settings:o,products:c})=>{const[h,d]=xe.useState(!1),[m,C]=xe.useState(""),[b,I]=xe.useState(null),[F,k]=xe.useState(null),[U,V]=xe.useState(""),[K,Q]=xe.useState(""),[te,re]=xe.useState([]),[z,M]=xe.useState(""),[P,O]=xe.useState(!1),[ee,Y]=xe.useState(!1),[X,G]=xe.useState(null),[Ie,ge]=xe.useState([]),[de,we]=xe.useState([]),[Ge,be]=xe.useState(null),De=xe.useRef(null),ne=xe.useRef(null),q=xe.useRef(null),ce=xe.useRef(null),oe=xe.useRef(null),[ae,Ee]=xe.useState(!1),[Ke,Fe]=xe.useState(""),[He,tt]=xe.useState(""),[Tt,ve]=xe.useState(""),[Oe,st]=xe.useState(null),[Bt,kt]=xe.useState(!1),ft=xe.useRef(null);xe.useEffect(()=>()=>{ne.current&&ne.current.getTracks().forEach(pt=>pt.stop())},[]),xe.useEffect(()=>(X&&ce.current&&(q.current&&q.current.destroy(),q.current=new Cropper(ce.current,{viewMode:1,dragMode:"move",autoCropArea:.9,restore:!1,guides:!0,center:!0,highlight:!1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1})),()=>{q.current&&(q.current.destroy(),q.current=null)}),[X]);const Ot=async()=>{Y(!0);try{const pt=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280}},audio:!1});ne.current=pt,De.current&&(De.current.srcObject=pt,De.current.play())}catch{Y(!1),alert("  ")}},jt=()=>{ne.current&&ne.current.getTracks().forEach(pt=>pt.stop()),Y(!1)},mt=()=>{var pt;if(De.current){const yt=document.createElement("canvas");yt.width=De.current.videoWidth,yt.height=De.current.videoHeight,(pt=yt.getContext("2d"))==null||pt.drawImage(De.current,0,0),G(yt.toDataURL("image/jpeg",.9)),jt()}},At=pt=>{const yt=pt.target.files;if(yt&&yt.length>0){const _e=[];Array.from(yt).forEach(Nt=>{_e.push(new Promise(Re=>{const Dt=new FileReader;Dt.onloadend=()=>Re(Dt.result),Dt.readAsDataURL(Nt)}))}),Promise.all(_e).then(Nt=>{G(Nt[0]),we(Nt.slice(1))})}pt.target.value=""},er=()=>{if(q.current){const yt=q.current.getCroppedCanvas({maxWidth:1024}).toDataURL("image/jpeg",.8);ge(_e=>[..._e,yt]),de.length>0?(G(de[0]),we(_e=>_e.slice(1))):(G(null),d(!0))}},Nr=pt=>{const yt=pt.split(`
`),_e=[];return yt.forEach(Nt=>{const Re=Nt.trim();if(!Re||Re.length<2)return;const Dt=Re.match(/\d+(?:\.\d+)?/g);if(Dt&&Dt.length>0){const rr=parseFloat(Dt[0]);let et=Re.replace(Dt[0],"").replace(/[^\w\u0600-\u06FF\s]/g,"").trim();et&&et.length>1&&_e.push({id:`local-${Date.now()}-${Math.random()}`,productName:et,price:0,count:rr||1,total:0,isManual:!0})}else Re.length>3&&_e.push({id:`local-${Date.now()}-${Math.random()}`,productName:Re.replace(/[^\w\u0600-\u06FF\s]/g,"").trim(),price:0,count:1,total:0,isManual:!0})}),_e},Ue=async()=>{if(Ie.length!==0){O(!0);try{const pt=await y6("ara+fra");let yt=[];for(const _e of Ie){const{data:{text:Nt}}=await pt.recognize(_e),Re=Nr(Nt);yt=[...yt,...Re]}await pt.terminate(),yt.length>0?(re(_e=>[..._e,...yt]),navigator.vibrate&&navigator.vibrate([100,50,100])):alert("       .       .")}catch(pt){console.error(pt),alert("    .    .")}finally{O(!1)}}},It=(pt,yt)=>{re(_e=>_e.map(Nt=>{if(Nt.id===pt){const Re={...Nt,...yt};return{...Re,total:(Re.price||0)*(Re.count||0)}}return Nt}))},Lt=xe.useMemo(()=>r.filter(pt=>pt.customerName.toLowerCase().includes(m.toLowerCase())),[r,m]),Zt=xe.useMemo(()=>te.length>0?te.reduce((pt,yt)=>pt+yt.total,0):parseFloat(z)||0,[te,z]),cr=()=>{V(""),Q(""),re([]),ge([]),M(""),k(null)},hr=()=>{var yt;if(!U)return;const pt={id:F||`QT-${Date.now()}`,customerName:U,customerPhone:K,amount:Zt,date:new Date().toISOString().split("T")[0],createdAt:F&&((yt=r.find(_e=>_e.id===F))==null?void 0:yt.createdAt)||Date.now(),items:te,image:Ie.length>0?Ie[0]:void 0,images:Ie,creatorName:t.name};F?i(pt):n(pt),d(!1),cr()},Ht=pt=>new Intl.NumberFormat("ar-MA",{style:"decimal",minimumFractionDigits:2}).format(pt),mr=async()=>{if(!(!b||!ft.current)){kt(!0);try{(await Uo(ft.current,{scale:3,backgroundColor:"#ffffff",useCORS:!0,width:600})).toBlob(async yt=>{if(!yt){kt(!1);return}try{const _e=new ClipboardItem({"image/png":yt});await navigator.clipboard.write([_e]),window.open("https://wa.me/","_blank")}catch{window.open("https://wa.me/","_blank")}finally{kt(!1)}},"image/png",1)}catch{kt(!1)}}};return u.jsxs("div",{className:"w-full min-h-screen bg-[#0c0c0c] text-white flex flex-col overflow-hidden relative font-['Tajawal']",children:[u.jsx("input",{type:"file",ref:oe,accept:"image/*",multiple:!0,className:"hidden",onChange:At}),u.jsxs("div",{ref:ft,style:{position:"fixed",top:0,left:-9999,width:"600px",padding:"40px",backgroundColor:"white",color:"black",direction:"rtl",zIndex:-1},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderBottom:"3px solid #f59e0b",paddingBottom:"20px",marginBottom:"30px"},children:[u.jsxs("div",{children:[o.businessLogo&&u.jsx("img",{src:o.businessLogo,alt:"Logo",style:{maxWidth:"80px",marginBottom:"10px"}}),u.jsx("h3",{style:{fontSize:"24px",fontWeight:"900",color:"#f59e0b",margin:0},children:o.businessName}),u.jsx("p",{style:{fontSize:"14px",color:"#666",margin:"5px 0 0 0"},children:o.userName})]}),u.jsxs("div",{style:{textAlign:"left"},children:[u.jsx("h1",{style:{fontSize:"32px",fontWeight:"900",margin:0},children:" "}),u.jsxs("p",{style:{fontSize:"14px",color:"#666"},children:[": ",u.jsx("span",{style:{fontWeight:"bold",color:"#000"},children:b==null?void 0:b.id})]}),u.jsxs("p",{style:{fontSize:"14px",color:"#666"},children:[": ",u.jsx("span",{style:{fontWeight:"bold",color:"#000"},children:b==null?void 0:b.date})]})]})]}),u.jsxs("div",{style:{backgroundColor:"#fffbeb",border:"1px solid #fef3c7",padding:"20px",borderRadius:"15px",marginBottom:"30px"},children:[u.jsx("div",{style:{fontSize:"12px",color:"#92400e",fontWeight:"bold"},children:"  ():"}),u.jsx("div",{style:{fontSize:"20px",fontWeight:"900",marginTop:"5px"},children:b==null?void 0:b.customerName})]}),b!=null&&b.items&&b.items.length>0?u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"30px"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{borderBottom:"2px solid #000"},children:[u.jsx("th",{style:{textAlign:"right",padding:"15px",fontSize:"16px"},children:""}),u.jsx("th",{style:{textAlign:"center",padding:"15px",fontSize:"16px"},children:""}),u.jsx("th",{style:{textAlign:"center",padding:"15px",fontSize:"16px"},children:""}),u.jsx("th",{style:{textAlign:"left",padding:"15px",fontSize:"16px"},children:""})]})}),u.jsx("tbody",{children:b.items.map((pt,yt)=>u.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[u.jsx("td",{style:{padding:"15px",fontSize:"15px",fontWeight:"bold"},children:pt.productName}),u.jsx("td",{style:{padding:"15px",textAlign:"center",fontSize:"15px"},children:pt.count}),u.jsx("td",{style:{padding:"15px",textAlign:"center",fontSize:"15px"},children:Ht(pt.price)}),u.jsx("td",{style:{padding:"15px",textAlign:"left",fontWeight:"900",fontSize:"15px"},children:Ht(pt.total)})]},yt))})]}):u.jsx("div",{style:{textAlign:"center",padding:"40px",border:"2px dashed #ddd",borderRadius:"20px",marginBottom:"30px",color:"#999"},children:"  "}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#333",color:"white",padding:"25px",borderRadius:"15px"},children:[u.jsx("span",{style:{fontSize:"18px",fontWeight:"bold"},children:" :"}),u.jsxs("span",{style:{fontSize:"28px",fontWeight:"900"},children:[b==null?void 0:b.amount.toFixed(2)," ."]})]}),u.jsxs("div",{style:{textAlign:"center",marginTop:"40px",fontSize:"12px",color:"#888",borderTop:"1px solid #eee",paddingTop:"20px"},children:[u.jsx("p",{style:{fontWeight:"bold",color:"#000"},children:"     7   "}),u.jsx("p",{children:o.signatureName})]})]}),u.jsxs("div",{className:"px-6 pt-8 pb-4 flex justify-between items-center bg-[#0c0c0c] z-20 border-b border-gray-800",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:" "}),u.jsx("span",{className:"text-[10px] text-amber-500 font-bold",children:"  "})]}),u.jsx("button",{onClick:e,className:"p-2.5 bg-[#1a1a1a] rounded-xl border border-gray-800 text-gray-400 hover:text-white transition-colors active:scale-90 transition-all",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})})]}),u.jsx("div",{className:"px-6 py-4",children:u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"text",placeholder:"  ...",className:"w-full bg-[#111111] border border-gray-800 rounded-2xl py-4 pr-10 pl-4 text-white focus:border-amber-500 outline-none transition-all text-right placeholder:text-gray-600 font-bold",value:m,onChange:pt=>C(pt.target.value)}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]})})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto px-4 space-y-3 pb-36",children:Lt.length>0?Lt.map(pt=>u.jsxs("div",{onClick:()=>I(pt),className:"bg-[#111111] border border-gray-800/40 p-5 rounded-[2rem] flex justify-between items-center active:scale-[0.98] cursor-pointer",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 bg-amber-500/10 rounded-xl flex items-center justify-center text-amber-500 overflow-hidden",children:pt.image?u.jsx("img",{src:pt.image,className:"w-full h-full object-cover"}):u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u.jsx("path",{d:"M14 2v6h6"})]})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"text-sm font-black text-white",children:pt.customerName}),u.jsxs("p",{className:"text-[10px] text-gray-500",children:[pt.date," - ",pt.items.length||""," "]})]})]}),u.jsx("div",{className:"text-left",children:u.jsxs("span",{className:"text-sm font-black text-amber-500",children:[Ht(pt.amount)," ."]})})]},pt.id)):u.jsx("div",{className:"text-center py-20 text-gray-600 font-bold",children:"   "})}),u.jsxs("div",{className:"fixed bottom-6 left-6 right-6 z-30 flex gap-4",children:[u.jsxs("button",{onClick:()=>{var pt;return(pt=oe.current)==null?void 0:pt.click()},className:"flex-1 bg-amber-600 hover:bg-amber-500 text-white py-4 rounded-3xl font-black shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 border-4 border-[#0c0c0c]",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),u.jsx("span",{children:" "})]}),u.jsxs("button",{onClick:()=>{cr(),d(!0)},className:"flex-1 bg-[#1a1a1a] text-gray-200 py-4 rounded-3xl font-black shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 border border-gray-700",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),u.jsx("span",{children:" "})]})]}),b&&u.jsxs("div",{className:"fixed inset-0 z-[150] bg-[#0c0c0c] flex flex-col animate-in slide-in-from-bottom duration-400",children:[u.jsxs("div",{className:"px-6 pt-10 pb-6 flex justify-between items-center border-b border-gray-800/50",children:[u.jsx("button",{onClick:()=>I(null),className:"p-3 bg-[#1a1a1a] rounded-2xl border border-gray-800 text-gray-400 active:scale-90 transition-all",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})}),u.jsx("h2",{className:"text-xl font-bold",children:" "}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{k(b.id),V(b.customerName),Q(b.customerPhone||""),re(b.items),ge(b.images||[]),M(b.amount.toString()),I(null),d(!0)},className:"p-3 bg-amber-500/10 rounded-2xl border border-amber-500/20 text-amber-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),u.jsx("button",{onClick:()=>st(b.id),className:"p-3 bg-red-500/10 rounded-2xl border border-red-500/20 text-red-500",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"})})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-8 space-y-6",children:[u.jsx("div",{className:"text-center",children:u.jsx("h3",{className:"text-2xl font-black",children:b.customerName})}),u.jsxs("div",{className:"bg-[#1a1a1a] p-5 rounded-2xl border border-gray-800 text-center",children:[u.jsx("p",{className:"text-xs text-gray-400",children:" "}),u.jsxs("h3",{className:"text-3xl font-black text-white",children:[Ht(b.amount)," ."]})]})]}),u.jsxs("div",{className:"p-6 bg-[#0c0c0c] border-t border-gray-800 pb-10 flex gap-3",children:[u.jsx("button",{onClick:mr,disabled:Bt,className:"flex-1 bg-[#25D366] text-white py-4 rounded-2xl font-black text-lg shadow-xl active:scale-95 flex items-center justify-center gap-2",children:Bt?" ...":"  "}),u.jsx("button",{onClick:()=>I(null),className:"px-8 bg-[#1a1a1a] text-gray-400 py-4 rounded-2xl font-bold active:scale-95",children:""})]})]}),h&&u.jsx("div",{className:"fixed inset-0 z-[500] bg-black/95 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 overflow-y-auto max-h-[90vh] relative",children:[P&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-black/80 flex flex-col items-center justify-center rounded-[2.5rem] p-6 text-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),u.jsx("h3",{className:"text-xl font-black text-white",children:"  ..."}),u.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"     "})]}),u.jsx("h2",{className:"text-xl font-black text-center",children:F?" ":" "}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex gap-2 items-center",children:[u.jsxs("div",{className:"flex-1 flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:[Ie.map((pt,yt)=>u.jsxs("div",{className:"relative w-24 h-24 flex-shrink-0 bg-black rounded-xl overflow-hidden border border-gray-800",children:[u.jsx("img",{src:pt,className:"w-full h-full object-cover"}),u.jsx("button",{onClick:()=>ge(_e=>_e.filter((Nt,Re)=>Re!==yt)),className:"absolute top-1 right-1 bg-red-600 rounded-full w-5 h-5 flex items-center justify-center text-[10px] font-black",children:""})]},yt)),u.jsxs("button",{onClick:()=>Ot(),className:"w-24 h-24 flex-shrink-0 bg-gray-800 rounded-xl border border-dashed border-gray-600 flex flex-col items-center justify-center gap-1 text-gray-400 active:scale-95 transition-transform",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),u.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),u.jsx("span",{className:"text-[8px] font-bold",children:" "})]})]}),Ie.length>0&&u.jsxs("button",{onClick:Ue,disabled:P,className:"w-14 h-24 bg-amber-500/20 border border-amber-500/40 rounded-xl flex flex-col items-center justify-center gap-2 text-amber-500 active:scale-95 transition-all",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M2 12c0 5.52 4.48 10 10 10s10-4.48 10-10S17.52 2 12 2 2 6.48 2 12z"}),u.jsx("path",{d:"M12 7v5l3 3"})]}),u.jsx("span",{className:"text-[8px] font-black",children:" "})]})]}),u.jsx("input",{type:"text",placeholder:" ",className:"w-full bg-black border border-gray-800 rounded-xl py-3 px-4 text-white text-right font-bold",value:U,onChange:pt=>V(pt.target.value)}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx("input",{type:"tel",placeholder:" ",className:"w-full bg-black border border-gray-800 rounded-xl py-3 px-4 text-white text-right text-sm",value:K,onChange:pt=>Q(pt.target.value)}),u.jsx("input",{type:"number",placeholder:" ()",className:"w-full bg-black border border-gray-800 rounded-xl py-3 px-4 text-amber-500 text-center font-black",value:z,onChange:pt=>M(pt.target.value)})]}),u.jsx("div",{className:"max-h-[220px] overflow-y-auto space-y-2 bg-black/40 p-2 rounded-2xl border border-gray-800/50",children:te.length>0?te.map(pt=>u.jsxs("div",{className:"bg-[#1a1a1a] p-3 rounded-xl border border-gray-800 flex flex-col gap-2",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("button",{onClick:()=>re(yt=>yt.filter(_e=>_e.id!==pt.id)),className:"text-red-500/50 hover:text-red-500 p-1",children:""}),u.jsx("input",{type:"text",className:"flex-1 bg-transparent text-right font-bold text-sm text-white outline-none",value:pt.productName,onChange:yt=>It(pt.id,{productName:yt.target.value})})]}),u.jsxs("div",{className:"flex gap-2 items-center",children:[u.jsxs("div",{className:"flex-1 flex items-center bg-black/50 rounded-lg border border-gray-800 px-2 h-9",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold ml-2",children:":"}),u.jsx("input",{type:"number",placeholder:"0.00",className:"w-full bg-transparent text-center font-black text-xs text-amber-500 outline-none",value:pt.price||"",onChange:yt=>It(pt.id,{price:parseFloat(yt.target.value)||0})})]}),u.jsxs("div",{className:"w-20 flex items-center bg-black/50 rounded-lg border border-gray-800 px-2 h-9",children:[u.jsx("span",{className:"text-[9px] text-gray-500 font-bold ml-2",children:":"}),u.jsx("input",{type:"number",className:"w-full bg-transparent text-center font-black text-xs text-white outline-none",value:pt.count||"",onChange:yt=>It(pt.id,{count:parseFloat(yt.target.value)||0})})]})]})]},pt.id)):u.jsx("div",{className:"py-8 text-center text-gray-600 italic text-xs",children:"    "})}),u.jsxs("button",{onClick:()=>Ee(!0),className:"w-full bg-blue-500/10 text-blue-500 border border-blue-500/20 py-3 rounded-xl text-xs font-black active:scale-95 transition-all flex items-center justify-center gap-2",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"  "]})]}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsx("button",{onClick:hr,disabled:!U||te.length===0&&Ie.length===0,className:"w-full bg-amber-600 py-4 rounded-2xl text-white font-black shadow-lg active:scale-95 transition-all",children:"  "}),u.jsx("button",{onClick:()=>{d(!1),cr()},className:"w-full bg-[#1a1a1a] text-gray-500 py-3 rounded-2xl font-bold active:scale-95",children:""})]})]})}),ae&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 flex items-center justify-center p-6 animate-in fade-in",children:u.jsxs("div",{className:"w-full max-w-xs bg-[#161616] p-6 rounded-3xl space-y-4 border border-gray-800 shadow-2xl",children:[u.jsx("h3",{className:"text-center font-black",children:"  "}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",placeholder:" ...",className:"w-full bg-black border border-gray-800 p-3 rounded-xl text-right text-sm font-bold text-white outline-none",value:Ke,onChange:pt=>Fe(pt.target.value)}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx("input",{type:"number",placeholder:"...",className:"w-full bg-black border border-gray-800 p-3 rounded-xl text-center text-sm font-black text-amber-500 outline-none",value:He,onChange:pt=>tt(pt.target.value)}),u.jsx("input",{type:"number",placeholder:"...",className:"w-full bg-black border border-gray-800 p-3 rounded-xl text-center text-sm font-black text-white outline-none",value:Tt,onChange:pt=>ve(pt.target.value)})]})]}),u.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[u.jsx("button",{onClick:()=>{Ke&&(re(pt=>[...pt,{id:`m-${Date.now()}`,productName:Ke,price:parseFloat(He)||0,count:parseFloat(Tt)||0,total:(parseFloat(He)||0)*(parseFloat(Tt)||0),isManual:!0}]),Fe(""),tt(""),ve(""),Ee(!1))},className:"w-full bg-blue-600 py-3.5 rounded-xl font-black active:scale-95 transition-all shadow-lg",children:" "}),u.jsx("button",{onClick:()=>Ee(!1),className:"w-full text-gray-500 text-sm font-bold py-2",children:""})]})]})}),ee&&u.jsxs("div",{className:"fixed inset-0 z-[600] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300",children:[u.jsx("video",{ref:De,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),u.jsxs("div",{className:"absolute bottom-10 flex gap-10",children:[u.jsx("button",{onClick:jt,className:"w-14 h-14 bg-white/10 rounded-full flex items-center justify-center text-white active:scale-90 transition-all",children:""}),u.jsx("button",{onClick:mt,className:"w-20 h-20 bg-white rounded-full flex items-center justify-center active:scale-90 transition-all border-[6px] border-white/20",children:u.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-black"})})]})]}),X&&u.jsxs("div",{className:"fixed inset-0 z-[600] bg-black flex items-center justify-center animate-in fade-in duration-300",children:[u.jsx("div",{className:"flex-1 w-full bg-[#111111] flex items-center justify-center overflow-hidden",children:u.jsx("img",{ref:ce,src:X,className:"max-w-full max-h-full object-contain"})}),u.jsxs("div",{className:"p-6 bg-black border-t border-gray-800 flex gap-4 w-full",children:[u.jsx("button",{onClick:er,className:"flex-1 bg-amber-600 text-white py-4 rounded-2xl font-black text-lg active:scale-95",children:" "}),u.jsx("button",{onClick:()=>G(null),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95",children:""})]})]}),Oe&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"       "})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{s(Oe),st(null),I(null)},className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:" "}),u.jsx("button",{onClick:()=>st(null),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})})]})},Ite={robinet:{ar:" ()",fr:"Robinet"},:{ar:"",fr:"Robinet"},sarout:{ar:" / ",fr:"Cl / Serrure"},:{ar:" / ",fr:"Cl / Serrure"},pince:{ar:" ()",fr:"Pince"},:{ar:"",fr:"Pince"},tournevis:{ar:"  ()",fr:"Tournevis"},:{ar:" ",fr:"Tournevis"},marteau:{ar:" ()",fr:"Marteau"},:{ar:"",fr:"Marteau"},peinture:{ar:" / ",fr:"Peinture"},:{ar:" / ",fr:"Peinture"},pinceau:{ar:"  ()",fr:"Pinceau"},:{ar:" ",fr:"Pinceau"},silicone:{ar:"",fr:"Silicone"},colle:{ar:" /  ()",fr:"Colle"},:{ar:" / ",fr:"Colle"},ampoule:{ar:" ()",fr:"Ampoule"},:{ar:"",fr:"Ampoule"},prise:{ar:"  ()",fr:"Prise lectrique"},:{ar:" ",fr:"Prise lectrique"},cable:{ar:" /  ",fr:"Cble lectrique"},tuyau:{ar:" ()",fr:"Tuyau / Tube"},:{ar:"  ",fr:"Tuyau PVC"},"chauffe-eau":{ar:"  ()",fr:"Chauffe-eau"},:{ar:" ",fr:"Chauffe-eau"},cadenas:{ar:" ( )",fr:"Cadenas"},vis:{ar:" ()",fr:"Vis"},:{ar:"",fr:"Vis"},boulon:{ar:" ()",fr:"Boulon"},:{ar:"",fr:"Boulon"},ecrou:{ar:" ()",fr:"crou"},:{ar:"",fr:"crou"},cheville:{ar:" ()",fr:"Cheville"},:{ar:" ",fr:"Chevilles"},perceuse:{ar:" ()",fr:"Perceuse"},:{ar:"",fr:"Perceuse"},meuleuse:{ar:"  ()",fr:"Meuleuse"},:{ar:" ",fr:"Meuleuse"},scie:{ar:"",fr:"Scie"},ciment:{ar:" ()",fr:"Ciment"},:{ar:"",fr:"Ciment"},platre:{ar:" ()",fr:"Pltre"},:{ar:"",fr:"Pltre"}},lk=t=>{const e=["","","","","","","","","",""],r=[""," "," "," "," "," "," "," "," "," "],n=["","","","","","","","","",""],i=["","","","","","","","","",""];if(t===0)return"";let s="";if(t>=1e3){const o=Math.floor(t/1e3);o===1?s+=" ":o===2?s+=" ":o<=10?s+=e[o]+"  ":s+=lk(o)+"  ",t%=1e3,t>0&&(s+=" ")}if(t>=100&&(s+=i[Math.floor(t/100)]+" ",t%=100,t>0&&(s+=" ")),t>=20){const o=t%10;o>0&&(s+=e[o]+"  "),s+=n[Math.floor(t/10)]}else t>=10?s+=r[t-10]:t>0&&(s+=e[t]);return s.trim()},Ak=t=>{const e=["","un","deux","trois","quatre","cinq","six","sept","huit","neuf"],r=["dix","onze","douze","treize","quatorze","quinze","seize","dix-sept","dix-huit","dix-neuf"],n=["","","vingt","trente","quarante","cinquante","soixante","soixante-dix","quatre-vingt","quatre-vingt-dix"];if(t===0)return"zro";let i="";if(t>=1e3){const s=Math.floor(t/1e3);s>1&&(i+=Ak(s)+" "),i+="mille ",t%=1e3}if(t>=100){const s=Math.floor(t/100);s>1&&(i+=e[s]+" "),i+="cent ",t%=100}if(t>=20){i+=n[Math.floor(t/10)];const s=t%10;s>0&&(i+="-"+e[s])}else t>=10?i+=r[t-10]:t>0&&(i+=e[t]);return i.trim()},Nte=({onNavigateToHome:t})=>{const[e,r]=xe.useState(""),[n,i]=xe.useState(null),[s,o]=xe.useState(!1),[c,h]=xe.useState(!1),d=xe.useRef(null);xe.useEffect(()=>{const I=window.SpeechRecognition||window.webkitSpeechRecognition;I&&(d.current=new I,d.current.continuous=!1,d.current.lang="ar-MA",d.current.interimResults=!1,d.current.onresult=F=>{const k=F.results[0][0].transcript;r(k),C(k)},d.current.onend=()=>h(!1),d.current.onerror=()=>h(!1))},[]);const m=()=>{var I,F;c?(I=d.current)==null||I.stop():(i(null),(F=d.current)==null||F.start(),h(!0),navigator.vibrate&&navigator.vibrate(50))},C=(I=e)=>{const F=I.trim().toLowerCase();F&&(o(!0),setTimeout(()=>{const k=parseFloat(F);if(!isNaN(k))i({ar:lk(Math.floor(k)),fr:Ak(Math.floor(k))});else{const U=Ite[F];i(U||{ar:"     ",fr:"Terme non trouv dans le dictionnaire"})}o(!1)},300))},b=I=>{navigator.clipboard.writeText(I),navigator.vibrate&&navigator.vibrate(30)};return u.jsxs("div",{className:"w-full min-h-screen bg-[#0c0c0c] text-white flex flex-col font-['Tajawal']",children:[u.jsxs("div",{className:"px-6 pt-10 pb-6 flex justify-between items-center border-b border-gray-800/50 bg-[#0c0c0c] sticky top-0 z-30",children:[u.jsx("button",{onClick:t,className:"p-3 bg-[#1a1a1a] rounded-2xl border border-gray-800 text-gray-400 active:scale-90 transition-all shadow-lg",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-xl font-black",children:" "}),u.jsx("span",{className:"text-[9px] text-[#57b385] font-bold uppercase tracking-widest",children:"Pure Number Translator"})]}),u.jsx("div",{className:"w-10"})]}),u.jsxs("div",{className:"flex-1 p-6 space-y-6 overflow-y-auto pb-32 custom-scrollbar",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"text-[10px] text-gray-500 font-bold mr-2 uppercase tracking-widest flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"    "]}),u.jsxs("div",{className:"relative group",children:[u.jsx("textarea",{placeholder:": 5400",className:"w-full bg-[#111111] border border-gray-800 rounded-[2rem] p-6 pr-6 pl-14 text-white focus:border-indigo-500 outline-none transition-all text-right font-bold text-lg min-h-[100px] resize-none shadow-inner",value:e,onChange:I=>r(I.target.value)}),u.jsx("button",{onClick:m,className:`absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-2xl flex items-center justify-center transition-all active:scale-90 ${c?"bg-red-500 animate-pulse text-white":"bg-gray-800 text-gray-400 border border-gray-700"}`,children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),u.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),u.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"})]})})]}),u.jsx("button",{onClick:()=>C(),disabled:!e.trim()||s,className:`w-full py-5 rounded-[1.8rem] font-black text-lg shadow-xl transition-all active:scale-95 flex items-center justify-center gap-3 ${!e.trim()||s?"bg-gray-800 text-gray-600":"bg-indigo-600 hover:bg-indigo-500 text-white"}`,children:s?" ...":""})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[u.jsxs("div",{className:`bg-[#111111] border rounded-[2rem] p-6 relative ${n?"border-[#57b385]/40 shadow-lg":"border-gray-800 opacity-50"}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("span",{className:"text-[10px] bg-[#57b385]/10 text-[#57b385] px-3 py-1 rounded-full font-black",children:""}),n&&u.jsx("button",{onClick:()=>b(n.ar),className:"p-2 bg-black/40 rounded-xl text-gray-500 border border-gray-800 active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),u.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})})]}),u.jsx("div",{className:"min-h-[40px] text-xl font-black text-right text-white leading-relaxed",children:n?n.ar:"..."})]}),u.jsxs("div",{className:`bg-[#111111] border rounded-[2rem] p-6 relative ${n?"border-blue-500/40 shadow-lg":"border-gray-800 opacity-50"}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("span",{className:"text-[10px] bg-blue-500/10 text-blue-400 px-3 py-1 rounded-full font-black",children:""}),n&&u.jsx("button",{onClick:()=>b(n.fr),className:"p-2 bg-black/40 rounded-xl text-gray-500 border border-gray-800 active:scale-90",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),u.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})})]}),u.jsx("div",{className:"min-h-[40px] text-xl font-black text-left text-white leading-relaxed font-sans",children:n?n.fr:"..."})]})]})]})]})},Rte=({currentUser:t,onNavigateToSettings:e,trashItems:r,onRestore:n,onPermanentDelete:i,onEmptyTrash:s,nextCleanupDate:o})=>{var Q,te;const[c,h]=xe.useState("invoice"),[d,m]=xe.useState(""),[C,b]=xe.useState(!1),[I,F]=xe.useState(null),k=xe.useMemo(()=>t.role==="admin"||t.permissions.isManager,[t]),U=xe.useMemo(()=>{let re=k?r:r.filter(P=>P.deletedBy===t.name),z=[];switch(c){case"invoice":z=re.filter(P=>P.type==="invoice");break;case"debt":z=re.filter(P=>P.type==="supplier-invoice");break;case"check":z=re.filter(P=>P.type==="check");break;case"order":z=re.filter(P=>P.type==="special-order"||P.type==="client-request");break;case"customer":z=re.filter(P=>P.type==="customer"||P.type==="general-payment");break;case"product":z=re.filter(P=>P.type==="product");break;default:z=[]}if(!d.trim())return z;const M=d.toLowerCase();return z.filter(P=>{var ee,Y,X,G,Ie,ge,de,we,Ge,be,De;if(P.deletedBy.toLowerCase().includes(M))return!0;const O=P.data;return P.type==="invoice"?((ee=O.name)==null?void 0:ee.toLowerCase().includes(M))||((Y=O.id)==null?void 0:Y.toLowerCase().includes(M)):P.type==="supplier-invoice"?(X=O.supplierName)==null?void 0:X.toLowerCase().includes(M):P.type==="product"?((G=O.name)==null?void 0:G.toLowerCase().includes(M))||((Ie=O.code)==null?void 0:Ie.toLowerCase().includes(M)):P.type==="check"?((ge=O.name)==null?void 0:ge.toLowerCase().includes(M))||((de=O.serialNumber)==null?void 0:de.toLowerCase().includes(M)):P.type==="customer"?(we=O.name)==null?void 0:we.toLowerCase().includes(M):P.type==="general-payment"?(Ge=O.customerName)==null?void 0:Ge.toLowerCase().includes(M):P.type==="client-request"?(be=O.productName)==null?void 0:be.toLowerCase().includes(M):P.type==="special-order"?(De=O.items)==null?void 0:De.some(ne=>ne.name.toLowerCase().includes(M)):!1})},[r,c,d,t.name,k]),V=re=>{const z=Date.now()-re,M=Math.floor(z/6e4);if(M<1)return"";if(M<60)return` ${M} `;const P=Math.floor(M/60);return P<24?` ${P} `:new Date(re).toLocaleDateString("ar-MA")},K=re=>new Intl.NumberFormat("ar-MA",{style:"decimal",minimumFractionDigits:2}).format(re);return u.jsxs("div",{className:"w-full min-h-screen bg-[#0c0c0c] text-white flex flex-col overflow-hidden font-['Tajawal']",children:[u.jsxs("div",{className:"px-6 pt-10 pb-6 flex justify-between items-center border-b border-gray-800/50 bg-[#0c0c0c] z-20",children:[u.jsx("button",{onClick:e,className:"p-3 bg-[#1a1a1a] rounded-2xl border border-gray-800 text-gray-400 hover:text-white transition-all active:scale-90",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"m15 18-6-6 6-6"})})}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("h1",{className:"text-xl font-black",children:" "}),u.jsx("span",{className:"text-[10px] text-red-500 font-bold uppercase tracking-widest",children:k?"   ":"  "})]}),k?u.jsx("button",{onClick:()=>b(!0),disabled:r.length===0,className:`p-3 rounded-2xl border transition-all active:scale-90 ${r.length===0?"bg-gray-800/20 text-gray-700 border-gray-800/50":"bg-red-500/10 border-red-500/20 text-red-500 hover:bg-red-500 hover:text-white"}`,title:"  ",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})}):u.jsx("div",{className:"w-10"})]}),o&&u.jsxs("div",{className:"bg-red-500/5 border-b border-red-500/10 px-6 py-2 flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),u.jsxs("span",{className:"text-[9px] font-bold text-gray-400",children:["    : ",u.jsx("span",{className:"text-red-400 font-black",children:new Date(o).toLocaleDateString("ar-MA")})]})]}),u.jsxs("div",{className:"px-4 py-4 flex gap-2 overflow-x-auto no-scrollbar bg-black/20 border-b border-gray-800/20",children:[u.jsx(Su,{active:c==="invoice",label:"",count:U.filter(re=>re.type==="invoice").length,onClick:()=>h("invoice")}),u.jsx(Su,{active:c==="debt",label:"",count:U.filter(re=>re.type==="supplier-invoice").length,onClick:()=>h("debt")}),u.jsx(Su,{active:c==="check",label:"",count:U.filter(re=>re.type==="check").length,onClick:()=>h("check")}),u.jsx(Su,{active:c==="order",label:"",count:U.filter(re=>re.type==="special-order"||re.type==="client-request").length,onClick:()=>h("order")}),u.jsx(Su,{active:c==="customer",label:"",count:U.filter(re=>re.type==="customer"||re.type==="general-payment").length,onClick:()=>h("customer")}),u.jsx(Su,{active:c==="product",label:"",count:U.filter(re=>re.type==="product").length,onClick:()=>h("product")})]}),u.jsx("div",{className:"px-6 py-4",children:u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"text",placeholder:k?"     ...":"  ...",className:"w-full bg-[#111111] border border-gray-800 rounded-2xl py-3.5 pr-12 pl-4 text-white focus:border-red-500 outline-none transition-all text-right placeholder:text-gray-600 font-medium text-sm shadow-inner",value:d,onChange:re=>m(re.target.value)}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-red-500 transition-colors",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]})}),d&&u.jsx("button",{onClick:()=>m(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto px-6 space-y-4 pb-32 custom-scrollbar",children:U.length>0?U.map(re=>u.jsxs("div",{onClick:()=>F(re),className:"bg-[#111111] border border-gray-800/40 p-5 rounded-[2rem] flex items-center justify-between group animate-in slide-in-from-bottom-2 duration-300 cursor-pointer active:scale-[0.98] hover:border-gray-700 shadow-lg",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"w-12 h-12 bg-black/40 rounded-2xl flex items-center justify-center text-gray-500 shadow-inner",children:[re.type==="invoice"&&u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),re.type==="supplier-invoice"&&u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14c-.6.6-1 1.5-1 2.3v3.7c0 1.1.9 2 2 2h3.7c.9 0 1.7-.4 2.3-1L15.4 15"})}),re.type==="product"&&u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),u.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"})]}),re.type==="check"&&u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),u.jsx("line",{x1:"2",y1:"10",x2:"22",y2:"10"})]}),re.type==="customer"&&u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 6 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),(re.type==="client-request"||re.type==="special-order")&&u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"})}),re.type==="general-payment"&&u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M12 2v20"}),u.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"text-sm font-black text-white leading-tight",children:re.type==="invoice"?re.data.name:re.type==="supplier-invoice"?re.data.supplierName:re.type==="product"?re.data.name:re.type==="client-request"?re.data.productName:re.type==="special-order"?" ":re.type==="check"?`: ${re.data.name}`:re.type==="customer"?`: ${re.data.name}`:`: ${re.data.customerName}`}),u.jsxs("p",{className:"text-[10px] text-gray-500 font-bold mt-1",children:[": ",u.jsx("span",{className:"text-red-400 font-black",children:re.deletedBy})]})]})]}),u.jsxs("div",{className:"flex flex-col items-end gap-1",children:[u.jsx("span",{className:"text-[9px] text-gray-600 font-bold",children:V(re.deletedAt)}),u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{onClick:z=>{z.stopPropagation(),n(re)},className:"w-8 h-8 bg-[#57b385]/10 rounded-lg flex items-center justify-center text-[#57b385] active:scale-90 transition-all border border-[#57b385]/20",title:"",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"})]})})})]})]},re.id)):u.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-gray-600 opacity-30 gap-3",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"})]}),u.jsx("p",{className:"font-black text-lg",children:d?"   ":"  "})]})}),I&&u.jsx("div",{className:"fixed inset-0 z-[500] bg-black/95 backdrop-blur-xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-300 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"text-center space-y-3",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1a1a] rounded-2xl mx-auto flex items-center justify-center text-red-500 border border-red-500/20 shadow-xl",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"})]})}),u.jsx("h2",{className:"text-xl font-black text-white",children:" "}),u.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-2xl p-4 text-sm shadow-inner text-right",children:[u.jsxs("div",{className:"flex justify-between mb-1",children:[u.jsx("span",{className:"text-gray-500",children:"  :"}),u.jsx("span",{className:"text-red-400 font-black",children:I.deletedBy})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-500",children:" :"}),u.jsx("span",{className:"text-gray-300 font-bold",children:new Date(I.deletedAt).toLocaleString("ar-MA")})]})]})]}),u.jsxs("div",{className:"bg-black/40 rounded-2xl p-5 border border-gray-800 space-y-4 shadow-inner text-right",children:[I.type==="product"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:" "}),u.jsx("span",{className:"font-bold",children:I.data.name})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:""}),u.jsxs("span",{className:"font-bold text-[#57b385]",children:[K(I.data.price)," ."]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:""}),u.jsx("span",{className:"font-bold",children:I.data.stock})]})]}),(I.type==="invoice"||I.type==="supplier-invoice")&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:""}),u.jsx("span",{className:"font-bold",children:I.type==="invoice"?I.data.name:I.data.supplierName})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:" "}),u.jsxs("span",{className:"font-black text-red-500",children:[K(I.data.amount)," ."]})]}),I.type==="invoice"&&u.jsxs("div",{className:"border-t border-gray-800 pt-3 mt-3",children:[u.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-2",children:" :"}),u.jsx("div",{className:"space-y-1",children:(Q=I.data.items)==null?void 0:Q.map((re,z)=>u.jsxs("div",{className:"flex justify-between text-[11px] bg-black/20 p-2 rounded-lg",children:[u.jsx("span",{children:re.productName}),u.jsxs("span",{className:"text-gray-400",children:["x",re.count]})]},z))})]})]}),I.type==="check"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:""}),u.jsx("span",{className:"font-bold",children:I.data.name})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:""}),u.jsxs("span",{className:"font-black text-purple-400",children:[K(I.data.amount)," ."]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:" "}),u.jsxs("span",{className:"font-mono text-gray-300",children:["#",I.data.serialNumber]})]})]}),I.type==="customer"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:" "}),u.jsx("span",{className:"font-bold",children:I.data.name})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-400 text-xs",children:"   "}),u.jsx("span",{className:"font-bold",children:I.data.invoiceCount})]})]}),I.type==="special-order"&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-2",children:"  :"}),(te=I.data.items)==null?void 0:te.map((re,z)=>u.jsxs("div",{className:"flex justify-between text-sm bg-black/20 p-2 rounded-lg border border-gray-800",children:[u.jsx("span",{children:re.name}),u.jsx("span",{className:"font-black text-rose-500",children:re.quantity})]},z))]})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsxs("button",{onClick:()=>{n(I),F(null)},className:"w-full bg-[#57b385] py-4 rounded-2xl text-white font-black active:scale-95 transition-all flex items-center justify-center gap-2 shadow-lg shadow-green-900/20",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[u.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"})]})," "]}),u.jsx("button",{onClick:()=>{i(I.id),F(null)},className:"w-full bg-red-500/10 text-red-500 border border-red-500/20 py-3 rounded-2xl font-bold active:scale-95 transition-all",children:"  "}),u.jsx("button",{onClick:()=>F(null),className:"w-full bg-[#1a1a1a] text-gray-500 py-3 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})}),C&&u.jsx("div",{className:"fixed inset-0 z-[600] bg-black/95 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-sm bg-[#161616] rounded-[2.5rem] border border-gray-800 p-8 shadow-2xl space-y-6 animate-in zoom-in duration-200",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20 text-red-500",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-400",children:"         ."})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{s(),b(!1)},className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-4 rounded-2xl font-black shadow-lg active:scale-95 transition-all",children:"  "}),u.jsx("button",{onClick:()=>b(!1),className:"flex-1 bg-[#1a1a1a] text-gray-400 border border-gray-800 py-4 rounded-2xl font-bold active:scale-95 transition-all",children:""})]})]})})]})},Su=({active:t,label:e,count:r,onClick:n})=>u.jsxs("button",{onClick:n,className:`px-5 py-3 rounded-2xl border text-[11px] font-black transition-all flex items-center gap-2 active:scale-95 whitespace-nowrap ${t?"bg-white text-black border-white shadow-lg":"bg-white/5 text-gray-500 border-white/10 hover:border-white/20"}`,children:[e,u.jsx("span",{className:`px-1.5 py-0.5 rounded-lg text-[9px] ${t?"bg-black text-white":"bg-black/40 text-gray-600"}`,children:r})]});var ff={exports:{}},U2={},M2,Z4;function Fte(){if(Z4)return M2;Z4=1;function t(e,r){typeof r=="boolean"&&(r={forever:r}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=r||{},this._maxRetryTime=r&&r.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return M2=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var r=new Date().getTime();if(e&&r-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},n),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,r){this._fn=e,r&&(r.timeout&&(this._operationTimeout=r.timeout),r.cb&&(this._operationTimeoutCb=r.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},r=null,n=0,i=0;i<this._errors.length;i++){var s=this._errors[i],o=s.message,c=(e[o]||0)+1;e[o]=c,c>=n&&(r=s,n=c)}return r},M2}var $4;function kte(){return $4||($4=1,(function(t){var e=Fte();t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<n.retries;o++)s.push(this.createTimeout(o,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(o,n)),s.sort(function(c,h){return c-h}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var o=0;o<i.length;o++){var c=i[o],h=r[c];r[c]=(function(m){var C=t.operation(n),b=Array.prototype.slice.call(arguments,1),I=b.pop();b.push(function(F){C.retry(F)||(F&&(arguments[0]=C.mainError()),I.apply(this,arguments))}),C.attempt(function(){m.apply(r,b)})}).bind(r,h),r[c].options=n}}})(U2)),U2}var O2,eS;function Dte(){return eS||(eS=1,O2=kte()),O2}var tS;function Ute(){if(tS)return ff.exports;tS=1;const t=Dte(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class r extends Error{constructor(c){super(),c instanceof Error?(this.originalError=c,{message:c}=c):(this.originalError=new Error(c),this.originalError.stack=this.stack),this.name="AbortError",this.message=c}}const n=(o,c,h)=>{const d=h.retries-(c-1);return o.attemptNumber=c,o.retriesLeft=d,o},i=o=>e.includes(o),s=(o,c)=>new Promise((h,d)=>{c={onFailedAttempt:()=>{},retries:10,...c};const m=t.operation(c);m.attempt(async C=>{try{h(await o(C))}catch(b){if(!(b instanceof Error)){d(new TypeError(`Non-error was thrown: "${b}". You should only throw errors.`));return}if(b instanceof r)m.stop(),d(b.originalError);else if(b instanceof TypeError&&!i(b.message))m.stop(),d(b);else{n(b,C,c);try{await c.onFailedAttempt(b)}catch(I){d(I);return}m.retry(b)||d(m.mainError())}}})});return ff.exports=s,ff.exports.default=s,ff.exports.AbortError=r,ff.exports}var ck=Ute();const Mte=Av(ck);var Ote={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lte,Pte;function Qte(){return{geminiUrl:Lte,vertexUrl:Pte}}function Hte(t,e,r,n){var i,s;if(!(t!=null&&t.baseUrl)){const o=Qte();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:r:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fl{}function Qt(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(n,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function _(t,e,r){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const c=o.slice(0,-2);if(!(c in t))if(Array.isArray(r))t[c]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[c])){const h=t[c];if(Array.isArray(r))for(let d=0;d<h.length;d++){const m=h[d];_(m,e.slice(s+1),r[d])}else for(const d of h)_(d,e.slice(s+1),r)}return}else if(o.endsWith("[0]")){const c=o.slice(0,-3);c in t||(t[c]=[{}]);const h=t[c];_(h[0],e.slice(s+1),r);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const n=e[e.length-1],i=t[n];if(i!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===i)return;if(typeof i=="object"&&typeof r=="object"&&i!==null&&r!==null)Object.assign(i,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[n]=r}function E(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return r;const i=e[n];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(c=>E(c,e.slice(n+1),r)):r}else return r}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return r;throw n}}function jte(t,e){for(const[r,n]of Object.entries(e)){const i=r.split("."),s=n.split("."),o=new Set;let c=-1;for(let h=0;h<i.length;h++)if(i[h]==="*"){c=h;break}if(c!==-1&&s.length>c)for(let h=c;h<s.length;h++){const d=s[h];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&o.add(d)}qw(t,i,s,0,o)}}function qw(t,e,r,n,i){if(n>=e.length||typeof t!="object"||t===null)return;const s=e[n];if(s.endsWith("[]")){const o=s.slice(0,-2),c=t;if(o in c&&Array.isArray(c[o]))for(const h of c[o])qw(h,e,r,n+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,c=Object.keys(o).filter(d=>!d.startsWith("_")&&!i.has(d)),h={};for(const d of c)h[d]=o[d];for(const[d,m]of Object.entries(h)){const C=[];for(const b of r.slice(n))b==="*"?C.push(d):C.push(b);_(o,C,m)}for(const d of c)delete o[d]}}else{const o=t;s in o&&qw(o[s],e,r,n+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ky(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vte(t){const e={},r=E(t,["operationName"]);r!=null&&_(e,["operationName"],r);const n=E(t,["resourceName"]);return n!=null&&_(e,["_url","resourceName"],n),e}function Gte(t){const e={},r=E(t,["name"]);r!=null&&_(e,["name"],r);const n=E(t,["metadata"]);n!=null&&_(e,["metadata"],n);const i=E(t,["done"]);i!=null&&_(e,["done"],i);const s=E(t,["error"]);s!=null&&_(e,["error"],s);const o=E(t,["response","generateVideoResponse"]);return o!=null&&_(e,["response"],zte(o)),e}function Kte(t){const e={},r=E(t,["name"]);r!=null&&_(e,["name"],r);const n=E(t,["metadata"]);n!=null&&_(e,["metadata"],n);const i=E(t,["done"]);i!=null&&_(e,["done"],i);const s=E(t,["error"]);s!=null&&_(e,["error"],s);const o=E(t,["response"]);return o!=null&&_(e,["response"],Wte(o)),e}function zte(t){const e={},r=E(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>qte(o))),_(e,["generatedVideos"],s)}const n=E(t,["raiMediaFilteredCount"]);n!=null&&_(e,["raiMediaFilteredCount"],n);const i=E(t,["raiMediaFilteredReasons"]);return i!=null&&_(e,["raiMediaFilteredReasons"],i),e}function Wte(t){const e={},r=E(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Xte(o))),_(e,["generatedVideos"],s)}const n=E(t,["raiMediaFilteredCount"]);n!=null&&_(e,["raiMediaFilteredCount"],n);const i=E(t,["raiMediaFilteredReasons"]);return i!=null&&_(e,["raiMediaFilteredReasons"],i),e}function qte(t){const e={},r=E(t,["video"]);return r!=null&&_(e,["video"],tre(r)),e}function Xte(t){const e={},r=E(t,["_self"]);return r!=null&&_(e,["video"],rre(r)),e}function Yte(t){const e={},r=E(t,["operationName"]);return r!=null&&_(e,["_url","operationName"],r),e}function Jte(t){const e={},r=E(t,["operationName"]);return r!=null&&_(e,["_url","operationName"],r),e}function Zte(t){const e={},r=E(t,["name"]);r!=null&&_(e,["name"],r);const n=E(t,["metadata"]);n!=null&&_(e,["metadata"],n);const i=E(t,["done"]);i!=null&&_(e,["done"],i);const s=E(t,["error"]);s!=null&&_(e,["error"],s);const o=E(t,["response"]);return o!=null&&_(e,["response"],$te(o)),e}function $te(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["parent"]);n!=null&&_(e,["parent"],n);const i=E(t,["documentName"]);return i!=null&&_(e,["documentName"],i),e}function uk(t){const e={},r=E(t,["name"]);r!=null&&_(e,["name"],r);const n=E(t,["metadata"]);n!=null&&_(e,["metadata"],n);const i=E(t,["done"]);i!=null&&_(e,["done"],i);const s=E(t,["error"]);s!=null&&_(e,["error"],s);const o=E(t,["response"]);return o!=null&&_(e,["response"],ere(o)),e}function ere(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["parent"]);n!=null&&_(e,["parent"],n);const i=E(t,["documentName"]);return i!=null&&_(e,["documentName"],i),e}function tre(t){const e={},r=E(t,["uri"]);r!=null&&_(e,["uri"],r);const n=E(t,["encodedVideo"]);n!=null&&_(e,["videoBytes"],Ky(n));const i=E(t,["encoding"]);return i!=null&&_(e,["mimeType"],i),e}function rre(t){const e={},r=E(t,["gcsUri"]);r!=null&&_(e,["uri"],r);const n=E(t,["bytesBase64Encoded"]);n!=null&&_(e,["videoBytes"],Ky(n));const i=E(t,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rS;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(rS||(rS={}));var nS;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(nS||(nS={}));var iS;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(iS||(iS={}));var CA;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(CA||(CA={}));var sS;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(sS||(sS={}));var aS;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(aS||(aS={}));var oS;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(oS||(oS={}));var lS;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(lS||(lS={}));var AS;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(AS||(AS={}));var cS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cS||(cS={}));var uS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(uS||(uS={}));var fS;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(fS||(fS={}));var dS;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(dS||(dS={}));var hS;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(hS||(hS={}));var gS;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(gS||(gS={}));var pS;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(pS||(pS={}));var mS;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(mS||(mS={}));var xS;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xS||(xS={}));var wS;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(wS||(wS={}));var vS;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(vS||(vS={}));var yS;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(yS||(yS={}));var ep;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ep||(ep={}));var CS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(CS||(CS={}));var ES;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ES||(ES={}));var bS;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(bS||(bS={}));var Xw;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xw||(Xw={}));var _S;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(_S||(_S={}));var TS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(TS||(TS={}));var Yw;(function(t){t.COLLECTION="COLLECTION"})(Yw||(Yw={}));var BS;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(BS||(BS={}));var SS;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(SS||(SS={}));var tp;(function(t){t.PREDICT="PREDICT",t.EMBED_CONTENT="EMBED_CONTENT"})(tp||(tp={}));var IS;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(IS||(IS={}));var NS;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(NS||(NS={}));var RS;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(RS||(RS={}));var FS;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(FS||(FS={}));var kS;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kS||(kS={}));var DS;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(DS||(DS={}));var US;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(US||(US={}));var MS;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(MS||(MS={}));var OS;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(OS||(OS={}));var LS;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(LS||(LS={}));var PS;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(PS||(PS={}));var QS;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(QS||(QS={}));var HS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(HS||(HS={}));var jS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(jS||(jS={}));var VS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(VS||(VS={}));var GS;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(GS||(GS={}));var KS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(KS||(KS={}));var zS;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(zS||(zS={}));var WS;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(WS||(WS={}));var qS;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(qS||(qS={}));var XS;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(XS||(XS={}));var YS;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(YS||(YS={}));var JS;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(JS||(JS={}));var ZS;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ZS||(ZS={}));var $S;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})($S||($S={}));var Hu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Hu||(Hu={}));class Jw{constructor(e){const r={};for(const n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class df{get text(){var e,r,n,i,s,o,c,h;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const C=[];for(const b of(h=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[I,F]of Object.entries(b))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(F!==null||F!==void 0)&&C.push(I);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;m=!0,d+=b.text}}return C.length>0&&console.warn(`there are non-text parts ${C} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var e,r,n,i,s,o,c,h;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const C of(h=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[b,I]of Object.entries(C))b!=="inlineData"&&(I!==null||I!==void 0)&&m.push(b);C.inlineData&&typeof C.inlineData.data=="string"&&(d+=atob(C.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,r,n,i,s,o,c,h;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(h=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,r,n,i,s,o,c,h,d;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(h=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(C=>C.executableCode).map(C=>C.executableCode).filter(C=>C!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,r,n,i,s,o,c,h,d;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(h=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(C=>C.codeExecutionResult).map(C=>C.codeExecutionResult).filter(C=>C!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.output}}class eI{}class tI{}class nre{}class ire{}class sre{}class are{}class rI{}class nI{}class iI{}class ore{}class rp{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const n=new rp;let i;const s=e;return r?i=Kte(s):i=Gte(s),Object.assign(n,i),n}}class sI{}class aI{}class oI{}class lI{}class lre{}class Are{}class cre{}class zy{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const n=new zy,s=Zte(e);return Object.assign(n,s),n}}class ure{}class fre{}class dre{}class hre{}class AI{}class gre{get text(){var e,r,n;let i="",s=!1;const o=[];for(const c of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[h,d]of Object.entries(c))h!=="text"&&h!=="thought"&&d!==null&&o.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;s=!0,i+=c.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,r,n;let i="";const s=[];for(const o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[c,h]of Object.entries(o))c!=="inlineData"&&h!==null&&s.push(c);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class pre{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Wy{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const n=new Wy,s=uk(e);return Object.assign(n,s),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ln(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function fk(t,e){const r=ln(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function dk(t){return Array.isArray(t)?t.map(e=>np(e)):[np(t)]}function np(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function hk(t){const e=np(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gk(t){const e=np(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cI(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function pk(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>cI(e)):[cI(t)]}function Zw(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function uI(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function fI(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Li(t){if(t==null)throw new Error("ContentUnion is required");return Zw(t)?t:{role:"user",parts:pk(t)}}function qy(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const n=Li(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const r=Li(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Li(r)):[Li(e)]}function ya(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(uI(t)||fI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Li(t)]}const e=[],r=[],n=Zw(t[0]);for(const i of t){const s=Zw(i);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(uI(i)||fI(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(i)}}return n||e.push({role:"user",parts:pk(r)}),e}function mre(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(CA).includes(r[0].toUpperCase())?r[0].toUpperCase():CA.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of r)e.anyOf.push({type:Object.values(CA).includes(n.toUpperCase())?n.toUpperCase():CA.TYPE_UNSPECIFIED})}}function Ju(t){const e={},r=["items"],n=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&mre(t.type,e);for(const[o,c]of Object.entries(t))if(c!=null)if(o=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(CA).includes(c.toUpperCase())?c.toUpperCase():CA.TYPE_UNSPECIFIED}else if(r.includes(o))e[o]=Ju(c);else if(n.includes(o)){const h=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}h.push(Ju(d))}e[o]=h}else if(i.includes(o)){const h={};for(const[d,m]of Object.entries(c))h[d]=Ju(m);e[o]=h}else{if(o==="additionalProperties")continue;e[o]=c}return e}function Xy(t){return Ju(t)}function Yy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Jy(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function w0(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ju(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ju(e.response));return t}function v0(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function xre(t,e,r,n=1){const i=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:i?`${r}/${e}`:e}function kl(t,e){if(typeof e!="string")throw new Error("name must be a string");return xre(t,e,"cachedContents")}function mk(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function LA(t){return Ky(t)}function wre(t){return t!=null&&typeof t=="object"&&"name"in t}function vre(t){return t!=null&&typeof t=="object"&&"video"in t}function yre(t){return t!=null&&typeof t=="object"&&"uri"in t}function xk(t){var e;let r;if(wre(t)&&(r=t.name),!(yre(t)&&(r=t.uri,r===void 0))&&!(vre(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const i=r.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${r}`);r=i[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function wk(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function vk(t){for(const e of["models","tunedModels","publisherModels"])if(Cre(t,e))return t[e];return[]}function Cre(t,e){return t!==null&&typeof t=="object"&&e in t}function Ere(t,e={}){const r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(n.responseJsonSchema=r.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function bre(t,e={}){const r=[],n=new Set;for(const i of t){const s=i.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);const o=Ere(i,e);o.functionDeclarations&&r.push(...o.functionDeclarations)}return{functionDeclarations:r}}function yk(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;const n=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,i=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function _re(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ck(t){if(typeof t!="object"||t===null)return{};const e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;const i=r.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const h=o.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function y0(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function Ek(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function Tre(t){return t.includes("gemini")&&t!=="gemini-embedding-001"||t.includes("maas")}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bre(t){const e={},r=E(t,["responsesFile"]);r!=null&&_(e,["fileName"],r);const n=E(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>one(o))),_(e,["inlinedResponses"],s)}const i=E(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["inlinedEmbedContentResponses"],s)}return e}function Sre(t){const e={},r=E(t,["predictionsFormat"]);r!=null&&_(e,["format"],r);const n=E(t,["gcsDestination","outputUriPrefix"]);n!=null&&_(e,["gcsUri"],n);const i=E(t,["bigqueryDestination","outputUri"]);return i!=null&&_(e,["bigqueryUri"],i),e}function Ire(t){const e={},r=E(t,["format"]);r!=null&&_(e,["predictionsFormat"],r);const n=E(t,["gcsUri"]);n!=null&&_(e,["gcsDestination","outputUriPrefix"],n);const i=E(t,["bigqueryUri"]);if(i!=null&&_(e,["bigqueryDestination","outputUri"],i),E(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(E(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(E(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function A1(t){const e={},r=E(t,["name"]);r!=null&&_(e,["name"],r);const n=E(t,["metadata","displayName"]);n!=null&&_(e,["displayName"],n);const i=E(t,["metadata","state"]);i!=null&&_(e,["state"],Ek(i));const s=E(t,["metadata","createTime"]);s!=null&&_(e,["createTime"],s);const o=E(t,["metadata","endTime"]);o!=null&&_(e,["endTime"],o);const c=E(t,["metadata","updateTime"]);c!=null&&_(e,["updateTime"],c);const h=E(t,["metadata","model"]);h!=null&&_(e,["model"],h);const d=E(t,["metadata","output"]);return d!=null&&_(e,["dest"],Bre(Ck(d))),e}function $w(t){const e={},r=E(t,["name"]);r!=null&&_(e,["name"],r);const n=E(t,["displayName"]);n!=null&&_(e,["displayName"],n);const i=E(t,["state"]);i!=null&&_(e,["state"],Ek(i));const s=E(t,["error"]);s!=null&&_(e,["error"],s);const o=E(t,["createTime"]);o!=null&&_(e,["createTime"],o);const c=E(t,["startTime"]);c!=null&&_(e,["startTime"],c);const h=E(t,["endTime"]);h!=null&&_(e,["endTime"],h);const d=E(t,["updateTime"]);d!=null&&_(e,["updateTime"],d);const m=E(t,["model"]);m!=null&&_(e,["model"],m);const C=E(t,["inputConfig"]);C!=null&&_(e,["src"],Nre(C));const b=E(t,["outputConfig"]);b!=null&&_(e,["dest"],Sre(Ck(b)));const I=E(t,["completionStats"]);return I!=null&&_(e,["completionStats"],I),e}function Nre(t){const e={},r=E(t,["instancesFormat"]);r!=null&&_(e,["format"],r);const n=E(t,["gcsSource","uris"]);n!=null&&_(e,["gcsUri"],n);const i=E(t,["bigquerySource","inputUri"]);return i!=null&&_(e,["bigqueryUri"],i),e}function Rre(t,e){const r={};if(E(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(E(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(E(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=E(e,["fileName"]);n!=null&&_(r,["fileName"],n);const i=E(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>ane(t,o))),_(r,["requests","requests"],s)}return r}function Fre(t){const e={},r=E(t,["format"]);r!=null&&_(e,["instancesFormat"],r);const n=E(t,["gcsUri"]);n!=null&&_(e,["gcsSource","uris"],n);const i=E(t,["bigqueryUri"]);if(i!=null&&_(e,["bigquerySource","inputUri"],i),E(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(E(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function kre(t){const e={},r=E(t,["data"]);if(r!=null&&_(e,["data"],r),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function Dre(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],y0(t,n)),r}function Ure(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],y0(t,n)),r}function Mre(t){const e={},r=E(t,["content"]);r!=null&&_(e,["content"],r);const n=E(t,["citationMetadata"]);n!=null&&_(e,["citationMetadata"],Ore(n));const i=E(t,["tokenCount"]);i!=null&&_(e,["tokenCount"],i);const s=E(t,["finishReason"]);s!=null&&_(e,["finishReason"],s);const o=E(t,["avgLogprobs"]);o!=null&&_(e,["avgLogprobs"],o);const c=E(t,["groundingMetadata"]);c!=null&&_(e,["groundingMetadata"],c);const h=E(t,["index"]);h!=null&&_(e,["index"],h);const d=E(t,["logprobsResult"]);d!=null&&_(e,["logprobsResult"],d);const m=E(t,["safetyRatings"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(I=>I)),_(e,["safetyRatings"],b)}const C=E(t,["urlContextMetadata"]);return C!=null&&_(e,["urlContextMetadata"],C),e}function Ore(t){const e={},r=E(t,["citationSources"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),_(e,["citations"],n)}return e}function bk(t){const e={},r=E(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>hne(s))),_(e,["parts"],i)}const n=E(t,["role"]);return n!=null&&_(e,["role"],n),e}function Lre(t,e){const r={},n=E(t,["displayName"]);if(e!==void 0&&n!=null&&_(e,["batch","displayName"],n),E(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function Pre(t,e){const r={},n=E(t,["displayName"]);e!==void 0&&n!=null&&_(e,["displayName"],n);const i=E(t,["dest"]);return e!==void 0&&i!=null&&_(e,["outputConfig"],Ire(_re(i))),r}function dI(t,e){const r={},n=E(e,["model"]);n!=null&&_(r,["_url","model"],ln(t,n));const i=E(e,["src"]);i!=null&&_(r,["batch","inputConfig"],Rre(t,yk(t,i)));const s=E(e,["config"]);return s!=null&&Lre(s,r),r}function Qre(t,e){const r={},n=E(e,["model"]);n!=null&&_(r,["model"],ln(t,n));const i=E(e,["src"]);i!=null&&_(r,["inputConfig"],Fre(yk(t,i)));const s=E(e,["config"]);return s!=null&&Pre(s,r),r}function Hre(t,e){const r={},n=E(t,["displayName"]);return e!==void 0&&n!=null&&_(e,["batch","displayName"],n),r}function jre(t,e){const r={},n=E(e,["model"]);n!=null&&_(r,["_url","model"],ln(t,n));const i=E(e,["src"]);i!=null&&_(r,["batch","inputConfig"],Xre(t,i));const s=E(e,["config"]);return s!=null&&Hre(s,r),r}function Vre(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],y0(t,n)),r}function Gre(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],y0(t,n)),r}function Kre(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["name"]);n!=null&&_(e,["name"],n);const i=E(t,["done"]);i!=null&&_(e,["done"],i);const s=E(t,["error"]);return s!=null&&_(e,["error"],s),e}function zre(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["name"]);n!=null&&_(e,["name"],n);const i=E(t,["done"]);i!=null&&_(e,["done"],i);const s=E(t,["error"]);return s!=null&&_(e,["error"],s),e}function Wre(t,e){const r={},n=E(e,["contents"]);if(n!=null){let s=qy(t,n);Array.isArray(s)&&(s=s.map(o=>o)),_(r,["requests[]","request","content"],s)}const i=E(e,["config"]);return i!=null&&(_(r,["_self"],qre(i,r)),jte(r,{"requests[].*":"requests[].request.*"})),r}function qre(t,e){const r={},n=E(t,["taskType"]);e!==void 0&&n!=null&&_(e,["requests[]","taskType"],n);const i=E(t,["title"]);e!==void 0&&i!=null&&_(e,["requests[]","title"],i);const s=E(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&_(e,["requests[]","outputDimensionality"],s),E(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(E(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Xre(t,e){const r={},n=E(e,["fileName"]);n!=null&&_(r,["file_name"],n);const i=E(e,["inlinedRequests"]);return i!=null&&_(r,["requests"],Wre(t,i)),r}function Yre(t){const e={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=E(t,["fileUri"]);r!=null&&_(e,["fileUri"],r);const n=E(t,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function Jre(t){const e={},r=E(t,["id"]);r!=null&&_(e,["id"],r);const n=E(t,["args"]);n!=null&&_(e,["args"],n);const i=E(t,["name"]);if(i!=null&&_(e,["name"],i),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zre(t){const e={},r=E(t,["allowedFunctionNames"]);r!=null&&_(e,["allowedFunctionNames"],r);const n=E(t,["mode"]);if(n!=null&&_(e,["mode"],n),E(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function $re(t,e,r){const n={},i=E(e,["systemInstruction"]);r!==void 0&&i!=null&&_(r,["systemInstruction"],bk(Li(i)));const s=E(e,["temperature"]);s!=null&&_(n,["temperature"],s);const o=E(e,["topP"]);o!=null&&_(n,["topP"],o);const c=E(e,["topK"]);c!=null&&_(n,["topK"],c);const h=E(e,["candidateCount"]);h!=null&&_(n,["candidateCount"],h);const d=E(e,["maxOutputTokens"]);d!=null&&_(n,["maxOutputTokens"],d);const m=E(e,["stopSequences"]);m!=null&&_(n,["stopSequences"],m);const C=E(e,["responseLogprobs"]);C!=null&&_(n,["responseLogprobs"],C);const b=E(e,["logprobs"]);b!=null&&_(n,["logprobs"],b);const I=E(e,["presencePenalty"]);I!=null&&_(n,["presencePenalty"],I);const F=E(e,["frequencyPenalty"]);F!=null&&_(n,["frequencyPenalty"],F);const k=E(e,["seed"]);k!=null&&_(n,["seed"],k);const U=E(e,["responseMimeType"]);U!=null&&_(n,["responseMimeType"],U);const V=E(e,["responseSchema"]);V!=null&&_(n,["responseSchema"],Xy(V));const K=E(e,["responseJsonSchema"]);if(K!=null&&_(n,["responseJsonSchema"],K),E(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(E(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=E(e,["safetySettings"]);if(r!==void 0&&Q!=null){let G=Q;Array.isArray(G)&&(G=G.map(Ie=>gne(Ie))),_(r,["safetySettings"],G)}const te=E(e,["tools"]);if(r!==void 0&&te!=null){let G=v0(te);Array.isArray(G)&&(G=G.map(Ie=>mne(w0(Ie)))),_(r,["tools"],G)}const re=E(e,["toolConfig"]);if(r!==void 0&&re!=null&&_(r,["toolConfig"],pne(re)),E(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=E(e,["cachedContent"]);r!==void 0&&z!=null&&_(r,["cachedContent"],kl(t,z));const M=E(e,["responseModalities"]);M!=null&&_(n,["responseModalities"],M);const P=E(e,["mediaResolution"]);P!=null&&_(n,["mediaResolution"],P);const O=E(e,["speechConfig"]);if(O!=null&&_(n,["speechConfig"],Yy(O)),E(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=E(e,["thinkingConfig"]);ee!=null&&_(n,["thinkingConfig"],ee);const Y=E(e,["imageConfig"]);Y!=null&&_(n,["imageConfig"],sne(Y));const X=E(e,["enableEnhancedCivicAnswers"]);if(X!=null&&_(n,["enableEnhancedCivicAnswers"],X),E(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return n}function ene(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["candidates"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(d=>Mre(d))),_(e,["candidates"],h)}const i=E(t,["modelVersion"]);i!=null&&_(e,["modelVersion"],i);const s=E(t,["promptFeedback"]);s!=null&&_(e,["promptFeedback"],s);const o=E(t,["responseId"]);o!=null&&_(e,["responseId"],o);const c=E(t,["usageMetadata"]);return c!=null&&_(e,["usageMetadata"],c),e}function tne(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],y0(t,n)),r}function rne(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],y0(t,n)),r}function nne(t){const e={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=E(t,["enableWidget"]);return r!=null&&_(e,["enableWidget"],r),e}function ine(t){const e={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=E(t,["timeRangeFilter"]);return r!=null&&_(e,["timeRangeFilter"],r),e}function sne(t){const e={},r=E(t,["aspectRatio"]);r!=null&&_(e,["aspectRatio"],r);const n=E(t,["imageSize"]);if(n!=null&&_(e,["imageSize"],n),E(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(E(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(E(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ane(t,e){const r={},n=E(e,["model"]);n!=null&&_(r,["request","model"],ln(t,n));const i=E(e,["contents"]);if(i!=null){let c=ya(i);Array.isArray(c)&&(c=c.map(h=>bk(h))),_(r,["request","contents"],c)}const s=E(e,["metadata"]);s!=null&&_(r,["metadata"],s);const o=E(e,["config"]);return o!=null&&_(r,["request","generationConfig"],$re(t,o,E(r,["request"],{}))),r}function one(t){const e={},r=E(t,["response"]);r!=null&&_(e,["response"],ene(r));const n=E(t,["metadata"]);n!=null&&_(e,["metadata"],n);const i=E(t,["error"]);return i!=null&&_(e,["error"],i),e}function lne(t,e){const r={},n=E(t,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const i=E(t,["pageToken"]);if(e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),E(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function Ane(t,e){const r={},n=E(t,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const i=E(t,["pageToken"]);e!==void 0&&i!=null&&_(e,["_query","pageToken"],i);const s=E(t,["filter"]);return e!==void 0&&s!=null&&_(e,["_query","filter"],s),r}function cne(t){const e={},r=E(t,["config"]);return r!=null&&lne(r,e),e}function une(t){const e={},r=E(t,["config"]);return r!=null&&Ane(r,e),e}function fne(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const i=E(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>A1(o))),_(e,["batchJobs"],s)}return e}function dne(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const i=E(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>$w(o))),_(e,["batchJobs"],s)}return e}function hne(t){const e={},r=E(t,["mediaResolution"]);r!=null&&_(e,["mediaResolution"],r);const n=E(t,["codeExecutionResult"]);n!=null&&_(e,["codeExecutionResult"],n);const i=E(t,["executableCode"]);i!=null&&_(e,["executableCode"],i);const s=E(t,["fileData"]);s!=null&&_(e,["fileData"],Yre(s));const o=E(t,["functionCall"]);o!=null&&_(e,["functionCall"],Jre(o));const c=E(t,["functionResponse"]);c!=null&&_(e,["functionResponse"],c);const h=E(t,["inlineData"]);h!=null&&_(e,["inlineData"],kre(h));const d=E(t,["text"]);d!=null&&_(e,["text"],d);const m=E(t,["thought"]);m!=null&&_(e,["thought"],m);const C=E(t,["thoughtSignature"]);C!=null&&_(e,["thoughtSignature"],C);const b=E(t,["videoMetadata"]);return b!=null&&_(e,["videoMetadata"],b),e}function gne(t){const e={},r=E(t,["category"]);if(r!=null&&_(e,["category"],r),E(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=E(t,["threshold"]);return n!=null&&_(e,["threshold"],n),e}function pne(t){const e={},r=E(t,["retrievalConfig"]);r!=null&&_(e,["retrievalConfig"],r);const n=E(t,["functionCallingConfig"]);return n!=null&&_(e,["functionCallingConfig"],Zre(n)),e}function mne(t){const e={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=E(t,["computerUse"]);r!=null&&_(e,["computerUse"],r);const n=E(t,["fileSearch"]);n!=null&&_(e,["fileSearch"],n);const i=E(t,["codeExecution"]);if(i!=null&&_(e,["codeExecution"],i),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=E(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(C=>C)),_(e,["functionDeclarations"],m)}const o=E(t,["googleMaps"]);o!=null&&_(e,["googleMaps"],nne(o));const c=E(t,["googleSearch"]);c!=null&&_(e,["googleSearch"],ine(c));const h=E(t,["googleSearchRetrieval"]);h!=null&&_(e,["googleSearchRetrieval"],h);const d=E(t,["urlContext"]);return d!=null&&_(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Il;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Il||(Il={}));class Vc{constructor(e,r,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,i)}init(e,r,n){var i,s;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!n||Object.keys(n).length===0?o={config:{}}:typeof n=="object"?o=Object.assign({},n):o=n,o.config&&(o.config.pageToken=r.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xne extends Fl{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Vc(Il.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)}}createInlinedGenerateContentRequest(e){const r=dI(this.apiClient,e),n=r._url,i=Qt("{model}:batchGenerateContent",n),c=r.batch.inputConfig.requests,h=c.requests,d=[];for(const m of h){const C=Object.assign({},m);if(C.systemInstruction){const b=C.systemInstruction;delete C.systemInstruction;const I=C.request;I.systemInstruction=b,C.request=I}d.push(C)}return c.requests=d,delete r.config,delete r._url,delete r._query,{path:i,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){const n=r?Object.assign({},r):{},i=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${i}`),n.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?n.dest=`${s.slice(0,-6)}/dest`:n.dest=`${s}_dest_${i}`;else if(o)n.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Qre(this.apiClient,e);return c=Qt("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>$w(m))}else{const d=dI(this.apiClient,e);return c=Qt("{model}:batchGenerateContent",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>A1(m))}}async createEmbeddingsInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=jre(this.apiClient,e);return s=Qt("{model}:asyncBatchEmbedContent",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>A1(h))}}async get(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=rne(this.apiClient,e);return c=Qt("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>$w(m))}else{const d=tne(this.apiClient,e);return c=Qt("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>A1(m))}}async cancel(e){var r,n,i,s;let o="",c={};if(this.apiClient.isVertexAI()){const h=Ure(this.apiClient,e);o=Qt("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const h=Dre(this.apiClient,e);o=Qt("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=une(e);return c=Qt("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=dne(m),b=new AI;return Object.assign(b,C),b})}else{const d=cne(e);return c=Qt("batches",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=fne(m),b=new AI;return Object.assign(b,C),b})}}async delete(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Gre(this.apiClient,e);return c=Qt("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>zre(m))}else{const d=Vre(this.apiClient,e);return c=Qt("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>Kre(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wne(t){const e={},r=E(t,["data"]);if(r!=null&&_(e,["data"],r),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function hI(t){const e={},r=E(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>jne(s))),_(e,["parts"],i)}const n=E(t,["role"]);return n!=null&&_(e,["role"],n),e}function vne(t,e){const r={},n=E(t,["ttl"]);e!==void 0&&n!=null&&_(e,["ttl"],n);const i=E(t,["expireTime"]);e!==void 0&&i!=null&&_(e,["expireTime"],i);const s=E(t,["displayName"]);e!==void 0&&s!=null&&_(e,["displayName"],s);const o=E(t,["contents"]);if(e!==void 0&&o!=null){let m=ya(o);Array.isArray(m)&&(m=m.map(C=>hI(C))),_(e,["contents"],m)}const c=E(t,["systemInstruction"]);e!==void 0&&c!=null&&_(e,["systemInstruction"],hI(Li(c)));const h=E(t,["tools"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(C=>Gne(C))),_(e,["tools"],m)}const d=E(t,["toolConfig"]);if(e!==void 0&&d!=null&&_(e,["toolConfig"],Vne(d)),E(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function yne(t,e){const r={},n=E(t,["ttl"]);e!==void 0&&n!=null&&_(e,["ttl"],n);const i=E(t,["expireTime"]);e!==void 0&&i!=null&&_(e,["expireTime"],i);const s=E(t,["displayName"]);e!==void 0&&s!=null&&_(e,["displayName"],s);const o=E(t,["contents"]);if(e!==void 0&&o!=null){let C=ya(o);Array.isArray(C)&&(C=C.map(b=>b)),_(e,["contents"],C)}const c=E(t,["systemInstruction"]);e!==void 0&&c!=null&&_(e,["systemInstruction"],Li(c));const h=E(t,["tools"]);if(e!==void 0&&h!=null){let C=h;Array.isArray(C)&&(C=C.map(b=>Kne(b))),_(e,["tools"],C)}const d=E(t,["toolConfig"]);e!==void 0&&d!=null&&_(e,["toolConfig"],d);const m=E(t,["kmsKeyName"]);return e!==void 0&&m!=null&&_(e,["encryption_spec","kmsKeyName"],m),r}function Cne(t,e){const r={},n=E(e,["model"]);n!=null&&_(r,["model"],fk(t,n));const i=E(e,["config"]);return i!=null&&vne(i,r),r}function Ene(t,e){const r={},n=E(e,["model"]);n!=null&&_(r,["model"],fk(t,n));const i=E(e,["config"]);return i!=null&&yne(i,r),r}function bne(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],kl(t,n)),r}function _ne(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],kl(t,n)),r}function Tne(t){const e={},r=E(t,["sdkHttpResponse"]);return r!=null&&_(e,["sdkHttpResponse"],r),e}function Bne(t){const e={},r=E(t,["sdkHttpResponse"]);return r!=null&&_(e,["sdkHttpResponse"],r),e}function Sne(t){const e={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=E(t,["fileUri"]);r!=null&&_(e,["fileUri"],r);const n=E(t,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function Ine(t){const e={},r=E(t,["id"]);r!=null&&_(e,["id"],r);const n=E(t,["args"]);n!=null&&_(e,["args"],n);const i=E(t,["name"]);if(i!=null&&_(e,["name"],i),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Nne(t){const e={},r=E(t,["allowedFunctionNames"]);r!=null&&_(e,["allowedFunctionNames"],r);const n=E(t,["mode"]);if(n!=null&&_(e,["mode"],n),E(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Rne(t){const e={},r=E(t,["description"]);r!=null&&_(e,["description"],r);const n=E(t,["name"]);n!=null&&_(e,["name"],n);const i=E(t,["parameters"]);i!=null&&_(e,["parameters"],i);const s=E(t,["parametersJsonSchema"]);s!=null&&_(e,["parametersJsonSchema"],s);const o=E(t,["response"]);o!=null&&_(e,["response"],o);const c=E(t,["responseJsonSchema"]);if(c!=null&&_(e,["responseJsonSchema"],c),E(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Fne(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],kl(t,n)),r}function kne(t,e){const r={},n=E(e,["name"]);return n!=null&&_(r,["_url","name"],kl(t,n)),r}function Dne(t){const e={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=E(t,["enableWidget"]);return r!=null&&_(e,["enableWidget"],r),e}function Une(t){const e={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=E(t,["timeRangeFilter"]);return r!=null&&_(e,["timeRangeFilter"],r),e}function Mne(t,e){const r={},n=E(t,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const i=E(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),r}function One(t,e){const r={},n=E(t,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const i=E(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),r}function Lne(t){const e={},r=E(t,["config"]);return r!=null&&Mne(r,e),e}function Pne(t){const e={},r=E(t,["config"]);return r!=null&&One(r,e),e}function Qne(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const i=E(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["cachedContents"],s)}return e}function Hne(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const i=E(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["cachedContents"],s)}return e}function jne(t){const e={},r=E(t,["mediaResolution"]);r!=null&&_(e,["mediaResolution"],r);const n=E(t,["codeExecutionResult"]);n!=null&&_(e,["codeExecutionResult"],n);const i=E(t,["executableCode"]);i!=null&&_(e,["executableCode"],i);const s=E(t,["fileData"]);s!=null&&_(e,["fileData"],Sne(s));const o=E(t,["functionCall"]);o!=null&&_(e,["functionCall"],Ine(o));const c=E(t,["functionResponse"]);c!=null&&_(e,["functionResponse"],c);const h=E(t,["inlineData"]);h!=null&&_(e,["inlineData"],wne(h));const d=E(t,["text"]);d!=null&&_(e,["text"],d);const m=E(t,["thought"]);m!=null&&_(e,["thought"],m);const C=E(t,["thoughtSignature"]);C!=null&&_(e,["thoughtSignature"],C);const b=E(t,["videoMetadata"]);return b!=null&&_(e,["videoMetadata"],b),e}function Vne(t){const e={},r=E(t,["retrievalConfig"]);r!=null&&_(e,["retrievalConfig"],r);const n=E(t,["functionCallingConfig"]);return n!=null&&_(e,["functionCallingConfig"],Nne(n)),e}function Gne(t){const e={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=E(t,["computerUse"]);r!=null&&_(e,["computerUse"],r);const n=E(t,["fileSearch"]);n!=null&&_(e,["fileSearch"],n);const i=E(t,["codeExecution"]);if(i!=null&&_(e,["codeExecution"],i),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=E(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(C=>C)),_(e,["functionDeclarations"],m)}const o=E(t,["googleMaps"]);o!=null&&_(e,["googleMaps"],Dne(o));const c=E(t,["googleSearch"]);c!=null&&_(e,["googleSearch"],Une(c));const h=E(t,["googleSearchRetrieval"]);h!=null&&_(e,["googleSearchRetrieval"],h);const d=E(t,["urlContext"]);return d!=null&&_(e,["urlContext"],d),e}function Kne(t){const e={},r=E(t,["retrieval"]);r!=null&&_(e,["retrieval"],r);const n=E(t,["computerUse"]);if(n!=null&&_(e,["computerUse"],n),E(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=E(t,["codeExecution"]);i!=null&&_(e,["codeExecution"],i);const s=E(t,["enterpriseWebSearch"]);s!=null&&_(e,["enterpriseWebSearch"],s);const o=E(t,["functionDeclarations"]);if(o!=null){let C=o;Array.isArray(C)&&(C=C.map(b=>Rne(b))),_(e,["functionDeclarations"],C)}const c=E(t,["googleMaps"]);c!=null&&_(e,["googleMaps"],c);const h=E(t,["googleSearch"]);h!=null&&_(e,["googleSearch"],h);const d=E(t,["googleSearchRetrieval"]);d!=null&&_(e,["googleSearchRetrieval"],d);const m=E(t,["urlContext"]);return m!=null&&_(e,["urlContext"],m),e}function zne(t,e){const r={},n=E(t,["ttl"]);e!==void 0&&n!=null&&_(e,["ttl"],n);const i=E(t,["expireTime"]);return e!==void 0&&i!=null&&_(e,["expireTime"],i),r}function Wne(t,e){const r={},n=E(t,["ttl"]);e!==void 0&&n!=null&&_(e,["ttl"],n);const i=E(t,["expireTime"]);return e!==void 0&&i!=null&&_(e,["expireTime"],i),r}function qne(t,e){const r={},n=E(e,["name"]);n!=null&&_(r,["_url","name"],kl(t,n));const i=E(e,["config"]);return i!=null&&zne(i,r),r}function Xne(t,e){const r={},n=E(e,["name"]);n!=null&&_(r,["_url","name"],kl(t,n));const i=E(e,["config"]);return i!=null&&Wne(i,r),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yne extends Fl{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Vc(Il.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Ene(this.apiClient,e);return c=Qt("cachedContents",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=Cne(this.apiClient,e);return c=Qt("cachedContents",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=kne(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=Fne(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=_ne(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Bne(m),b=new oI;return Object.assign(b,C),b})}else{const d=bne(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Tne(m),b=new oI;return Object.assign(b,C),b})}}async update(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Xne(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=qne(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async listInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Pne(e);return c=Qt("cachedContents",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Hne(m),b=new lI;return Object.assign(b,C),b})}else{const d=Lne(e);return c=Qt("cachedContents",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Qne(m),b=new lI;return Object.assign(b,C),b})}}}function ip(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function gI(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vr(t){return this instanceof vr?(this.v=t,this):new vr(t)}function lo(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(I){return function(F){return Promise.resolve(F).then(I,C)}}function c(I,F){n[I]&&(i[I]=function(k){return new Promise(function(U,V){s.push([I,k,U,V])>1||h(I,k)})},F&&(i[I]=F(i[I])))}function h(I,F){try{d(n[I](F))}catch(k){b(s[0][3],k)}}function d(I){I.value instanceof vr?Promise.resolve(I.value.v).then(m,C):b(s[0][2],I)}function m(I){h("next",I)}function C(I){h("throw",I)}function b(I,F){I(F),s.shift(),s.length&&h(s[0][0],s[0][1])}}function Ao(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof gI=="function"?gI(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(c,h){o=t[s](o),i(c,h,o.done,o.value)})}}function i(s,o,c,h){Promise.resolve(h).then(function(d){s({value:d,done:c})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jne(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:_k(r)}function _k(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Zne(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function pI(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{const i=[];let s=!0;for(;n<r&&t[n].role==="model";)i.push(t[n]),s&&!_k(t[n])&&(s=!1),n++;s?e.push(...i):e.pop()}return e}class $ne{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new eie(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class eie{constructor(e,r,n,i={},s=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Zne(s)}async sendMessage(e){var r;await this.sendPromise;const n=Li(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var s,o,c;const h=await i,d=(o=(s=h.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,m=h.automaticFunctionCallingHistory,C=this.getHistory(!0).length;let b=[];m!=null&&(b=(c=m.slice(C))!==null&&c!==void 0?c:[]);const I=d?[d]:[];this.recordHistory(n,I,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var r;await this.sendPromise;const n=Li(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,n)}getHistory(e=!1){const r=e?pI(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){return lo(this,arguments,function*(){var i,s,o,c,h,d;const m=[];try{for(var C=!0,b=Ao(e),I;I=yield vr(b.next()),i=I.done,!i;C=!0){c=I.value,C=!1;const F=c;if(Jne(F)){const k=(d=(h=F.candidates)===null||h===void 0?void 0:h[0])===null||d===void 0?void 0:d.content;k!==void 0&&m.push(k)}yield yield vr(F)}}catch(F){s={error:F}}finally{try{!C&&!i&&(o=b.return)&&(yield vr(o.call(b)))}finally{if(s)throw s.error}}this.recordHistory(r,m)})}recordHistory(e,r,n){let i=[];r.length>0&&r.every(s=>s.role!==void 0)?i=r:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...pI(n)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tie(t){const e={},r=E(t,["file"]);return r!=null&&_(e,["file"],r),e}function rie(t){const e={},r=E(t,["sdkHttpResponse"]);return r!=null&&_(e,["sdkHttpResponse"],r),e}function nie(t){const e={},r=E(t,["name"]);return r!=null&&_(e,["_url","file"],xk(r)),e}function iie(t){const e={},r=E(t,["sdkHttpResponse"]);return r!=null&&_(e,["sdkHttpResponse"],r),e}function sie(t){const e={},r=E(t,["name"]);return r!=null&&_(e,["_url","file"],xk(r)),e}function aie(t){const e={},r=E(t,["uris"]);return r!=null&&_(e,["uris"],r),e}function oie(t,e){const r={},n=E(t,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const i=E(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),r}function lie(t){const e={},r=E(t,["config"]);return r!=null&&oie(r,e),e}function Aie(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const i=E(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["files"],s)}return e}function cie(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["files"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),_(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uie extends Fl{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Vc(Il.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=lie(e);return s=Qt("files",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const d=Aie(h),m=new ure;return Object.assign(m,d),m})}}async createInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=tie(e);return s=Qt("upload/v1beta/files",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>{const d=rie(h),m=new fre;return Object.assign(m,d),m})}}async get(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=sie(e);return s=Qt("files/{file}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nie(e);return s=Qt("files/{file}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const d=iie(h),m=new dre;return Object.assign(m,d),m})}}async registerFilesInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=aie(e);return s=Qt("files:register",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>{const d=cie(h),m=new hre;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c1(t){const e={},r=E(t,["data"]);if(r!=null&&_(e,["data"],r),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function fie(t){const e={},r=E(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Sie(s))),_(e,["parts"],i)}const n=E(t,["role"]);return n!=null&&_(e,["role"],n),e}function die(t){const e={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=E(t,["fileUri"]);r!=null&&_(e,["fileUri"],r);const n=E(t,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function hie(t){const e={},r=E(t,["id"]);r!=null&&_(e,["id"],r);const n=E(t,["args"]);n!=null&&_(e,["args"],n);const i=E(t,["name"]);if(i!=null&&_(e,["name"],i),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gie(t){const e={},r=E(t,["description"]);r!=null&&_(e,["description"],r);const n=E(t,["name"]);n!=null&&_(e,["name"],n);const i=E(t,["parameters"]);i!=null&&_(e,["parameters"],i);const s=E(t,["parametersJsonSchema"]);s!=null&&_(e,["parametersJsonSchema"],s);const o=E(t,["response"]);o!=null&&_(e,["response"],o);const c=E(t,["responseJsonSchema"]);if(c!=null&&_(e,["responseJsonSchema"],c),E(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pie(t){const e={},r=E(t,["modelSelectionConfig"]);r!=null&&_(e,["modelConfig"],r);const n=E(t,["responseJsonSchema"]);n!=null&&_(e,["responseJsonSchema"],n);const i=E(t,["audioTimestamp"]);i!=null&&_(e,["audioTimestamp"],i);const s=E(t,["candidateCount"]);s!=null&&_(e,["candidateCount"],s);const o=E(t,["enableAffectiveDialog"]);o!=null&&_(e,["enableAffectiveDialog"],o);const c=E(t,["frequencyPenalty"]);c!=null&&_(e,["frequencyPenalty"],c);const h=E(t,["logprobs"]);h!=null&&_(e,["logprobs"],h);const d=E(t,["maxOutputTokens"]);d!=null&&_(e,["maxOutputTokens"],d);const m=E(t,["mediaResolution"]);m!=null&&_(e,["mediaResolution"],m);const C=E(t,["presencePenalty"]);C!=null&&_(e,["presencePenalty"],C);const b=E(t,["responseLogprobs"]);b!=null&&_(e,["responseLogprobs"],b);const I=E(t,["responseMimeType"]);I!=null&&_(e,["responseMimeType"],I);const F=E(t,["responseModalities"]);F!=null&&_(e,["responseModalities"],F);const k=E(t,["responseSchema"]);k!=null&&_(e,["responseSchema"],k);const U=E(t,["routingConfig"]);U!=null&&_(e,["routingConfig"],U);const V=E(t,["seed"]);V!=null&&_(e,["seed"],V);const K=E(t,["speechConfig"]);K!=null&&_(e,["speechConfig"],K);const Q=E(t,["stopSequences"]);Q!=null&&_(e,["stopSequences"],Q);const te=E(t,["temperature"]);te!=null&&_(e,["temperature"],te);const re=E(t,["thinkingConfig"]);re!=null&&_(e,["thinkingConfig"],re);const z=E(t,["topK"]);z!=null&&_(e,["topK"],z);const M=E(t,["topP"]);if(M!=null&&_(e,["topP"],M),E(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mie(t){const e={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=E(t,["enableWidget"]);return r!=null&&_(e,["enableWidget"],r),e}function xie(t){const e={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=E(t,["timeRangeFilter"]);return r!=null&&_(e,["timeRangeFilter"],r),e}function wie(t,e){const r={},n=E(t,["generationConfig"]);e!==void 0&&n!=null&&_(e,["setup","generationConfig"],n);const i=E(t,["responseModalities"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig","responseModalities"],i);const s=E(t,["temperature"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","temperature"],s);const o=E(t,["topP"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topP"],o);const c=E(t,["topK"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topK"],c);const h=E(t,["maxOutputTokens"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","maxOutputTokens"],h);const d=E(t,["mediaResolution"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","mediaResolution"],d);const m=E(t,["seed"]);e!==void 0&&m!=null&&_(e,["setup","generationConfig","seed"],m);const C=E(t,["speechConfig"]);e!==void 0&&C!=null&&_(e,["setup","generationConfig","speechConfig"],Jy(C));const b=E(t,["thinkingConfig"]);e!==void 0&&b!=null&&_(e,["setup","generationConfig","thinkingConfig"],b);const I=E(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],I);const F=E(t,["systemInstruction"]);e!==void 0&&F!=null&&_(e,["setup","systemInstruction"],fie(Li(F)));const k=E(t,["tools"]);if(e!==void 0&&k!=null){let z=v0(k);Array.isArray(z)&&(z=z.map(M=>Nie(w0(M)))),_(e,["setup","tools"],z)}const U=E(t,["sessionResumption"]);e!==void 0&&U!=null&&_(e,["setup","sessionResumption"],Iie(U));const V=E(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&_(e,["setup","inputAudioTranscription"],V);const K=E(t,["outputAudioTranscription"]);e!==void 0&&K!=null&&_(e,["setup","outputAudioTranscription"],K);const Q=E(t,["realtimeInputConfig"]);e!==void 0&&Q!=null&&_(e,["setup","realtimeInputConfig"],Q);const te=E(t,["contextWindowCompression"]);e!==void 0&&te!=null&&_(e,["setup","contextWindowCompression"],te);const re=E(t,["proactivity"]);if(e!==void 0&&re!=null&&_(e,["setup","proactivity"],re),E(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function vie(t,e){const r={},n=E(t,["generationConfig"]);e!==void 0&&n!=null&&_(e,["setup","generationConfig"],pie(n));const i=E(t,["responseModalities"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig","responseModalities"],i);const s=E(t,["temperature"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","temperature"],s);const o=E(t,["topP"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topP"],o);const c=E(t,["topK"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topK"],c);const h=E(t,["maxOutputTokens"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","maxOutputTokens"],h);const d=E(t,["mediaResolution"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","mediaResolution"],d);const m=E(t,["seed"]);e!==void 0&&m!=null&&_(e,["setup","generationConfig","seed"],m);const C=E(t,["speechConfig"]);e!==void 0&&C!=null&&_(e,["setup","generationConfig","speechConfig"],Jy(C));const b=E(t,["thinkingConfig"]);e!==void 0&&b!=null&&_(e,["setup","generationConfig","thinkingConfig"],b);const I=E(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],I);const F=E(t,["systemInstruction"]);e!==void 0&&F!=null&&_(e,["setup","systemInstruction"],Li(F));const k=E(t,["tools"]);if(e!==void 0&&k!=null){let M=v0(k);Array.isArray(M)&&(M=M.map(P=>Rie(w0(P)))),_(e,["setup","tools"],M)}const U=E(t,["sessionResumption"]);e!==void 0&&U!=null&&_(e,["setup","sessionResumption"],U);const V=E(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&_(e,["setup","inputAudioTranscription"],V);const K=E(t,["outputAudioTranscription"]);e!==void 0&&K!=null&&_(e,["setup","outputAudioTranscription"],K);const Q=E(t,["realtimeInputConfig"]);e!==void 0&&Q!=null&&_(e,["setup","realtimeInputConfig"],Q);const te=E(t,["contextWindowCompression"]);e!==void 0&&te!=null&&_(e,["setup","contextWindowCompression"],te);const re=E(t,["proactivity"]);e!==void 0&&re!=null&&_(e,["setup","proactivity"],re);const z=E(t,["explicitVadSignal"]);return e!==void 0&&z!=null&&_(e,["setup","explicitVadSignal"],z),r}function yie(t,e){const r={},n=E(e,["model"]);n!=null&&_(r,["setup","model"],ln(t,n));const i=E(e,["config"]);return i!=null&&_(r,["config"],wie(i,r)),r}function Cie(t,e){const r={},n=E(e,["model"]);n!=null&&_(r,["setup","model"],ln(t,n));const i=E(e,["config"]);return i!=null&&_(r,["config"],vie(i,r)),r}function Eie(t){const e={},r=E(t,["musicGenerationConfig"]);return r!=null&&_(e,["musicGenerationConfig"],r),e}function bie(t){const e={},r=E(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),_(e,["weightedPrompts"],n)}return e}function _ie(t){const e={},r=E(t,["media"]);if(r!=null){let d=dk(r);Array.isArray(d)&&(d=d.map(m=>c1(m))),_(e,["mediaChunks"],d)}const n=E(t,["audio"]);n!=null&&_(e,["audio"],c1(gk(n)));const i=E(t,["audioStreamEnd"]);i!=null&&_(e,["audioStreamEnd"],i);const s=E(t,["video"]);s!=null&&_(e,["video"],c1(hk(s)));const o=E(t,["text"]);o!=null&&_(e,["text"],o);const c=E(t,["activityStart"]);c!=null&&_(e,["activityStart"],c);const h=E(t,["activityEnd"]);return h!=null&&_(e,["activityEnd"],h),e}function Tie(t){const e={},r=E(t,["media"]);if(r!=null){let d=dk(r);Array.isArray(d)&&(d=d.map(m=>m)),_(e,["mediaChunks"],d)}const n=E(t,["audio"]);n!=null&&_(e,["audio"],gk(n));const i=E(t,["audioStreamEnd"]);i!=null&&_(e,["audioStreamEnd"],i);const s=E(t,["video"]);s!=null&&_(e,["video"],hk(s));const o=E(t,["text"]);o!=null&&_(e,["text"],o);const c=E(t,["activityStart"]);c!=null&&_(e,["activityStart"],c);const h=E(t,["activityEnd"]);return h!=null&&_(e,["activityEnd"],h),e}function Bie(t){const e={},r=E(t,["setupComplete"]);r!=null&&_(e,["setupComplete"],r);const n=E(t,["serverContent"]);n!=null&&_(e,["serverContent"],n);const i=E(t,["toolCall"]);i!=null&&_(e,["toolCall"],i);const s=E(t,["toolCallCancellation"]);s!=null&&_(e,["toolCallCancellation"],s);const o=E(t,["usageMetadata"]);o!=null&&_(e,["usageMetadata"],Fie(o));const c=E(t,["goAway"]);c!=null&&_(e,["goAway"],c);const h=E(t,["sessionResumptionUpdate"]);h!=null&&_(e,["sessionResumptionUpdate"],h);const d=E(t,["voiceActivityDetectionSignal"]);d!=null&&_(e,["voiceActivityDetectionSignal"],d);const m=E(t,["voiceActivity"]);return m!=null&&_(e,["voiceActivity"],kie(m)),e}function Sie(t){const e={},r=E(t,["mediaResolution"]);r!=null&&_(e,["mediaResolution"],r);const n=E(t,["codeExecutionResult"]);n!=null&&_(e,["codeExecutionResult"],n);const i=E(t,["executableCode"]);i!=null&&_(e,["executableCode"],i);const s=E(t,["fileData"]);s!=null&&_(e,["fileData"],die(s));const o=E(t,["functionCall"]);o!=null&&_(e,["functionCall"],hie(o));const c=E(t,["functionResponse"]);c!=null&&_(e,["functionResponse"],c);const h=E(t,["inlineData"]);h!=null&&_(e,["inlineData"],c1(h));const d=E(t,["text"]);d!=null&&_(e,["text"],d);const m=E(t,["thought"]);m!=null&&_(e,["thought"],m);const C=E(t,["thoughtSignature"]);C!=null&&_(e,["thoughtSignature"],C);const b=E(t,["videoMetadata"]);return b!=null&&_(e,["videoMetadata"],b),e}function Iie(t){const e={},r=E(t,["handle"]);if(r!=null&&_(e,["handle"],r),E(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Nie(t){const e={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=E(t,["computerUse"]);r!=null&&_(e,["computerUse"],r);const n=E(t,["fileSearch"]);n!=null&&_(e,["fileSearch"],n);const i=E(t,["codeExecution"]);if(i!=null&&_(e,["codeExecution"],i),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=E(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(C=>C)),_(e,["functionDeclarations"],m)}const o=E(t,["googleMaps"]);o!=null&&_(e,["googleMaps"],mie(o));const c=E(t,["googleSearch"]);c!=null&&_(e,["googleSearch"],xie(c));const h=E(t,["googleSearchRetrieval"]);h!=null&&_(e,["googleSearchRetrieval"],h);const d=E(t,["urlContext"]);return d!=null&&_(e,["urlContext"],d),e}function Rie(t){const e={},r=E(t,["retrieval"]);r!=null&&_(e,["retrieval"],r);const n=E(t,["computerUse"]);if(n!=null&&_(e,["computerUse"],n),E(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=E(t,["codeExecution"]);i!=null&&_(e,["codeExecution"],i);const s=E(t,["enterpriseWebSearch"]);s!=null&&_(e,["enterpriseWebSearch"],s);const o=E(t,["functionDeclarations"]);if(o!=null){let C=o;Array.isArray(C)&&(C=C.map(b=>gie(b))),_(e,["functionDeclarations"],C)}const c=E(t,["googleMaps"]);c!=null&&_(e,["googleMaps"],c);const h=E(t,["googleSearch"]);h!=null&&_(e,["googleSearch"],h);const d=E(t,["googleSearchRetrieval"]);d!=null&&_(e,["googleSearchRetrieval"],d);const m=E(t,["urlContext"]);return m!=null&&_(e,["urlContext"],m),e}function Fie(t){const e={},r=E(t,["promptTokenCount"]);r!=null&&_(e,["promptTokenCount"],r);const n=E(t,["cachedContentTokenCount"]);n!=null&&_(e,["cachedContentTokenCount"],n);const i=E(t,["candidatesTokenCount"]);i!=null&&_(e,["responseTokenCount"],i);const s=E(t,["toolUsePromptTokenCount"]);s!=null&&_(e,["toolUsePromptTokenCount"],s);const o=E(t,["thoughtsTokenCount"]);o!=null&&_(e,["thoughtsTokenCount"],o);const c=E(t,["totalTokenCount"]);c!=null&&_(e,["totalTokenCount"],c);const h=E(t,["promptTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(F=>F)),_(e,["promptTokensDetails"],I)}const d=E(t,["cacheTokensDetails"]);if(d!=null){let I=d;Array.isArray(I)&&(I=I.map(F=>F)),_(e,["cacheTokensDetails"],I)}const m=E(t,["candidatesTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(F=>F)),_(e,["responseTokensDetails"],I)}const C=E(t,["toolUsePromptTokensDetails"]);if(C!=null){let I=C;Array.isArray(I)&&(I=I.map(F=>F)),_(e,["toolUsePromptTokensDetails"],I)}const b=E(t,["trafficType"]);return b!=null&&_(e,["trafficType"],b),e}function kie(t){const e={},r=E(t,["type"]);return r!=null&&_(e,["voiceActivityType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Die(t,e){const r={},n=E(t,["data"]);if(n!=null&&_(r,["data"],n),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=E(t,["mimeType"]);return i!=null&&_(r,["mimeType"],i),r}function Uie(t,e){const r={},n=E(t,["content"]);n!=null&&_(r,["content"],n);const i=E(t,["citationMetadata"]);i!=null&&_(r,["citationMetadata"],Mie(i));const s=E(t,["tokenCount"]);s!=null&&_(r,["tokenCount"],s);const o=E(t,["finishReason"]);o!=null&&_(r,["finishReason"],o);const c=E(t,["avgLogprobs"]);c!=null&&_(r,["avgLogprobs"],c);const h=E(t,["groundingMetadata"]);h!=null&&_(r,["groundingMetadata"],h);const d=E(t,["index"]);d!=null&&_(r,["index"],d);const m=E(t,["logprobsResult"]);m!=null&&_(r,["logprobsResult"],m);const C=E(t,["safetyRatings"]);if(C!=null){let I=C;Array.isArray(I)&&(I=I.map(F=>F)),_(r,["safetyRatings"],I)}const b=E(t,["urlContextMetadata"]);return b!=null&&_(r,["urlContextMetadata"],b),r}function Mie(t,e){const r={},n=E(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),_(r,["citations"],i)}return r}function Oie(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["contents"]);if(s!=null){let o=ya(s);Array.isArray(o)&&(o=o.map(c=>c)),_(n,["contents"],o)}return n}function Lie(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(r,["tokensInfo"],s)}return r}function Pie(t,e){const r={},n=E(t,["values"]);n!=null&&_(r,["values"],n);const i=E(t,["statistics"]);return i!=null&&_(r,["statistics"],Qie(i)),r}function Qie(t,e){const r={},n=E(t,["truncated"]);n!=null&&_(r,["truncated"],n);const i=E(t,["token_count"]);return i!=null&&_(r,["tokenCount"],i),r}function Kd(t,e){const r={},n=E(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Xse(o))),_(r,["parts"],s)}const i=E(t,["role"]);return i!=null&&_(r,["role"],i),r}function Hie(t,e){const r={},n=E(t,["controlType"]);n!=null&&_(r,["controlType"],n);const i=E(t,["enableControlImageComputation"]);return i!=null&&_(r,["computeControl"],i),r}function jie(t,e){const r={};if(E(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(E(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(E(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return r}function Vie(t,e,r){const n={},i=E(t,["systemInstruction"]);e!==void 0&&i!=null&&_(e,["systemInstruction"],Li(i));const s=E(t,["tools"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(h=>Ik(h))),_(e,["tools"],c)}const o=E(t,["generationConfig"]);return e!==void 0&&o!=null&&_(e,["generationConfig"],Dse(o)),n}function Gie(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["contents"]);if(s!=null){let c=ya(s);Array.isArray(c)&&(c=c.map(h=>Kd(h))),_(n,["contents"],c)}const o=E(e,["config"]);return o!=null&&jie(o),n}function Kie(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["contents"]);if(s!=null){let c=ya(s);Array.isArray(c)&&(c=c.map(h=>h)),_(n,["contents"],c)}const o=E(e,["config"]);return o!=null&&Vie(o,n),n}function zie(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["totalTokens"]);i!=null&&_(r,["totalTokens"],i);const s=E(t,["cachedContentTokenCount"]);return s!=null&&_(r,["cachedContentTokenCount"],s),r}function Wie(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["totalTokens"]);return i!=null&&_(r,["totalTokens"],i),r}function qie(t,e,r){const n={},i=E(e,["model"]);return i!=null&&_(n,["_url","name"],ln(t,i)),n}function Xie(t,e,r){const n={},i=E(e,["model"]);return i!=null&&_(n,["_url","name"],ln(t,i)),n}function Yie(t,e){const r={},n=E(t,["sdkHttpResponse"]);return n!=null&&_(r,["sdkHttpResponse"],n),r}function Jie(t,e){const r={},n=E(t,["sdkHttpResponse"]);return n!=null&&_(r,["sdkHttpResponse"],n),r}function Zie(t,e,r){const n={},i=E(t,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const s=E(t,["negativePrompt"]);e!==void 0&&s!=null&&_(e,["parameters","negativePrompt"],s);const o=E(t,["numberOfImages"]);e!==void 0&&o!=null&&_(e,["parameters","sampleCount"],o);const c=E(t,["aspectRatio"]);e!==void 0&&c!=null&&_(e,["parameters","aspectRatio"],c);const h=E(t,["guidanceScale"]);e!==void 0&&h!=null&&_(e,["parameters","guidanceScale"],h);const d=E(t,["seed"]);e!==void 0&&d!=null&&_(e,["parameters","seed"],d);const m=E(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&_(e,["parameters","safetySetting"],m);const C=E(t,["personGeneration"]);e!==void 0&&C!=null&&_(e,["parameters","personGeneration"],C);const b=E(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&_(e,["parameters","includeSafetyAttributes"],b);const I=E(t,["includeRaiReason"]);e!==void 0&&I!=null&&_(e,["parameters","includeRaiReason"],I);const F=E(t,["language"]);e!==void 0&&F!=null&&_(e,["parameters","language"],F);const k=E(t,["outputMimeType"]);e!==void 0&&k!=null&&_(e,["parameters","outputOptions","mimeType"],k);const U=E(t,["outputCompressionQuality"]);e!==void 0&&U!=null&&_(e,["parameters","outputOptions","compressionQuality"],U);const V=E(t,["addWatermark"]);e!==void 0&&V!=null&&_(e,["parameters","addWatermark"],V);const K=E(t,["labels"]);e!==void 0&&K!=null&&_(e,["labels"],K);const Q=E(t,["editMode"]);e!==void 0&&Q!=null&&_(e,["parameters","editMode"],Q);const te=E(t,["baseSteps"]);return e!==void 0&&te!=null&&_(e,["parameters","editConfig","baseSteps"],te),n}function $ie(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const o=E(e,["referenceImages"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(d=>tae(d))),_(n,["instances[0]","referenceImages"],h)}const c=E(e,["config"]);return c!=null&&Zie(c,n),n}function ese(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Kp(o))),_(r,["generatedImages"],s)}return r}function tse(t,e,r){const n={},i=E(t,["taskType"]);e!==void 0&&i!=null&&_(e,["requests[]","taskType"],i);const s=E(t,["title"]);e!==void 0&&s!=null&&_(e,["requests[]","title"],s);const o=E(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&_(e,["requests[]","outputDimensionality"],o),E(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(E(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function rse(t,e,r){const n={};let i=E(r,["embeddingApiType"]);if(i===void 0&&(i="PREDICT"),i==="PREDICT"){const d=E(t,["taskType"]);e!==void 0&&d!=null&&_(e,["instances[]","task_type"],d)}else if(i==="EMBED_CONTENT"){const d=E(t,["taskType"]);e!==void 0&&d!=null&&_(e,["taskType"],d)}let s=E(r,["embeddingApiType"]);if(s===void 0&&(s="PREDICT"),s==="PREDICT"){const d=E(t,["title"]);e!==void 0&&d!=null&&_(e,["instances[]","title"],d)}else if(s==="EMBED_CONTENT"){const d=E(t,["title"]);e!==void 0&&d!=null&&_(e,["title"],d)}let o=E(r,["embeddingApiType"]);if(o===void 0&&(o="PREDICT"),o==="PREDICT"){const d=E(t,["outputDimensionality"]);e!==void 0&&d!=null&&_(e,["parameters","outputDimensionality"],d)}else if(o==="EMBED_CONTENT"){const d=E(t,["outputDimensionality"]);e!==void 0&&d!=null&&_(e,["outputDimensionality"],d)}let c=E(r,["embeddingApiType"]);if(c===void 0&&(c="PREDICT"),c==="PREDICT"){const d=E(t,["mimeType"]);e!==void 0&&d!=null&&_(e,["instances[]","mimeType"],d)}let h=E(r,["embeddingApiType"]);if(h===void 0&&(h="PREDICT"),h==="PREDICT"){const d=E(t,["autoTruncate"]);e!==void 0&&d!=null&&_(e,["parameters","autoTruncate"],d)}else if(h==="EMBED_CONTENT"){const d=E(t,["autoTruncate"]);e!==void 0&&d!=null&&_(e,["autoTruncate"],d)}return n}function nse(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["contents"]);if(s!=null){let d=qy(t,s);Array.isArray(d)&&(d=d.map(m=>m)),_(n,["requests[]","content"],d)}const o=E(e,["content"]);o!=null&&Kd(Li(o));const c=E(e,["config"]);c!=null&&tse(c,n);const h=E(e,["model"]);return h!==void 0&&_(n,["requests[]","model"],ln(t,h)),n}function ise(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));let s=E(r,["embeddingApiType"]);if(s===void 0&&(s="PREDICT"),s==="PREDICT"){const h=E(e,["contents"]);if(h!=null){let d=qy(t,h);Array.isArray(d)&&(d=d.map(m=>m)),_(n,["instances[]","content"],d)}}let o=E(r,["embeddingApiType"]);if(o===void 0&&(o="PREDICT"),o==="EMBED_CONTENT"){const h=E(e,["content"]);h!=null&&_(n,["content"],Li(h))}const c=E(e,["config"]);return c!=null&&rse(c,n,r),n}function sse(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>c)),_(r,["embeddings"],o)}const s=E(t,["metadata"]);return s!=null&&_(r,["metadata"],s),r}function ase(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Pie(c))),_(r,["embeddings"],o)}const s=E(t,["metadata"]);if(s!=null&&_(r,["metadata"],s),e&&E(e,["embeddingApiType"])==="EMBED_CONTENT"){const o=E(t,["embedding"]),c=E(t,["usageMetadata"]),h=E(t,["truncated"]);if(o){const d={};c&&c.promptTokenCount&&(d.tokenCount=c.promptTokenCount),h&&(d.truncated=h),o.statistics=d,_(r,["embeddings"],[o])}}return r}function ose(t,e){const r={},n=E(t,["endpoint"]);n!=null&&_(r,["name"],n);const i=E(t,["deployedModelId"]);return i!=null&&_(r,["deployedModelId"],i),r}function lse(t,e){const r={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["fileUri"]);n!=null&&_(r,["fileUri"],n);const i=E(t,["mimeType"]);return i!=null&&_(r,["mimeType"],i),r}function Ase(t,e){const r={},n=E(t,["id"]);n!=null&&_(r,["id"],n);const i=E(t,["args"]);i!=null&&_(r,["args"],i);const s=E(t,["name"]);if(s!=null&&_(r,["name"],s),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return r}function cse(t,e){const r={},n=E(t,["allowedFunctionNames"]);n!=null&&_(r,["allowedFunctionNames"],n);const i=E(t,["mode"]);if(i!=null&&_(r,["mode"],i),E(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return r}function use(t,e){const r={},n=E(t,["description"]);n!=null&&_(r,["description"],n);const i=E(t,["name"]);i!=null&&_(r,["name"],i);const s=E(t,["parameters"]);s!=null&&_(r,["parameters"],s);const o=E(t,["parametersJsonSchema"]);o!=null&&_(r,["parametersJsonSchema"],o);const c=E(t,["response"]);c!=null&&_(r,["response"],c);const h=E(t,["responseJsonSchema"]);if(h!=null&&_(r,["responseJsonSchema"],h),E(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return r}function fse(t,e,r,n){const i={},s=E(e,["systemInstruction"]);r!==void 0&&s!=null&&_(r,["systemInstruction"],Kd(Li(s)));const o=E(e,["temperature"]);o!=null&&_(i,["temperature"],o);const c=E(e,["topP"]);c!=null&&_(i,["topP"],c);const h=E(e,["topK"]);h!=null&&_(i,["topK"],h);const d=E(e,["candidateCount"]);d!=null&&_(i,["candidateCount"],d);const m=E(e,["maxOutputTokens"]);m!=null&&_(i,["maxOutputTokens"],m);const C=E(e,["stopSequences"]);C!=null&&_(i,["stopSequences"],C);const b=E(e,["responseLogprobs"]);b!=null&&_(i,["responseLogprobs"],b);const I=E(e,["logprobs"]);I!=null&&_(i,["logprobs"],I);const F=E(e,["presencePenalty"]);F!=null&&_(i,["presencePenalty"],F);const k=E(e,["frequencyPenalty"]);k!=null&&_(i,["frequencyPenalty"],k);const U=E(e,["seed"]);U!=null&&_(i,["seed"],U);const V=E(e,["responseMimeType"]);V!=null&&_(i,["responseMimeType"],V);const K=E(e,["responseSchema"]);K!=null&&_(i,["responseSchema"],Xy(K));const Q=E(e,["responseJsonSchema"]);if(Q!=null&&_(i,["responseJsonSchema"],Q),E(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(E(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const te=E(e,["safetySettings"]);if(r!==void 0&&te!=null){let Ie=te;Array.isArray(Ie)&&(Ie=Ie.map(ge=>rae(ge))),_(r,["safetySettings"],Ie)}const re=E(e,["tools"]);if(r!==void 0&&re!=null){let Ie=v0(re);Array.isArray(Ie)&&(Ie=Ie.map(ge=>Aae(w0(ge)))),_(r,["tools"],Ie)}const z=E(e,["toolConfig"]);if(r!==void 0&&z!=null&&_(r,["toolConfig"],lae(z)),E(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=E(e,["cachedContent"]);r!==void 0&&M!=null&&_(r,["cachedContent"],kl(t,M));const P=E(e,["responseModalities"]);P!=null&&_(i,["responseModalities"],P);const O=E(e,["mediaResolution"]);O!=null&&_(i,["mediaResolution"],O);const ee=E(e,["speechConfig"]);if(ee!=null&&_(i,["speechConfig"],Yy(ee)),E(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Y=E(e,["thinkingConfig"]);Y!=null&&_(i,["thinkingConfig"],Y);const X=E(e,["imageConfig"]);X!=null&&_(i,["imageConfig"],Pse(X));const G=E(e,["enableEnhancedCivicAnswers"]);if(G!=null&&_(i,["enableEnhancedCivicAnswers"],G),E(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function dse(t,e,r,n){const i={},s=E(e,["systemInstruction"]);r!==void 0&&s!=null&&_(r,["systemInstruction"],Li(s));const o=E(e,["temperature"]);o!=null&&_(i,["temperature"],o);const c=E(e,["topP"]);c!=null&&_(i,["topP"],c);const h=E(e,["topK"]);h!=null&&_(i,["topK"],h);const d=E(e,["candidateCount"]);d!=null&&_(i,["candidateCount"],d);const m=E(e,["maxOutputTokens"]);m!=null&&_(i,["maxOutputTokens"],m);const C=E(e,["stopSequences"]);C!=null&&_(i,["stopSequences"],C);const b=E(e,["responseLogprobs"]);b!=null&&_(i,["responseLogprobs"],b);const I=E(e,["logprobs"]);I!=null&&_(i,["logprobs"],I);const F=E(e,["presencePenalty"]);F!=null&&_(i,["presencePenalty"],F);const k=E(e,["frequencyPenalty"]);k!=null&&_(i,["frequencyPenalty"],k);const U=E(e,["seed"]);U!=null&&_(i,["seed"],U);const V=E(e,["responseMimeType"]);V!=null&&_(i,["responseMimeType"],V);const K=E(e,["responseSchema"]);K!=null&&_(i,["responseSchema"],Xy(K));const Q=E(e,["responseJsonSchema"]);Q!=null&&_(i,["responseJsonSchema"],Q);const te=E(e,["routingConfig"]);te!=null&&_(i,["routingConfig"],te);const re=E(e,["modelSelectionConfig"]);re!=null&&_(i,["modelConfig"],re);const z=E(e,["safetySettings"]);if(r!==void 0&&z!=null){let Ge=z;Array.isArray(Ge)&&(Ge=Ge.map(be=>be)),_(r,["safetySettings"],Ge)}const M=E(e,["tools"]);if(r!==void 0&&M!=null){let Ge=v0(M);Array.isArray(Ge)&&(Ge=Ge.map(be=>Ik(w0(be)))),_(r,["tools"],Ge)}const P=E(e,["toolConfig"]);r!==void 0&&P!=null&&_(r,["toolConfig"],P);const O=E(e,["labels"]);r!==void 0&&O!=null&&_(r,["labels"],O);const ee=E(e,["cachedContent"]);r!==void 0&&ee!=null&&_(r,["cachedContent"],kl(t,ee));const Y=E(e,["responseModalities"]);Y!=null&&_(i,["responseModalities"],Y);const X=E(e,["mediaResolution"]);X!=null&&_(i,["mediaResolution"],X);const G=E(e,["speechConfig"]);G!=null&&_(i,["speechConfig"],Yy(G));const Ie=E(e,["audioTimestamp"]);Ie!=null&&_(i,["audioTimestamp"],Ie);const ge=E(e,["thinkingConfig"]);ge!=null&&_(i,["thinkingConfig"],ge);const de=E(e,["imageConfig"]);if(de!=null&&_(i,["imageConfig"],Qse(de)),E(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const we=E(e,["modelArmorConfig"]);return r!==void 0&&we!=null&&_(r,["modelArmorConfig"],we),i}function mI(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["contents"]);if(s!=null){let c=ya(s);Array.isArray(c)&&(c=c.map(h=>Kd(h))),_(n,["contents"],c)}const o=E(e,["config"]);return o!=null&&_(n,["generationConfig"],fse(t,o,n)),n}function xI(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["contents"]);if(s!=null){let c=ya(s);Array.isArray(c)&&(c=c.map(h=>h)),_(n,["contents"],c)}const o=E(e,["config"]);return o!=null&&_(n,["generationConfig"],dse(t,o,n)),n}function wI(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(m=>Uie(m))),_(r,["candidates"],d)}const s=E(t,["modelVersion"]);s!=null&&_(r,["modelVersion"],s);const o=E(t,["promptFeedback"]);o!=null&&_(r,["promptFeedback"],o);const c=E(t,["responseId"]);c!=null&&_(r,["responseId"],c);const h=E(t,["usageMetadata"]);return h!=null&&_(r,["usageMetadata"],h),r}function vI(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(C=>C)),_(r,["candidates"],m)}const s=E(t,["createTime"]);s!=null&&_(r,["createTime"],s);const o=E(t,["modelVersion"]);o!=null&&_(r,["modelVersion"],o);const c=E(t,["promptFeedback"]);c!=null&&_(r,["promptFeedback"],c);const h=E(t,["responseId"]);h!=null&&_(r,["responseId"],h);const d=E(t,["usageMetadata"]);return d!=null&&_(r,["usageMetadata"],d),r}function hse(t,e,r){const n={};if(E(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=E(t,["numberOfImages"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const s=E(t,["aspectRatio"]);e!==void 0&&s!=null&&_(e,["parameters","aspectRatio"],s);const o=E(t,["guidanceScale"]);if(e!==void 0&&o!=null&&_(e,["parameters","guidanceScale"],o),E(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=E(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&_(e,["parameters","safetySetting"],c);const h=E(t,["personGeneration"]);e!==void 0&&h!=null&&_(e,["parameters","personGeneration"],h);const d=E(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&_(e,["parameters","includeSafetyAttributes"],d);const m=E(t,["includeRaiReason"]);e!==void 0&&m!=null&&_(e,["parameters","includeRaiReason"],m);const C=E(t,["language"]);e!==void 0&&C!=null&&_(e,["parameters","language"],C);const b=E(t,["outputMimeType"]);e!==void 0&&b!=null&&_(e,["parameters","outputOptions","mimeType"],b);const I=E(t,["outputCompressionQuality"]);if(e!==void 0&&I!=null&&_(e,["parameters","outputOptions","compressionQuality"],I),E(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(E(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=E(t,["imageSize"]);if(e!==void 0&&F!=null&&_(e,["parameters","sampleImageSize"],F),E(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function gse(t,e,r){const n={},i=E(t,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const s=E(t,["negativePrompt"]);e!==void 0&&s!=null&&_(e,["parameters","negativePrompt"],s);const o=E(t,["numberOfImages"]);e!==void 0&&o!=null&&_(e,["parameters","sampleCount"],o);const c=E(t,["aspectRatio"]);e!==void 0&&c!=null&&_(e,["parameters","aspectRatio"],c);const h=E(t,["guidanceScale"]);e!==void 0&&h!=null&&_(e,["parameters","guidanceScale"],h);const d=E(t,["seed"]);e!==void 0&&d!=null&&_(e,["parameters","seed"],d);const m=E(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&_(e,["parameters","safetySetting"],m);const C=E(t,["personGeneration"]);e!==void 0&&C!=null&&_(e,["parameters","personGeneration"],C);const b=E(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&_(e,["parameters","includeSafetyAttributes"],b);const I=E(t,["includeRaiReason"]);e!==void 0&&I!=null&&_(e,["parameters","includeRaiReason"],I);const F=E(t,["language"]);e!==void 0&&F!=null&&_(e,["parameters","language"],F);const k=E(t,["outputMimeType"]);e!==void 0&&k!=null&&_(e,["parameters","outputOptions","mimeType"],k);const U=E(t,["outputCompressionQuality"]);e!==void 0&&U!=null&&_(e,["parameters","outputOptions","compressionQuality"],U);const V=E(t,["addWatermark"]);e!==void 0&&V!=null&&_(e,["parameters","addWatermark"],V);const K=E(t,["labels"]);e!==void 0&&K!=null&&_(e,["labels"],K);const Q=E(t,["imageSize"]);e!==void 0&&Q!=null&&_(e,["parameters","sampleImageSize"],Q);const te=E(t,["enhancePrompt"]);return e!==void 0&&te!=null&&_(e,["parameters","enhancePrompt"],te),n}function pse(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const o=E(e,["config"]);return o!=null&&hse(o,n),n}function mse(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const o=E(e,["config"]);return o!=null&&gse(o,n),n}function xse(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Nse(c))),_(r,["generatedImages"],o)}const s=E(t,["positivePromptSafetyAttributes"]);return s!=null&&_(r,["positivePromptSafetyAttributes"],Bk(s)),r}function wse(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Kp(c))),_(r,["generatedImages"],o)}const s=E(t,["positivePromptSafetyAttributes"]);return s!=null&&_(r,["positivePromptSafetyAttributes"],Sk(s)),r}function vse(t,e,r){const n={},i=E(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i),E(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=E(t,["durationSeconds"]);if(e!==void 0&&s!=null&&_(e,["parameters","durationSeconds"],s),E(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=E(t,["aspectRatio"]);e!==void 0&&o!=null&&_(e,["parameters","aspectRatio"],o);const c=E(t,["resolution"]);e!==void 0&&c!=null&&_(e,["parameters","resolution"],c);const h=E(t,["personGeneration"]);if(e!==void 0&&h!=null&&_(e,["parameters","personGeneration"],h),E(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=E(t,["negativePrompt"]);e!==void 0&&d!=null&&_(e,["parameters","negativePrompt"],d);const m=E(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&_(e,["parameters","enhancePrompt"],m),E(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const C=E(t,["lastFrame"]);e!==void 0&&C!=null&&_(e,["instances[0]","lastFrame"],zp(C));const b=E(t,["referenceImages"]);if(e!==void 0&&b!=null){let I=b;Array.isArray(I)&&(I=I.map(F=>Cae(F))),_(e,["instances[0]","referenceImages"],I)}if(E(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(E(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function yse(t,e,r){const n={},i=E(t,["numberOfVideos"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const s=E(t,["outputGcsUri"]);e!==void 0&&s!=null&&_(e,["parameters","storageUri"],s);const o=E(t,["fps"]);e!==void 0&&o!=null&&_(e,["parameters","fps"],o);const c=E(t,["durationSeconds"]);e!==void 0&&c!=null&&_(e,["parameters","durationSeconds"],c);const h=E(t,["seed"]);e!==void 0&&h!=null&&_(e,["parameters","seed"],h);const d=E(t,["aspectRatio"]);e!==void 0&&d!=null&&_(e,["parameters","aspectRatio"],d);const m=E(t,["resolution"]);e!==void 0&&m!=null&&_(e,["parameters","resolution"],m);const C=E(t,["personGeneration"]);e!==void 0&&C!=null&&_(e,["parameters","personGeneration"],C);const b=E(t,["pubsubTopic"]);e!==void 0&&b!=null&&_(e,["parameters","pubsubTopic"],b);const I=E(t,["negativePrompt"]);e!==void 0&&I!=null&&_(e,["parameters","negativePrompt"],I);const F=E(t,["enhancePrompt"]);e!==void 0&&F!=null&&_(e,["parameters","enhancePrompt"],F);const k=E(t,["generateAudio"]);e!==void 0&&k!=null&&_(e,["parameters","generateAudio"],k);const U=E(t,["lastFrame"]);e!==void 0&&U!=null&&_(e,["instances[0]","lastFrame"],po(U));const V=E(t,["referenceImages"]);if(e!==void 0&&V!=null){let te=V;Array.isArray(te)&&(te=te.map(re=>Eae(re))),_(e,["instances[0]","referenceImages"],te)}const K=E(t,["mask"]);e!==void 0&&K!=null&&_(e,["instances[0]","mask"],yae(K));const Q=E(t,["compressionQuality"]);return e!==void 0&&Q!=null&&_(e,["parameters","compressionQuality"],Q),n}function Cse(t,e){const r={},n=E(t,["name"]);n!=null&&_(r,["name"],n);const i=E(t,["metadata"]);i!=null&&_(r,["metadata"],i);const s=E(t,["done"]);s!=null&&_(r,["done"],s);const o=E(t,["error"]);o!=null&&_(r,["error"],o);const c=E(t,["response","generateVideoResponse"]);return c!=null&&_(r,["response"],Tse(c)),r}function Ese(t,e){const r={},n=E(t,["name"]);n!=null&&_(r,["name"],n);const i=E(t,["metadata"]);i!=null&&_(r,["metadata"],i);const s=E(t,["done"]);s!=null&&_(r,["done"],s);const o=E(t,["error"]);o!=null&&_(r,["error"],o);const c=E(t,["response"]);return c!=null&&_(r,["response"],Bse(c)),r}function bse(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const o=E(e,["image"]);o!=null&&_(n,["instances[0]","image"],zp(o));const c=E(e,["video"]);c!=null&&_(n,["instances[0]","video"],Nk(c));const h=E(e,["source"]);h!=null&&Sse(h,n);const d=E(e,["config"]);return d!=null&&vse(d,n),n}function _se(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const o=E(e,["image"]);o!=null&&_(n,["instances[0]","image"],po(o));const c=E(e,["video"]);c!=null&&_(n,["instances[0]","video"],Rk(c));const h=E(e,["source"]);h!=null&&Ise(h,n);const d=E(e,["config"]);return d!=null&&yse(d,n),n}function Tse(t,e){const r={},n=E(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(c=>Fse(c))),_(r,["generatedVideos"],o)}const i=E(t,["raiMediaFilteredCount"]);i!=null&&_(r,["raiMediaFilteredCount"],i);const s=E(t,["raiMediaFilteredReasons"]);return s!=null&&_(r,["raiMediaFilteredReasons"],s),r}function Bse(t,e){const r={},n=E(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(c=>kse(c))),_(r,["generatedVideos"],o)}const i=E(t,["raiMediaFilteredCount"]);i!=null&&_(r,["raiMediaFilteredCount"],i);const s=E(t,["raiMediaFilteredReasons"]);return s!=null&&_(r,["raiMediaFilteredReasons"],s),r}function Sse(t,e,r){const n={},i=E(t,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const s=E(t,["image"]);e!==void 0&&s!=null&&_(e,["instances[0]","image"],zp(s));const o=E(t,["video"]);return e!==void 0&&o!=null&&_(e,["instances[0]","video"],Nk(o)),n}function Ise(t,e,r){const n={},i=E(t,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const s=E(t,["image"]);e!==void 0&&s!=null&&_(e,["instances[0]","image"],po(s));const o=E(t,["video"]);return e!==void 0&&o!=null&&_(e,["instances[0]","video"],Rk(o)),n}function Nse(t,e){const r={},n=E(t,["_self"]);n!=null&&_(r,["image"],Hse(n));const i=E(t,["raiFilteredReason"]);i!=null&&_(r,["raiFilteredReason"],i);const s=E(t,["_self"]);return s!=null&&_(r,["safetyAttributes"],Bk(s)),r}function Kp(t,e){const r={},n=E(t,["_self"]);n!=null&&_(r,["image"],Tk(n));const i=E(t,["raiFilteredReason"]);i!=null&&_(r,["raiFilteredReason"],i);const s=E(t,["_self"]);s!=null&&_(r,["safetyAttributes"],Sk(s));const o=E(t,["prompt"]);return o!=null&&_(r,["enhancedPrompt"],o),r}function Rse(t,e){const r={},n=E(t,["_self"]);n!=null&&_(r,["mask"],Tk(n));const i=E(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(r,["labels"],s)}return r}function Fse(t,e){const r={},n=E(t,["video"]);return n!=null&&_(r,["video"],wae(n)),r}function kse(t,e){const r={},n=E(t,["_self"]);return n!=null&&_(r,["video"],vae(n)),r}function Dse(t,e){const r={},n=E(t,["modelSelectionConfig"]);n!=null&&_(r,["modelConfig"],n);const i=E(t,["responseJsonSchema"]);i!=null&&_(r,["responseJsonSchema"],i);const s=E(t,["audioTimestamp"]);s!=null&&_(r,["audioTimestamp"],s);const o=E(t,["candidateCount"]);o!=null&&_(r,["candidateCount"],o);const c=E(t,["enableAffectiveDialog"]);c!=null&&_(r,["enableAffectiveDialog"],c);const h=E(t,["frequencyPenalty"]);h!=null&&_(r,["frequencyPenalty"],h);const d=E(t,["logprobs"]);d!=null&&_(r,["logprobs"],d);const m=E(t,["maxOutputTokens"]);m!=null&&_(r,["maxOutputTokens"],m);const C=E(t,["mediaResolution"]);C!=null&&_(r,["mediaResolution"],C);const b=E(t,["presencePenalty"]);b!=null&&_(r,["presencePenalty"],b);const I=E(t,["responseLogprobs"]);I!=null&&_(r,["responseLogprobs"],I);const F=E(t,["responseMimeType"]);F!=null&&_(r,["responseMimeType"],F);const k=E(t,["responseModalities"]);k!=null&&_(r,["responseModalities"],k);const U=E(t,["responseSchema"]);U!=null&&_(r,["responseSchema"],U);const V=E(t,["routingConfig"]);V!=null&&_(r,["routingConfig"],V);const K=E(t,["seed"]);K!=null&&_(r,["seed"],K);const Q=E(t,["speechConfig"]);Q!=null&&_(r,["speechConfig"],Q);const te=E(t,["stopSequences"]);te!=null&&_(r,["stopSequences"],te);const re=E(t,["temperature"]);re!=null&&_(r,["temperature"],re);const z=E(t,["thinkingConfig"]);z!=null&&_(r,["thinkingConfig"],z);const M=E(t,["topK"]);M!=null&&_(r,["topK"],M);const P=E(t,["topP"]);if(P!=null&&_(r,["topP"],P),E(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Use(t,e,r){const n={},i=E(e,["model"]);return i!=null&&_(n,["_url","name"],ln(t,i)),n}function Mse(t,e,r){const n={},i=E(e,["model"]);return i!=null&&_(n,["_url","name"],ln(t,i)),n}function Ose(t,e){const r={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(t,["enableWidget"]);return n!=null&&_(r,["enableWidget"],n),r}function Lse(t,e){const r={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(t,["timeRangeFilter"]);return n!=null&&_(r,["timeRangeFilter"],n),r}function Pse(t,e){const r={},n=E(t,["aspectRatio"]);n!=null&&_(r,["aspectRatio"],n);const i=E(t,["imageSize"]);if(i!=null&&_(r,["imageSize"],i),E(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(E(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(E(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return r}function Qse(t,e){const r={},n=E(t,["aspectRatio"]);n!=null&&_(r,["aspectRatio"],n);const i=E(t,["imageSize"]);i!=null&&_(r,["imageSize"],i);const s=E(t,["personGeneration"]);s!=null&&_(r,["personGeneration"],s);const o=E(t,["outputMimeType"]);o!=null&&_(r,["imageOutputOptions","mimeType"],o);const c=E(t,["outputCompressionQuality"]);return c!=null&&_(r,["imageOutputOptions","compressionQuality"],c),r}function Hse(t,e){const r={},n=E(t,["bytesBase64Encoded"]);n!=null&&_(r,["imageBytes"],LA(n));const i=E(t,["mimeType"]);return i!=null&&_(r,["mimeType"],i),r}function Tk(t,e){const r={},n=E(t,["gcsUri"]);n!=null&&_(r,["gcsUri"],n);const i=E(t,["bytesBase64Encoded"]);i!=null&&_(r,["imageBytes"],LA(i));const s=E(t,["mimeType"]);return s!=null&&_(r,["mimeType"],s),r}function zp(t,e){const r={};if(E(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=E(t,["imageBytes"]);n!=null&&_(r,["bytesBase64Encoded"],LA(n));const i=E(t,["mimeType"]);return i!=null&&_(r,["mimeType"],i),r}function po(t,e){const r={},n=E(t,["gcsUri"]);n!=null&&_(r,["gcsUri"],n);const i=E(t,["imageBytes"]);i!=null&&_(r,["bytesBase64Encoded"],LA(i));const s=E(t,["mimeType"]);return s!=null&&_(r,["mimeType"],s),r}function jse(t,e,r,n){const i={},s=E(e,["pageSize"]);r!==void 0&&s!=null&&_(r,["_query","pageSize"],s);const o=E(e,["pageToken"]);r!==void 0&&o!=null&&_(r,["_query","pageToken"],o);const c=E(e,["filter"]);r!==void 0&&c!=null&&_(r,["_query","filter"],c);const h=E(e,["queryBase"]);return r!==void 0&&h!=null&&_(r,["_url","models_url"],wk(t,h)),i}function Vse(t,e,r,n){const i={},s=E(e,["pageSize"]);r!==void 0&&s!=null&&_(r,["_query","pageSize"],s);const o=E(e,["pageToken"]);r!==void 0&&o!=null&&_(r,["_query","pageToken"],o);const c=E(e,["filter"]);r!==void 0&&c!=null&&_(r,["_query","filter"],c);const h=E(e,["queryBase"]);return r!==void 0&&h!=null&&_(r,["_url","models_url"],wk(t,h)),i}function Gse(t,e,r){const n={},i=E(e,["config"]);return i!=null&&jse(t,i,n),n}function Kse(t,e,r){const n={},i=E(e,["config"]);return i!=null&&Vse(t,i,n),n}function zse(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&_(r,["nextPageToken"],i);const s=E(t,["_self"]);if(s!=null){let o=vk(s);Array.isArray(o)&&(o=o.map(c=>ev(c))),_(r,["models"],o)}return r}function Wse(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&_(r,["nextPageToken"],i);const s=E(t,["_self"]);if(s!=null){let o=vk(s);Array.isArray(o)&&(o=o.map(c=>tv(c))),_(r,["models"],o)}return r}function qse(t,e){const r={},n=E(t,["maskMode"]);n!=null&&_(r,["maskMode"],n);const i=E(t,["segmentationClasses"]);i!=null&&_(r,["maskClasses"],i);const s=E(t,["maskDilation"]);return s!=null&&_(r,["dilation"],s),r}function ev(t,e){const r={},n=E(t,["name"]);n!=null&&_(r,["name"],n);const i=E(t,["displayName"]);i!=null&&_(r,["displayName"],i);const s=E(t,["description"]);s!=null&&_(r,["description"],s);const o=E(t,["version"]);o!=null&&_(r,["version"],o);const c=E(t,["_self"]);c!=null&&_(r,["tunedModelInfo"],cae(c));const h=E(t,["inputTokenLimit"]);h!=null&&_(r,["inputTokenLimit"],h);const d=E(t,["outputTokenLimit"]);d!=null&&_(r,["outputTokenLimit"],d);const m=E(t,["supportedGenerationMethods"]);m!=null&&_(r,["supportedActions"],m);const C=E(t,["temperature"]);C!=null&&_(r,["temperature"],C);const b=E(t,["maxTemperature"]);b!=null&&_(r,["maxTemperature"],b);const I=E(t,["topP"]);I!=null&&_(r,["topP"],I);const F=E(t,["topK"]);F!=null&&_(r,["topK"],F);const k=E(t,["thinking"]);return k!=null&&_(r,["thinking"],k),r}function tv(t,e){const r={},n=E(t,["name"]);n!=null&&_(r,["name"],n);const i=E(t,["displayName"]);i!=null&&_(r,["displayName"],i);const s=E(t,["description"]);s!=null&&_(r,["description"],s);const o=E(t,["versionId"]);o!=null&&_(r,["version"],o);const c=E(t,["deployedModels"]);if(c!=null){let b=c;Array.isArray(b)&&(b=b.map(I=>ose(I))),_(r,["endpoints"],b)}const h=E(t,["labels"]);h!=null&&_(r,["labels"],h);const d=E(t,["_self"]);d!=null&&_(r,["tunedModelInfo"],uae(d));const m=E(t,["defaultCheckpointId"]);m!=null&&_(r,["defaultCheckpointId"],m);const C=E(t,["checkpoints"]);if(C!=null){let b=C;Array.isArray(b)&&(b=b.map(I=>I)),_(r,["checkpoints"],b)}return r}function Xse(t,e){const r={},n=E(t,["mediaResolution"]);n!=null&&_(r,["mediaResolution"],n);const i=E(t,["codeExecutionResult"]);i!=null&&_(r,["codeExecutionResult"],i);const s=E(t,["executableCode"]);s!=null&&_(r,["executableCode"],s);const o=E(t,["fileData"]);o!=null&&_(r,["fileData"],lse(o));const c=E(t,["functionCall"]);c!=null&&_(r,["functionCall"],Ase(c));const h=E(t,["functionResponse"]);h!=null&&_(r,["functionResponse"],h);const d=E(t,["inlineData"]);d!=null&&_(r,["inlineData"],Die(d));const m=E(t,["text"]);m!=null&&_(r,["text"],m);const C=E(t,["thought"]);C!=null&&_(r,["thought"],C);const b=E(t,["thoughtSignature"]);b!=null&&_(r,["thoughtSignature"],b);const I=E(t,["videoMetadata"]);return I!=null&&_(r,["videoMetadata"],I),r}function Yse(t,e){const r={},n=E(t,["productImage"]);return n!=null&&_(r,["image"],po(n)),r}function Jse(t,e,r){const n={},i=E(t,["numberOfImages"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const s=E(t,["baseSteps"]);e!==void 0&&s!=null&&_(e,["parameters","baseSteps"],s);const o=E(t,["outputGcsUri"]);e!==void 0&&o!=null&&_(e,["parameters","storageUri"],o);const c=E(t,["seed"]);e!==void 0&&c!=null&&_(e,["parameters","seed"],c);const h=E(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&_(e,["parameters","safetySetting"],h);const d=E(t,["personGeneration"]);e!==void 0&&d!=null&&_(e,["parameters","personGeneration"],d);const m=E(t,["addWatermark"]);e!==void 0&&m!=null&&_(e,["parameters","addWatermark"],m);const C=E(t,["outputMimeType"]);e!==void 0&&C!=null&&_(e,["parameters","outputOptions","mimeType"],C);const b=E(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&_(e,["parameters","outputOptions","compressionQuality"],b);const I=E(t,["enhancePrompt"]);e!==void 0&&I!=null&&_(e,["parameters","enhancePrompt"],I);const F=E(t,["labels"]);return e!==void 0&&F!=null&&_(e,["labels"],F),n}function Zse(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["source"]);s!=null&&eae(s,n);const o=E(e,["config"]);return o!=null&&Jse(o,n),n}function $se(t,e){const r={},n=E(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Kp(s))),_(r,["generatedImages"],i)}return r}function eae(t,e,r){const n={},i=E(t,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const s=E(t,["personImage"]);e!==void 0&&s!=null&&_(e,["instances[0]","personImage","image"],po(s));const o=E(t,["productImages"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>Yse(h))),_(e,["instances[0]","productImages"],c)}return n}function tae(t,e){const r={},n=E(t,["referenceImage"]);n!=null&&_(r,["referenceImage"],po(n));const i=E(t,["referenceId"]);i!=null&&_(r,["referenceId"],i);const s=E(t,["referenceType"]);s!=null&&_(r,["referenceType"],s);const o=E(t,["maskImageConfig"]);o!=null&&_(r,["maskImageConfig"],qse(o));const c=E(t,["controlImageConfig"]);c!=null&&_(r,["controlImageConfig"],Hie(c));const h=E(t,["styleImageConfig"]);h!=null&&_(r,["styleImageConfig"],h);const d=E(t,["subjectImageConfig"]);return d!=null&&_(r,["subjectImageConfig"],d),r}function Bk(t,e){const r={},n=E(t,["safetyAttributes","categories"]);n!=null&&_(r,["categories"],n);const i=E(t,["safetyAttributes","scores"]);i!=null&&_(r,["scores"],i);const s=E(t,["contentType"]);return s!=null&&_(r,["contentType"],s),r}function Sk(t,e){const r={},n=E(t,["safetyAttributes","categories"]);n!=null&&_(r,["categories"],n);const i=E(t,["safetyAttributes","scores"]);i!=null&&_(r,["scores"],i);const s=E(t,["contentType"]);return s!=null&&_(r,["contentType"],s),r}function rae(t,e){const r={},n=E(t,["category"]);if(n!=null&&_(r,["category"],n),E(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=E(t,["threshold"]);return i!=null&&_(r,["threshold"],i),r}function nae(t,e){const r={},n=E(t,["image"]);return n!=null&&_(r,["image"],po(n)),r}function iae(t,e,r){const n={},i=E(t,["mode"]);e!==void 0&&i!=null&&_(e,["parameters","mode"],i);const s=E(t,["maxPredictions"]);e!==void 0&&s!=null&&_(e,["parameters","maxPredictions"],s);const o=E(t,["confidenceThreshold"]);e!==void 0&&o!=null&&_(e,["parameters","confidenceThreshold"],o);const c=E(t,["maskDilation"]);e!==void 0&&c!=null&&_(e,["parameters","maskDilation"],c);const h=E(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&_(e,["parameters","binaryColorThreshold"],h);const d=E(t,["labels"]);return e!==void 0&&d!=null&&_(e,["labels"],d),n}function sae(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["source"]);s!=null&&oae(s,n);const o=E(e,["config"]);return o!=null&&iae(o,n),n}function aae(t,e){const r={},n=E(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Rse(s))),_(r,["generatedMasks"],i)}return r}function oae(t,e,r){const n={},i=E(t,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const s=E(t,["image"]);e!==void 0&&s!=null&&_(e,["instances[0]","image"],po(s));const o=E(t,["scribbleImage"]);return e!==void 0&&o!=null&&_(e,["instances[0]","scribble"],nae(o)),n}function lae(t,e){const r={},n=E(t,["retrievalConfig"]);n!=null&&_(r,["retrievalConfig"],n);const i=E(t,["functionCallingConfig"]);return i!=null&&_(r,["functionCallingConfig"],cse(i)),r}function Aae(t,e){const r={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=E(t,["computerUse"]);n!=null&&_(r,["computerUse"],n);const i=E(t,["fileSearch"]);i!=null&&_(r,["fileSearch"],i);const s=E(t,["codeExecution"]);if(s!=null&&_(r,["codeExecution"],s),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=E(t,["functionDeclarations"]);if(o!=null){let C=o;Array.isArray(C)&&(C=C.map(b=>b)),_(r,["functionDeclarations"],C)}const c=E(t,["googleMaps"]);c!=null&&_(r,["googleMaps"],Ose(c));const h=E(t,["googleSearch"]);h!=null&&_(r,["googleSearch"],Lse(h));const d=E(t,["googleSearchRetrieval"]);d!=null&&_(r,["googleSearchRetrieval"],d);const m=E(t,["urlContext"]);return m!=null&&_(r,["urlContext"],m),r}function Ik(t,e){const r={},n=E(t,["retrieval"]);n!=null&&_(r,["retrieval"],n);const i=E(t,["computerUse"]);if(i!=null&&_(r,["computerUse"],i),E(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=E(t,["codeExecution"]);s!=null&&_(r,["codeExecution"],s);const o=E(t,["enterpriseWebSearch"]);o!=null&&_(r,["enterpriseWebSearch"],o);const c=E(t,["functionDeclarations"]);if(c!=null){let b=c;Array.isArray(b)&&(b=b.map(I=>use(I))),_(r,["functionDeclarations"],b)}const h=E(t,["googleMaps"]);h!=null&&_(r,["googleMaps"],h);const d=E(t,["googleSearch"]);d!=null&&_(r,["googleSearch"],d);const m=E(t,["googleSearchRetrieval"]);m!=null&&_(r,["googleSearchRetrieval"],m);const C=E(t,["urlContext"]);return C!=null&&_(r,["urlContext"],C),r}function cae(t,e){const r={},n=E(t,["baseModel"]);n!=null&&_(r,["baseModel"],n);const i=E(t,["createTime"]);i!=null&&_(r,["createTime"],i);const s=E(t,["updateTime"]);return s!=null&&_(r,["updateTime"],s),r}function uae(t,e){const r={},n=E(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&_(r,["baseModel"],n);const i=E(t,["createTime"]);i!=null&&_(r,["createTime"],i);const s=E(t,["updateTime"]);return s!=null&&_(r,["updateTime"],s),r}function fae(t,e,r){const n={},i=E(t,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const s=E(t,["description"]);e!==void 0&&s!=null&&_(e,["description"],s);const o=E(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&_(e,["defaultCheckpointId"],o),n}function dae(t,e,r){const n={},i=E(t,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const s=E(t,["description"]);e!==void 0&&s!=null&&_(e,["description"],s);const o=E(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&_(e,["defaultCheckpointId"],o),n}function hae(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","name"],ln(t,i));const s=E(e,["config"]);return s!=null&&fae(s,n),n}function gae(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["config"]);return s!=null&&dae(s,n),n}function pae(t,e,r){const n={},i=E(t,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const s=E(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&_(e,["parameters","safetySetting"],s);const o=E(t,["personGeneration"]);e!==void 0&&o!=null&&_(e,["parameters","personGeneration"],o);const c=E(t,["includeRaiReason"]);e!==void 0&&c!=null&&_(e,["parameters","includeRaiReason"],c);const h=E(t,["outputMimeType"]);e!==void 0&&h!=null&&_(e,["parameters","outputOptions","mimeType"],h);const d=E(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&_(e,["parameters","outputOptions","compressionQuality"],d);const m=E(t,["enhanceInputImage"]);e!==void 0&&m!=null&&_(e,["parameters","upscaleConfig","enhanceInputImage"],m);const C=E(t,["imagePreservationFactor"]);e!==void 0&&C!=null&&_(e,["parameters","upscaleConfig","imagePreservationFactor"],C);const b=E(t,["labels"]);e!==void 0&&b!=null&&_(e,["labels"],b);const I=E(t,["numberOfImages"]);e!==void 0&&I!=null&&_(e,["parameters","sampleCount"],I);const F=E(t,["mode"]);return e!==void 0&&F!=null&&_(e,["parameters","mode"],F),n}function mae(t,e,r){const n={},i=E(e,["model"]);i!=null&&_(n,["_url","model"],ln(t,i));const s=E(e,["image"]);s!=null&&_(n,["instances[0]","image"],po(s));const o=E(e,["upscaleFactor"]);o!=null&&_(n,["parameters","upscaleConfig","upscaleFactor"],o);const c=E(e,["config"]);return c!=null&&pae(c,n),n}function xae(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Kp(o))),_(r,["generatedImages"],s)}return r}function wae(t,e){const r={},n=E(t,["uri"]);n!=null&&_(r,["uri"],n);const i=E(t,["encodedVideo"]);i!=null&&_(r,["videoBytes"],LA(i));const s=E(t,["encoding"]);return s!=null&&_(r,["mimeType"],s),r}function vae(t,e){const r={},n=E(t,["gcsUri"]);n!=null&&_(r,["uri"],n);const i=E(t,["bytesBase64Encoded"]);i!=null&&_(r,["videoBytes"],LA(i));const s=E(t,["mimeType"]);return s!=null&&_(r,["mimeType"],s),r}function yae(t,e){const r={},n=E(t,["image"]);n!=null&&_(r,["_self"],po(n));const i=E(t,["maskMode"]);return i!=null&&_(r,["maskMode"],i),r}function Cae(t,e){const r={},n=E(t,["image"]);n!=null&&_(r,["image"],zp(n));const i=E(t,["referenceType"]);return i!=null&&_(r,["referenceType"],i),r}function Eae(t,e){const r={},n=E(t,["image"]);n!=null&&_(r,["image"],po(n));const i=E(t,["referenceType"]);return i!=null&&_(r,["referenceType"],i),r}function Nk(t,e){const r={},n=E(t,["uri"]);n!=null&&_(r,["uri"],n);const i=E(t,["videoBytes"]);i!=null&&_(r,["encodedVideo"],LA(i));const s=E(t,["mimeType"]);return s!=null&&_(r,["encoding"],s),r}function Rk(t,e){const r={},n=E(t,["uri"]);n!=null&&_(r,["gcsUri"],n);const i=E(t,["videoBytes"]);i!=null&&_(r,["bytesBase64Encoded"],LA(i));const s=E(t,["mimeType"]);return s!=null&&_(r,["mimeType"],s),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bae(t,e){const r={},n=E(t,["displayName"]);return e!==void 0&&n!=null&&_(e,["displayName"],n),r}function _ae(t){const e={},r=E(t,["config"]);return r!=null&&bae(r,e),e}function Tae(t,e){const r={},n=E(t,["force"]);return e!==void 0&&n!=null&&_(e,["_query","force"],n),r}function Bae(t){const e={},r=E(t,["name"]);r!=null&&_(e,["_url","name"],r);const n=E(t,["config"]);return n!=null&&Tae(n,e),e}function Sae(t){const e={},r=E(t,["name"]);return r!=null&&_(e,["_url","name"],r),e}function Iae(t,e){const r={},n=E(t,["customMetadata"]);if(e!==void 0&&n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["customMetadata"],s)}const i=E(t,["chunkingConfig"]);return e!==void 0&&i!=null&&_(e,["chunkingConfig"],i),r}function Nae(t){const e={},r=E(t,["name"]);r!=null&&_(e,["name"],r);const n=E(t,["metadata"]);n!=null&&_(e,["metadata"],n);const i=E(t,["done"]);i!=null&&_(e,["done"],i);const s=E(t,["error"]);s!=null&&_(e,["error"],s);const o=E(t,["response"]);return o!=null&&_(e,["response"],Fae(o)),e}function Rae(t){const e={},r=E(t,["fileSearchStoreName"]);r!=null&&_(e,["_url","file_search_store_name"],r);const n=E(t,["fileName"]);n!=null&&_(e,["fileName"],n);const i=E(t,["config"]);return i!=null&&Iae(i,e),e}function Fae(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["parent"]);n!=null&&_(e,["parent"],n);const i=E(t,["documentName"]);return i!=null&&_(e,["documentName"],i),e}function kae(t,e){const r={},n=E(t,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const i=E(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),r}function Dae(t){const e={},r=E(t,["config"]);return r!=null&&kae(r,e),e}function Uae(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const i=E(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["fileSearchStores"],s)}return e}function Fk(t,e){const r={},n=E(t,["mimeType"]);e!==void 0&&n!=null&&_(e,["mimeType"],n);const i=E(t,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const s=E(t,["customMetadata"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(h=>h)),_(e,["customMetadata"],c)}const o=E(t,["chunkingConfig"]);return e!==void 0&&o!=null&&_(e,["chunkingConfig"],o),r}function Mae(t){const e={},r=E(t,["fileSearchStoreName"]);r!=null&&_(e,["_url","file_search_store_name"],r);const n=E(t,["config"]);return n!=null&&Fk(n,e),e}function Oae(t){const e={},r=E(t,["sdkHttpResponse"]);return r!=null&&_(e,["sdkHttpResponse"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lae="Content-Type",Pae="X-Server-Timeout",Qae="User-Agent",rv="x-goog-api-client",Hae="1.42.0",jae=`google-genai-sdk/${Hae}`,Vae="v1beta1",Gae="v1beta",Kae=5,zae=[408,429,500,502,503,504];class Wae{constructor(e){var r,n,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(r=e.httpOptions)===null||r===void 0?void 0:r.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const c=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!c?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Vae}else{if(!this.clientOptions.apiKey)throw new yd({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Gae,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){const i=[this.getRequestUrlInternal(r)];return n&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,r){return!(r.baseUrl&&r.baseUrlResourceScope===Yw.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e,r),i=this.constructUrl(e.path,r,n);if(e.queryParams)for(const[o,c]of Object.entries(e.queryParams))i.searchParams.append(o,String(c));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,r,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,r){const n=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(r))typeof s=="object"?n[i]=Object.assign(Object.assign({},n[i]),s):s!==void 0&&(n[i]=s);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e,r),i=this.constructUrl(e.path,r,n);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,r,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n,i){if(r&&r.timeout||i){const s=new AbortController,o=s.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const c=setTimeout(()=>s.abort(),r.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return r&&r.extraBody!==null&&qae(e,r.extraBody),e.headers=await this.getHeadersInternal(r,n),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await yI(i),new Jw(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await yI(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return lo(this,arguments,function*(){var n;const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const c="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield vr(i.read());if(d){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const C=s.decode(m,{stream:!0});try{const F=JSON.parse(C);if("error"in F){const k=JSON.parse(JSON.stringify(F.error)),U=k.status,V=k.code,K=`got status: ${U}. ${JSON.stringify(F)}`;if(V>=400&&V<600)throw new yd({message:K,status:V})}}catch(F){if(F.name==="ApiError")throw F}o+=C;let b=-1,I=0;for(;;){b=-1,I=0;for(const U of h){const V=o.indexOf(U);V!==-1&&(b===-1||V<b)&&(b=V,I=U.length)}if(b===-1)break;const F=o.substring(0,b);o=o.substring(b+I);const k=F.trim();if(k.startsWith(c)){const U=k.substring(c.length).trim();try{const V=new Response(U,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield vr(new Jw(V))}catch(V){throw new Error(`exception parsing stream chunk ${U}. ${V}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,r){var n;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,r);const i=this.clientOptions.httpOptions.retryOptions;return Mte(async()=>{const o=await fetch(e,r);if(o.ok)return o;throw zae.includes(o.status)?new Error(`Retryable HTTP Error: ${o.statusText}`):new ck.AbortError(`Non-retryable exception ${o.statusText} sending request`)},{retries:((n=i.attempts)!==null&&n!==void 0?n:Kae)-1})}getDefaultHeaders(){const e={},r=jae+" "+this.clientOptions.userAgentExtra;return e[Qae]=r,e[rv]=r,e[Lae]="application/json",e}async getHeadersInternal(e,r){const n=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))n.append(i,s);e.timeout&&e.timeout>0&&n.append(Pae,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,r),n}getFileName(e){var r;let n="";return typeof e=="string"&&(n=e.replace(/[/\\]+$/,""),n=(r=n.split(/[/\\]/).pop())!==null&&r!==void 0?r:""),n}async uploadFile(e,r){var n;const i={};r!=null&&(i.mimeType=r.mimeType,i.name=r.name,i.displayName=r.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const c=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=c;const h={file:i},d=this.getFileName(e),m=Qt("upload/v1beta/files",h._url),C=await this.fetchUploadUrl(m,i.sizeBytes,i.mimeType,d,h,r==null?void 0:r.httpOptions);return s.upload(e,C,this)}async uploadFileToFileSearchStore(e,r,n){var i;const s=this.clientOptions.uploader,o=await s.stat(r),c=String(o.size),h=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:o.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(r),C={};n!=null&&Fk(n,C);const b=await this.fetchUploadUrl(d,c,h,m,C,n==null?void 0:n.httpOptions);return s.uploadToFileSearchStore(r,b,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r,n,i,s,o){var c;let h={};o?h=o:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r}`,"X-Goog-Upload-Header-Content-Type":`${n}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:h});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(c=d==null?void 0:d.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function yI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(n);throw r>=400&&r<600?new yd({message:i,status:r}):new Error(i)}}function qae(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))r=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,o){const c=Object.assign({},s);for(const h in o)if(Object.prototype.hasOwnProperty.call(o,h)){const d=o[h],m=c[h];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?c[h]=n(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),c[h]=d)}return c}const i=n(r,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xae="mcp_used/unknown";let Yae=!1;function kk(t){for(const e of t)if(Jae(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Yae}function Dk(t){var e;const r=(e=t[rv])!==null&&e!==void 0?e:"";t[rv]=(r+` ${Xae}`).trimStart()}function Jae(t){return t!==null&&typeof t=="object"&&t instanceof Zy}function Zae(t){return lo(this,arguments,function*(r,n=100){let i,s=0;for(;s<n;){const o=yield vr(r.listTools({cursor:i}));for(const c of o.tools)yield yield vr(c),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class Zy{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new Zy(e,r)}async initialize(){var e,r,n,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const m of this.mcpClients)try{for(var c=!0,h=(r=void 0,Ao(Zae(m))),d;d=await h.next(),e=d.done,!e;c=!0){i=d.value,c=!1;const C=i;o.push(C);const b=C.name;if(s[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);s[b]=m}}catch(C){r={error:C}}finally{try{!c&&!e&&(n=h.return)&&await n.call(h)}finally{if(r)throw r.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),bre(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[n.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:n.name,arguments:n.args},void 0,s);r.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $ae(t,e,r){const n=new pre;let i;r.data instanceof Blob?i=JSON.parse(await r.data.text()):i=JSON.parse(r.data),Object.assign(n,i),e(n)}class eoe{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=noe(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const m=new Promise(Q=>{d=Q}),C=e.callbacks,b=function(){d({})},I=this.apiClient,F={onopen:b,onmessage:Q=>{$ae(I,C.onmessage,Q)},onerror:(r=C==null?void 0:C.onerror)!==null&&r!==void 0?r:function(Q){},onclose:(n=C==null?void 0:C.onclose)!==null&&n!==void 0?n:function(Q){}},k=this.webSocketFactory.create(h,roe(o),F);k.connect(),await m;const K={setup:{model:ln(this.apiClient,e.model)}};return k.send(JSON.stringify(K)),new toe(k,this.apiClient)}}class toe{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=bie(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=Eie(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(Hu.PLAY)}pause(){this.sendPlaybackControl(Hu.PAUSE)}stop(){this.sendPlaybackControl(Hu.STOP)}resetContext(){this.sendPlaybackControl(Hu.RESET_CONTEXT)}close(){this.conn.close()}}function roe(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function noe(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ioe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function soe(t,e,r){const n=new gre;let i;r.data instanceof Blob?i=await r.data.text():r.data instanceof ArrayBuffer?i=new TextDecoder().decode(r.data):i=r.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=Bie(s);Object.assign(n,o)}else Object.assign(n,s);e(n)}class aoe{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new eoe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,i,s,o,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const C=this.apiClient.getHeaders();e.config&&e.config.tools&&kk(e.config.tools)&&Dk(C);const b=coe(C);if(this.apiClient.isVertexAI()){const O=this.apiClient.getProject(),ee=this.apiClient.getLocation(),Y=this.apiClient.getApiKey(),X=!!O&&!!ee||!!Y;this.apiClient.getCustomBaseUrl()&&!X?m=h:(m=`${h}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,m))}else{const O=this.apiClient.getApiKey();let ee="BidiGenerateContent",Y="key";O!=null&&O.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ee="BidiGenerateContentConstrained",Y="access_token"),m=`${h}/ws/google.ai.generativelanguage.${d}.GenerativeService.${ee}?${Y}=${O}`}let I=()=>{};const F=new Promise(O=>{I=O}),k=e.callbacks,U=function(){var O;(O=k==null?void 0:k.onopen)===null||O===void 0||O.call(k),I({})},V=this.apiClient,K={onopen:U,onmessage:O=>{soe(V,k.onmessage,O)},onerror:(r=k==null?void 0:k.onerror)!==null&&r!==void 0?r:function(O){},onclose:(n=k==null?void 0:k.onclose)!==null&&n!==void 0?n:function(O){}},Q=this.webSocketFactory.create(m,Aoe(b),K);Q.connect(),await F;let te=ln(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&te.startsWith("publishers/")){const O=this.apiClient.getProject(),ee=this.apiClient.getLocation();O&&ee&&(te=`projects/${O}/locations/${ee}/`+te)}let re={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ep.AUDIO]}:e.config.responseModalities=[ep.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(c=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[],M=[];for(const O of z)if(this.isCallableTool(O)){const ee=O;M.push(await ee.tool())}else M.push(O);M.length>0&&(e.config.tools=M);const P={model:te,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?re=Cie(this.apiClient,P):re=yie(this.apiClient,P),delete re.config,Q.send(JSON.stringify(re)),new loe(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ooe={turnComplete:!0};class loe{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=ya(r.turns),e.isVertexAI()||(n=n.map(i=>Kd(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(ioe)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},ooe),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:Tie(e)}:r={realtimeInput:_ie(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function Aoe(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function coe(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CI=10;function EI(t){var e,r,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(Zu(o)){i=!0;break}if(!i)return!0;const s=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Zu(t){return"callTool"in t&&typeof t.callTool=="function"}function uoe(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(i=>Zu(i)))!==null&&n!==void 0?n:!1}function bI(t){var e;const r=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((n,i)=>{if(Zu(n))return;const s=n;s.functionDeclarations&&s.functionDeclarations.length>0&&r.push(i)}),r}function _I(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class foe extends Fl{constructor(e){super(),this.apiClient=e,this.embedContent=async r=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(r);if(r.model.includes("gemini")&&r.model!=="gemini-embedding-001"||r.model.includes("maas")){const i=ya(r.contents);if(i.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const s=Object.assign(Object.assign({},r),{content:i[0],embeddingApiType:tp.EMBED_CONTENT});return await this.embedContentInternal(s)}else{const i=Object.assign(Object.assign({},r),{embeddingApiType:tp.PREDICT});return await this.embedContentInternal(i)}},this.generateContent=async r=>{var n,i,s,o,c;const h=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!uoe(r)||EI(r.config))return await this.generateContentInternal(h);const d=bI(r);if(d.length>0){const k=d.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let m,C;const b=ya(h.contents),I=(s=(i=(n=h.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:CI;let F=0;for(;F<I&&(m=await this.generateContentInternal(h),!(!m.functionCalls||m.functionCalls.length===0));){const k=m.candidates[0].content,U=[];for(const V of(c=(o=r.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[])if(Zu(V)){const Q=await V.callTool(m.functionCalls);U.push(...Q)}F++,C={role:"user",parts:U},h.contents=ya(h.contents),h.contents.push(k),h.contents.push(C),_I(h.config)&&(b.push(k),b.push(C))}return _I(h.config)&&(m.automaticFunctionCallingHistory=b),m},this.generateContentStream=async r=>{var n,i,s,o,c;if(this.maybeMoveToResponseJsonSchem(r),EI(r.config)){const C=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(C)}const h=bI(r);if(h.length>0){const C=h.map(b=>`tools[${b}]`).join(", ");throw new Error(`Incompatible tools found at ${C}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(s=(i=(n=r==null?void 0:r.config)===null||n===void 0?void 0:n.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,m=(c=(o=r==null?void 0:r.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var i;let s;const o=[];if(n!=null&&n.generatedImages)for(const h of n.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((i=h==null?void 0:h.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=h==null?void 0:h.safetyAttributes:o.push(h);let c;return s?c={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:c={generatedImages:o,sdkHttpResponse:n.sdkHttpResponse},c}),this.list=async r=>{var n;const o={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((n=o.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Vc(Il.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(o),o)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const i={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(i)},this.generateVideos=async r=>{var n,i,s,o,c,h;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=r.video)===null||n===void 0)&&n.uri&&(!((i=r.video)===null||i===void 0)&&i.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((o=(s=r.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((h=(c=r.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,i;const s=(r=e.config)===null||r===void 0?void 0:r.tools;if(!s)return e;const o=await Promise.all(s.map(async h=>Zu(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(c.config.tools=o,e.config&&e.config.tools&&kk(e.config.tools)){const h=(i=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},h);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Dk(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var r,n,i;const s=new Map;for(const o of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(Zu(o)){const c=o,h=await c.tool();for(const d of(i=h.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,c)}}return s}async processAfcStream(e){var r,n,i;const s=(i=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&i!==void 0?i:CI;let o=!1,c=0;const h=await this.initAfcToolsMap(e);return(function(d,m,C){return lo(this,arguments,function*(){for(var b,I,F,k,U,V;c<s;){o&&(c++,o=!1);const re=yield vr(d.processParamsMaybeAddMcpUsage(C)),z=yield vr(d.generateContentStreamInternal(re)),M=[],P=[];try{for(var K=!0,Q=(I=void 0,Ao(z)),te;te=yield vr(Q.next()),b=te.done,!b;K=!0){k=te.value,K=!1;const O=k;if(yield yield vr(O),O.candidates&&(!((U=O.candidates[0])===null||U===void 0)&&U.content)){P.push(O.candidates[0].content);for(const ee of(V=O.candidates[0].content.parts)!==null&&V!==void 0?V:[])if(c<s&&ee.functionCall){if(!ee.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(ee.functionCall.name)){const Y=yield vr(m.get(ee.functionCall.name).callTool([ee.functionCall]));M.push(...Y)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${ee.functionCall.name}`)}}}}catch(O){I={error:O}}finally{try{!K&&!b&&(F=Q.return)&&(yield vr(F.call(Q)))}finally{if(I)throw I.error}}if(M.length>0){o=!0;const O=new df;O.candidates=[{content:{role:"user",parts:M}}],yield yield vr(O);const ee=[];ee.push(...P),ee.push({role:"user",parts:M});const Y=ya(C.contents).concat(ee);C.contents=Y}else break}})})(this,h,e)}async generateContentInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=xI(this.apiClient,e);return c=Qt("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=vI(m),b=new df;return Object.assign(b,C),b})}else{const d=mI(this.apiClient,e);return c=Qt("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=wI(m),b=new df;return Object.assign(b,C),b})}}async generateContentStreamInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=xI(this.apiClient,e);return c=Qt("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),o.then(function(C){return lo(this,arguments,function*(){var b,I,F,k;try{for(var U=!0,V=Ao(C),K;K=yield vr(V.next()),b=K.done,!b;U=!0){k=K.value,U=!1;const Q=k,te=vI(yield vr(Q.json()),e);te.sdkHttpResponse={headers:Q.headers};const re=new df;Object.assign(re,te),yield yield vr(re)}}catch(Q){I={error:Q}}finally{try{!U&&!b&&(F=V.return)&&(yield vr(F.call(V)))}finally{if(I)throw I.error}}})})}else{const d=mI(this.apiClient,e);return c=Qt("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(C){return lo(this,arguments,function*(){var b,I,F,k;try{for(var U=!0,V=Ao(C),K;K=yield vr(V.next()),b=K.done,!b;U=!0){k=K.value,U=!1;const Q=k,te=wI(yield vr(Q.json()),e);te.sdkHttpResponse={headers:Q.headers};const re=new df;Object.assign(re,te),yield yield vr(re)}}catch(Q){I={error:Q}}finally{try{!U&&!b&&(F=V.return)&&(yield vr(F.call(V)))}finally{if(I)throw I.error}}})})}}async embedContentInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=ise(this.apiClient,e,e),m=Tre(e.model)?"{model}:embedContent":"{model}:predict";return c=Qt(m,d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(C=>C.json().then(b=>{const I=b;return I.sdkHttpResponse={headers:C.headers},I})),o.then(C=>{const b=ase(C,e),I=new eI;return Object.assign(I,b),I})}else{const d=nse(this.apiClient,e);return c=Qt("{model}:batchEmbedContents",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=sse(m),b=new eI;return Object.assign(b,C),b})}}async generateImagesInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=mse(this.apiClient,e);return c=Qt("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=wse(m),b=new tI;return Object.assign(b,C),b})}else{const d=pse(this.apiClient,e);return c=Qt("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=xse(m),b=new tI;return Object.assign(b,C),b})}}async editImageInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=$ie(this.apiClient,e);return s=Qt("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const d=ese(h),m=new nre;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=mae(this.apiClient,e);return s=Qt("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const d=xae(h),m=new ire;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=Zse(this.apiClient,e);return s=Qt("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>{const d=$se(h),m=new sre;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=sae(this.apiClient,e);return s=Qt("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>{const d=aae(h),m=new are;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Mse(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>tv(m))}else{const d=Use(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>ev(m))}}async listInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Kse(this.apiClient,e);return c=Qt("{models_url}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Wse(m),b=new rI;return Object.assign(b,C),b})}else{const d=Gse(this.apiClient,e);return c=Qt("{models_url}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=zse(m),b=new rI;return Object.assign(b,C),b})}}async update(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=gae(this.apiClient,e);return c=Qt("{model}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>tv(m))}else{const d=hae(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>ev(m))}}async delete(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Xie(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Jie(m),b=new nI;return Object.assign(b,C),b})}else{const d=qie(this.apiClient,e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Yie(m),b=new nI;return Object.assign(b,C),b})}}async countTokens(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Kie(this.apiClient,e);return c=Qt("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Wie(m),b=new iI;return Object.assign(b,C),b})}else{const d=Gie(this.apiClient,e);return c=Qt("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=zie(m),b=new iI;return Object.assign(b,C),b})}}async computeTokens(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=Oie(this.apiClient,e);return s=Qt("{model}:computeTokens",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const d=Lie(h),m=new ore;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=_se(this.apiClient,e);return c=Qt("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>{const C=Ese(m),b=new rp;return Object.assign(b,C),b})}else{const d=bse(this.apiClient,e);return c=Qt("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const C=Cse(m),b=new rp;return Object.assign(b,C),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class doe extends Fl{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Jte(e);return c=Qt("{operationName}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o}else{const d=Yte(e);return c=Qt("{operationName}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o}}async fetchPredictVideosOperationInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=Vte(e);return s=Qt("{resourceName}:fetchPredictOperation",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hoe(t){const e={},r=E(t,["data"]);if(r!=null&&_(e,["data"],r),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function goe(t){const e={},r=E(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>boe(s))),_(e,["parts"],i)}const n=E(t,["role"]);return n!=null&&_(e,["role"],n),e}function poe(t,e,r){const n={},i=E(e,["expireTime"]);r!==void 0&&i!=null&&_(r,["expireTime"],i);const s=E(e,["newSessionExpireTime"]);r!==void 0&&s!=null&&_(r,["newSessionExpireTime"],s);const o=E(e,["uses"]);r!==void 0&&o!=null&&_(r,["uses"],o);const c=E(e,["liveConnectConstraints"]);r!==void 0&&c!=null&&_(r,["bidiGenerateContentSetup"],Eoe(t,c));const h=E(e,["lockAdditionalFields"]);return r!==void 0&&h!=null&&_(r,["fieldMask"],h),n}function moe(t,e){const r={},n=E(e,["config"]);return n!=null&&_(r,["config"],poe(t,n,r)),r}function xoe(t){const e={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=E(t,["fileUri"]);r!=null&&_(e,["fileUri"],r);const n=E(t,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function woe(t){const e={},r=E(t,["id"]);r!=null&&_(e,["id"],r);const n=E(t,["args"]);n!=null&&_(e,["args"],n);const i=E(t,["name"]);if(i!=null&&_(e,["name"],i),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function voe(t){const e={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=E(t,["enableWidget"]);return r!=null&&_(e,["enableWidget"],r),e}function yoe(t){const e={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=E(t,["timeRangeFilter"]);return r!=null&&_(e,["timeRangeFilter"],r),e}function Coe(t,e){const r={},n=E(t,["generationConfig"]);e!==void 0&&n!=null&&_(e,["setup","generationConfig"],n);const i=E(t,["responseModalities"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig","responseModalities"],i);const s=E(t,["temperature"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","temperature"],s);const o=E(t,["topP"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topP"],o);const c=E(t,["topK"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topK"],c);const h=E(t,["maxOutputTokens"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","maxOutputTokens"],h);const d=E(t,["mediaResolution"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","mediaResolution"],d);const m=E(t,["seed"]);e!==void 0&&m!=null&&_(e,["setup","generationConfig","seed"],m);const C=E(t,["speechConfig"]);e!==void 0&&C!=null&&_(e,["setup","generationConfig","speechConfig"],Jy(C));const b=E(t,["thinkingConfig"]);e!==void 0&&b!=null&&_(e,["setup","generationConfig","thinkingConfig"],b);const I=E(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],I);const F=E(t,["systemInstruction"]);e!==void 0&&F!=null&&_(e,["setup","systemInstruction"],goe(Li(F)));const k=E(t,["tools"]);if(e!==void 0&&k!=null){let z=v0(k);Array.isArray(z)&&(z=z.map(M=>Toe(w0(M)))),_(e,["setup","tools"],z)}const U=E(t,["sessionResumption"]);e!==void 0&&U!=null&&_(e,["setup","sessionResumption"],_oe(U));const V=E(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&_(e,["setup","inputAudioTranscription"],V);const K=E(t,["outputAudioTranscription"]);e!==void 0&&K!=null&&_(e,["setup","outputAudioTranscription"],K);const Q=E(t,["realtimeInputConfig"]);e!==void 0&&Q!=null&&_(e,["setup","realtimeInputConfig"],Q);const te=E(t,["contextWindowCompression"]);e!==void 0&&te!=null&&_(e,["setup","contextWindowCompression"],te);const re=E(t,["proactivity"]);if(e!==void 0&&re!=null&&_(e,["setup","proactivity"],re),E(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function Eoe(t,e){const r={},n=E(e,["model"]);n!=null&&_(r,["setup","model"],ln(t,n));const i=E(e,["config"]);return i!=null&&_(r,["config"],Coe(i,r)),r}function boe(t){const e={},r=E(t,["mediaResolution"]);r!=null&&_(e,["mediaResolution"],r);const n=E(t,["codeExecutionResult"]);n!=null&&_(e,["codeExecutionResult"],n);const i=E(t,["executableCode"]);i!=null&&_(e,["executableCode"],i);const s=E(t,["fileData"]);s!=null&&_(e,["fileData"],xoe(s));const o=E(t,["functionCall"]);o!=null&&_(e,["functionCall"],woe(o));const c=E(t,["functionResponse"]);c!=null&&_(e,["functionResponse"],c);const h=E(t,["inlineData"]);h!=null&&_(e,["inlineData"],hoe(h));const d=E(t,["text"]);d!=null&&_(e,["text"],d);const m=E(t,["thought"]);m!=null&&_(e,["thought"],m);const C=E(t,["thoughtSignature"]);C!=null&&_(e,["thoughtSignature"],C);const b=E(t,["videoMetadata"]);return b!=null&&_(e,["videoMetadata"],b),e}function _oe(t){const e={},r=E(t,["handle"]);if(r!=null&&_(e,["handle"],r),E(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Toe(t){const e={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=E(t,["computerUse"]);r!=null&&_(e,["computerUse"],r);const n=E(t,["fileSearch"]);n!=null&&_(e,["fileSearch"],n);const i=E(t,["codeExecution"]);if(i!=null&&_(e,["codeExecution"],i),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=E(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(C=>C)),_(e,["functionDeclarations"],m)}const o=E(t,["googleMaps"]);o!=null&&_(e,["googleMaps"],voe(o));const c=E(t,["googleSearch"]);c!=null&&_(e,["googleSearch"],yoe(c));const h=E(t,["googleSearchRetrieval"]);h!=null&&_(e,["googleSearchRetrieval"],h);const d=E(t,["urlContext"]);return d!=null&&_(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Boe(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const i=Object.keys(n).map(s=>`${r}.${s}`);e.push(...i)}else e.push(r)}return e.join(",")}function Soe(t,e){let r=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const s=n.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,r=s):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(r){const s=Boe(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];i.length>0&&(c=i.map(d=>o.includes(d)?`generationConfig.${d}`:d));const h=[];s&&h.push(s),c.length>0&&h.push(...c),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Ioe extends Fl{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=moe(this.apiClient,e);s=Qt("auth_tokens",c._url),o=c._query,delete c.config,delete c._url,delete c._query;const h=Soe(c,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Noe(t,e){const r={},n=E(t,["force"]);return e!==void 0&&n!=null&&_(e,["_query","force"],n),r}function Roe(t){const e={},r=E(t,["name"]);r!=null&&_(e,["_url","name"],r);const n=E(t,["config"]);return n!=null&&Noe(n,e),e}function Foe(t){const e={},r=E(t,["name"]);return r!=null&&_(e,["_url","name"],r),e}function koe(t,e){const r={},n=E(t,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const i=E(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),r}function Doe(t){const e={},r=E(t,["parent"]);r!=null&&_(e,["_url","parent"],r);const n=E(t,["config"]);return n!=null&&koe(n,e),e}function Uoe(t){const e={},r=E(t,["sdkHttpResponse"]);r!=null&&_(e,["sdkHttpResponse"],r);const n=E(t,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const i=E(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Moe extends Fl{constructor(e){super(),this.apiClient=e,this.list=async r=>new Vc(Il.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:r.parent,config:n.config}),await this.listInternal(r),r)}async get(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Foe(e);return s=Qt("{name}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(e){var r,n;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Roe(e);i=Qt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Doe(e);return s=Qt("{parent}/documents",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>{const d=Uoe(h),m=new lre;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ooe extends Fl{constructor(e,r=new Moe(e)){super(),this.apiClient=e,this.documents=r,this.list=async(n={})=>new Vc(Il.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(n),n)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_ae(e);return s=Qt("fileSearchStores",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async get(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Sae(e);return s=Qt("{name}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(e){var r,n;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Bae(e);i=Qt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Dae(e);return s=Qt("fileSearchStores",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>{const d=Uae(h),m=new Are;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Mae(e);return s=Qt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>{const d=Oae(h),m=new cre;return Object.assign(m,d),m})}}async importFile(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Rae(e);return s=Qt("{file_search_store_name}:importFile",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),i.then(h=>{const d=Nae(h),m=new zy;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Uk=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Uk=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))};const Loe=()=>Uk();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const iv=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class za extends Error{}class Ds extends za{constructor(e,r,n,i){super(`${Ds.makeMessage(e,r,n)}`),this.status=e,this.headers=i,this.error=r}static makeMessage(e,r,n){const i=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,r,n,i){if(!e||!i)return new Wp({message:n,cause:iv(r)});const s=r;return e===400?new Ok(e,s,n,i):e===401?new Lk(e,s,n,i):e===403?new Pk(e,s,n,i):e===404?new Qk(e,s,n,i):e===409?new Hk(e,s,n,i):e===422?new jk(e,s,n,i):e===429?new Vk(e,s,n,i):e>=500?new Gk(e,s,n,i):new Ds(e,s,n,i)}}class sv extends Ds{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Wp extends Ds{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}}class Mk extends Wp{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ok extends Ds{}class Lk extends Ds{}class Pk extends Ds{}class Qk extends Ds{}class Hk extends Ds{}class jk extends Ds{}class Vk extends Ds{}class Gk extends Ds{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Poe=/^[a-z][a-z0-9+.-]*:/i,Qoe=t=>Poe.test(t);let av=t=>(av=Array.isArray,av(t));const Hoe=av;let joe=Hoe;const TI=joe;function Voe(t){if(!t)return!0;for(const e in t)return!1;return!0}function Goe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Koe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new za(`${t} must be an integer`);if(e<0)throw new za(`${t} must be a positive integer`);return e},zoe=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Woe=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mu="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qoe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Xoe=()=>{var t,e,r,n,i;const s=qoe();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mu,"X-Stainless-OS":SI(Deno.build.os),"X-Stainless-Arch":BI(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mu,"X-Stainless-OS":SI((r=globalThis.process.platform)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Arch":BI((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=Yoe();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Yoe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const i=n[1]||0,s=n[2]||0,o=n[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const BI=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",SI=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Gg;const Joe=()=>Gg??(Gg=Xoe());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zoe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Kk(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function $oe(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Kk({start(){},async pull(r){const{done:n,value:i}=await e.next();n?r.close():r.enqueue(i)},async cancel(){var r;await((r=e.return)===null||r===void 0?void 0:r.call(e))}})}function zk(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function ele(t){var e,r;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((r=(e=t[Symbol.asyncIterator]()).return)===null||r===void 0?void 0:r.call(e));return}const n=t.getReader(),i=n.cancel();n.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tle=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wk=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,r=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function L2(t,e,r){return Wk(),new File(t,e??"unknown_file",r)}function rle(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const nle=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qk=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",ile=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&qk(t),sle=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function ale(t,e,r){if(Wk(),t=await t,ile(t))return t instanceof File?t:L2([await t.arrayBuffer()],t.name);if(sle(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),L2(await ov(i),e,r)}const n=await ov(t);if(e||(e=rle(t)),!(r!=null&&r.type)){const i=n.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(r=Object.assign(Object.assign({},r),{type:i}))}return L2(n,e,r)}async function ov(t){var e,r,n,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(qk(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(nle(t))try{for(var c=!0,h=Ao(t),d;d=await h.next(),e=d.done,!e;c=!0){i=d.value,c=!1;const m=i;o.push(...await ov(m))}}catch(m){r={error:m}}finally{try{!c&&!e&&(n=h.return)&&await n.call(h)}finally{if(r)throw r.error}}else{const m=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${m?`; constructor: ${m}`:""}${ole(t)}`)}return o}function ole(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xk{constructor(e){this._client=e}}Xk._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yk(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const II=Object.freeze(Object.create(null)),lle=(t=Yk)=>(function(r,...n){if(r.length===1)return r[0];let i=!1;const s=[],o=r.reduce((m,C,b)=>{var I,F,k;/[?#]/.test(C)&&(i=!0);const U=n[b];let V=(i?encodeURIComponent:t)(""+U);return b!==n.length&&(U==null||typeof U=="object"&&U.toString===((k=Object.getPrototypeOf((F=Object.getPrototypeOf((I=U.hasOwnProperty)!==null&&I!==void 0?I:II))!==null&&F!==void 0?F:II))===null||k===void 0?void 0:k.toString))&&(V=U+"",s.push({start:m.length+C.length,length:V.length,error:`Value of type ${Object.prototype.toString.call(U).slice(8,-1)} is not a valid path parameter`})),m+C+(b===n.length?"":V)},""),c=o.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)s.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(s.sort((m,C)=>m.start-C.start),s.length>0){let m=0;const C=s.reduce((b,I)=>{const F=" ".repeat(I.start-m),k="^".repeat(I.length);return m=I.start+I.length,b+F+k},"");throw new za(`Path parameters result in path with invalid segments:
${s.map(b=>b.error).join(`
`)}
${o}
${C}`)}return o}),Kg=lle(Yk);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jk extends Xk{create(e,r){var n;const{api_version:i=this._client.apiVersion}=e,s=ip(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new za("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new za("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Kg`/${i}/interactions`,Object.assign(Object.assign({body:s},r),{stream:(n=e.stream)!==null&&n!==void 0?n:!1}))}delete(e,r={},n){const{api_version:i=this._client.apiVersion}=r??{};return this._client.delete(Kg`/${i}/interactions/${e}`,n)}cancel(e,r={},n){const{api_version:i=this._client.apiVersion}=r??{};return this._client.post(Kg`/${i}/interactions/${e}/cancel`,n)}get(e,r={},n){var i;const s=r??{},{api_version:o=this._client.apiVersion}=s,c=ip(s,["api_version"]);return this._client.get(Kg`/${o}/interactions/${e}`,Object.assign(Object.assign({query:c},n),{stream:(i=r==null?void 0:r.stream)!==null&&i!==void 0?i:!1}))}}Jk._key=Object.freeze(["interactions"]);class Zk extends Jk{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ale(t){let e=0;for(const i of t)e+=i.length;const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}let zg;function $y(t){let e;return(zg??(e=new globalThis.TextEncoder,zg=e.encode.bind(e)))(t)}let Wg;function NI(t){let e;return(Wg??(e=new globalThis.TextDecoder,Wg=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qp{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?$y(e):e;this.buffer=Ale([this.buffer,r]);const n=[];let i;for(;(i=cle(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){n.push(NI(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=NI(this.buffer.subarray(0,s));n.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}qp.NEWLINE_CHARS=new Set([`
`,"\r"]);qp.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function cle(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function ule(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sp={off:0,error:200,warn:300,info:400,debug:500},RI=(t,e,r)=>{if(t){if(Goe(sp,t))return t;Ss(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(sp))}`)}};function kf(){}function qg(t,e,r){return!e||sp[t]>sp[r]?kf:e[t].bind(e)}const fle={error:kf,warn:kf,info:kf,debug:kf};let FI=new WeakMap;function Ss(t){var e;const r=t.logger,n=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!r)return fle;const i=FI.get(r);if(i&&i[0]===n)return i[1];const s={error:qg("error",r,n),warn:qg("warn",r,n),info:qg("info",r,n),debug:qg("debug",r,n)};return FI.set(r,[n,s]),s}const lc=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ju{constructor(e,r,n){this.iterator=e,this.controller=r,this.client=n}static fromSSEResponse(e,r,n){let i=!1;const s=n?Ss(n):console;function o(){return lo(this,arguments,function*(){var h,d,m,C;if(i)throw new za("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let b=!1;try{try{for(var I=!0,F=Ao(dle(e,r)),k;k=yield vr(F.next()),h=k.done,!h;I=!0){C=k.value,I=!1;const U=C;if(!b)if(U.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield vr(JSON.parse(U.data))}catch(V){throw s.error("Could not parse message into JSON:",U.data),s.error("From chunk:",U.raw),V}}}catch(U){d={error:U}}finally{try{!I&&!h&&(m=F.return)&&(yield vr(m.call(F)))}finally{if(d)throw d.error}}b=!0}catch(U){if(nv(U))return yield vr(void 0);throw U}finally{b||r.abort()}})}return new ju(o,r,n)}static fromReadableStream(e,r,n){let i=!1;function s(){return lo(this,arguments,function*(){var h,d,m,C;const b=new qp,I=zk(e);try{for(var F=!0,k=Ao(I),U;U=yield vr(k.next()),h=U.done,!h;F=!0){C=U.value,F=!1;const V=C;for(const K of b.decode(V))yield yield vr(K)}}catch(V){d={error:V}}finally{try{!F&&!h&&(m=k.return)&&(yield vr(m.call(k)))}finally{if(d)throw d.error}}for(const V of b.flush())yield yield vr(V)})}function o(){return lo(this,arguments,function*(){var h,d,m,C;if(i)throw new za("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let b=!1;try{try{for(var I=!0,F=Ao(s()),k;k=yield vr(F.next()),h=k.done,!h;I=!0){C=k.value,I=!1;const U=C;b||U&&(yield yield vr(JSON.parse(U)))}}catch(U){d={error:U}}finally{try{!I&&!h&&(m=F.return)&&(yield vr(m.call(F)))}finally{if(d)throw d.error}}b=!0}catch(U){if(nv(U))return yield vr(void 0);throw U}finally{b||r.abort()}})}return new ju(o,r,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=n.next();e.push(o),r.push(o)}return s.shift()}});return[new ju(()=>i(e),this.controller,this.client),new ju(()=>i(r),this.controller,this.client)]}toReadableStream(){const e=this;let r;return Kk({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{const{value:i,done:s}=await r.next();if(s)return n.close();const o=$y(JSON.stringify(i)+`
`);n.enqueue(o)}catch(i){n.error(i)}},async cancel(){var n;await((n=r.return)===null||n===void 0?void 0:n.call(r))}})}}function dle(t,e){return lo(this,arguments,function*(){var n,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new za("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new za("Attempted to iterate over a response with no body");const c=new gle,h=new qp,d=zk(t.body);try{for(var m=!0,C=Ao(hle(d)),b;b=yield vr(C.next()),n=b.done,!n;m=!0){o=b.value,m=!1;const I=o;for(const F of h.decode(I)){const k=c.decode(F);k&&(yield yield vr(k))}}}catch(I){i={error:I}}finally{try{!m&&!n&&(s=C.return)&&(yield vr(s.call(C)))}finally{if(i)throw i.error}}for(const I of h.flush()){const F=c.decode(I);F&&(yield yield vr(F))}})}function hle(t){return lo(this,arguments,function*(){var r,n,i,s;let o=new Uint8Array;try{for(var c=!0,h=Ao(t),d;d=yield vr(h.next()),r=d.done,!r;c=!0){s=d.value,c=!1;const m=s;if(m==null)continue;const C=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?$y(m):m;let b=new Uint8Array(o.length+C.length);b.set(o),b.set(C,o.length),o=b;let I;for(;(I=ule(o))!==-1;)yield yield vr(o.slice(0,I)),o=o.slice(I)}}catch(m){n={error:m}}finally{try{!c&&!r&&(i=h.return)&&(yield vr(i.call(h)))}finally{if(n)throw n.error}}o.length>0&&(yield yield vr(o))})}class gle{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=ple(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}}function ple(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mle(t,e){const{response:r,requestLogID:n,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var c;if(e.options.stream)return Ss(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):ju.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;const h=r.headers.get("content-type"),d=(c=h==null?void 0:h.split(";")[0])===null||c===void 0?void 0:c.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?r.headers.get("content-length")==="0"?void 0:await r.json():await r.text()})();return Ss(t).debug(`[${n}] response parsed`,lc({retryOfRequestLogID:i,url:r.url,status:r.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eC extends Promise{constructor(e,r,n=mle){super(i=>{i(null)}),this.responsePromise=r,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new eC(this.client,this.responsePromise,async(r,n)=>e(await this.parseResponse(r,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $k=Symbol("brand.privateNullableHeaders");function*xle(t){if(!t)return;if($k in t){const{values:n,nulls:i}=t;yield*n.entries();for(const s of i)yield[s,null];return}let e=!1,r;t instanceof Headers?r=t.entries():TI(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){const i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=TI(n[1])?n[1]:[n[1]];let o=!1;for(const c of s)c!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,c])}}const hf=t=>{const e=new Headers,r=new Set;for(const n of t){const i=new Set;for(const[s,o]of xle(n)){const c=s.toLowerCase();i.has(c)||(e.delete(s),i.add(c)),o===null?(e.delete(s),r.add(c)):(e.append(s,o),r.delete(c))}}return{[$k]:!0,values:e,nulls:r}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P2=t=>{var e,r,n,i,s,o;if(typeof globalThis.process<"u")return(n=(r=(e=Ote)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var e5;class Xp{constructor(e){var r,n,i,s,o,c,h,{baseURL:d=P2("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(r=P2("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:C="v1beta"}=e,b=ip(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:m,apiVersion:C},b),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(n=I.timeout)!==null&&n!==void 0?n:Xp.DEFAULT_TIMEOUT,this.logger=(i=I.logger)!==null&&i!==void 0?i:console;const F="warn";this.logLevel=F,this.logLevel=(o=(s=RI(I.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:RI(P2("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:F,this.fetchOptions=I.fetchOptions,this.maxRetries=(c=I.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(h=I.fetch)!==null&&h!==void 0?h:Zoe(),this.encoder=tle,this._options=I,this.apiKey=m,this.apiVersion=C,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const r=hf([e.headers]);if(!(r.values.has("authorization")||r.values.has("x-goog-api-key"))){if(this.apiKey)return hf([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return hf([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new za(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Mu}`}defaultIdempotencyKey(){return`stainless-node-retry-${Loe()}`}makeStatusError(e,r,n,i){return Ds.generate(e,r,n,i)}buildURL(e,r,n){const i=!this.baseURLOverridden()&&n||this.baseURL,s=Qoe(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Voe(o)||(r=Object.assign(Object.assign({},o),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(s.search=this.stringifyQuery(r)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const r=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${r}`}}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>Object.assign({method:e,path:r},i)))}request(e,r=null){return new eC(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){var i,s,o;const c=await e,h=(i=c.maxRetries)!==null&&i!==void 0?i:this.maxRetries;r==null&&(r=h),await this.prepareOptions(c);const{req:d,url:m,timeout:C}=await this.buildRequest(c,{retryCount:h-r});await this.prepareRequest(d,{url:m,options:c});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=n===void 0?"":`, retryOf: ${n}`,F=Date.now();if(Ss(this).debug(`[${b}] sending request`,lc({retryOfRequestLogID:n,method:c.method,url:m,options:c,headers:d.headers})),!((s=c.signal)===null||s===void 0)&&s.aborted)throw new sv;const k=new AbortController,U=await this.fetchWithTimeout(m,d,C,k).catch(iv),V=Date.now();if(U instanceof globalThis.Error){const Q=`retrying, ${r} attempts remaining`;if(!((o=c.signal)===null||o===void 0)&&o.aborted)throw new sv;const te=nv(U)||/timed? ?out/i.test(String(U)+("cause"in U?String(U.cause):""));if(r)return Ss(this).info(`[${b}] connection ${te?"timed out":"failed"} - ${Q}`),Ss(this).debug(`[${b}] connection ${te?"timed out":"failed"} (${Q})`,lc({retryOfRequestLogID:n,url:m,durationMs:V-F,message:U.message})),this.retryRequest(c,r,n??b);throw Ss(this).info(`[${b}] connection ${te?"timed out":"failed"} - error; no more retries left`),Ss(this).debug(`[${b}] connection ${te?"timed out":"failed"} (error; no more retries left)`,lc({retryOfRequestLogID:n,url:m,durationMs:V-F,message:U.message})),te?new Mk:new Wp({cause:U})}const K=`[${b}${I}] ${d.method} ${m} ${U.ok?"succeeded":"failed"} with status ${U.status} in ${V-F}ms`;if(!U.ok){const Q=await this.shouldRetry(U);if(r&&Q){const O=`retrying, ${r} attempts remaining`;return await ele(U.body),Ss(this).info(`${K} - ${O}`),Ss(this).debug(`[${b}] response error (${O})`,lc({retryOfRequestLogID:n,url:U.url,status:U.status,headers:U.headers,durationMs:V-F})),this.retryRequest(c,r,n??b,U.headers)}const te=Q?"error; no more retries left":"error; not retryable";Ss(this).info(`${K} - ${te}`);const re=await U.text().catch(O=>iv(O).message),z=zoe(re),M=z?void 0:re;throw Ss(this).debug(`[${b}] response error (${te})`,lc({retryOfRequestLogID:n,url:U.url,status:U.status,headers:U.headers,message:M,durationMs:Date.now()-F})),this.makeStatusError(U.status,z,M,U.headers)}return Ss(this).info(K),Ss(this).debug(`[${b}] response start`,lc({retryOfRequestLogID:n,url:U.url,status:U.status,headers:U.headers,durationMs:V-F})),{response:U,options:c,controller:k,requestLogID:b,retryOfRequestLogID:n,startTime:F}}async fetchWithTimeout(e,r,n,i){const s=r||{},{signal:o,method:c}=s,h=ip(s,["signal","method"]),d=this._makeAbort(i);o&&o.addEventListener("abort",d,{once:!0});const m=setTimeout(d,n),C=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,b=Object.assign(Object.assign(Object.assign({signal:i.signal},C?{duplex:"half"}:{}),{method:"GET"}),h);c&&(b.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(m)}}async shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,i){var s;let o;const c=i==null?void 0:i.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(o=d)}const h=i==null?void 0:i.get("retry-after");if(h&&!o){const d=parseFloat(h);Number.isNaN(d)?o=Date.parse(h)-Date.now():o=d*1e3}if(!(o&&0<=o&&o<60*1e3)){const d=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(r,d)}return await Woe(o),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){const s=r-e,o=Math.min(.5*Math.pow(2,s),8),c=1-Math.random()*.25;return o*c*1e3}async buildRequest(e,{retryCount:r=0}={}){var n,i,s;const o=Object.assign({},e),{method:c,path:h,query:d,defaultBaseURL:m}=o,C=this.buildURL(h,d,m);"timeout"in o&&Koe("timeout",o.timeout),o.timeout=(n=o.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:b,body:I}=this.buildBody({options:o}),F=await this.buildHeaders({options:e,method:c,bodyHeaders:b,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:F},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:C,timeout:o.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:i}){let s={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let c=hf([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Joe()),this._options.defaultHeaders,n,e.headers,o]);return this.validateHeaders(c),c.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=hf([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:$oe(e)}:typeof e=="object"&&n.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:this.encoder({body:e,headers:n})}}Xp.DEFAULT_TIMEOUT=6e4;class Qi extends Xp{constructor(){super(...arguments),this.interactions=new Zk(this)}}e5=Qi;Qi.GeminiNextGenAPIClient=e5;Qi.GeminiNextGenAPIClientError=za;Qi.APIError=Ds;Qi.APIConnectionError=Wp;Qi.APIConnectionTimeoutError=Mk;Qi.APIUserAbortError=sv;Qi.NotFoundError=Qk;Qi.ConflictError=Hk;Qi.RateLimitError=Vk;Qi.BadRequestError=Ok;Qi.AuthenticationError=Lk;Qi.InternalServerError=Gk;Qi.PermissionDeniedError=Pk;Qi.UnprocessableEntityError=jk;Qi.toFile=ale;Qi.Interactions=Zk;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wle(t,e){const r={},n=E(t,["name"]);return n!=null&&_(r,["_url","name"],n),r}function vle(t,e){const r={},n=E(t,["name"]);return n!=null&&_(r,["_url","name"],n),r}function yle(t,e){const r={},n=E(t,["sdkHttpResponse"]);return n!=null&&_(r,["sdkHttpResponse"],n),r}function Cle(t,e){const r={},n=E(t,["sdkHttpResponse"]);return n!=null&&_(r,["sdkHttpResponse"],n),r}function Ele(t,e,r){const n={};if(E(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=E(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&_(e,["displayName"],i),E(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=E(t,["epochCount"]);e!==void 0&&s!=null&&_(e,["tuningTask","hyperparameters","epochCount"],s);const o=E(t,["learningRateMultiplier"]);if(o!=null&&_(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),E(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(E(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(E(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(E(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(E(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const c=E(t,["batchSize"]);e!==void 0&&c!=null&&_(e,["tuningTask","hyperparameters","batchSize"],c);const h=E(t,["learningRate"]);if(e!==void 0&&h!=null&&_(e,["tuningTask","hyperparameters","learningRate"],h),E(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(E(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(E(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(E(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(E(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(E(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(E(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return n}function ble(t,e,r){const n={};let i=E(r,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const z=E(t,["validationDataset"]);e!==void 0&&z!=null&&_(e,["supervisedTuningSpec"],Q2(z))}else if(i==="PREFERENCE_TUNING"){const z=E(t,["validationDataset"]);e!==void 0&&z!=null&&_(e,["preferenceOptimizationSpec"],Q2(z))}else if(i==="DISTILLATION"){const z=E(t,["validationDataset"]);e!==void 0&&z!=null&&_(e,["distillationSpec"],Q2(z))}const s=E(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&_(e,["tunedModelDisplayName"],s);const o=E(t,["description"]);e!==void 0&&o!=null&&_(e,["description"],o);let c=E(r,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const z=E(t,["epochCount"]);e!==void 0&&z!=null&&_(e,["supervisedTuningSpec","hyperParameters","epochCount"],z)}else if(c==="PREFERENCE_TUNING"){const z=E(t,["epochCount"]);e!==void 0&&z!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],z)}else if(c==="DISTILLATION"){const z=E(t,["epochCount"]);e!==void 0&&z!=null&&_(e,["distillationSpec","hyperParameters","epochCount"],z)}let h=E(r,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const z=E(t,["learningRateMultiplier"]);e!==void 0&&z!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],z)}else if(h==="PREFERENCE_TUNING"){const z=E(t,["learningRateMultiplier"]);e!==void 0&&z!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],z)}else if(h==="DISTILLATION"){const z=E(t,["learningRateMultiplier"]);e!==void 0&&z!=null&&_(e,["distillationSpec","hyperParameters","learningRateMultiplier"],z)}let d=E(r,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const z=E(t,["exportLastCheckpointOnly"]);e!==void 0&&z!=null&&_(e,["supervisedTuningSpec","exportLastCheckpointOnly"],z)}else if(d==="PREFERENCE_TUNING"){const z=E(t,["exportLastCheckpointOnly"]);e!==void 0&&z!=null&&_(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],z)}else if(d==="DISTILLATION"){const z=E(t,["exportLastCheckpointOnly"]);e!==void 0&&z!=null&&_(e,["distillationSpec","exportLastCheckpointOnly"],z)}let m=E(r,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const z=E(t,["adapterSize"]);e!==void 0&&z!=null&&_(e,["supervisedTuningSpec","hyperParameters","adapterSize"],z)}else if(m==="PREFERENCE_TUNING"){const z=E(t,["adapterSize"]);e!==void 0&&z!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],z)}else if(m==="DISTILLATION"){const z=E(t,["adapterSize"]);e!==void 0&&z!=null&&_(e,["distillationSpec","hyperParameters","adapterSize"],z)}let C=E(r,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const z=E(t,["tuningMode"]);e!==void 0&&z!=null&&_(e,["supervisedTuningSpec","tuningMode"],z)}const b=E(t,["customBaseModel"]);e!==void 0&&b!=null&&_(e,["customBaseModel"],b);let I=E(r,["config","method"]);if(I===void 0&&(I="SUPERVISED_FINE_TUNING"),I==="SUPERVISED_FINE_TUNING"){const z=E(t,["batchSize"]);e!==void 0&&z!=null&&_(e,["supervisedTuningSpec","hyperParameters","batchSize"],z)}let F=E(r,["config","method"]);if(F===void 0&&(F="SUPERVISED_FINE_TUNING"),F==="SUPERVISED_FINE_TUNING"){const z=E(t,["learningRate"]);e!==void 0&&z!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRate"],z)}const k=E(t,["labels"]);e!==void 0&&k!=null&&_(e,["labels"],k);const U=E(t,["beta"]);e!==void 0&&U!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","beta"],U);const V=E(t,["baseTeacherModel"]);e!==void 0&&V!=null&&_(e,["distillationSpec","baseTeacherModel"],V);const K=E(t,["tunedTeacherModelSource"]);e!==void 0&&K!=null&&_(e,["distillationSpec","tunedTeacherModelSource"],K);const Q=E(t,["sftLossWeightMultiplier"]);e!==void 0&&Q!=null&&_(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],Q);const te=E(t,["outputUri"]);e!==void 0&&te!=null&&_(e,["outputUri"],te);const re=E(t,["encryptionSpec"]);return e!==void 0&&re!=null&&_(e,["encryptionSpec"],re),n}function _le(t,e){const r={},n=E(t,["baseModel"]);n!=null&&_(r,["baseModel"],n);const i=E(t,["preTunedModel"]);i!=null&&_(r,["preTunedModel"],i);const s=E(t,["trainingDataset"]);s!=null&&Mle(s);const o=E(t,["config"]);return o!=null&&Ele(o,r),r}function Tle(t,e){const r={},n=E(t,["baseModel"]);n!=null&&_(r,["baseModel"],n);const i=E(t,["preTunedModel"]);i!=null&&_(r,["preTunedModel"],i);const s=E(t,["trainingDataset"]);s!=null&&Ole(s,r,e);const o=E(t,["config"]);return o!=null&&ble(o,r,e),r}function Ble(t,e){const r={},n=E(t,["name"]);return n!=null&&_(r,["_url","name"],n),r}function Sle(t,e){const r={},n=E(t,["name"]);return n!=null&&_(r,["_url","name"],n),r}function Ile(t,e,r){const n={},i=E(t,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=E(t,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const o=E(t,["filter"]);return e!==void 0&&o!=null&&_(e,["_query","filter"],o),n}function Nle(t,e,r){const n={},i=E(t,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=E(t,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const o=E(t,["filter"]);return e!==void 0&&o!=null&&_(e,["_query","filter"],o),n}function Rle(t,e){const r={},n=E(t,["config"]);return n!=null&&Ile(n,r),r}function Fle(t,e){const r={},n=E(t,["config"]);return n!=null&&Nle(n,r),r}function kle(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&_(r,["nextPageToken"],i);const s=E(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>t5(c))),_(r,["tuningJobs"],o)}return r}function Dle(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&_(r,["nextPageToken"],i);const s=E(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>lv(c))),_(r,["tuningJobs"],o)}return r}function Ule(t,e){const r={},n=E(t,["name"]);n!=null&&_(r,["model"],n);const i=E(t,["name"]);return i!=null&&_(r,["endpoint"],i),r}function Mle(t,e){const r={};if(E(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(E(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=E(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),_(r,["examples","examples"],i)}return r}function Ole(t,e,r){const n={};let i=E(r,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=E(t,["gcsUri"]);e!==void 0&&o!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=E(t,["gcsUri"]);e!==void 0&&o!=null&&_(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(i==="DISTILLATION"){const o=E(t,["gcsUri"]);e!==void 0&&o!=null&&_(e,["distillationSpec","promptDatasetUri"],o)}let s=E(r,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=E(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=E(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&_(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(s==="DISTILLATION"){const o=E(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&_(e,["distillationSpec","promptDatasetUri"],o)}if(E(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function t5(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["name"]);i!=null&&_(r,["name"],i);const s=E(t,["state"]);s!=null&&_(r,["state"],mk(s));const o=E(t,["createTime"]);o!=null&&_(r,["createTime"],o);const c=E(t,["tuningTask","startTime"]);c!=null&&_(r,["startTime"],c);const h=E(t,["tuningTask","completeTime"]);h!=null&&_(r,["endTime"],h);const d=E(t,["updateTime"]);d!=null&&_(r,["updateTime"],d);const m=E(t,["description"]);m!=null&&_(r,["description"],m);const C=E(t,["baseModel"]);C!=null&&_(r,["baseModel"],C);const b=E(t,["_self"]);return b!=null&&_(r,["tunedModel"],Ule(b)),r}function lv(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["name"]);i!=null&&_(r,["name"],i);const s=E(t,["state"]);s!=null&&_(r,["state"],mk(s));const o=E(t,["createTime"]);o!=null&&_(r,["createTime"],o);const c=E(t,["startTime"]);c!=null&&_(r,["startTime"],c);const h=E(t,["endTime"]);h!=null&&_(r,["endTime"],h);const d=E(t,["updateTime"]);d!=null&&_(r,["updateTime"],d);const m=E(t,["error"]);m!=null&&_(r,["error"],m);const C=E(t,["description"]);C!=null&&_(r,["description"],C);const b=E(t,["baseModel"]);b!=null&&_(r,["baseModel"],b);const I=E(t,["tunedModel"]);I!=null&&_(r,["tunedModel"],I);const F=E(t,["preTunedModel"]);F!=null&&_(r,["preTunedModel"],F);const k=E(t,["supervisedTuningSpec"]);k!=null&&_(r,["supervisedTuningSpec"],k);const U=E(t,["preferenceOptimizationSpec"]);U!=null&&_(r,["preferenceOptimizationSpec"],U);const V=E(t,["distillationSpec"]);V!=null&&_(r,["distillationSpec"],V);const K=E(t,["tuningDataStats"]);K!=null&&_(r,["tuningDataStats"],K);const Q=E(t,["encryptionSpec"]);Q!=null&&_(r,["encryptionSpec"],Q);const te=E(t,["partnerModelTuningSpec"]);te!=null&&_(r,["partnerModelTuningSpec"],te);const re=E(t,["customBaseModel"]);re!=null&&_(r,["customBaseModel"],re);const z=E(t,["experiment"]);z!=null&&_(r,["experiment"],z);const M=E(t,["labels"]);M!=null&&_(r,["labels"],M);const P=E(t,["outputUri"]);P!=null&&_(r,["outputUri"],P);const O=E(t,["pipelineJob"]);O!=null&&_(r,["pipelineJob"],O);const ee=E(t,["serviceAccount"]);ee!=null&&_(r,["serviceAccount"],ee);const Y=E(t,["tunedModelDisplayName"]);Y!=null&&_(r,["tunedModelDisplayName"],Y);const X=E(t,["veoTuningSpec"]);return X!=null&&_(r,["veoTuningSpec"],X),r}function Lle(t,e){const r={},n=E(t,["sdkHttpResponse"]);n!=null&&_(r,["sdkHttpResponse"],n);const i=E(t,["name"]);i!=null&&_(r,["name"],i);const s=E(t,["metadata"]);s!=null&&_(r,["metadata"],s);const o=E(t,["done"]);o!=null&&_(r,["done"],o);const c=E(t,["error"]);return c!=null&&_(r,["error"],c),r}function Q2(t,e){const r={},n=E(t,["gcsUri"]);n!=null&&_(r,["validationDatasetUri"],n);const i=E(t,["vertexDatasetResource"]);return i!=null&&_(r,["validationDatasetUri"],i),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ple extends Fl{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Vc(Il.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.get=async r=>await this.getInternal(r),this.tune=async r=>{var n;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){const i={tunedModelName:r.baseModel};!((n=r.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(i.checkpointId=r.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},r),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},r);return await this.tuneInternal(i)}else{const i=Object.assign({},r),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:Xw.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Sle(e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>lv(m))}else{const d=Ble(e);return c=Qt("{name}",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>t5(m))}}async listInternal(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=Fle(e);return c=Qt("tuningJobs",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Dle(m),b=new sI;return Object.assign(b,C),b})}else{const d=Rle(e);return c=Qt("tunedModels",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=kle(m),b=new sI;return Object.assign(b,C),b})}}async cancel(e){var r,n,i,s;let o,c="",h={};if(this.apiClient.isVertexAI()){const d=vle(e);return c=Qt("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=Cle(m),b=new aI;return Object.assign(b,C),b})}else{const d=wle(e);return c=Qt("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{const b=C;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const C=yle(m),b=new aI;return Object.assign(b,C),b})}}async tuneInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=Tle(e,e);return s=Qt("tuningJobs",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>lv(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_le(e);return s=Qt("tunedModels",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>Lle(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qle{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Hle=1024*1024*8,jle=3,Vle=1e3,Gle=2,ap="x-goog-upload-status";async function Kle(t,e,r){var n;const i=await r5(t,e,r),s=await(i==null?void 0:i.json());if(((n=i==null?void 0:i.headers)===null||n===void 0?void 0:n[ap])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function zle(t,e,r){var n;const i=await r5(t,e,r),s=await(i==null?void 0:i.json());if(((n=i==null?void 0:i.headers)===null||n===void 0?void 0:n[ap])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=uk(s),c=new Wy;return Object.assign(c,o),c}async function r5(t,e,r){var n,i;let s=0,o=0,c=new Jw(new Response),h="upload";for(s=t.size;o<s;){const d=Math.min(Hle,s-o),m=t.slice(o,o+d);o+d>=s&&(h+=", finalize");let C=0,b=Vle;for(;C<jle&&(c=await r.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(o),"Content-Length":String(d)}}}),!(!((n=c==null?void 0:c.headers)===null||n===void 0)&&n[ap]));)C++,await qle(b),b=b*Gle;if(o+=d,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[ap])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function Wle(t){return{size:t.size,type:t.type}}function qle(t){return new Promise(e=>setTimeout(e,t))}class Xle{async upload(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Kle(e,r,n)}async uploadToFileSearchStore(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zle(e,r,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Wle(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yle{create(e,r,n){return new Jle(e,r,n)}}class Jle{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kI="x-goog-api-key";class Zle{constructor(e){this.apiKey=e}async addAuthHeaders(e,r){if(e.get(kI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(kI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $le="gl-node/";class eAe{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const r=this.httpOptions;r!=null&&r.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Qi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:r==null?void 0:r.timeout,maxRetries:(e=r==null?void 0:r.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=n.interactions,this._interactions}constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const n=Hte(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new Zle(this.apiKey);this.apiClient=new Wae({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:$le+"web",uploader:new Xle,downloader:new Qle}),this.models=new foe(this.apiClient),this.live=new aoe(this.apiClient,i,new Yle),this.batches=new xne(this.apiClient),this.chats=new $ne(this.models,this.apiClient),this.caches=new Yne(this.apiClient),this.files=new uie(this.apiClient),this.operations=new doe(this.apiClient),this.authTokens=new Ioe(this.apiClient),this.tunings=new Ple(this.apiClient),this.fileSearchStores=new Ooe(this.apiClient)}}const tAe=({products:t,invoices:e,currentUser:r,onAction:n,onSearchProduct:i})=>{const[s,o]=xe.useState(!1),[c,h]=xe.useState(!1),[d,m]=xe.useState(null),[C,b]=xe.useState(""),[I,F]=xe.useState(!1),[k,U]=xe.useState([]),[V,K]=xe.useState([]),[Q,te]=xe.useState(""),re=xe.useRef(null),z=G=>G.replace(/[]/g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(/\s+/g,"").trim(),M=(G,Ie)=>{const ge=z(G),de=z(Ie);if(ge===de)return 1;if(ge.includes(de)||de.includes(ge))return .85;const we=Array(de.length+1).fill(null).map(()=>Array(ge.length+1).fill(null));for(let De=0;De<=ge.length;De++)we[0][De]=De;for(let De=0;De<=de.length;De++)we[De][0]=De;for(let De=1;De<=de.length;De++)for(let ne=1;ne<=ge.length;ne++){const q=ge[ne-1]===de[De-1]?0:1;we[De][ne]=Math.min(we[De][ne-1]+1,we[De-1][ne]+1,we[De-1][ne-1]+q)}const Ge=we[de.length][ge.length],be=Math.max(ge.length,de.length);return(be-Ge)/be},P=()=>{const G=window.SpeechRecognition||window.webkitSpeechRecognition;if(!G)return null;const Ie=new G;return Ie.continuous=!1,Ie.lang="ar-MA",Ie.interimResults=!0,Ie.onstart=()=>{o(!0),m(null),b(" ..."),F(!1)},Ie.onresult=ge=>{let de="";for(let we=ge.resultIndex;we<ge.results.length;++we)de+=ge.results[we][0].transcript;b(de),ge.results[ge.results.length-1].isFinal&&(o(!1),Ie.stop(),ee(de))},Ie.onerror=()=>o(!1),Ie.onend=()=>o(!1),Ie};xe.useEffect(()=>{re.current=P()},[t,e]);const O=()=>{var G,Ie;if(s)(G=re.current)==null||G.stop();else{m(null),b("");try{(Ie=re.current)==null||Ie.start(),navigator.vibrate&&navigator.vibrate(50)}catch{o(!1)}}},ee=async G=>{if(!(!G||G===" ...")){h(!0);try{const Ie=new eAe({apiKey:"PLACEHOLDER_API_KEY"}),ge=`
            "MAMA APP". 
           .   : "${G}"
        
        :
        1.   (SEARCH_PRODUCT, SEARCH_CUSTOMER, NAVIGATE).
        2.  " "   (:   "  "  " ").
        
          JSON :
        {
          "intent": "SEARCH_PRODUCT",
          "target": " ",
          "feedback": "  "
        }
      `,de=await Ie.models.generateContent({model:"gemini-3-flash-preview",contents:ge}),we=JSON.parse(de.text.replace(/```json|```/g,"").trim());Y(we,G)}catch{h(!1),m("   .  .")}finally{h(!1)}}},Y=(G,Ie)=>{const{intent:ge,target:de,feedback:we}=G;if(ge==="SEARCH_PRODUCT"){const be=t.map(De=>({product:De,score:Math.max(M(de,De.name),M(de,De.code))})).filter(De=>De.score>.4).sort((De,ne)=>ne.score-De.score).slice(0,10).map(De=>De.product);be.length>0?(U(be),K([]),te(`  : ${de}`),F(!0),b(""),m(null)):m(`     "${de}"  .`)}else if(ge==="SEARCH_CUSTOMER"){const Ge=de.toLowerCase(),be=e.filter(De=>De.name.toLowerCase().includes(Ge)).slice(0,5);be.length>0?(U([]),K(be),te(` : ${de}`),F(!0),b(""),m(null)):m(`    "${de}".`)}else if(ge==="NAVIGATE"){m(we||"   .");const Ge={:"products",:"products",:"customers",:"create-invoice",:"settings"};let be="dashboard";for(const De in Ge)Ie.includes(De)&&(be=Ge[De]);setTimeout(()=>{n("NAVIGATE",be),b(""),m(null)},1e3)}navigator.vibrate&&navigator.vibrate(30)},X=G=>new Intl.NumberFormat("ar-MA",{style:"decimal",minimumFractionDigits:2}).format(G);return u.jsxs(u.Fragment,{children:[I&&u.jsx("div",{className:"fixed inset-0 z-[300] bg-black/80 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-lg bg-[#161616] rounded-[2.5rem] border border-gray-800 shadow-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[u.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-[#1a1a1a]",children:[u.jsx("button",{onClick:()=>F(!1),className:"p-2 bg-gray-800 rounded-xl text-gray-400 hover:text-white active:scale-90 transition-all",children:u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:u.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}),u.jsx("h2",{className:"text-lg font-black text-white",children:Q})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar",children:[k.length>0&&u.jsxs("div",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest px-2 flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-[#57b385] rounded-full"}),"  "]}),u.jsx("div",{className:"space-y-2",children:k.map((G,Ie)=>u.jsxs("div",{onClick:()=>{i(G.name),F(!1)},className:`bg-[#111111] p-4 rounded-2xl border ${Ie===0?"border-[#57b385]/40":"border-gray-800"} flex items-center justify-between hover:border-[#57b385]/50 transition-all cursor-pointer active:scale-95 shadow-lg`,children:[u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-[#57b385] font-black",children:X(G.price)}),u.jsxs("div",{className:`text-[9px] font-bold ${G.stock>0?"text-gray-500":"text-red-500"}`,children:[G.stock,"  "]})]}),u.jsxs("div",{className:"text-right flex items-center gap-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-white font-bold text-sm",children:G.name}),u.jsxs("div",{className:"text-[9px] text-gray-600 font-mono",children:["#",G.code]})]}),Ie===0&&u.jsx("span",{className:"text-[8px] bg-[#57b385]/10 text-[#57b385] px-2 py-0.5 rounded-full border border-[#57b385]/20 font-black",children:" "})]})]},G.id))})]}),V.length>0&&u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest px-2",children:" "}),u.jsx("div",{className:"space-y-2",children:V.map(G=>u.jsxs("div",{onClick:()=>{n("OPEN_INVOICE",G.id),F(!1)},className:"bg-[#111111] p-4 rounded-2xl border border-gray-800 flex items-center justify-between hover:border-blue-500/50 transition-all cursor-pointer active:scale-95",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-white font-black",children:X(G.remainingAmount||G.amount)}),u.jsx("div",{className:"text-[9px] text-gray-500",children:G.date})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-white font-bold",children:G.name}),u.jsx("div",{className:"text-[9px] text-blue-500 font-bold uppercase",children:G.remainingAmount>0?"":""})]})]},G.id))})]})]}),u.jsx("div",{className:"p-4 bg-[#1a1a1a] border-t border-gray-800",children:u.jsx("button",{onClick:()=>F(!1),className:"w-full py-4 bg-[#111111] border border-gray-800 rounded-2xl text-gray-400 font-black text-sm active:scale-95 transition-all",children:" "})})]})}),u.jsxs("div",{className:"fixed bottom-24 right-6 z-[200] flex flex-col items-end gap-3 pointer-events-none",children:[(C&&C!==" ..."||d||c)&&!I&&u.jsxs("div",{className:"pointer-events-auto bg-[#1a1a1a]/95 backdrop-blur-xl border border-gray-800 p-5 rounded-[2.2rem] rounded-br-none shadow-2xl max-w-[280px] animate-in fade-in slide-in-from-right-4 duration-300",children:[C&&!d&&!c&&u.jsxs("p",{className:"text-[10px] font-medium text-gray-500 italic mb-1",children:[': "',C,'"']}),c?u.jsxs("div",{className:"flex flex-col items-center gap-2 py-2",children:[u.jsxs("div",{className:"flex gap-1.5",children:[u.jsx("div",{className:"w-2 h-2 bg-[#57b385] rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-[#57b385] rounded-full animate-bounce delay-75"}),u.jsx("div",{className:"w-2 h-2 bg-[#57b385] rounded-full animate-bounce delay-150"})]}),u.jsx("span",{className:"text-[9px] text-gray-500 font-bold",children:"  ..."})]}):d&&u.jsxs("div",{className:"animate-in fade-in zoom-in duration-300",children:[u.jsx("p",{className:"text-sm font-black text-white leading-relaxed",children:d}),u.jsx("div",{className:"w-full h-1 bg-gray-800 rounded-full mt-3 overflow-hidden",children:u.jsx("div",{className:"h-full bg-[#57b385] animate-[progress_1.5s_linear]"})})]})]}),u.jsx("button",{onClick:O,className:`pointer-events-auto w-16 h-16 rounded-full flex items-center justify-center shadow-2xl transition-all duration-300 border-4 border-[#0c0c0c] active:scale-90 ${s?"bg-red-500 animate-pulse shadow-red-900/40":"bg-[#57b385] hover:bg-[#4da076] shadow-green-900/20"}`,children:s?u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",children:u.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}):u.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",children:[u.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),u.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),u.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"})]})})]}),u.jsx("style",{children:" @keyframes progress { from { width: 0%; } to { width: 100%; } } "})]})},rAe=4320*60*60*1e3,Xg={userName:" ",signatureName:"Thank you for your visit",businessName:"Droguerie Taliouine",businessLogo:null,receiptSize:"80mm",showBarcode:!0,stockThreshold:10,backupTime:"00:00",lastBackupDate:null,autoBackupEnabled:!0,loginEmail:"fouad1@gmail.com",loginPassword:"10203040",specialOrderLabel:" ",lastTrashCleanup:Date.now()},nAe=()=>{const[t,e]=xe.useState(null),[r,n]=xe.useState([]),[i,s]=xe.useState(""),[o,c]=xe.useState(""),[h,d]=xe.useState("retail"),[m,C]=xe.useState(!1),[b,I]=xe.useState(null),[F,k]=xe.useState(null),[U,V]=xe.useState(Xg),[K,Q]=xe.useState([]),[te,re]=xe.useState([]),[z,M]=xe.useState([]),[P,O]=xe.useState([]),[ee,Y]=xe.useState([]),[X,G]=xe.useState([]),[Ie,ge]=xe.useState([]),[de,we]=xe.useState([]),[Ge,be]=xe.useState([]),[De,ne]=xe.useState([]),[q,ce]=xe.useState([]),[oe,ae]=xe.useState(!0),[Ee,Ke]=xe.useState(!1),[Fe,He]=xe.useState("");xe.useEffect(()=>{let Be=()=>{};const ut=U9(pc,at=>{at?Be=da(Jt(Pt,"staff",at.uid),lt=>{var lr;if(lt.exists()){const $r=lt.data(),Sn=((lr=at.email)==null?void 0:lr.toLowerCase())===Xg.loginEmail.toLowerCase(),kn=Sn?"approved":$r.status;k({uid:at.uid,role:$r.permissions.isManager||Sn?"admin":"staff",name:$r.name,phone:$r.phone,permissions:$r.permissions,status:kn}),e(kn==="approved"?di=>di==="pending-approval"||di==="login"||di===null?"dashboard":di:"pending-approval"),ae(!1)}else setTimeout(async()=>{(await uL(Jt(Pt,"staff",at.uid))).exists()||(IT(pc),k(null),e("login"),ae(!1))},1500)}):(Be&&Be(),k(null),e(lt=>lt==="signup"?"signup":"login"),ae(!1))});return()=>{ut(),Be&&Be()}},[]),xe.useEffect(()=>{const Be=Jt(Pt,"settings","global"),ut=da(Be,async at=>{if(at.exists()){const lt=at.data();V(lr=>({...Xg,...lt})),Ke(!0)}else await Ur(Be,Xg),Ke(!0)});return()=>ut()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"staff"),ut=>{const at=ut.docs.map(lt=>({...lt.data(),id:lt.id}));Q(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"invoices"),ut=>{const at=ut.docs.map(lt=>({...lt.data(),items:lt.data().items||[],payments:lt.data().payments||[]}));at.sort((lt,lr)=>lr.createdAt-lt.createdAt),re(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"supplier_invoices"),ut=>{const at=ut.docs.map(lt=>lt.data());at.sort((lt,lr)=>lr.createdAt-lt.createdAt),M(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"client_requests"),ut=>{const at=ut.docs.map(lt=>lt.data());at.sort((lt,lr)=>lr.createdAt-lt.createdAt),O(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"checks"),ut=>{const at=ut.docs.map(lt=>lt.data());at.sort((lt,lr)=>lr.createdAt-lt.createdAt),Y(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"special_orders"),ut=>{const at=ut.docs.map(lt=>{const lr=lt.data();return!lr.items&&lr.productName&&(lr.items=[{id:"legacy-1",name:lr.productName,quantity:lr.quantity||1}]),lr});at.sort((lt,lr)=>lr.createdAt-lt.createdAt),G(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"quotes"),ut=>{const at=ut.docs.map(lt=>lt.data());at.sort((lt,lr)=>lr.createdAt-lt.createdAt),ge(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"trash"),ut=>{const at=ut.docs.map(lt=>lt.data());at.sort((lt,lr)=>lr.deletedAt-lt.deletedAt),ce(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"notifications"),ut=>{const at=ut.docs.map(lt=>lt.data());at.sort((lt,lr)=>lr.timestamp-lt.timestamp),we(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"general_payments"),ut=>{const at=ut.docs.map(lt=>lt.data());at.sort((lt,lr)=>lr.timestamp-lt.timestamp),be(at)});return()=>Be()},[]),xe.useEffect(()=>{const Be=da(Ts(Pt,"products"),ut=>{const at=ut.docs.map(lt=>lt.data());ne(at)});return()=>Be()},[]);const tt=async Be=>{Ee&&V(ut=>{const at=typeof Be=="function"?Be(ut):Be;return Fu(Jt(Pt,"settings","global"),JSON.parse(JSON.stringify(at))).catch(lt=>{Ur(Jt(Pt,"settings","global"),JSON.parse(JSON.stringify(at))).catch(console.error)}),at})},Tt=async Be=>await Ur(Jt(Pt,"staff",Be.id),JSON.parse(JSON.stringify(Be))),ve=async Be=>await Ur(Jt(Pt,"staff",Be.id),JSON.parse(JSON.stringify(Be))),Oe=async Be=>{const ut=K.find(at=>at.id===Be);if(ut){const at={id:`trash-staff-${Date.now()}`,type:"staff",data:ut,deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at)))}await ga(Jt(Pt,"staff",Be))},st=async Be=>await Ur(Jt(Pt,"products",Be.id),JSON.parse(JSON.stringify(Be))),Bt=async Be=>await Ur(Jt(Pt,"products",Be.id),JSON.parse(JSON.stringify(Be))),kt=async Be=>{const ut=De.find(at=>at.id===Be);if(ut){const at={id:`trash-p-${Date.now()}`,type:"product",data:ut,deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at))),await ga(Jt(Pt,"products",Be))}},ft=async Be=>await Ur(Jt(Pt,"supplier_invoices",Be.id),JSON.parse(JSON.stringify(Be))),Ot=async Be=>await Fu(Jt(Pt,"supplier_invoices",Be.id),JSON.parse(JSON.stringify(Be))),jt=async Be=>{const ut=z.find(at=>at.id===Be);if(ut){const at={id:`trash-si-${Date.now()}`,type:"supplier-invoice",data:ut,deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at))),await ga(Jt(Pt,"supplier_invoices",Be))}},mt=async Be=>{const ut=ig(Pt);(await ng(tg(Ts(Pt,"supplier_invoices"),rg("supplierName","==",Be)))).forEach(lt=>ut.delete(lt.ref)),await ut.commit()},At=async(Be,ut)=>{const at=ig(Pt);(await ng(tg(Ts(Pt,"supplier_invoices"),rg("supplierName","==",Be)))).forEach(lr=>at.update(lr.ref,{supplierName:ut})),await at.commit()},er=async Be=>await Ur(Jt(Pt,"client_requests",Be.id),JSON.parse(JSON.stringify(Be))),Nr=async Be=>await Ur(Jt(Pt,"client_requests",Be.id),JSON.parse(JSON.stringify(Be))),Ue=async Be=>{const ut=P.find(at=>at.id===Be);if(ut){const at={id:`trash-cr-${Date.now()}`,type:"client-request",data:ut,deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at))),await ga(Jt(Pt,"client_requests",Be))}},It=async Be=>await Ur(Jt(Pt,"checks",Be.id),JSON.parse(JSON.stringify(Be))),Lt=async Be=>await Ur(Jt(Pt,"checks",Be.id),JSON.parse(JSON.stringify(Be))),Zt=async Be=>{const ut=ee.find(at=>at.id===Be);if(ut){const at={id:`trash-ch-${Date.now()}`,type:"check",data:ut,deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at))),await ga(Jt(Pt,"checks",Be))}},cr=async Be=>await Ur(Jt(Pt,"special_orders",Be.id),JSON.parse(JSON.stringify(Be))),hr=async Be=>await Ur(Jt(Pt,"special_orders",Be.id),JSON.parse(JSON.stringify(Be))),Ht=async Be=>{const ut=X.find(at=>at.id===Be);if(ut){const at={id:`trash-so-${Date.now()}`,type:"special-order",data:ut,deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at))),await ga(Jt(Pt,"special_orders",Be))}},mr=async Be=>await Ur(Jt(Pt,"quotes",Be.id),JSON.parse(JSON.stringify(Be))),pt=async Be=>await Ur(Jt(Pt,"quotes",Be.id),JSON.parse(JSON.stringify(Be))),yt=async Be=>{const ut=Ie.find(at=>at.id===Be);if(ut){const at={id:`trash-qt-${Date.now()}`,type:"quote",data:ut,deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at))),await ga(Jt(Pt,"quotes",Be))}},_e=async Be=>await Ur(Jt(Pt,"general_payments",Be.id),JSON.parse(JSON.stringify(Be))),Nt=async Be=>{const ut=Ge.find(at=>at.id===Be);if(ut){const at={id:`trash-gp-${Date.now()}`,type:"general-payment",data:ut,deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at))),await ga(Jt(Pt,"general_payments",Be))}},Re=async Be=>{const ut=te.find(at=>at.id===Be);if(ut){const at={id:`trash-inv-${Date.now()}`,type:"invoice",data:ut,deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at))),await ga(Jt(Pt,"invoices",Be)),await ga(Jt(Pt,"notifications",`debt-${Be}`))}},Dt=async Be=>{const ut=te.filter(Sn=>Sn.name===Be).length,at={id:`trash-cust-${Date.now()}`,type:"customer",data:{name:Be,invoiceCount:ut},deletedAt:Date.now(),deletedBy:(F==null?void 0:F.name)||""};await Ur(Jt(Pt,"trash",at.id),JSON.parse(JSON.stringify(at)));const lt=ig(Pt);(await ng(tg(Ts(Pt,"invoices"),rg("name","==",Be)))).forEach(Sn=>{lt.delete(Sn.ref),lt.delete(Jt(Pt,"notifications",`debt-${Sn.id}`))}),(await ng(tg(Ts(Pt,"general_payments"),rg("customerName","==",Be)))).forEach(Sn=>lt.delete(Sn.ref)),await lt.commit()},rr=async()=>{await IT(pc),e("login"),k(null),et()},et=()=>{n([]),I(null),s(""),c(""),d("retail"),C(!1),He("")},Rt=Be=>{F!=null&&F.permissions.createInvoices&&(I(Be),n(Be.items),s(Be.name),c(Be.phone||""),d(Be.priceMode||"retail"),e("create-invoice"))},Mt=(Be,ut)=>{F!=null&&F.permissions.createInvoices&&(et(),s(Be),c(ut||""),e("create-invoice"))},kr=async Be=>{await Ur(Jt(Pt,"invoices",Be.id),JSON.parse(JSON.stringify(Be)));for(const ut of Be.items)if(!ut.isManual){const at=De.find(lt=>lt.id===ut.id);if(at){let lt=ut.count;if(b){const lr=b.items.find($r=>$r.id===ut.id);lr&&(lt=ut.count-lr.count)}lt!==0&&await Fu(Jt(Pt,"products",ut.id),{stock:Math.max(0,at.stock-lt)})}}et(),e("dashboard")},Tr=async Be=>{try{Be.type==="product"?await Ur(Jt(Pt,"products",Be.data.id),Be.data):Be.type==="invoice"?await Ur(Jt(Pt,"invoices",Be.data.id),Be.data):Be.type==="quote"?await Ur(Jt(Pt,"quotes",Be.data.id),Be.data):Be.type==="client-request"?await Ur(Jt(Pt,"client_requests",Be.data.id),Be.data):Be.type==="special-order"?await Ur(Jt(Pt,"special_orders",Be.data.id),Be.data):Be.type==="supplier-invoice"?await Ur(Jt(Pt,"supplier_invoices",Be.data.id),Be.data):Be.type==="check"?await Ur(Jt(Pt,"checks",Be.data.id),Be.data):Be.type==="general-payment"?await Ur(Jt(Pt,"general_payments",Be.data.id),Be.data):Be.type==="staff"&&await Ur(Jt(Pt,"staff",Be.data.id),Be.data),await ga(Jt(Pt,"trash",Be.id)),navigator.vibrate&&navigator.vibrate(50)}catch(ut){console.error(ut)}},qr=xe.useMemo(()=>F?F.role==="admin"||F.permissions.isManager||F.permissions.viewAllWork?te:te.filter(Be=>Be.creatorName===F.name):[],[te,F]),Vr=xe.useMemo(()=>K.filter(Be=>Be.status==="pending").length,[K]),Us=(Be,ut)=>{if(Be==="OPEN_INVOICE"&&ut){const at=te.find(lt=>lt.id===ut);at&&Rt(at)}else Be==="NAVIGATE"?["dashboard","products","customers","settings","create-invoice","suppliers","recycle-bin","quotes","translation"].includes(ut)&&e(ut):Be==="SEARCH"&&e("products")};return oe?u.jsxs("div",{className:"min-h-screen bg-[#0c0c0c] flex flex-col items-center justify-center text-white font-['Tajawal'] relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-radial-gradient opacity-20 pointer-events-none"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-8 animate-in fade-in duration-1000",children:[u.jsxs("div",{className:"w-24 h-24 bg-white/5 rounded-[2.5rem] border border-white/10 flex items-center justify-center shadow-2xl relative",children:[u.jsx("div",{className:"absolute inset-0 rounded-[2.5rem] border-4 border-[#57b385]/20 animate-ping"}),u.jsx("h1",{className:"text-4xl font-black text-[#57b385] tracking-tighter",children:"M"})]}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("h2",{className:"text-2xl font-black tracking-widest uppercase",children:"MAMA APP"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-[#57b385] rounded-full animate-bounce delay-75"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-[#57b385] rounded-full animate-bounce delay-150"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-[#57b385] rounded-full animate-bounce delay-300"})]})]}),u.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-[0.3em] mt-10",children:"Smart Business Management"})]})]}):u.jsxs("div",{className:"min-h-screen w-full flex flex-col bg-black font-['Tajawal'] relative overflow-x-hidden text-white",children:[t==="login"&&u.jsx(q7,{onNavigateToSignUp:()=>e("signup")}),t==="signup"&&u.jsx(X7,{onNavigateToLogin:()=>e("login"),adminEmail:U.loginEmail}),t==="pending-approval"&&u.jsxs("div",{className:"min-h-screen bg-[#0c0c0c] flex flex-col items-center justify-center p-6 text-center animate-in fade-in duration-700",children:[u.jsxs("div",{className:"w-24 h-24 bg-orange-500/10 rounded-[2.5rem] border border-orange-500/20 flex items-center justify-center text-orange-500 mb-8 shadow-2xl relative",children:[u.jsx("div",{className:"absolute inset-0 rounded-[2.5rem] border-2 border-orange-500/10 animate-pulse"}),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"}),u.jsx("path",{d:"m9 12 2 2 4-4"})]})]}),u.jsx("h2",{className:"text-3xl font-black mb-4",children:"  "}),u.jsxs("p",{className:"text-gray-400 max-w-xs leading-relaxed mb-10",children:[" ",u.jsx("span",{className:"text-white font-bold",children:F==null?void 0:F.name}),"    .          ."]}),u.jsx("button",{onClick:rr,className:"px-10 py-4 bg-[#1a1a1a] rounded-2xl text-gray-400 font-bold border border-gray-800 active:scale-95 transition-all",children:" "})]}),t==="dashboard"&&F&&u.jsx(vK,{currentUser:F,onLogout:rr,invoices:qr,settings:U,products:De,onNavigateToProducts:()=>{He(""),e("products")},onNavigateToCreateInvoice:()=>{b||et(),e("create-invoice")},onNavigateToSettings:()=>e("settings"),onNavigateToCustomers:()=>e("customers"),onNavigateToNotifications:()=>e("notifications"),onNavigateToSuppliers:()=>e("suppliers"),onNavigateToClientRequests:()=>e("client-requests"),onNavigateToCheckbook:()=>e("checkbook"),onNavigateToSpecialOrders:()=>e("special-orders"),onNavigateToQuotes:()=>e("quotes"),onNavigateToTranslation:()=>e("translation"),onEditInvoice:Rt,onDeleteInvoice:Re,onNewInvoiceForCustomer:Mt,unreadNotificationsCount:de.filter(Be=>!Be.isRead).length,pendingStaffCount:Vr}),t==="products"&&F&&u.jsx(Zee,{currentUser:F,products:De,onAddProduct:st,onUpdateProduct:Bt,onDeleteProduct:kt,onLogout:rr,onNavigateToHome:()=>{He(""),e("dashboard")},onNavigateToCreateInvoice:()=>e("create-invoice"),onNavigateToCustomers:()=>e("customers"),onNavigateToSettings:()=>e("settings"),isSelectionMode:m,onSelectProduct:(Be,ut)=>n(at=>at.find(lr=>lr.id===Be.id)?at.filter(lr=>lr.id!==Be.id):[...at,{...Be,productName:Be.name,count:ut,total:Be.price*ut}]),onStartInvoiceWithProduct:(Be,ut)=>{et(),n([{...Be,productName:Be.name,count:ut,total:Be.price*ut}]),e("create-invoice")},selectedItems:r,settings:U,invoicePriceMode:h,initialSearchTerm:Fe}),t==="create-invoice"&&F&&u.jsx(nte,{currentUser:F,onNavigateToHome:()=>{et(),e("dashboard")},onNavigateToProductSelection:()=>{C(!0),e("products")},items:r,setInvoiceItems:n,products:De,onUpdateQuantity:(Be,ut)=>n(at=>at.map(lt=>lt.id===Be?{...lt,count:Math.max(0,lt.count+ut),total:Math.max(0,lt.count+ut)*lt.price}:lt).filter(lt=>lt.count>0)),onClearInvoice:et,onAddManualItem:(Be,ut,at)=>n(lt=>[...lt,{id:`man-${Date.now()}`,productName:Be,price:ut,count:at,total:ut*at,isManual:!0}]),onSaveInvoice:kr,initialInvoice:b,settings:U,onUpdateItem:(Be,ut)=>n(at=>at.map(lt=>lt.id===Be?{...lt,...ut,total:(ut.price||lt.price)*(ut.count||lt.count)}:lt)),customerName:i,setCustomerName:s,customerPhone:o,setCustomerPhone:c,priceMode:h,setPriceMode:d}),t==="quotes"&&F&&u.jsx(Ste,{currentUser:F,onNavigateToHome:()=>e("dashboard"),quotes:Ie,onAddQuote:mr,onUpdateQuote:pt,onDeleteQuote:yt,settings:U,products:De}),t==="translation"&&F&&u.jsx(Nte,{onNavigateToHome:()=>e("dashboard")}),t==="settings"&&F&&u.jsx(ite,{currentUser:F,onNavigateToHome:()=>e("dashboard"),settings:U,onUpdateSettings:tt,onTriggerManualBackup:()=>{},invoices:te,onEditInvoice:Rt,onNavigateToProducts:()=>e("products"),onNavigateToCustomers:()=>e("customers"),onNavigateToCreateInvoice:()=>e("create-invoice"),onLogout:rr,onNavigateToRecycleBin:()=>e("recycle-bin"),staffList:K,onAddStaff:Tt,onUpdateStaff:ve,onDeleteStaff:Oe}),t==="customers"&&F&&u.jsx(hte,{currentUser:F,onNavigateToHome:()=>e("dashboard"),onNavigateToProducts:()=>e("products"),onNavigateToSettings:()=>e("settings"),onNavigateToCreateInvoice:()=>e("create-invoice"),invoices:qr,generalPayments:Ge,onAddGeneralPayment:_e,onDeleteGeneralPayment:Nt,onDeleteCustomer:Dt,onProcessPayment:async(Be,ut,at)=>{const lt=te.find(lr=>lr.id===Be);if(lt){const lr=lt.paidAmount+ut,$r=Math.max(0,lt.amount-lr),Sn={...lt,paidAmount:lr,remainingAmount:$r,type:$r<=0?"paid":"partial",payments:[...lt.payments,{id:`pay-${Date.now()}`,amount:ut,timestamp:Date.now(),method:at}]};await Ur(Jt(Pt,"invoices",Be),JSON.parse(JSON.stringify(Sn)))}},onEditInvoice:Rt,settings:U}),t==="recycle-bin"&&F&&u.jsx(Rte,{currentUser:F,onNavigateToSettings:()=>e("settings"),trashItems:q,onRestore:Tr,onPermanentDelete:async Be=>await ga(Jt(Pt,"trash",Be)),onEmptyTrash:async()=>{const Be=ig(Pt);q.forEach(ut=>Be.delete(Jt(Pt,"trash",ut.id))),await Be.commit()},nextCleanupDate:U.lastTrashCleanup?U.lastTrashCleanup+rAe:void 0}),F&&t==="dashboard"&&u.jsx(tAe,{products:De,invoices:te,currentUser:F,onAction:Us,onSearchProduct:Be=>{He(Be),e("products")}}),t==="notifications"&&F&&u.jsx(wte,{onNavigateToHome:()=>e("dashboard"),notifications:de,onMarkAllAsRead:()=>de.forEach(Be=>Fu(Jt(Pt,"notifications",Be.id),{isRead:!0})),onClearAll:()=>{},onMarkAsRead:Be=>Fu(Jt(Pt,"notifications",Be),{isRead:!0})}),t==="suppliers"&&F&&u.jsx(bte,{currentUser:F,onNavigateToHome:()=>e("dashboard"),onAddInvoice:ft,onUpdateInvoice:Ot,onDeleteInvoice:jt,onDeleteSupplier:mt,onRenameSupplier:At,invoices:z,settings:U}),t==="client-requests"&&F&&u.jsx(_te,{onNavigateToHome:()=>e("dashboard"),requests:P,onAddRequest:er,onUpdateRequest:Nr,onDeleteRequest:Ue,settings:U}),t==="checkbook"&&F&&u.jsx(Tte,{onNavigateToHome:()=>e("dashboard"),checks:ee,onAddCheck:It,onUpdateCheck:Lt,onDeleteCheck:Zt,settings:U}),t==="special-orders"&&F&&u.jsx(Bte,{onNavigateToHome:()=>e("dashboard"),orders:X,onAddOrder:cr,onUpdateOrder:hr,onDeleteOrder:Ht,settings:U})]})},n5=document.getElementById("root");if(!n5)throw new Error("Could not find root element to mount to");const iAe=k6.createRoot(n5);iAe.render(u.jsx(_6.StrictMode,{children:u.jsx(nAe,{})}));
